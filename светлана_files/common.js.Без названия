!function(gt){var mt,t,e,n,a,i,o,r,s,l,c,u,d,h,p,f,g,m,v,y,b,C,S,k,_,w,T,I,E,A,x,P,O,R,N,B,D,M,j,F,q,H,U,V,Q,W,z,X,G,J,Y,K,Z,$,tt,et,nt,at,it,ot,rt,st,lt,ct,ut,dt,ht,pt,ft,vt,yt,bt,Ct,St,kt,_t,wt,Tt,It,Et,At,xt,Pt,Ot,Lt,Rt,Nt,Bt,Dt,Mt,jt,Ft,qt,Ht,Ut,Vt,Qt,Wt,zt,Xt,Gt,Jt,Yt,Kt,Zt,$t,te,ee,ne,ae,ie,oe,re,se,le,ce,ue,de,he,pe,fe,ge,me,ve,ye,be,Ce,Se,ke,_e,we,Te,Ie,Ee,Ae,xe,Pe,Oe,Le,Re,Ne,Be,De,Me,je,Fe,qe,He,Ue,Ve,Qe,We,ze,Xe,Ge,Je,Ye,Ke,Ze,$e,tn,en,nn,an,on,rn,sn,ln,cn,un,dn,hn,pn,fn,gn,mn,vn,yn,bn,Cn,Sn,kn,_n,wn,Tn,In,En,An,xn,Pn,On,Ln,Rn,Nn,Bn,Dn,Mn,jn,Fn,qn,Hn,Un,Vn,Qn,Wn,zn,Xn,Gn,Jn,Yn,Kn,Zn,$n,ta,ea,na,aa,ia,oa,ra,sa,la,ca,ua,da,ha,pa,fa,ga,ma,va,ya,ba,Ca,Sa,ka,_a,wa,Ta,Ia,Ea,Aa,xa,Pa,Oa,La,Ra,Na,Ba,Da,Ma,ja,Fa,qa,Ha,Ua,Va,Qa,Wa,za,Xa,Ga,Ja,Ya,Ka,Za,$a,ti,ei,ni,ai,ii,oi,ri,si,li,ci,ui,di,hi,pi,fi,gi,mi,vi,yi,bi,Ci,Si,ki,_i,wi,Ti,Ii,Ei,Ai,xi,Pi,Oi,Li,Ri,Ni,Bi,Di,Mi,ji,Fi,qi,Hi,Ui,Vi,Qi,Wi,zi,Xi,Gi,Ji,Yi,Ki,Zi,$i,to,eo,no,ao,io,oo,ro,so,lo,co,uo,ho,po,fo,go,mo,vo,yo,bo,Co,So,ko,_o,wo,To,Io,Eo,Ao,xo,Po,Oo,Lo,Ro,No,Bo,Do,Mo,jo,Fo,qo,Ho,Uo,Vo,Qo,Wo,zo,Xo,Go,Jo,Yo,Ko,Zo,$o,tr,er,nr,ar,ir,or,rr,sr,lr,cr,ur,dr,hr,pr,fr,gr,mr,vr,yr,br,Cr,Sr,kr,_r,wr,Tr,Ir,Er,Ar,xr,Pr,Or,Lr,Rr,Nr,Br,Dr,Mr,jr,Fr,qr,Hr,Ur,Vr,Qr,Wr,zr,Xr,Gr,Jr,Yr,Kr,Zr,$r,ts,es,ns,as,is,os,rs,ss,ls,cs,us,ds,hs,ps,fs,gs,ms,vs,ys,bs,Cs,Ss,ks,_s,ws,Ts,Is,Es,As,xs,Ps,Os,Ls,Rs,Ns,Bs,Ds,Ms,js,Fs,qs,Hs,Us,Vs,Qs,Ws,zs,Xs,Gs,Js,Ys,Ks,Zs,$s,tl,el,nl,al,il,ol,rl,sl,ll,cl,ul,dl,hl,pl,fl,gl,ml,vl,yl,bl,Cl,Sl,kl,_l,wl,Tl,Il,El,Al,xl,Pl,Ol,Ll,Rl,Nl,Bl,Dl,Ml,jl,Fl,ql,Hl,Ul,Vl,Ql,Wl,zl,Xl,Gl,Jl,Yl,Kl,Zl,$l,tc,ec,nc,ac,ic,oc,rc,sc,lc,cc,uc,dc,hc,pc,fc,gc,mc,vc,yc,bc,Cc,Sc,kc,_c,wc,Tc,Ic,Ec,Ac,xc,Pc,Oc,Lc,Rc,Nc,Bc,Dc,Mc,jc,Fc,qc,Hc,Uc,Vc,Qc,Wc,zc,Xc,Gc,Jc,Yc,Kc,Zc,$c,tu,eu,nu,au,iu,ou,ru,su,lu,cu,uu,du,hu,pu,fu,gu,mu,vu,yu,bu,Cu,Su,ku,_u,wu,Tu,Iu,Eu,Au,xu,Pu,Ou,Lu,Ru,Nu,Bu,Du,Mu,ju,Fu,qu,Hu,Uu,Vu,Qu,Wu,zu,Xu,Gu,Ju,Yu,Ku,Zu,$u,td,ed,nd,ad,id,od,rd,sd,ld,cd,ud,dd,hd,pd,fd,gd,md,vd,yd,bd,Cd,Sd,kd,_d,wd,Td,Id,Ed,Ad,xd,Pd,Od,Ld,Rd,Nd,Bd,Dd,Md,jd,Fd,qd,Hd,Ud,Vd,Qd,Wd,zd,Xd,Gd,Jd,Yd,Kd,Zd,$d,th,eh,nh,ah,ih,oh,rh,sh,lh,ch,uh,dh,hh,ph,fh,gh,mh,vh,yh,bh,Ch,Sh,kh,_h,wh,Th,Ih,Eh,Ah,xh,Ph,Oh,Lh,Rh,Nh,Bh,Dh,Mh,jh,Fh,qh,Hh,Uh,Vh,Qh,Wh,zh,Xh,Gh,Jh,Yh,Kh,Zh,$h,tp,ep,np,ap,ip,op,rp,sp,lp,cp,up,dp,hp,pp,fp,gp,mp,vp,yp,bp,Cp,Sp,kp,_p,wp,Tp,Ip,Ep,Ap,xp,Pp,Op,Lp,Rp,Np,Bp,Dp,Mp,jp,Fp,qp,Hp,Up,Vp,Qp,Wp,zp,Xp,Gp,Jp,Yp,Kp,Zp,$p,tf,ef,nf,af,of,rf,sf,lf,cf,uf,df,hf,pf,ff,gf,mf,vf,yf,bf,Cf,Sf,kf,_f,wf,Tf,If,Ef,Af,xf,Pf,Of,Lf,Rf,Nf,Bf,Df,Mf,jf,Ff,qf,Hf,Uf,Vf,Qf,Wf,zf,Xf,Gf,Jf,Yf,Kf,Zf,$f,tg,eg,ng,ag,ig,og,rg,sg,lg,cg,ug,dg,hg,pg,fg,gg,mg,vg,yg,bg,Cg,Sg,kg,_g,wg,Tg,Ig,Eg,Ag,xg,Pg,Og,Lg,Rg,Ng,Bg,Dg,Mg,jg,Fg,qg,Hg,Ug,Vg,Qg,Wg,zg,Xg,Gg,Jg,Yg,Kg,Zg,$g,tm,em,nm,am,im,om,rm,sm,lm,cm,um,dm,hm,pm,fm,gm,mm,vm,ym,bm,Cm,Sm,km,_m,wm,Tm,Im,Em,Am,xm,Pm,Om,Lm,Rm,Nm,Bm,Dm,Mm,jm,Fm,qm,Hm,Um,Vm,Qm,Wm,zm,Xm,Gm,Jm,Ym,Km,Zm,$m,tv,ev,nv,av,iv,ov,rv,sv,lv,cv,uv,dv,hv,pv,fv,gv,mv,vv,yv,bv,Cv,Sv,kv,_v,wv,Tv,Iv,Ev,Av,xv,Pv,Ov,Lv,Rv,Nv,Bv,Dv,Mv,jv,Fv,qv,Hv,Uv,Vv,Qv,Wv,zv,Xv,Gv,Jv,Yv,Kv,Zv,$v,ty,ey,ny,ay,iy,oy,ry,sy,ly,cy,uy,dy,hy,py,fy,gy,my,vy,yy,by,Cy,Sy,ky,_y,wy,Ty,Iy,Ey,Ay,xy,Py,Oy,Ly,Ry,Ny,By,Dy,My,jy,Fy,qy,Hy,Uy,Vy,Qy,Wy,zy,Xy,Gy,Jy,Yy,Ky,Zy,$y,tb,eb,nb,ab,ib,ob,rb,sb,lb,cb,ub,db,hb,pb,fb,gb,mb,vb,yb,bb,Cb,Sb,kb,_b,wb,Tb,Ib,Eb,Ab,xb,Pb,Ob,Lb,Rb,Nb,Bb,Db,Mb,jb,Fb,qb,Hb,Ub,Vb,Qb,Wb,zb,Xb,Gb,Jb,Yb,Kb,Zb,$b,tC,eC,nC,aC,iC,oC,rC,sC,lC,cC,uC,dC,hC,pC,fC,gC,mC,vC,yC,bC,CC,SC,kC,_C,wC,TC,IC,EC,AC,xC,PC,OC,LC,RC,NC,BC,DC,MC,jC,FC,qC,HC,UC,VC,QC,WC,zC,XC,GC,JC,YC,KC,ZC,$C,tS,eS,nS,aS,iS,oS,rS,sS,lS,cS,uS,dS,hS,pS,fS,gS,mS,vS,yS,bS,CS,SS,kS,_S,wS,TS,IS,ES,AS,xS,PS,OS,LS,RS,NS,BS,DS,MS,jS,FS,qS,HS,US,VS,QS,WS,zS,XS,GS,JS,YS,KS,ZS,$S,tk,ek,nk,ak,ik,ok,rk,sk,lk,ck,uk,dk,hk,pk,fk,gk,mk,vk,yk,bk,Ck,Sk,kk,_k,wk,Tk,Ik,Ek,Ak,xk,Pk,Ok,Lk,Rk,Nk,Bk,Dk,Mk,jk,Fk,qk,Hk,Uk,Vk,Qk,Wk,zk,Xk,Gk,Jk,Yk,Kk,Zk,$k,t_,e_,n_,a_,i_,o_,r_,s_,l_,c_,u_,d_,h_,p_,f_,g_,m_,v_,y_,b_,C_,S_,k_,__,w_,T_,I_,E_,A_,x_,P_,O_,L_,R_,N_,B_,D_,M_,j_,F_,q_,H_,U_,V_,Q_,W_,z_,X_,G_,J_,Y_,K_,Z_,$_,tw,ew,nw,aw,iw,ow,rw,sw,lw,cw,uw,dw,hw,pw,fw,gw,mw,vw,yw,bw,Cw,Sw,kw,_w,ww,Tw,Iw,Ew,Aw,xw,Pw,Ow,Lw,Rw,Nw,Bw,Dw,Mw,jw,Fw,qw,Hw,Uw,Vw,Qw,Ww,zw,Xw,Gw,Jw,Yw,Kw,Zw,$w,tT,eT,nT,aT,iT,oT,rT,sT,lT,cT,uT,dT,hT,pT,fT,gT,mT,vT,yT,bT,CT,ST,kT,_T,wT,TT,IT,ET,AT,xT,PT,OT,LT,RT,NT,BT,DT,MT,jT,FT,qT,HT,UT,VT,QT,WT,zT,XT,GT,JT,KT,ZT,$T,tI,eI,nI,aI,iI,oI,rI,sI,lI,cI,uI,dI,hI,pI,fI,gI,mI,vI,yI,bI,CI,SI,kI,_I,wI,TI,II,EI,AI,xI,PI,OI,LI,RI,NI,BI,DI,MI,jI,FI,qI,HI,UI,VI,QI,WI,zI,XI,GI,JI,YI,KI,ZI,$I,tE,eE,nE,aE,iE,oE,rE,sE,lE,cE,uE,dE,hE,pE,fE,gE,mE,vE,yE,bE,CE,SE,kE,_E,wE,TE,IE,EE,AE,xE,PE,OE,LE,RE,NE,BE,DE,ME,jE,FE,qE,HE,UE,VE,QE,WE,zE,XE,GE,JE,YE,KE,ZE,$E,tA,eA,nA,aA,iA,oA,rA,sA,lA,cA,uA,dA,hA,pA,fA,gA,mA,vA,yA,bA,CA,SA,kA,_A,wA,TA,IA,EA,AA,xA,PA,OA,LA,RA,NA,BA,DA,MA,jA,FA,qA,HA,UA,VA,QA,WA,zA,XA,GA,JA,YA,KA,ZA,$A,tx,ex,nx,ax,ix,ox,rx,sx,lx,cx,ux,dx,hx,px,fx,gx,mx,vx,yx,bx,Cx,Sx,kx,_x,wx,Tx,Ix,Ex,Ax,xx,Px,Ox,Lx,Rx,Nx,Bx,Dx,Mx,jx,Fx,qx,Hx,Ux,Vx,Qx,Wx,zx,Xx,Gx,Jx,Yx,Kx,Zx,$x,tP,eP,nP,aP,iP,oP,rP,sP,lP,cP,uP,dP,hP,pP,fP,gP,mP,vP,yP,bP,CP,SP,kP,_P,wP,TP,IP,EP,AP,xP,PP,OP,LP,RP,NP,BP,DP,MP,jP,FP,qP,HP,UP,VP,QP,WP,zP,XP,GP,JP,YP,KP,ZP,$P,tO,eO,nO,aO,iO,oO,rO,sO,lO,cO,uO,dO,hO,pO,fO,gO,mO,vO,yO,bO,CO,SO,kO,_O,wO,TO,IO,EO,AO,xO,PO,OO,LO,RO,NO,BO,DO,MO,jO,FO,qO,HO,UO,VO,QO,WO,zO,XO,GO,JO,YO,KO,ZO,$O,tL,eL,nL,aL,iL,oL,rL,sL,lL,cL,uL,dL,hL,pL,fL,gL,mL,vL,yL,bL,CL,SL,kL,_L,wL,TL,IL,EL,AL,xL,PL,OL,LL,RL,NL,BL,DL,ML,jL,FL,qL,HL,UL,VL,QL,WL,zL,XL,GL,JL,YL,KL,ZL,$L,tR,eR,nR,aR,iR,oR,rR,sR,lR,cR,uR={},dR=gt.okModules||(gt.okModules={}),hR=gt.document,pR=hR.documentElement;function fR(){}function gR(t){return t}function mR(t,e){"function"==typeof t&&t(e)}function vR(t,e){this.objectStorage=t,this.keyFactory=e||gR}function yR(t){if(t in gt)try{var e,n=gt[t],a="t"+Date.now();if(n.setItem(a,a),e=n.getItem(a)===a,n.removeItem(a),e)return n}catch(t){}return new fR}function bR(t){logClientEvent("frontend.serviceWorker",["ok"])}function CR(t){logClientEvent("frontend.serviceWorker",["fail"])}function SR(t){var e=hR.createElement("script"),n=t.type||"text/javascript";n.match(/javascript/i)&&(e.type=n,t.src?e.src=t.src:e.innerHTML=t.innerHTML,hR.head.appendChild(e),c.remove(e))}function kR(t,e,n,a){a.appendChild(n[0])}function _R(t){for(var e=Array.prototype.slice.apply(t.getElementsByClassName("js-call")),n=0;n<e.length;n++)!function(t){if(t.okProc)return;t.okProc=!0,function(t){var e,n=t.getAttribute("data-services");if(n){if(0===n.indexOf("[")){e=JSON.parse(n);for(var a=0,i=e.length;a<i;a++)e[a].target=t}else{e=n.split(",");for(var o=0,r=e.length;o<r;o++)e[o]={service:e[o],target:t}}for(var s=null,l=0,c=e.length;l<c;l++){var u,d=e[l].service;C[d]||(u=T.services[d])&&(s=s||[]).push(u)}wR(s).then(function(){w.launchServices(e)})}}(t),function(t){var e=k.parseViewNames(t);if(e){for(var n=null,a=e.length;a--;){var i,o=e[a];k.exists(o)||(i=T.behaviors[o])&&(n=n||[]).push(i)}wR(n).then(function(){k.isInstant(t)&&k.getOrMakeBehavior(t)})}}(t)}(e[n])}function wR(t){if(null!=t&&0<t.length){for(var e=[],n=0;n<t.length;n++)e.push(w.use(t[n]));return _.all.apply(gt,e)}return _.resolved}function TR(){_R(pR)}function IR(e,n,a){O.request(function(){setTimeout(function(){if(n instanceof Function&&(a=n,n=null),n)for(var t in n)n.hasOwnProperty(t)&&E.switchClass(e,n[t],t);a instanceof Function&&a(e)},25)})}function ER(t){var e=this;e.config=t,e.onTaskComplete=function(){setTimeout(function(){e.task&&!e.task.done||e.hide()},4)}}function AR(){M=D.cloneNode(!0),B.addClass(M,"__unlocked")}function xR(t){return gt.setTimeout(t,15)}function PR(t){return gt.clearTimeout(t)}function OR(t,e,n){this.props=n,this.animationData=t,this.dataProcessor=e||new Error("Render function must be specified."),this.animationId=null,this.animationsDone=[],this.animationsStopped=[],this.animationsSet=[],this.animationsCount=0,this.loop=!0,this.onAnimationStart=J.create(),this.onAnimationChainStart=J.create(),this.onAnimationStop=J.create(),this.onAnimationEnd=J.create(),this.onAllAnimationsEnd=J.create(),this.onAnimationEnd.attach(LR,this)}function LR(t){var e,n=this.animationsDone;n.push(t.type||t.name),n.length===this.animationsCount&&(e=this,setTimeout(function(){e.done=!0,e.onAllAnimationsEnd.trigger(t)},0))}function RR(t){return t*(1<t?RR(t-1):1)}function NR(t){var e=yt;e&&(yt=null,e.resolve()),t&&ft.remove(t),bt=null}function BR(t){this.canvas=t,this.ctx=t.getContext("2d"),this.busy=!1,this.activeAnimations=[]}function DR(t,d){var o=St.start(),r=0,h=0,p=t.length,f={};return t.map(function(t){var e,n,a,i={};for(var o in t)t.hasOwnProperty(o)&&(e=(a=t[n=o]).name||o);a.ext=a.ext||"png";var r=a.variants||{};a.useCustomVariants||(r.image=_t);var s=0;for(var l in r)1<++s&&p++,i[l]=function(t,e,n){e=e||"";var a=new Image;return a.src=n.path+t+e+"."+n.ext,a}(e,r[l],a);for(var c in f[n]=i){var u=i[c];!function(e){u.onerror=function(t){delete i[e],i.needCheck=!0,g(f)}}(c),u.onload=function(t){h++,d&&d(t.target),g(f)}}}),o;function g(t){if(++r===p)if(0===h)o.reject(t);else{for(var e in t){var n=t[e],a=!0;if(n.needCheck){for(var i in n)if(n[i]&&"needCheck"!==i){a=!1,delete n.needCheck;break}a&&delete f[e]}}o.resolve(t)}}}function MR(t,e){return e[t]}function jR(t){return t[wt._baseKey]}function FR(){this.handlers=[]}function qR(t){for(var e=t.target,n=Gt;e;){if("A"===e.tagName){n=UR(e,t);break}if(("INPUT"===e.tagName||"BUTTON"===e.tagName)&&"submit"===e.type){var a,i=e.form;i||(a=Ht.findParent(e,WR))&&(i=a.form),i&&(i.okSubmitBtn=e);break}if("LABEL"===e.tagName)break;e=e.parentElement}n.calledClick||n.handled||Vt.trigger(t)}function HR(t){var e=t.target,n=e.okSubmitBtn||e;!n||Ft.isDefaultPrevented(t)||Mt.hasClass(e,"js-noajax")||UR(n,t,null,e.okFormRequestData)}function UR(t,e,n,a){var i={calledClick:!1,handled:!1};n=n||Ut;var o,r=t.href,s="FORM"===t.tagName?t:t.form;s&&(r=s.action,o=s.method);var l=Dt.see(r);if(!l.internal||l.appHook)return Qt.trigger({domEvent:e,target:t,url:r}),i;var c={query:Bt.params(r),uri:r,method:o,form:s,target:t,isDefaultPrevented:function(){return!!e&&Ft.isDefaultPrevented(e)},allowDefault:function(){this.doGo=!0},triggerClickEvent:function(){e&&!i.calledClick&&(i.calledClick=!0,Vt.trigger(e))},settings:a};return n.run(c)&&(e&&!c.doGo&&(e.preventDefault(),e.returnValue=!1),i.handled=!0),i}function VR(t){Ut.enqueue(t)}function QR(t){var e=t.target,n=(t.retry||0)+1;return!!(Mt.hasClass(e,"js-click")&&n<zt)&&(Wt||(t.retry=n,Wt=!0,setTimeout(function(){Wt=!1,Ut.run(t)},Xt)),!0)}function WR(t){return"FIELDSET"===t.tagName}function zR(t,e,n){return UR(t,null,e,n).handled}function XR(){return null!=ee}function GR(){var t=hR.getElementById("toast"),e=hR.getElementById("toast-content");return t&&e&&{toastRoot:t,toastContent:e}}function JR(){XR()&&(clearTimeout(ee),ee=null);var t=GR();t&&(t.toastContent.innerHTML="",t.toastRoot.classList.remove(ne))}function YR(t,e,n){return(oe=oe||gt.OKApp)&&oe[t]?function(t){if(se[t])return!ie.android||ie.supportVersion(ie.OKAppInfo&&ie.OKAppInfo.version,[19,12,16]);return!1}(t)?oe[t](e,n||re):oe[t](e):null}function KR(t,e,n,a){if("complete"===hR.readyState&&oe&&oe[t])return YR(t,e,n);a||gt.addEventListener("load",KR.bind(gt,t,e,n,!0))}function ZR(t){return Math.pow(t,.5)}function $R(t){return Math.abs(Math.sin(on*t))*Math.pow(1-t,1.5)}function tN(t,e){this.model=t,this.elem=e,this.reactionPanelNode=hR.getElementById(Ue),this.likeReactionLink=null,this.nodesClearTaskMap={},ye.listenPreventable(e),this.replaceLikeLink()}function eN(t){var e=je,n=this===Fe,a=e.style,i=n?(pe.addClass(e,Ke),clearTimeout(eN._tid),eN._tid=setTimeout(function(){pe.removeClass(e,Ke)},400),t=this.widgetBehavior.likeReaction,parseInt(a.height)):(e=e||hR.getElementById(Ue)).firstChild.offsetHeight,o=t.getBoundingClientRect(),r=function(t,e){var n=Me.offsetLeft,a=Me.offsetWidth,i=e.offsetWidth;if(n+a<i)return NaN;var o,r,s,l,c,u=a-i,d=i/2;return c=n+2*u<d?n+u/2:(o=t.right,r=Math.floor(t.width/2),s=Math.floor(t.left),d<o-r?d<n+a-(l=s+r)?l-d:o-i:s),Math.floor(c)-4}(o,e),s=Math.floor(xe.calc().scrollTop+o.top-i-rn);n||(a.height=i+"px"),a.top=s+"px",a.left=isNaN(r)?"auto":r+"px",a.visibility="visible";var l,c,d,h,u,p,f,g,m,v,y,b,C,S=e.getBoundingClientRect(),k=Fe.canvas;l=[k],c=S,d=Math.min(2.5,en),h=c.bottom,u=c.width,p=c.left,f=c.right,g=xe.calc(),m=g.width,v=g.height,y=Math.min(p,Cn),b=Math.min(m-f,Cn),C=Math.min(m,u+y+b),l.forEach(function(t){var e=Math.min(h,kn),n=Math.min(v-h,Sn),a=h-e,i=e+n;t._okReact_w=C,t._okReact_h=i,t.width=C*d,t.height=i*d;var o=t.style;o.height=i+"px",o.width=C+"px",o.top=gt.pageYOffset+a+"px";var r=p-y;o.left=r+"px";var s=t.getContext("2d"),l=t.getBoundingClientRect(),c=l.left,u=l.top;s.scale(d,d),t._okReact_x=c,t._okReact_y=u}),pe.addClass(k,"__open")}function nN(e,t){var n,a,i,o,r,s,l,c=this;!De.isNullOrEmpty(wn)&&Tn&&(n=je||hR.getElementById(Ue),(a=ye.getOrMakeBehavior(n)).widgetBehavior=c,eN(t),function(t){if(!t.inited){ye.listenCritical(t);for(var e=t.getElementsByClassName(Ve),n=0,a=e.length;n<a;n++){var i,o,r=e[n],s=parseInt(r.getAttribute("data-reaction")),l=Tn[s];l&&(i=r.getAttribute("data-reaction-modifier"),o=l.name,r._okRId=s,r._okRType=o,r._okRClass=o+"-react",i&&(r._okRClass+=" "+i))}t.inited=!0}}(n),pe.hasClass(n,Ge)||(this.likeReaction=t,this.likeReactionLink=c.likeUrl,!wn.longTapControlsEnabled||(i=c.elem.getElementsByClassName("hint_body")[0])&&pe.remove(i),!_e.isSupported||(o=n.getElementsByClassName("reactions-hint")[0])&&(r=gt.localStorage.getItem(Ze)||0,parseInt(r)>=wn.privateReactionHintShowCount&&pe.remove(o)),pe.addClass(n,"__open"),s=n.getElementsByClassName("js-default-chosen")[0],wn.advancedAnimationsEnabled&&!wn.longTapControlsEnabled&&(s.click(),dN(s,c)),Pn=Ie.lockScreen(n,{prepend:!0}).then(function(){var t;wn.advancedAnimationsEnabled||(s.click?s.click():(t=ye.getOrMakeBehavior(s)).launchReaction.touchStart.call(t,e,s,!1)),sN(c),Pn=null}),(l=t.parentNode)&&setTimeout(function(){pe.hasClass(t,Qe)||(l.style.zIndex="10000")},0)),xe.changed.attach(eN,a))}function aN(t,e,n){var a=n.ctx,i=n.animatable,o=t.scale,r=i.halfWidth*o,s=i.width*o;a.save(),a.globalAlpha=t.opacity||1,a.translate(i.centerPosX+t.translateX,i.centerPosY+t.translateY),a.rotate(an*t.rotate),a.drawImage(n.asset,-r,-r,s,s),a.restore()}function iN(t,e,n){var a=n.ctx,i=t.scale;a.save(),a.translate(n.x,n.y);var o=un*i,r=dn*i;a.drawImage(n.asset,n.xSum-r,n.ySum-r,o,o),a.restore()}function oN(t,e,n){var a,i,o,r,s,l=hR.querySelector(".hint_body.closed[data-hint=react]");l&&!fe.parentBySelector(t.elem,".js-nohint")&&(a=l.cloneNode(!0),t.elem.insertBefore(a,t.elem.firstChild),i=e,o=fe.parentBySelector(i,".portlet-gift-with-klass")||hR.getElementById("boxPage"),r=o.offsetWidth+o.getBoundingClientRect().left,s=Math.round(r-i.getBoundingClientRect().left-i.offsetWidth/2-16),Ne.insertRule(".widget-list_actions .hint_body.__r::after { right: "+s+"px }"),pe.removeClass(a,"closed"),gt.localStorage.setItem($e,n+1),wn.softLearningHintEnabled&&gt.localStorage.setItem(tn,Date.now()),Ie.lockScreen().then(function(){Ne.deleteRuleBySelector("widget-list_actions .hint_body.__r::after"),pe.remove(a)}),logClientEvent("reaction",["hint-shown"]))}function rN(t,e){setTimeout(function(){pe.removeClass(t,Ge),t.removeAttribute("style")},e)}function sN(t){xe.changed.detach(eN,Fe),Fe.widgetBehavior=null,pe.removeClass(Fe.canvas,"__open"),pe.addClass(Fe.canvas,"__closed"),Fe.canvas.removeAttribute("style"),pe.removeClass(je,"__open"),pe.addClass(je,Ge);var e,n,a=Fe&&Fe.lastSelected,i=t.likeReaction,o=i.parentNode;i&&o&&(o.style.zIndex="1"),a?(n=t.likeReactionLink,e=a._okRId,n=ke.insertParams(n,{"st.rid":e}),n=ke.replaceParams(n,{"st.u":"off"}),lN(t.likeReaction,n,a,Fe,je),logClientEvent("reaction",["reaction-send",a._okRId]),Se.request("/dk?st.cmd=clickLog","POST",{"_cl.id":Date.now(),_clickLog:JSON.stringify([{target:"like-as-reaction"},{feedLocation:"main"}])}).send()):rN(je,250)}function lN(a,t,e,n,i,o){var r,s,l;xn[1]=!0,Se.request((s=t,(l=(r=a).getAttribute("data-widget-id"))?ke.insertParams(s,{"st.wid":l}):r)).then(function(t){var e,n=t.responseText;n&&0!==n.length&&(xn[2]=!0,Ee(n,{special:{applyUIChanges:{parseDomNode:function(t,e){e.isHideWidgetDivider="true"===t.getAttribute("hide-widget-divider"),e.isHideWidgetContainer="true"===t.getAttribute("hide-widget-container")},run:function(t){var e,n=hR.querySelector(t.content);n&&(e=null==n.querySelector(".widget-list_infos_i"),pe.switchClass(n,e&&t.isHideWidgetDivider,"__no-divider"),pe.switchClass(n,e&&t.isHideWidgetContainer,"__hidden"))}}}},e={}),ye.getOrMakeBehavior(a).replaceLikeLink(),Ae.htmlFromEnvelopeInserted.trigger(e),o&&setTimeout(function(){o(this)},0))},function(){logClientEvent("reaction",["backend-failure"])}).anyway(function(){var t;e&&(_e.isSupported&&(wn.longTapLearningEnabled&&gt.localStorage.setItem($e,nn+1),pe.hasClass(e,ze)&&(t=gt.localStorage.getItem(Ze)||0,gt.localStorage.setItem(Ze,parseInt(t)+1))),pe.removeClass(e,We),pe.removeClass(a,Je),pe.removeClass(a,Ye)),n&&(n.lastSelected=null,n.clearLastSuper(),rN(i,250))}).withToken().send()}function cN(t,e){this.model=t,this.elem=e,this.widgetBehavior=null,this.lastSuper=null,this.lastSelected=null,this.animationStorage={},this.canvas=hR.getElementById("all-react-canvas"),this.canvas&&(this.canvasAnimator=new Pe(this.canvas))}function uN(t){this.id=t}function dN(e,t){var n,a,i,o=t.likeReaction,r=o.classList.contains(Qe);o&&(n=e._okRId,a=o.getElementsByClassName("fi")[0],i=!r&&a?a:!r&&wn.replaceDefaultIconEnabled?o.getElementsByClassName("ic_w")[0]:o.getElementsByClassName("ic-react")[0],requestAnimationFrame(function(){pe.addClass(o,Qe),pe.switchClass(o,Fe.isSuper(e),"__super"),o.parentNode.setAttribute("data-subtype-id",n),i.className="ic ic-react ic16 "+e._okRClass+(Fe.isSuper(e)?" __super-react":"");var t=i.getElementsByClassName("ic_tx")[0];t&&t.childNodes[0]&&(t.childNodes[0].nodeValue=Tn[n].text)}))}function hN(t){var e=this,n=t.animationData,a=n.reactionId;n.reactionBehavior.removeInstanceFromStorage(a,e),setTimeout(function(){e.onAnimationStart.detach(pN,e)},0)}function pN(t){var e,n,a,i,o;"translateX"===t.type&&(n=(e=t.animationData).reactionBehavior,a=e.target,i=e.reactionId,o=n.getInstancesFromStorage(i).length,cn<o&&(this.stop(),n.removeInstanceFromStorage(i,this),n.canvasAnimator.remove(this),n.clearLastSuper(),pe.addClass(a,Xe),a.setAttribute("data-reaction",a._okRId+=100),function(t,e){for(var n=t._okRId-100,a=e.getInstancesFromStorage(n),i=0,o=0,r=[],s=0,l=a.length;s<l;s++){var c=a[s];c.stop();var u,d,h,p,f=c.props.transform.progressMap;f&&(u=f.translateX,d=f.translateY,h=f.rotate,i+=u,o+=d,p=c.animationData,r.push({startX:u,startY:d,rotateFrom:h,animation:new On(p,aN)}))}e.flushStorageOfType(n);var g=r.length;i/=g,(o/=g)>-bn&&(o=-(bn+Math.random()*un));var m=t.getBoundingClientRect(),v=e.canvas,y=new On({ctx:v.getContext("2d"),x:m.left+(m.width>>1)-v._okReact_x,y:m.top+(m.height>>1)-v._okReact_y,xSum:i,ySum:o,asset:He.result[t._okRId].canvas},iN,{transform:{duration:hn,timingFn:ZR,group:{scale:{from:.8,to:pn,duration:400,next:{name:"scale-in-1",to:vn,duration:200,next:{name:"scale-out-1",to:pn,duration:200,next:{name:"scale-in-2",to:vn,duration:200,next:{name:"scale-out-2",to:0,delay:100,duration:200}}}}}}}});e.canvasAnimator.addAndRun(y);for(var b,C,s=0,l=r.length;s<l;s++){var S=r[s],k=S.animation,_=S.startX,w=S.startY,T=S.rotateFrom;k.onAllAnimationsEnd.attach(function(t){e.canvasAnimator.remove(this)},k),C=1===cn?b=0:(b=_-i,w-o);var I=Math.sqrt(b*b+C*C),E=5;I<_n&&(E*=_n/I*.2);var A=.5*hn,x={duration:A,delay:A/2,from:1,to:0},P={transform:{duration:fn,timingFn:ZR,group:{translateX:{from:_,to:b*E},translateY:{from:w,to:C*E},rotate:{from:T,to:T+270},scale:{from:gn,to:0,delay:mn}}}};P.transform.group.opacity=x,k.addProps(P),e.canvasAnimator.addAndRun(k)}e.lockTap(ln)}(n.lastSuper=a,n),dN(a,n.widgetBehavior)))}function fN(t,e,n){n.animatable.style[sn]="translate("+t.translateX+"px, "+t.translateY+"px) scale("+t.scale+") rotate("+t.rotate+"deg)"}function gN(){Rn.set("workWithOutsideInputs",Rn.get("toolbarSearch.enabled")||Nn.get("enabled")),Rn.set("toolbarSearch.active",Rn.get("toolbarSearch.enabled")&&Nn.get("enabled"))}function mN(){Ln.set("enabled",Ln.get("configured")&&(!Nn.get("enabled")||Nn.get("showToolbarMenuEnable")||Nn.get("isCenterPortalContentEnabled")))}function vN(){Ln.set("asColumn",Nn.get("enabled"))}function yN(){Ln.set("stickyEnabled",Ln.get("stickyConfigured")&&Nn.get("enabled"))}function bN(){return gt.location}function CN(t){var e=0;try{e=parseInt(sessionStorage.lastFullRefreshTime||0)||0}catch(t){}Date.now()-e<1e3?setTimeout(t,1e3):t();try{sessionStorage.lastFullRefreshTime=e}catch(t){}}function SN(t){return"1"===t.getResponseHeader(Yn)}function kN(t){if(t.okTask&&t.okTask.isExternal())return!1;var e=t.getResponseHeader(Kn);e&&setTimeout(function(){Un.show(decodeURIComponent((e+"").replace(/\+/g,"%20")))},20);var n,a,i=function(r){var s=r.getResponseHeader(Jn);if(s){CN(function(){var t,e,n,a,i,o;r.okNoReferrer?(t=gt.location,n=(e=gt.history)&&e.replaceState,a=e&&e.state,i=t.href,n?(e.replaceState(null,null,"/?__noref"),setTimeout(function(){setTimeout(function(){e.replaceState(a,null,i)},0),t.replace(s)},0)):t.replace(Xn.ie?s:"data:text/html,"+encodeURIComponent('<html><head><meta http-equiv="refresh" content="1;URL='+s+'"/></head></html>'))):(o=SN(r),r.okTask&&r.okTask.isSamePage?zn.replace(s,o):zn.change(s,o))});var t=r.okTask;return t&&(t.redirected=!0),!0}}(t);return null!=i?i:!!function(t){if(t.getResponseHeader("Refresh-Requested"))return CN(function(){zn.reload(SN(t))}),!0}(t)||((a=t.getResponseHeader("OKApp-Command"))&&(n=JSON.parse(a),Gn.runAndRetry(n.commandName,n.args)),function(t){var e=t.getResponseHeader("X-Ajax-Command");if(e){var n={name:e,payload:t.responseText,rejected:!0};return Wn.trigger(n),n.rejected}return!1}(t)?(t.okTask.abort(),!0):null!=e&&!t.getResponseHeader(Zn))}function _N(){return this.ajaxTask.send(),this}function wN(){return this.ajaxTask.withToken(),this}function TN(){return this.ajaxTask.abort(),this}function IN(t){var e=t.responseText,n=this.jsonTask;e?n.resolve(JSON.parse(e),t):n.reject()}function EN(){this.jsonTask.reject()}function AN(t){var e=t.target,n=e,a=e.form,i=a?a.action:e.href,o=i&&oa.see(i)||{},r=null;if(!n.getAttribute(ua))for(var s=0;s<3&&n&&n.className.match&&n.className.match(ha);s++){var l=n.style;l.display="none",n=hR.elementFromPoint(t.clientX,t.clientY),(r=r||[]).push(l)}if(r)for(var c=0,u=r.length;c<u;c++)r[c].removeProperty("display");var d,h,p=(d=n||e,h=[],na.findParent(d,function(t){var e,n=t.getAttribute(ua);if(n){try{e=JSON.parse(n)}catch(t){e={data:"Error parsing JSON.\n"+t.message,target:n}}e&&h.push(e)}}),h);if(0!==p.length){if(!i)if(!aa.has(p,function(t){return t.target!==mt}))return;var f,g,m,v,y,b,C=JSON.stringify(p),S=C.length;1500<S?gt.okSjse&&alert("ClickLog JSON is too long "+S):(ba&&(f=Date.now(),(g=parseInt(gt.localStorage[pa]))&&f<=g&&(f=g+1),gt.localStorage.setItem(pa,f)),v=C,(y={})[fa]=f,y[ga]=v,m=y,a&&(b=a.action)&&("button"===e.tagName&&"reset"!==e.type||"submit"===e.type)?b&&-1!=b.indexOf(ga)?a.action=ia.replaceParams(a.action,m):a.action=ia.insertParams(a.action,m):a||o.appHook||!i?ya?xN(m,function(){ON({result:!0},f)}):PN(m,f,ON):o.internal&&(e.href=ia.insertParams(i,m)),function(e){if(ba){var t,n=gt.localStorage.getItem(ma),a={};if(n&&2<(t=n.length)&&t<va)try{a=JSON.parse(n)}catch(t){e={error:t.message,params:e}}a[e[fa]]=e[ga];try{gt.localStorage.setItem(ma,JSON.stringify(a))}catch(t){throw LN(ya),xN(a),new Error("Handled error: "+t.message)}}}(m))}}function xN(t,e){var n=new Image;n.onload=e,n.src=da+"&"+ia.formatParams(t)}function PN(t,e,n){return sa.request(da,"POST",t).then(n,null,e).send()}function ON(t,e){var n,a;!ba||0===gt.localStorage.length||t&&(!t.result||void 0===e)||(n=gt.localStorage.getItem(ma))&&(delete(a=JSON.parse(n))[e],Object.keys&&0===Object.keys(a).length?gt.localStorage.removeItem(ma):gt.localStorage.setItem(ma,JSON.stringify(a)))}function LN(t){var e,n;Ca&&gt.localStorage.length&&(e={},(n=gt.localStorage.getItem(ma))&&(e[ma]=n,t?xN(e,RN):PN(e,null,RN)))}function RN(t){!t.result&&"load"!==t.type||gt.localStorage.removeItem(ma)}function NN(t){var e,n=t.indexOf(Ea+"=");return-1<n?(-1==(e=t.indexOf("&",n))&&(e=t.length),t.substring(0,n)+Ea+"="+Ia+t.substring(e)):t}function BN(){return gt._tmr}function DN(){var a,i=hR.querySelector(".uform"),o=!1;i&&(Da||"#lst"!==gt.location.hash||(a=hR.querySelector('a[name="lsta"]'))&&(gt.scrollTo(0,1),setTimeout(function(){var t=Ba.getTotalOffsetTop(a),e=Ba.getTotalOffsetTop(i)+i.offsetHeight,n=Na()[1];(o=Math.abs(t-e)<=n)?(hR.body.scrollTop=Ba.getTotalOffsetTop(i)-Na()[0],i.scrollIntoView(!1)):a.scrollIntoView()},100)),(Da||o)&&i.scrollIntoView())}function MN(){}function jN(t){var e;return t.query["st.cmd"]in Qa&&(e=t,FN(qN(function(){Ma.photoLayer.launch({clickSrc:e.target,effects:!1!==e.effects})})),!0)}function FN(t){Ha.use(Ua,function(){Ha.use(Va,function(){t()})}),Ha.use(Va,MN)}function qN(t){return function(){qa.prepareForFutureStateChange(),setTimeout(t,4)}}function HN(t){var e=gt.pageCtx;di&&!t||!e||(di=e.actionBusUrl,e.actionBusUrl="")}function UN(){si={},li={},ci={}}function VN(){ui=ui||setTimeout(WN,pi)}function QN(){!function(){var t,e=gt.localStorage,n=gt.sessionStorage,a=n&&n.okTime||e&&e.okTime;if(a)for(t in a=JSON.parse(a))a.hasOwnProperty(t)&&(hR.cookie=t+"="+a[t]+";path=/")}(),HN();var t=di+ai.formatParams({_i_loc_rdr:1},"&"),e=ei.request(t,"POST");return e.ajaxTask.dataJson(si),e.withToken().send()}function WN(){ui=null;var t=QN();t.oneTimeHandlers=li,t.oneTimeFailHandlers=ci,t.then(zN,XN),UN(),function(){for(var t=0;t<gi.length;t++){var e=gi[t],n=e.name;si[n]===mt&&(e.task.join(GN(n,e.arg)),gi.splice(t,1),t--)}}()}function zN(t){var e=this.oneTimeHandlers,n=this.oneTimeFailHandlers,a=null,i=t.error,o=!1;if(i){for(var r in n)n.hasOwnProperty(r)&&n[r](i);a=i.error?[i.error]:null}else for(var s in t)if(t.hasOwnProperty(s)){var l=e[s]||hi[s],c=t[s];if(l){var u=c&&c.error;if(u){var d=n[s];d&&d(u),(a=a||[]).push(u)}else{if(c&&c.html){o=!0;var h,p=c.deferredCss;if(p)for(var f in p){p.hasOwnProperty(f)&&((h=hR.createElement("div")).innerHTML=p[f],ri.addCss(h,"top"===f?"TOP":"DEFAULT"))}}l(c)}}else gt.okSjse&&alert("Not handled: "+s)}a&&fi.trigger({errors:a});var g=this.ajaxTask.xhr.getResponseHeader("X-Sec-Token");g&&(di=di.replace(/\&STKN\=[^\&]+/gi,"&STKN="+g)),o&&oi.process()}function XN(){zN.call(this,{error:"error.no.response"})}function GN(t,e,n){var a,i,o=ti.start();return n&&(i=n,(a=e)&&i.loadDeferred&&(a.loadDeferred=!0)),t in si?gi.push({task:o,name:t,arg:e}):(si[t]=e,li[t]=o.resolveIfNotDone.bind(o),ci[t]=o.rejectIfNotDone.bind(o),VN()),o}function JN(t,e){this.init(t,e)}function YN(t){var e=Ci.calc();t.style.top=e.scrollTop-1+"px",t.style.height=e.height+1+"px"}function KN(t,e){var n=t.indexOf("#");return-1!==n&&-1!==t.indexOf("js-dlg",n)||Ei.hasClass(e,"__dialog")}function ZN(t){var e,n=Di[t.type]||Ri;Ni!==n&&(e={state:t,current:n,previous:Ni},Ni&&Ni.deactivated.trigger(e),(Ni=n).activated.trigger(e)),Ni&&Ni.render(t)}function $N(t,e){var n=this;e=e||Mi,n.isInited=!1,n.type=t,n.typeIncludesDefault=e.isDefault,n.useSwap=!1,n.prepare=xi.create(),n.accountingState=xi.create(),n.launch=xi.create(),n.config=xi.create(),n.activated=xi.create(),n.deactivated=xi.create(),n.pipeline=[],ji(n)}function tB(t){if(-1<t.selectedIndex){var e=t.selectedOptions;if(e)return e;var n=t.options;if(t.multiple){for(var a=[],i=0,o=n.length;i<o;i++){var r=n[i];r.selected&&a.push(r)}return a}return[n[t.selectedIndex]]}return[]}function eB(t,i,o){var r=o.ignoreDisabled,s=o.submitElement;Fi(t,function(t){if(!r||!t.disabled){var e,n=t.value;switch(t.type){case"checkbox":case"radio":e=t.checked?n||"on":mt;break;case"submit":t===s&&t.name&&(e=n);break;case"fieldset":var a=t.form;a&&!a.contains(t)&&eB(t.elements,i,o);break;case"select-multiple":i[t.name]=qi.getSelectedOptions(t),e=mt;default:e=n}e!==mt&&(i[t.name]||(i[t.name]=[])).push(e)}})}function nB(t,e,n){return t.getAttribute("data-url-"+e+"-"+n)}function aB(){}function iB(e){var n=e.processing;return e.success=function(t){e.prepareProcessing&&e.prepareProcessing(t),Yi(t.response,n,t)},e}function oB(h,t){h.cancel=h.cancel||aB;var p=h.indicatorSelector;function f(t){var e=t.target,n=p&&zi.parentBySelector(e,p)||e,a=h.selector,i=parseInt(e.getAttribute("data-request-throttle"))||h.requestDelayTime,o=h.lastHandleStamp,r=t.preparedContext;if(!r){if(a&&!zi.matches(e,a)||Xi.hasClass(e,"js-ajax-nav-cancel"))return h.cancel(t),!1;var s=(r=h.prepare&&h.prepare(t)||{}).navigationTask;if(s)return s.then(function(){r.navigationTask=null,t.preparedContext=r,f(t)},function(t){t&&t.cancel&&h.cancel(r)}),!r.allowDefault}if(r.cancelled||o&&i&&Date.now()-o<i)return h.cancel(r),!r.allowDefault;Xi.removeClass(n,"err");var l=h.loaderTimeout;Zi=setTimeout(function(){Xi.addClass(n,"ld")},0<=l?l:500);var c=e.getAttribute("data-url-append");c&&Ki.processUriFunc(c,t);var u=Gi.request(t.uri,t.method,t.form?t.form.okFormData||Ji.data(t.form):null).then(function(){clearTimeout(Zi),Zi=null,r.response=this.response(),h.success(r)},function(){this.aborted||(Xi.addClass(n,"err"),r.failed=!0,h.fail&&h.fail(r))}).anyway(function(){Zi&&clearTimeout(Zi),Xi.removeClass(n,"ld"),h.complete&&h.complete(r)});r.ajaxTask=u,h.tuneRequest&&h.tuneRequest(r);var d=t.settings;return d&&d.tuneRequest&&d.tuneRequest(r),h.avoidToken||u.withToken(),h.lastHandleStamp=Date.now(),u.send(),!0}return h.isDefault&&(f.okIsChainRoot=!0),!0===t?f:(Wi.register(f),new rB(f))}function rB(t){this.run=t}function sB(){return Eo||((Eo=hR.createElement("audio")).style.display="none",hR.body.appendChild(Eo),Eo.okIsApproved=!0,Eo.src=gt.pageCtx.staticResourceUrl+"mres/img/music/empty.mp3",Eo.play(),setTimeout(function(){Eo.pause()},4)),Eo}function lB(e){Ao?e():(sB(),po.loader.use("topic-music-js",function(){var t;Io||(To&&po.wmf(To),t=po.initTopicMusic(Eo),Ao=t.audioPlayer,Io=t.api,xo=t.interop,e())}))}function cB(t){_o.updateMediaMetadata(t.track,{resume:t.playTrack.bind(t),pause:t.pauseTrack.bind(t),seekForward:null,seekBackward:null,previous:Ao.playNext.bind(t,!1),next:Ao.playNext.bind(t,!0)})}function uB(t,e){this.trackId=t.id,this.dom=e}function dB(t,e){var n=this,a=t.trackFullInfo;e.okData={track:a},n.view={domElement:e},n.track=a,n.trackElement=e,n.trackId=t.id,n.locale=t.locale,n.ctx=t.ctx||"mediastatus",n.isTopicTrack=!0,n.inited=!1}function hB(){return fo.hasClass(pR,"messaging")}function pB(t,e){xo.trackIsPlayingChanged.trigger({track:t,isPlaying:e})}function fB(t){var e=Co.getOrMakeBehavior(t);return e instanceof dB?e:null}function gB(t){var e=hB()?"messaging":null!==go.parentBySelector(t,".gift-price_music")?"playGift":null!==go.parentBySelector(t,".topic-music-playlist")?"playPlaylist":"playStatus";logClientEvent("music",[e])}function mB(t,e){if(!fo.hasClass(t,"mus")){var n=t.getElementsByClassName("mply")[0];if(!n)return;t=go.parentBySelector(n,".mus")}fo.switchClass(t,e,"pse"),fo.switchClass(t,!e,"ply")}function vB(t,e){fo.hasClass(t,No)&&fo.switchClass(t,e,"__playing")}function yB(t){var e=t.getAttribute("data-zoom"),n=t.getAttribute("data-lat"),a=t.getAttribute("data-lng"),i=t.getAttribute("data-mapSrc"),o=L.map(t,{dragging:!1,zoomControl:!1,scrollWheelZoom:!1}).setView([n,a],e);o.attributionControl.setPrefix('<a target="_blank" href="http://leafletjs.com">Leaflet</a>'),L.tileLayer(i,{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}).addTo(o);var r=L.icon({iconUrl:"/mres/img/places/pin.png",iconSize:[32,32],iconAnchor:[16,32]});L.marker([n,a]).setIcon(r).setOpacity(.8).addTo(o)}function bB(){Do("l-map",hR.getElementsByClassName(Fo),yB)}function CB(){Ho||0===hR.getElementsByClassName(Fo).length||(Ho=!0,OK.loader.use("leaflet-js",function(){OK.loader.use("leaflet-css",function(){qo=!0,bB()})})),qo&&bB()}function SB(n,a,t){ur(t,function(t,e){a[n](e,t,!1)})}function kB(){mr((kr||(kr=hr.hiddenElementSelectors||[]).push("#footer"),kr),function(t){var e=hR.querySelector(t);e&&-1===_r.indexOf(e)&&(e.style.display="none",_r.push(e))})}function _B(){Ir||(Ir=!0,yr.onChanged(_B),br.resize.attach(_B));var t,e,n,a,i,o,r,s,l,c=hR.querySelector(".empty-page,.full-screen");c&&pr.hasClass(c,wr)?(kB(),e=(t=pr.hasClass(pR,"search-on"))?"#search-results-container ":Tr,(n=hR.querySelector(e+".empty-page_cnt,"+e+".full-screen_cnt"))&&!fr.parentBySelector(n,".no-stub")&&(a=n.parentNode,(i=fr.parentBySelector(n,".bbox"))&&(i.style.marginBottom=0),o=hR.querySelector(t?".a-search_i":"#content")||hR.body,r=gt.getComputedStyle(o),s=Math.ceil(parseFloat(r.marginTop)+parseFloat(r.marginBottom)),l=a.getBoundingClientRect(),setTimeout(function(){a.style.height=gt.innerHeight-l.top-s+"px",yr.get("heightBySidebar")?n.style.emptyPagePadding=hR.body.offsetHeight-br.calc().height+"px":n.style.emptyPagePadding="",pr.removeClass(a,wr),vr.processed.trigger()},t||Cr.winphone?100:0))):(mr(_r,function(t){t.style.display="block"}),_r.length=0,vr.processed.trigger())}function wB(t,e){this.data=t,this.context=e}function TB(){var t=Or(hR.cookie.split("; "),function(t){var e=t.indexOf("=");if(-1!==e&&"hints"==t.substring(0,e))return t.substring(e+1)});return"string"==typeof t?t.split(","):[]}function IB(t){var e=localStorage.getItem("hints"),n=e?JSON.parse(e):{},a=n[t];return a?a.closedCount=a.closedCount||0:n[t]={shownCount:0,closedCount:0,actionCount:0,hidden:!1},n}function EB(t,e){var n,a,i,o,r,s,l,c=t.getAttribute(qr);e&&"localstorage"===e.storageType&&Dr.isSupported?(++(i=(a=IB(n=c+"_"+e.currentUserId))[n]).closedCount>=e.closeLimit&&(i.hidden=!0),localStorage.setItem("hints",JSON.stringify(a))):(o=c,r=jr,-1===(l=TB()).indexOf(o)&&(l.push(o),(s=new Date).setDate(s.getDate()+r),hR.cookie="hints="+l.join(",")+"; expires="+s.toUTCString()+"; path=/")),Pr.remove(t),logClientEvent("hint.close",[c])}function AB(t){t.preventDefault(),EB(Rr.parentBySelector(this,Fr))}function xB(t){var e=Rr.parentBySelector(this,".__close-hint_w").querySelector(Fr);e&&EB(e)}function PB(t,e){this.root=e,this.model=t}function OB(t){var e,n,a,i,o,r=t.getAttribute(qr);t.hasAttribute("data-model")&&"react"!==t.getAttribute("data-hint")?(i=(a=IB(n=r+"_"+(e=JSON.parse(t.getAttribute("data-model"))).currentUserId))[n]).hidden||(Pr.removeClass(t,"closed"),logClientEvent("hint.shown",[r]),++i.shownCount>=e.showLimit&&(i.hidden=!0),localStorage.setItem("hints",JSON.stringify(a))):r&&-1===Mr.indexOf(r)&&"react"!==t.getAttribute("data-hint")&&(Pr.removeClass(t,"closed"),t.getAttribute("data-view")||(o=t.querySelector(".base-button"))&&o.addEventListener("click",AB,!1),logClientEvent("hint.shown",[r]))}function LB(t){return!Zr||(n=t,Qr.portrait()&&Yr<n&&Yr<es-n)||(e=t,Qr.landscape()&&Kr<e&&Kr<ns-e);var e,n}function RB(t){return t.okSwipeIgnore===mt?t.okSwipeIgnore=Xr.isMarkedAsSwipeIgnore(t):t.okSwipeIgnore}function NB(t,e,n,a,i){var o=this;o.node=t,o.range=i||5,o.isMoveAdded=!1,o.isDetect=!1,o.isSwiped=!1,o.isTouched=!1,o.isIgnoreMovePreventDefault=!1,o.pointerStartX=0,o.pointerLastX=0,o.pointerStartY=0,o.onSwipeMove=n||null,o.onSwipeStart=e||null,o.onSwipeEnd=a||null}function BB(i){var t,o=gt,e=o.document.body;ss.markAsIgnoreScroll(i.sidebarContent),t=is.create(e,null,null,function(t){var e,n,a;i.isOpen()&&10<=t?i.close():!i.isOpen()&&15<=-t&&(e="sidebar",n=["swipeOpen"],(a=o.logClientEvent)&&a(e,n),i.open())}),i.swipeInstance=t,rs.synced("enabled",t.enable,t)}function DB(){bs&&(bs.checked=!0,bs=null),Cs&&(ls.removeClass(Cs,vs),Cs=null)}function MB(){DB()}function jB(){As&&!ks.aborted&&As.abort()}function FB(){var t;Ts.isHidden()?(Ps=!0,Ls.forceAbortOnHide&&(t=Ls.asyncTimeout-(Date.now()-Is),Rs=setTimeout(function(){Ps&&jB()},t))):(Ls.forceAbortOnHide&&clearTimeout(Rs),qB()&&(HB(xs,"unlocked"),js=0,logClientEvent("push.recovered.by.visibility")),Ps=!1)}function qB(){return!As||As.done}function HB(t,e){var n=!1;As&&!As.done&&logClientEvent("multiple.push.channel",[e]),hR.querySelector(".dialog.visible, body.__under-layer")?js<2*Ds&&setTimeout(function(){js++,qB()&&HB(t,"eclipse")},Bs):navigator.cookieEnabled&&Es&&Es.length&&((As=ks.request(function(t,e){var n=gt.location.search,a="/push?st.cmd=PushGatewayCtrl&reqBlocks="+encodeURIComponent("["+t+"]")+"&p_sId="+e;-1!=n.indexOf("st.cmd")&&(-1!=(n=n.substring(n.indexOf("&"))).indexOf("&_prevCmd")&&(n=n.substring(0,n.indexOf("&_prevCmd"))),a+=n,function(t,e){-1!=t.indexOf("UserChat")&&-1==e.indexOf("convId")&&(logClientEvent("push.inconsistent.url"),gt.location.reload())}(t,n));return a}(Es,t),"POST")).xhr.setRequestHeader("need.new.stateId",Os?"1":"0"),As.then(function(){this.response()&&(Os=!0,Ss.processAjaxEnvelope(this.response()),logClientEvent("push.render.success"))},function(){var e;n=!0,this.aborted||(e=this,setTimeout(function(){var t=e.xhr.status;t&&0<t&&logClientEvent("push.connection.error",[t,encodeURIComponent(e.xhr.responseURL)]),qB()&&HB(-1,"error")},Ms),Ms<Bs&&(Ms*=2))}).anyway(function(){if(!n&&!this.aborted&&("1"!=(e=this.xhr).getResponseHeader("push.stop")&&"1"!=e.getResponseHeader("Refresh-Requested"))){var t=this.xhr.getResponseHeader("push.state.id");if(!Ps){if(t==xs){if(Ds<=++js)return void logClientEvent("push.connection.dummy")}else xs=t,js=0;HB(t,"regular")}Ms=Ns}var e}).withToken().send(),Is=Date.now(),Os=!1)}function UB(t,e){this.href=e.href,this.model=t}function VB(){!function(){for(var t=0,e=arguments.length;t<e;t+=5)QB(arguments,t,t+5<e?t+5:e)}(Pl)}function QB(t,e,n){var a=(hR.location&&hR.location.protocol&&"https:"==hR.location.protocol?"https://":"http://")+"odnoklgaru.hit.gemius.pl/_"+(new Date).getTime()+"/redot.gif?";if(0==e&&0==n)a+="l=20&id="+t;else{a+="l=21";for(var i=e;i<n;i++)a+="&id="+t[i]}a+=function(){var t=hR,e=t.location.href,n=Ll||t.referrer||"",a=0;if(!Ll)try{a=t==top.document?1:2,"string"==typeof top.document.referrer&&(n=top.document.referrer)}catch(t){a=3}var i,o="&fr="+a+"&fv="+encodeURIComponent("-")+"&tz="+(new Date).getTimezoneOffset()+"&href="+encodeURIComponent(e.substring(0,499))+"&ref="+encodeURIComponent(n.substring(0,499));return screen&&((i=screen).width&&(o+="&screen="+i.width+"x"+i.height),i.colorDepth&&(o+="&col="+i.colorDepth)),o}();var o=Ol.length,r=new Image;r.src=a,Ol[o]=r}function WB(){for(var t=[].slice.call(hR.getElementsByClassName("promo_i")),e=[].slice.call(hR.getElementsByClassName("promo_img")),n=0,a=t.length;n<a;n+=1)Rl.hasClass(t[n],"__off")&&(t.splice(n,1),--n,--a);this.btns=t,this.slds=e,this.active=0,Nl.touchStartPreview.attach(this.touchStart,this)}function zB(t,e){var n=this;n.root=e,n.isClosed=t.isClosed,n.portalWrapper=hR.querySelector("body > .wrapper"),n.oneYear=31536e6,gt.addEventListener("beforeinstallprompt",function(t){t.preventDefault(),logClientEvent("android.native.banner.shown",[t.platforms]),n.deferredPrompt=t,n.isClosed||n.switchPanelVisibility(!0)})}function XB(t,e){this.root=e,this.portalWrapper=hR.body.getElementsByClassName("wrapper")[0],this.cookieTTL=t.cookieTTL,this.isAddToHomeScreen=t.isAddToHomeScreen,this.lang=t.lang}function GB(t,e){return e.toUpperCase()}function JB(t,e){var n;(e=e||ic)&&(n="string"==typeof t?{errorInfo:t}:t,e===ic&&(ic=null),KB(),e.reject(n))}function YB(t,e){var n;ic&&((n=t.querySelector(".confirm-form"))?(nc=(ec=n).getElementsByClassName("confirm-form_yes")[0],ac=n.getElementsByClassName("confirm-form_no")[0],ec.addEventListener("submit",$B,!1),nc.addEventListener("click",tD,!1),ac.addEventListener("click",eD,!1)):JB("parseConfirmFormError"))}function KB(){ec&&(ec.removeEventListener("submit",$B,!1),nc.removeEventListener("click",tD,!1),ac.removeEventListener("click",eD,!1),ac=nc=ec=null)}function ZB(t){KB();var e=ic;ic=null,e.resolve(t)}function $B(t){t.preventDefault(),ZB(!0)}function tD(t){t.preventDefault(),ZB(!0)}function eD(t){t.preventDefault(),ZB(!1)}function nD(t,e){var n=!!e;this.endpoint=t,this.ajaxTaskData=null,this.hasDialog=n,this.dialogLinkURL=n?e:null,this.processingTask=null}function aD(t){oc.run(t.endpoint,t.ajaxTaskData).then(rD,sD,t)}function iD(t,e){(t?aD:lD)(e)}function oD(t,e){lD(e)}function rD(t,e){var n=e.processingTask;lD(e),n.resolve(t)}function sD(t,e){var n,a,i,o,r;"string"==typeof t&&(n={errorInfo:t}),i="ajax",o=n||t,r=(a=e).processingTask,lD(a),r.reject({from:i,processingError:o})}function lD(t){t.processingTask=null,t.ajaxTaskData=null}function cD(t,e){var n=e.getAttribute("data-end-point-method");n&&_c.push(new uD(e,n,t))}function uD(t,e,n){var a=this,i=gc[mc(e)]||null;a.checkbox=t,a.isChecked=t.checked,a.isProcessing=!1,n=n||{};var o=t.getAttribute("data-location");o&&(n.location=o),a.model=n,i&&i.attach(a.onTriggered,a),a.isInteropIgnore=!1,a.triggeredEvent=i,a.ajaxDialogDoing=bc.create(e,t.getAttribute("data-dialog-url")),a.handleEvent=function(t){t.target===this.checkbox&&(t.preventDefault(),function(t,e){{var n,a,i;e.preventDefault(),t.isProcessing||(t.isProcessing=!0,n=t.checkbox,a=e.target===n?n.checked:!n.checked,t.model.isActive=a,(i=t.ajaxDialogDoing.start(t.model,e.target)).dialogTask?i.dialogTask.then(pD,fD,t):dD(t,a),i.processingTask.then(gD,mD,t))}}(this,t))}.bind(a),yc.clickEvent.attach(a.handleEvent)}function dD(t,e){t.isChecked=e,t.isInteropIgnore=!0,t.triggeredEvent&&t.triggeredEvent.trigger(e),fc(hD,t.checkbox,e)}function hD(t,e){t.checked=e}function pD(t,e){t?dD(e,!e.isChecked):e.isProcessing=!1}function fD(t,e){e.isProcessing=!1,vc.show()}function gD(t,e){switch(e.isProcessing=!1,t.status){case"redirect":dD(e,!e.isChecked),Cc.change(t.redirect);break;case"ok":break;default:t.error&&(dD(e,!e.isChecked),t.error.code!==Sc.dialog.ajaxDialogDoesNotSupport&&vc.show(t.error))}}function mD(t,e){var n;e.isProcessing=!1,dD(e,!e.isChecked),t.processingError?n=t.processingError.errorInfo:t.error&&(n=t.error),vc.show(n)}function vD(t){var e;-1!==kc.indexOf(t)||(e=t.getAttribute("data-end-point-method"))&&(kc.push(t),_c.push(new uD(t,e)))}function yD(){pc(hR.getElementsByClassName("js-ajax-checkbox"),vD)}function bD(t){Ic(Pc,CD,null,t)}function CD(t,e,n,a){Ec.switchClass(t,a,xc)}function SD(t){-1===Pc.indexOf(t)&&(0===Pc.length&&Ac.attach(bD),Pc.push(t))}function kD(){Ic(hR.getElementsByClassName("js-user-invisible-watcher"),SD)}function _D(t){return!t&&qc||(qc=hR.getElementsByClassName(Uc))}function wD(){jc=jc||hR.getElementsByClassName("wrapper")[0],Fc=hR.getElementById("boxPage"),hR.getElementById("ep-stub")}function TD(t,e){var n=e.height,a=e.fullheightNodesWrapper,i=Lc.calc().scrollTop,o=a.getBoundingClientRect().bottom+i,r=t.getBoundingClientRect().bottom+i,s=ID(a,"borderWidth"),l=(e.bottomMargin||0)+s[0]+s[2],c=o-r;c&&c<=Wc&&(l+=ID(t,"margin")[2]),t.style.minHeight=(t.offsetHeight+(n-o-(l||0)))/(Hc||1)+"px"}function ID(t,e){var n,a=getComputedStyle(t),i=[];if(a){var o=a[e].split(" "),r=o.length;if(r&&("0px"!==o[0]||"0"!==o[0])){for(var s=0;s<r;s++)i.push((n=o[s],Math.round(parseFloat(n))));return zc[i.length-1](i)}}return Qc}function ED(t,e){var n={height:t,fullheightNodesWrapper:e};if(Rc(qc,function(t){if("equal"!==t.getAttribute("data-fullHMode"))return!1})){Hc=qc.length;for(var a=0,i=qc.length;a<i;a++)TD(qc[a],n)}else Hc=1,TD(qc[qc.length-1],n)}function AD(t,e){var n,a,i=!!i&&!Bc.hasClass(i,"dsn");!i&&jc&&qc&&qc.length&&(n=(e=e&&e.height)||Lc.calc().height,!((a=jc.offsetHeight)<n)&&Mc.get("enabled")&&Fc&&a>Fc.offsetHeight?ED(a,Fc):ED(n,jc)),Bc.removeClass(hR.body,"js-full-height-process")}function xD(){wD(),Rc(_D(),function(t){var e=t.style;parseInt(e.minHeight,10)&&(e.minHeight=0)}),AD()}function PD(){var t=Kc?Kc.offsetHeight:0;Zc.offsetHeight>gt.innerHeight-Yc.toolbar.height-t?Zc.style.paddingBottom=t+"px":Zc.style.removeProperty("paddingBottom"),Kc.style.left=Zc.getBoundingClientRect().left+"px",Kc.style.width=Zc.offsetWidth+"px"}function OD(t){for(var e,n=0,a=0,i=t.length;a<i;a++){var o=t[a];o&&n<(e=o.offsetHeight)&&(n=e)}this.collection=t,this.length=t.length,this.maxHeight=n}function LD(t){"mousedown"===t.type&&t.preventDefault();var e=iu.firstTouch(t);this.touchInitialPosX=this.actualTouchPosX=e.x,this.touchInitialPosY=this.actualTouchPosY=e.y}function RD(t){this._moveActive&&(t.preventDefault(),t.stopPropagation())}function ND(t){var e,n,a=this,i=iu.firstTouch(t),o=i.x,r=i.y,s=a.node,l=a.actualTouchPosX-o;if(clearTimeout(a.isActiveTimeoutID),a.moveEvents+=1,e=Math.abs(a.touchInitialPosX-o),n=Math.abs(a.touchInitialPosY-r),a._moveActive||20<e&&n/e<.4){if(t.stopPropagation(),t.preventDefault(),20<n&&(a._vectorY=!0,tu.addClass(s,pu)),a._moveActive=Date.now(),a.actualTouchPosX=o,a.actualTouchPosY=r,a.isActiveTimeoutID=setTimeout(function(){qD(t,a),a._moveActive=!1},300),a.touchInitialPosX>o&&s.scrollLeft+s.offsetWidth>=s.scrollWidth||a.touchInitialPosX<o&&s.scrollLeft<=0)return a.onEdge=!0;a.onEdge=!1,a._vectorY||au.run(function(){s.scrollLeft+=l})}}function BD(t){var e,n,a=this,i=a.node,o=i.offsetWidth,r=a.stepCoeficient,s=a.slideWidth,l=a.isCentered?MD(s,o):1,c=i.scrollLeft/s+(1-l),u=parseFloat((c%1).toFixed(2)),d=Math.floor(c);t.stopPropagation(),clearTimeout(a.isActiveTimeoutID),a.touchEndCoords=iu.firstTouch(t),e=a.touchInitialPosX-a.touchEndCoords.x,tu.removeClass(i,pu),setTimeout(function(){a._moveActive=!1},300),a._vectorY=!1,a.moveEvents=0,a.onEdge||(e<0?r=1-r:i.scrollLeft+o>=i.scrollWidth&&(r=0),r<u&&d++,n={time:125,from:i.scrollLeft,to:s*(d-1)+s*l},nu.run(i,jD,n),FD(a,d))}function DD(t){var e=iu.firstTouch(t).y;clearTimeout(this.isActiveTimeoutID),Math.abs(this.touchInitialPosY-e)<20&&!this.onEdge&&qD(t,this),tu.removeClass(this.node,pu)}function MD(t,e){var n=t/e;return 1-(1-n)/n/2}function jD(t,e){t.scrollLeft=e}function FD(t,e){for(var n,a,i=Math.min(t.slidesInView+e,t.length)-1,o=e;o<=i;o++)n=t.node.children[o],t.onShowCallback(n),n.okSlideIsShowed||(a=n,su.eventTracking.trigger({target:a,action:lu.bannerActionType.SHOWN_ON_SCROLL,onlyOnce:!0}),n.okSlideIsShowed=!0)}function qD(t,e,n){var a,i,o,r,s,l,c,u,d,h;e.moveEvents<=8&&(i=(a=e.node).offsetWidth,o=a.scrollLeft,r=e.slideWidth,s=e.isCentered?MD(r,i):1,c=+((l=a.scrollLeft/r+(1-s))%1).toFixed(2),u=Math.floor(l)+(c>e.stepCoeficient?1:0),d=e.touchInitialPosX||o,h=1,n&&(qD.isThrottled||(qD.isThrottled=!0,setTimeout(function(){qD.isThrottled=!1},500))),(iu.firstTouch(t).x||e.scrollInitialPos)>d&&(h=-1),nu.run(a,jD,{time:125,from:a.scrollLeft,to:r*(u-1+h)+r*s}),e.moveEvents=0,FD(e,u))}function HD(t){this.node=t.body,this.length=t.body.children.length,this.stepCoeficient=t.stepCoeficient||.25,this.showCoeficient=t.showCoeficient||.75,this.isCentered=t.isCentered||!1,this.onShowCallback=t.onShowCallback||fu,this.onClickCallback=t.onClickCallback||fu,this.touchInitialPosX=0,this.touchInitialPosY=0,this.actualTouchPosX=0,this.actualTouchPosY=0,this.touchEndCoords=0,this.scrollInitialPos=!1,this.moveEvents=0,this._moveActive=!1,this._vectorY=!1,this.isScrolledTimeoutID=null,this.isActiveTimeoutID=null,this.recalcCallbackId=null,t.init&&this.init()}function UD(t,e){new HD({body:e,init:!0,isCentered:(t=t||{}).isCentered,stepCoeficient:parseFloat(t.stepCoeficient),showCoeficient:parseFloat(t.showCoeficient)})}function VD(t){var e;t&&(e=gu.request(t).then(function(t){var e=t.responseText;e&&0!==e.length&&vu(e)}).send(),yu.sended.trigger(e))}function QD(n){var a=Date.now(),i=0;n.addEventListener("click",function t(e){0!==i?(n.removeEventListener("click",t),Date.now()-a<300&&(e.stopPropagation(),e.preventDefault())):i=1})}function WD(t){var e=t?"addEventListener":"removeEventListener";hR[e]("touchstart",ku),hR[e]("touchmove",wu),hR[e]("touchend",_u),hR[e]("touchcancel",Tu)}function zD(t,e){var n=hR.createElement("iframe"),a=n.style;return n.src=t,a.border="none",a.width="1px",a.height="1px",e&&(n.onload=e),hR.body.appendChild(n),n}function XD(){this.count=0,this.stack=[],this.dataStorage=[]}function GD(t,e){this.node=e,this.isProcessed=!1,this.wasJoin=!1,this.ajaxDialogDoing=Qu.create(e.getAttribute("data-end-point-method"),e.getAttribute("data-dialog-url"));var n=e.getElementsByTagName("a");0!==n.length&&-1!==n[0].href.indexOf("#js-dlg")&&(n[0].href=0,n[0].removeAttribute("href"))}function JD(t,e){t?$D(e):e.isProcessed=!1}function YD(t,e){e.isProcessed=!1,t&&t.errorInfo&&"parseConfirmFormError"===t.errorInfo||Vu.show()}function KD(t,e){e.isProcessed=!1,t.error?(tM(e),t.error.code!==zu.dialog.ajaxDialogDoesNotSupport&&Vu.show(t.error)):("problem"===t.status&&Vu.show(t.problem.description),e.node.querySelector("a").removeAttribute("href"),e.wasJoin=!0)}function ZD(t,e){var n;e.isProcessed=!1,tM(e),t.processingError?n=t.processingError.errorInfo:t.error&&(n=t.error),Vu.show(n)}function $D(t){var e=t.node.getElementsByClassName(Ju)[0];e&&(Wu.removeClass(e,Yu),Wu.addClass(e,Ku))}function tM(t){var e=t.node.getElementsByClassName(Ju)[0];e&&(Wu.removeClass(e,Ku),Wu.addClass(e,Yu))}function eM(t,e){this.node=e,this.isProcessed=!1,this.ajaxDialogDoing=$u.create(e.getAttribute("data-end-point-method"),null)}function nM(t,e){var n,a;if(e.isProcessed=!1,(t.error||t.problem)&&(iM(e),Zu.show(t.error||t.problem.description)),t.chatId&&(n=t.chatId,hR.getElementById("js-invite-data").setAttribute("data-chat-id",n)),t.searchLink)for(var i=hR.querySelectorAll("#boxPage form.search, #live-search form.search"),o=0;o<i.length;o++){i[o].setAttribute("data-endpoint",t.searchLink)}if(t.backButtonLink&&(hR.getElementById("js-title-back").href=t.backButtonLink),t.backButtonLabel&&(hR.querySelector("#js-title-back .ic_tx").innerHTML=t.backButtonLabel),t.inviteeId)for(var r=hR.querySelectorAll('.js-ajax-join-to-chat[data-invitee-id="'+t.inviteeId+'"]'),o=0;o<r.length;o++){var s=r[o],l=s.parentNode;l.removeChild(s);var c=l.querySelector(".js-invite-tick");td.removeClass(c,"dsn")}t.originatorId&&(a=t.originatorId,hR.getElementById("js-invite-data").setAttribute("data-originator-id",a))}function aM(t,e){var n;e.isProcessed=!1,iM(e),t.processingError?n=t.processingError.errorInfo:t.error&&(n=t.error),Zu.show(n)}function iM(t){var e=t.node.querySelector(nd);e&&(td.removeClass(e,id),td.addClass(e,ad))}function oM(t){od.set("isShowedInViewport",sM(t))}function rM(t){cd.request(oM,t)}function sM(t){return(t||ld.calc()).scrollTop-ud<rd.sidebar.getOffsetHeight()}function lM(){dd.set("isCenterPortalContentEnabled",dd.get("isCenterPortalContentConfigure")&&!fd.get("isShowedInViewport"))}function cM(){var t=bd&&810<gt.innerWidth?Cd:Sd;t!==kd&&(kd.deactivate(),(kd=t).activate())}function uM(){cM()}function dM(){_d.set("showToolbarMenuEnable",_d.get("showToolbarMenuConfigure")&&!Td.get("isShowedInViewport"))}function hM(t){var e,n;fM(t),t.okAreaExpand||(t.okAreaExpand=!0,e=t._ok_onresize=function(){pM(t)},n=t._ok_oninput=function(t){pM(t.target)},Bd.attachUntilRendering(Rd.resize,e),t.addEventListener("input",n,!1)),requestAnimationFrame(t._ok_onresize)}function pM(t){var e=t.style,n=e.height;e.height="";var a,i,o,r,s,l,c,u,d,h=t.scrollHeight;h!==t.okAreaYScroll?(r=(t.okAreaYScroll=h)-t.clientHeight,s=t.offsetHeight-t.okAreaOuterSpace+r,l=t.okAreaInnerSpace,c=s,(i=t.getAttribute(jd))?(a=parseInt(i,10)*t.okAreaLineHeight+l)<s&&(c=a):(o=t.getAttribute(Md))&&(a=parseInt(o,10)+l)<s&&(c=a),u={height:c,rows:(h-l)/t.okAreaLineHeight},d=t.dispatchEvent(new CustomEvent(Fd,{detail:u})),t.okAreaData=u,d&&(e.height=c+"px")):e.height=n}function fM(t){var e,n=gt.getComputedStyle(t),a=t.value;t.value="",t.okAreaOriginalSize=t.offsetHeight,t.okAreaOuterSpace=0,t.okAreaInnerSpace=0,t.okAreaYScroll=t.scrollHeight,"border-box"===Nd.get(t)?t.okAreaInnerSpace=parseInt(n.paddingTop,10)+parseInt(n.paddingBottom,10):t.okAreaOuterSpace=t.okAreaOriginalSize-parseInt(n.height,10),t.getAttribute(jd)&&(e="normal"===(e=n.lineHeight)?parseInt(n.fontSize,10)*Dd:parseFloat(e),t.okAreaLineHeight=Math.round(e)),t.value=a}function gM(t,e){var n,a=(this.domRoot=e).querySelector('input[type="checkbox"]:checked');null!=a?mM(e,a):(n=e.querySelector('[hierarchy-parent=""]').querySelector("input[type=checkbox]"),vM(e,n),n.checked=!0),Hd.removeClass(e,"dsn"),this.toPublic=hR.getElementById("field_toPublic")}function mM(n,t){var e=t.id;qd(n.querySelectorAll("[hierarchy-parent="+e+"]"),function(t){var e=t.querySelector("input[type=checkbox]");Hd.addClass(t,"dsn"),e.checked=!1,vM(n,e)})}function vM(t,e){var n=t.querySelectorAll("[hierarchy-parent="+e.id+"]");0<n.length&&qd(n,function(){mM(t,e)})}function yM(t){this.type=t.type,this.group=t.group}function bM(){return gt.pageCtx||{}}function CM(t){if(t){var e=t.okAreaOriginalSize;return null!=e&&(t.style.height=e+"px"),nh.expand(t)}}function SM(t){var e="string"==typeof t?hR.querySelector(t):t;e&&e.scrollIntoView()}function kM(t){var e,n,a,h,i=bM().focusOnSubmit,p=t.form;if(ch||p.okAvoidAjax)return!1;ih.fastPostingInitiated.trigger(),ch=!0,e=(p=Kd.parentBySelector(p,"form")).action,n=p.method||hh,a=Zd.data(p),Yd.addClass(p,gh);var f,o,r=th.request(e,n,a),s=Kd.parentBySelector(p,".dlist");return s&&!Yd.hasClass(s,"js-complete-bot")&&r.header("X-Redirect-Required","1"),Xd.messaging&&(hR.querySelector("#chat-pager-bottom .js-load-more-bot")&&r.header("X-Has-More-Read","1"),(o=Jd.getScrollContainer())&&(f=o.scrollHeight-o.scrollTop-o.clientHeight)),r.then(function(t){Xd.Toast&&Xd.Toast.hide(),t.getResponseHeader(sh.ERROR_MESSAGE_HEADER),h="1"==t.getResponseHeader("X-Gif-Attach-Stop"),lh(this.response(),{onEnvelope:function(t,e,n,a){e===Xd.OP_APPEND&&setTimeout(function(){var t=hR.querySelector("#messages-pager-bottom, #comments-pager-bottom .pager"),e=Xd.messaging;a&&Yd.addClass(a,fh),i&&!uh&&SM(dh),t&&!Yd.hasClass(pR,"dscs")?SM(t):e&&e.config&&!e.config().pushSendHintEnabled&&e.scrollDown()},1)},onComplete:function(){var t=hR.querySelector([dh," ",ph].join("")),e=t?t.form.elements:[],n=e.field_edit,a=n?n.value:mt,i=e.field_rpl?e.field_rpl.value:mt,o=Xd.messaging;CM(t),ih.fastPostingDone.trigger();var r,s,l,c,u,d=hR.getElementById("fscaid");d&&d.childNodes.length||h||(Xd.runBubbleCollapse&&Xd.runBubbleCollapse(!0),ih.fastPostingSucceed.trigger({scrollBeforeSend:f}),"on"===a?(r=(r=e.field_msgInx)||e.field_cmntIdKey,(s=hR.getElementById("ta-emul"))?Xd.editMessageWithSmiles(s):t.parentNode.className="uform_i",r&&(n.value="off"),(l=e.field_ofc)&&(l.disabled=!1)):o&&i&&((c=p.querySelector(".reply"))&&!c.querySelector(".ic-err")&&Yd.clear(c),e.field_rpl.value="off",e.field_cmntIdKey.value=""),t&&(t.value=""),o&&oh.iOS&&((u=Jd.find.messagesList(!0))&&u.childNodes.length&&u.lastChild.querySelector(".attach_ph, .attach_ph-single")&&Yd.addClass(u.lastChild,"__js-last-attached")))}})}).anyway(function(){var t=this.xhr.getResponseHeader(sh.ERROR_MESSAGE_HEADER);t&&t.length&&(p.setAttribute("data-submitted",""),ih.fastPostingDone.trigger()),$d(hR.querySelectorAll(dh),function(t){Yd.removeClass(t,gh)}),ch=!1,Gd.finished.trigger(p)}).withToken().send(),!0}function _M(t){var e=t.tagName;return("INPUT"===e||"BUTTON"===e)&&"submit"===t.type}function wM(){Bh&&Bh.redirected||Oh.show()}function TM(t,e){this.init(t,e)}function IM(t){this._tailFetchesLeft=void 0!==t.autoFetchCount?t.autoFetchCount:3,this._headFetchesLeft=void 0!==t.headFetchCount?t.headFetchCount:3,this._initialRepeatedFetches=void 0!==t.repeatedFetchCount?t.repeatedFetchCount:0,this._repeatedFetchesLeft=this._initialRepeatedFetches,this._repeatedFetching=!1}function EM(t){vp.getState().url=t,vp.accountStateUpdate()}function AM(I){var t=(I=I||{}).dom,m=I.pageLoad,v=I.preservePosition,y=I.locationHashPosition,n=I.prependToHead,a=I.dynamicCounters,b=I.hasExternalNotify,E=!1,C=!1;function S(f,g,m,v,y,b,C){var S,t,k,_,w,e;function T(){ip(m)[xp]=null,v(qp,y,f,b)}(n||f)&&(S=!1,t=ip(m),_=f?Pp:Op,(w=t[k=f?Ap:Ep])&&!1!==v(jp,y,f,b)&&(t[xp]||(e=ap.request(w),ep.loadingInitiated.trigger({atBottom:f}),t[xp]=e.xhr,a&&e.xhr.setRequestHeader("X-Update-Feed-Counter","1"),e.then(function(){m.offsetParent&&op(rp.createDomTree(this.response()).childNodes,function(t){if(t){var e,n=t.getAttribute("action"),a=t.getAttribute("target-id"),i=t.getAttribute("target-qs"),o=t.childNodes,r=!(!a&&!i)&&null!==(e=hR.getElementById(a)||(i?hR.querySelector(i):null)),s=t.querySelectorAll("script");switch(setTimeout(function(){op(s,fp.run)},0),n){case"append":case"prepend":var l,c,u,d=t.getAttribute("append"===n?Pp:Op),h=null!==d&&0<d.length;function p(){np.trigger({element:t,atBottom:f}),LM(n,e),T(),"horizontal"===C&&I.showScrollHint&&!E&&(!r||m.offsetWidth>e.innerWidth)&&setTimeout(function(){E||(E=!0,r&&lp.addClass(e,"scroll-hint"))},100)}v(Fp,y,f,b,o,h),0!==o.length?(S=!0,r&&PM(e,d,k,_),ip(e)[Lp]=w,l=!1,c=0,u=hR.getElementsByTagName(nf)[0],e.lastChild&&e.lastChild.classList.contains(ef)&&u&&(l=!0,c=parseInt(u.getAttribute(af),10)||0),l&&c?setTimeout(function(){g.addData(rf.slice.call(o),f,p)},c):g.addData(rf.slice.call(o),f,p)):r&&PM(e,null,k,_);break;case"content":r&&(lp.clear(e),e.appendChild(sp(t)),LM(n,e));break;case"remove":r&&lp.remove(e);break;case"attribute":r&&e.setAttribute(t.getAttribute("name"),t.getAttribute("value"));break;case"special":wp(t.outerHTML)}}})},function(){v(Hp,y,f,b)}).anyway(function(){S||T()}),e.withToken().send())))}function e(h){var p,f=hp.matches(h,Np),t=h.getElementsByClassName(Rp),e=h.getElementsByClassName(Rp).length,n=lp.hasClass(h,"__manual-loading"),g=hp.matches(h,".or-hor")?"horizontal":"vertical",a=ip(h),i=h.querySelectorAll(Bp);if(i.length+t.length!==0){if(n&&(I.autoFetchCount=0,I.repeatedFetchCount=0,I.headFetchCount=0),p=cp.create(I),0<e){for(var o,r=[],s=0;s<e;s++){o=t[s];for(var l=0,c=i.length;l<c;l++){var u=i[l];o.contains(u)||r.push(u)}}i=r}else i=h.querySelectorAll(Bp);rf.push.apply(I.lists,rf.slice.call(i)),a.fetchCountInstance=p,a.manualLoading=n||!1,"horizontal"==g&&op(i,function(t){ip(t).container=h,OM(0,0,t)}),lp.removeClass(h,zp),lp.addClass(h,Wp),n||0===i.length||"true"===h.getAttribute("data-disabled")?(lp.addClass(h,Kp),lp.addClass(h,Zp),lp.removeClass(h,Gp),lp.removeClass(h,Xp)):op(i,function(u){var t;u.ignoreFirstLoad=u.getAttribute("ignoreFirstLoad");var e=RM.bind(this,u),d=ip(u);d.checkLoadingUrlsEvent=e,d.cardsBeforePreload=u.getAttribute("data-cardsBeforePreload"),Cp.updateLoadingUrls.attach(e),t=tp.create(u,{direction:g,useNativeScroll:!0,nativeScrollingFixEnabled:!0,bottomThreshold:"horizontal"==g?function(t,e,n,a){return n+a-e}:function(t,e,n,a){return n+a-e*sf},topThreshold:function(t,e,n){return n+e},onInit:function(a){var t=bp.toolbar.height;np.attach(a.checkEdge),RM(u),d[Lp]=gt.location.href,a.on("at-edge",function(t,e,n){p.hasMore(n)&&!u.ignoreFirstLoad&&(n||0<=a.getScrollPosition()&&a.getScrollPosition()<=450||m)&&!C&&S(n,a,u,xM,h,!1,g)});var e="vertical"==g?function(t,e,n){ip(u).listMiddle=Math.round(lp.getTotalOffsetLeft(u)+u.offsetWidth/2)}:OM;a.on("update-dimensions",e);var n,i="data-avpos";if(v&&!u.hasAttribute(i)){u.setAttribute(i,"1");var o=0;if(y)if((r=gt.location.hash)&&0<r.length&&0===r.indexOf("#_s-")){var r=r.substring(4);if(b?1<o:0<o)return;var s,l=hR.getElementById(r);(l=l||hR.getElementsByName(r)[0])&&(hp.matches(l,".it")||(l=hp.parentBySelector(l,".it")),l&&(yp.get("isPositionFixed")?(s=l.getBoundingClientRect().top,hR.body.scrollTop+=s-t,t+1<s&&(u.scrollTop=s-t)):l.scrollIntoView()))}a.on("scroll",function(){o++,n&&clearTimeout(n),n=setTimeout(c,200)})}function c(){!function(t,e){var n=e.container,a=ip(n).listMiddle,i=e.hasExternalNotify,o=e.locationHashPosition,r=e.anchorAttributeNames,s=e.hasEntryAnchors;if(hR.elementFromPoint&&a){var l,c,u=hR.elementFromPoint(a,i?150:0);if(u&&!hp.matches(u,".it")&&(u=hp.parentBySelector(u,".it")),u){if(c=ip(n)[Lp]){var d,h=null;if(o&&(op(r,function(t){if(h=u.getAttribute(t))return h}),h||(d=u.querySelector("a[name]"))&&(h=d.getAttribute("name")),h&&(-1<(l=c.indexOf("#"))&&(c=c.substring(0,l)),c+="#_s-"+h,s=!0)),of<t.getScrollPosition()&&(!s||h)&&EM(c),i)try{gt.external.notify("replace-url:"+c)}catch(t){}}}else{var p=t.getScrollPosition(),f=t.getViewportSize();p<f&&(c=gt.location.href,-1<(l=c.indexOf("#"))&&"#lst"!=c.substring(l)&&EM(c=c.substring(0,l)))}}}(a,{container:u,hasExternalNotify:b,locationHashPosition:y,anchorAttributeNames:["name","id"],hasEntryAnchors:!1}),n=null}f||(Tp=function(t){var e=t.target;if(hp.matches(e,$p)&&hp.isChildOf(e,h))return S(hp.matches(e,tf)||null!==hp.parentBySelector(e,tf),a,u,xM,h,!0,g),!(u.ignoreFirstLoad=!1)}),setTimeout(function(){a.checkEdge(!0)},0)}}),u.okFetchScroll=t}),lp.removeClass(h,Dp),p.hasMore(!0)||(lp.removeClass(h,Gp),lp.addClass(h,Yp)),p.hasMore(!1)||(lp.removeClass(h,Xp),lp.addClass(h,Jp))}}for(var i=0,o=t.length;i<o;i++)e(t[i])}function xM(t,e,n,a,i,o){var r=ip(e),s=r.manualLoading,l=r.fetchCountInstance;switch(t){case jp:if(!a&&s)return!1;lp.addClass(e,Up),lp.addClass(e,n?Qp:Vp);break;case Fp:var c=n?Yp:Jp,u=n?Gp:Xp;l.decrement(n),s||l.hasMore(n)||(lp.removeClass(e,u),lp.addClass(e,c)),o&&i&&i.length?(n||$h.messaging)&&a&&(l.setRepeatedFetching(!0),l.reset(!0),l.hasMore(n)&&(lp.removeClass(e,Yp),lp.addClass(e,Gp),r.manualLoading=!1)):(lp.removeClass(e,c),lp.removeClass(e,u),lp.addClass(e,n?Zp:Kp));break;case Hp:l.reset(!0),l.reset(!1),r.manualLoading=!0,lp.addClass(e,Jp),lp.addClass(e,Yp),lp.removeClass(e,"js-dlb");break;case qp:setTimeout(function(){lp.removeClass(e,Up),lp.removeClass(e,Vp),lp.removeClass(e,Qp)},100)}}function PM(t,e,n,a){(ip(t)[n]=e)?t.setAttribute(a,e):t.removeAttribute(a)}function OM(t,e,n){var a,i,o,r,s;!lp.hasClass(n,"grid")||0<(a=n.children.length)&&((i=ip(n).colData)||(o=gt.getComputedStyle(n,null),r=parseInt(o[dp()],10),s=parseInt(n.getAttribute("data-rows")||1,10),isNaN(r)||isNaN(s)||(i={width:r,rowCount:s},ip(n).colData=i)),i&&(n.style.width=i.width*Math.ceil(a/i.rowCount)+"px"))}function LM(t,e){"append"!==t&&"prepend"!==t||(ep.messageLoaded.trigger({direction:t}),up.items.added.trigger({container:e,operation:t}),Sp.process())}function RM(t){var e=ip(t);e[Ap]=t.getAttribute(Pp),e[Ep]=t.getAttribute(Op)}function NM(){Ip.dom=hR.querySelectorAll(Mp),AM(Ip)}function BM(){DM(Ip),NM(),_p.recalculateStubs()}function DM(t){var e=t.lists;e&&op(e,function(t){var e=t.okFetchScroll;e&&(np.detach(e.checkEdge),e.destructor()),Cp.updateLoadingUrls.detach(ip(t).checkLoadingUrlsEvent)}),Tp=null,t.initOnAutoLoading&&up.items.added.detach(NM),t.liveSearchOn&&kp.updated.detach(NM),t.lists=[]}function MM(t){return Tp&&Tp(t)}function jM(){return cf||(lf=gt.FileReader||gt.FileReaderSync,cf=!0),lf}function FM(t,e){var n=e.uploadOperation;n.onSingleItemUploaded&&n.onSingleItemUploaded.call(e.uploadOperationHooksCtx,t),e.currentFileIndex<e.fileQueueSize-1?(e.currentFileIndex+=1,qM(e)):e.resultTask.done||e.resultTask.resolve(t)}function qM(t){var e,n,a,i,o=t.concreteUploadModule,r=t.uploadOperation,s=r.files||r.fileInput.files,l=t.uploadOperationHooksCtx;t.resultTask.rejected||(e=t.currentFileIndex,n=r.uploadData,a=ff.isArray(n)?n[e]:n,o.upload(s[e],null,a,t).then(FM,HM,t),r.onPrepareUploadContainer&&r.onPrepareUploadContainer.call(l),r.onPreviewCreate&&(i=URL.createObjectURL(s[e]),r.onPreviewCreate.call(l,i),pf.rendering.attachOnce(function(){URL.revokeObjectURL(i)})))}function HM(t,e){e.resultTask.reject(t)}function UM(t,e,n,a,i){this.resultTask=t,this.uploadOperation=e,this.currentFileIndex=0,this.fileQueueSize=n,this.uploadOperationHooksCtx=a,this.concreteUploadModule=i}function VM(t,e){"ok"===t.status?(e.uploadSuccessAdaptee=t.uploadSuccessAdaptee,XM(e.file,t.uploadUrl,e)):e.task.reject(yf.createError(t.error,"networkAnswer",bf,t))}function QM(t,e){e.task.reject(yf.createError("","network",bf))}function WM(t,e){var n=e.task;n.currentTask=null;var a=e.uploadSuccessAdaptee,i=JSON.parse(this.response());i.error?n.reject(yf.createError(a.error,"networkAnswer","uploadPhoto",i)):n.resolve({photoUrl:a.photoUrl,photoId:a.photoId,uploadData:i[0],availableForUpload:a.availableForUpload})}function zM(t,e){var n=e.task;n.currentTask=null,n.reject(yf.createError("","network","uploadPhoto"))}function XM(t,e,n){var a=gf.request(e,"POST").attachFile(t).then(WM,zM,n).setExternal();n.progressListener&&a.xhr.upload.addEventListener("progress",n.progressListener,!1),n.task.currentTask=a.send()}function GM(t){return Math.ceil(t.loaded/t.total*100)+"%"}function JM(t){hR.getElementsByClassName("js-ui-state")[0].className="js-ui-state "+t}function YM(){JM("__complete");var t=hR.querySelector(".js-ui-state_element.__complete .js-upload-dyn-label"),e=lj(Uf()).toString();t.setAttribute("data-photos-uploading",e);var n=hR.getElementById("upload_file_input");n&&(n.value="")}function KM(t){if(!(Nf&&t&&t.isManualReject)){if(t.data){var e=Df["errorType-error_"+t.data.error];if(e)return Ef.show(e),void logClientEvent("multi.photo.upload.known.failure",[e])}Ef.show(Df.commonProblem),logClientEvent("multi.photo.upload.common.failure")}}function ZM(){return hR.querySelector(".js-ui-state_element.__complete .base-button[data-view=fileUpload], .js-ui-state_element.__complete .base-button_target[data-view=fileUpload]")}function $M(){Ef.show(Bf),kf.addClass(ZM(),"dsn")}function tj(){var t=Uf(),e=t.getElementsByClassName("js-clone-source")[0].cloneNode(!0);kf.addClass(e,"js-pphoto-candidate"),kf.removeClass(e,"js-clone-source"),kf.removeClass(e,"dsn"),t.appendChild(e),kf.removeClass(t,"dsn"),JM("__loading")}function ej(){Ef.show(Df.commonProblem),logClientEvent("multi.photo.upload.common.failure")}function nj(t){var n,a,e,i,o,r=Uf();r&&(Nf.rejected||(n=r.lastChild,(a=n.getElementsByClassName("js-upload-target")[0])&&(i=(e=t).photoId+","+e.uploadData.token,(o=hR.getElementById("field_pp_tokens")).value?o.value+=";"+i:o.value=i,Uf().lastChild.setAttribute("data-photo-id",i.split(",")[0]),xf.saveSinglePhoto(t.photoId,Ff,t.uploadData.token,qf,Hf).then(function(t){var e,n;n=a,(e=t)&&e.success&&(n.outerHTML=e.html)},ej).anyway(function(){var t,e;n&&((t=n.getElementsByClassName("file-progressbar")[0])&&kf.remove(t),(e=n.getElementsByClassName("oact")[0])&&kf.removeClass(e,"dsn"))}))))}function aj(t){Uf().lastChild.querySelector(".js-upload-target").style.backgroundImage="url("+t+")"}function ij(t){var e=Uf();e&&If.showProgress(t,e.lastChild.getElementsByClassName("file-progressbar")[0])}function oj(t,e,n){return t.replace(new RegExp(e,"g"),n)}function rj(t,e){if(n=!1,Af(t.files,function(t){t.size/1024/1024>jf&&(n=!0)}),n)return Ef.show(Df.singleFileSizeViolated),void logClientEvent("multi.photo.upload.size.violated");var n;Nf=wf.uploadMultiple({fileInput:t,uploadData:e,onLimitViolation:$M,onPrepareUploadContainer:tj,alreadyUploaded:lj(Uf()),uploadLimit:Mf,onSingleItemUploaded:nj,onPreviewCreate:aj,progressListener:ij},Tf).then(YM,KM);var a=Math.min(t.files.length,Mf).toString();hR.querySelector(".js-ui-state_element.__loading .js-upload-dyn-label").setAttribute("data-photos-uploading",a)}function sj(){var o="",t=hR.querySelectorAll(".album-pack_actions");Af(t,function(t){var e=t.getElementsByClassName("xpnd")[0],n=e?encodeURIComponent(e.value):"",a=t.querySelector(".drop-down_opener .toggled-button_item-link"),i=a?JSON.parse(a.getAttribute("data-model")):JSON.parse(t.getAttribute("data-model"));i&&(o+=i.photoId+","+i.entityId+","+n+";")}),hR.getElementById("field_ptamt").value=o}function lj(t){return t.getElementsByClassName("js-pphoto-candidate").length}function cj(){hR.getElementById("field_pp_tokens").value=""}function uj(){return hR.getElementsByClassName("album-pack_form")[0]}function dj(t){ag.change(t)}function hj(t,e){var n=rg.response();dj(n||e),rg=null}function pj(t,e){dj(e),rg=null}function fj(t,e,n,a,i){tg.addClass(t,"ld"),tg.addClass(hR.body,"js-sm-upldng"),rg=eg.request(e,"POST").attachFile(n).then(hj,pj,a).setExternal().send(),i.parentNode&&i.parentNode.removeChild(i)}function gj(t,e){this.form=e}function mj(){pg&&(pg.disabled=!1)}function vj(){pg&&(pg.disabled=!0)}function yj(t,e){this.model=t,this.dom=gg.byDataId(e)}function bj(){var t=xg,e=Pg;t===this&&(Pg=xg=null,t.rejected?e.reject():e.resolve())}function Cj(){-1!==Og&&Lg.removeCallback(Og),null!==xg&&(xg.abort(),xg=null),null!==Pg&&(Pg.reject(),Pg=null)}function Sj(t,e,n){Og=-1;var a="global"===n.type,i=Ig.replaceParams(t,{_searchToolbarMode:a&&kg.get("isToolbarSearchMode"),_searchFieldId:n.inputId,_searchQueryType:n.queryType}).replace("__OK_QUERY__",encodeURIComponent(e));Rg.data.searchFrom=n.from,Rg.keepScroll=!0,a&&kg.get("isGlobalSearchState")||!a&&kg.get("isSearchResultState")?Sg.replace(i,null,Rg):Sg.change(i,null,Rg)}function kj(){}function _j(t){Mg.set("clientGlobalSearchQuery",t)}function wj(t){Mg.set("isGlobalSearchOn",t)}function Tj(){Ej(this)}function Ij(){Ej(this)}function Ej(t){var e=Mg.get("globalSearchQuery");t._setQuery(e,!0),e||Mg.get("isGlobalSearchState")||(t.state.set("isActive",!1),t.input.blur())}function Aj(t){this._setQuery(t,!0)}function xj(t,e){this._init(t,e)}function Pj(t){Ug.allowDefault(t),this.state.get("isActive")||(this.state.set("isActive",!0),this._runSearch(!0,!0))}function Oj(t){return t.state.get("isActive")&&!Kg.get("isGlobalSearchState")}function Lj(t){Oj(this)&&this._saveAndResetGlobalScroll(),Jg.switchClass(Yg.getWrapper(),t,"__global-search-active"),Nj(this)}function Rj(t){Nj(this)}function Nj(t){Jg.switchClass(hR.body,Oj(t),"__global-search-empty-mode")}function Bj(t,e){this._init(t,e)}function Dj(t,e){this._init(t,e)}function Mj(t){this.input.value=t,nm.switchClass(this.inputRoot,t,"__active")}function jj(t){this.input.value=t}function Fj(t,e){this._init(t,e)}function qj(t,e){this._init(t,e)}function Hj(t,e){hm.switchClass(e.inputRoot,t,"__active"),cm.set("isSearchFieldActive",t)}function Uj(t){var e,n;t&&(Hj(t,this),e=this,n=Date.now(),(e.state.get("lastTouchStamp")||-1)+mm<n&&gm.touchDialogSearch().anyway(function(){e.state.set("lastTouchStamp",Date.now())}))}function Vj(){hm.hasClass(pR,"__tablet-msg")||this.state.get("isActive")&&this._setQuery(cm.get("contextSearchQuery"),!0)}function Qj(t){hm.switchClass(this.inputRoot,t,"__in-progress")}function Wj(){var t=this.state;Hj(""!==t.get("query")||t.get("isFocused"),this)}function zj(t,e){this._init(t,e)}function Xj(){}function Gj(t,e){this._init(t,e)}function Jj(t){wm.switchClass(this.filtersRoot,t,"__filters-active")}function Yj(){_m.useFilterForField(this.searchFieldId)}function Kj(t,e,n,a){this.formSubmitButton=hR.getElementsByClassName("filter_submit")[0]}function Zj(t,e){this.root=e,this.insertion=t.insertion,this.refNodeId=t.refNodeId,this.searchBehavior=zm.getSearchFieldInstance(t.searchInputId)}function $j(t,e){return e.multiUploadPhoto(e.dom.fileInput,t),e}function tF(t,e){var n=e.dom.errorTextContainer.getAttribute("data-error-get-upload");Ym.show(n)}function eF(t,e){this.dom=av.byDataId(e),this.getUploadUrlEndpoint=this.dom.fileInput.getAttribute("data-get-upload-url-endpoint")}function nF(){this.resetPhoto(!1),tv.clearProgress(this.dom.imageUploadFileProgress),Jm.removeClass(this.dom.imageUploadFileProgress,"hidden")}function aF(t){var e=t.photoId+","+t.uploadData.token;this.dom.fieldPhoto.setAttribute("value",e),Jm.addClass(this.dom.imageUploadFileProgress,"hidden")}function iF(t){this.dom.imageUploadImg.style.backgroundImage="url("+t+")"}function oF(t){var e=this.dom.imageUploadFileProgress;e&&tv.showProgress(t,e)}function rF(t,e){}function sF(t,e){iv&&t&&t.isManualReject||(Ym.show(t),e.resetPhoto(!0))}function lF(t,e){return e.multiUploadPhoto(e.fileInput,t),cv.photosStartUpload.trigger(),rv.addClass(e.rootForm,Sv),e}function cF(t,e){var n=e.errorTextContainer.getAttribute("data-error-get-upload");lv.show(n)}function uF(t,e){var n=this;n.rootForm=e,n.imageContainer=e.getElementsByClassName("posting-photos_ul")[0],n.imageUploadItem=e.getElementsByClassName("__button")[0],n.imageUploadItemLabel=e.getElementsByClassName("posting-photos_item_upload")[0],n.icPost=n.imageUploadItemLabel?e.getElementsByClassName("ic-camera-24")[0]:null,n.icSpinner=n.imageUploadItemLabel?e.getElementsByClassName("posting-photos_ic-spinner")[0]:null;var a=e.getElementsByClassName("upload-photo-files_input")[0],i=(n.fileInput=a).getAttribute("data-model");n.dataModel=JSON.parse(i),n.errorTextContainer=e.getElementsByClassName("js-error-container")[0],n.getUploadUrlEndpoint=a.getAttribute("data-get-upload-url-endpoint"),n.fakeCount=n.imageUploadItem?2:1,mv.attachUntilRendering(cv.clearForm,this.onClearPostingForm,this)}function dF(){this.imageUploadItemLabel&&(rv.addClass(this.imageUploadItemLabel,"__photo-loading"),rv.addClass(this.icPost,"hidden"),rv.removeClass(this.icSpinner,"hidden"));var t=this.imageContainer,e=t.getElementsByClassName(Cv)[0].cloneNode(!0);rv.removeClass(e,Cv),rv.addClass(e,"js-cloned"),rv.removeClass(e,"dsn"),t.appendChild(e),bF(this)}function hF(t){var e,n,a,i,o,r=this.imageContainer;r&&(n=(e=r.lastChild).getElementsByClassName("js-upload-target")[0],a=t.photoId+","+t.uploadData.token,n&&(n.style.backgroundImage="url("+t.photoUrl+")",(i=e.getElementsByClassName("file-progressbar")[0])&&e.removeChild(i),(o=e.getElementsByClassName("js-upload-input")[0]).setAttribute("value",a),"radio"!==o.type&&"checked"!==o.type||(o.checked=!0)))}function pF(t){this.imageContainer.lastChild.querySelector(".js-upload-target").style.backgroundImage="url("+t+")"}function fF(t){var e=this.imageContainer;e&&pv.showProgress(t,e.lastChild.getElementsByClassName("file-progressbar")[0])}function gF(){var t=this.errorTextContainer.getAttribute("data-error-limit");lv.show(t)}function mF(t){return t.imageContainer.getElementsByClassName(yv).length-t.fakeCount}function vF(t,e){e.imageUploadItemLabel&&(rv.removeClass(e.imageUploadItemLabel,"__photo-loading"),rv.removeClass(e.icPost,"hidden"),rv.addClass(e.icSpinner,"hidden")),e.fileInput.value=null;var n=e.imageContainer;n.scrollLeft=n.scrollWidth}function yF(t,e){var n=e.imageContainer;vv&&t&&!t.isManualReject&&(lv.show(t),n.removeChild(n.lastChild)),e.fileInput.value=null}function bF(t){var e=t.dataModel.photoLimit,n=mF(t);e<=n?cv.photosUploadLimitReached.trigger():cv.photosUploadLimitCleared.trigger(),n<=0&&(cv.photosCleared.trigger(),rv.removeClass(t.rootForm,Sv))}function CF(t,e){"redirect"===t.status?e.currentSetMainTask.resolve(t.redirect):e.currentSetMainTask.reject(Fv.createError(t.error,"networkAnswer","setMain",t))}function SF(t,e){t?e.currentSetMainTask.reject(Fv.createError(t,"networkAnswer","setMain")):e.currentSetMainTask.reject(Fv.createError(t,"network","setMain"))}function kF(t,e){e.currentSetMainApiTask=Mv.run(e.setAsMainEndpoint,{photoId:t.photoId,token:t.uploadData.token}).then(CF,SF,e)}function _F(t,e){e.currentSetMainTask.reject(t)}function wF(t){t.state.set("inProcess",!1),t.currentSetMainApiTask=null,t.currentUploadTask=null,t.currentSetMainTask=null}function TF(t,e){wF(e),e.hideError(),qv.change(t)}function IF(t,e){this===e.currentSetMainTask&&(wF(e),logClientEvent("ajax.newReg.fail.photo",t.from),"network"===t.type?jv.show():e.showError(t.text))}function EF(t){Pv.switchClass(this.rootForm,t,"__photo-loading"),Bv.setDisabled(this.buttonUpload,t),Bv.setDisabled(this.buttonRetryUpload,t)}function AF(t){Pv.switchClass(this.selectedPhotoContent,t,"__hidden"),Pv.switchClass(this.loadErrorContent,!t,"__hidden"),Pv.switchClass(this.choosePhotoContent,t,"__hidden"),Pv.switchClass(this.chooseErrorContent,!t,"__hidden")}function xF(t){this.hideError(),Pv.switchClass(this.stub,!t,"__hidden"),Pv.switchClass(this.nonStub,t,"__hidden")}function PF(t,e){var n=e.uploader;n.selectedFile===e.validatedFile&&(n.currentPhoto=e.validatedFile,n.hideError(),n.renderImage(URL.createObjectURL(e.validatedFile)))}function OF(t,e){var n=e.uploader;n.selectedFile===e.validatedFile&&n.showError(n.errorTextChoose.getAttribute("data-error-file-type"))}function LF(t,e){var n=this;n.rootForm=e,n.stub=e.getElementsByClassName("registration-photo_no_photo")[0],n.nonStub=e.getElementsByClassName("registration-photo_has_photo")[0],n.imageContainer=e.getElementsByClassName("registration-photo_img")[0],n.buttonUpload=e.getElementsByClassName("registration-photo_upload-button")[0],n.buttonRetryUpload=e.getElementsByClassName("registration-photo_retry-upload-button")[0],n.choosePhotoContent=e.getElementsByClassName("registration-photo_choose-photo-content")[0],n.chooseErrorContent=e.getElementsByClassName("registration-photo_choose-photo-error")[0],n.errorTextChoose=e.getElementsByClassName("js-error-text_choose")[0],n.selectedPhotoContent=e.getElementsByClassName("registration-photo_selected-photo-content")[0],n.loadErrorContent=e.getElementsByClassName("registration-photo_load-error-content")[0],n.errorTextLoad=e.getElementsByClassName("js-error-text_load")[0];var a=e.getElementsByClassName("registration-upload-files_input")[0];n.fileInput=a,n.currentUploadTask=null,n.currentSetMainApiTask=null,n.currentSetMainTask=null,n.getUploadUrlEndpoint=a.getAttribute("data-get-upload-url-endpoint"),n.setAsMainEndpoint=a.getAttribute("data-set-as-main-endpoint"),n.initialUploadData={uploadSuccessAdaptee:JSON.parse(a.getAttribute("data-initial-upload-success-adaptee")),uploadUrl:a.getAttribute("data-initial-upload-url")},n.selectedFile=null,n.currentPhoto=null,n.state=Dv.create({inChoose:!0,inProcess:!1,inError:!1}).onChanged("inProcess",EF,n).onChanged("inError",AF,n).onChanged("inChoose",xF,n)}function RF(t){var e=Qv.parentBySelector(t,".selects-set"),n=Qv.parentBySelector(t,".field");this.fieldRoots=[],e&&this.fieldRoots.push(e),n&&this.fieldRoots.push(n),this.fieldElement=t,this.fieldType=t.type,this.isErrorShown=zv.has(this.fieldRoots,function(t){return Vv.hasClass(t,"__error")});var a=t.getAttribute(Xv);if(a&&2<a.length)try{var i=JSON.parse(a);for(var o in this.validationPatterns=function(){if(Object.create)return Object.create(null);var t={__proto__:null};return t}(),i)this.validationPatterns[o]=new RegExp(i[o])}catch(t){0}}function NF(t){var e;((e=t.target).okFieldValidation?e.okFieldValidation:e.okFieldValidation=Jv.create(e)).validate(t)}function BF(t,e){}function DF(t,e){this.elem=e,this.model=t}function MF(t,e){this.data=t,this.viewContext=e,this.togglerState=!1,this.togglerInitState,"true"==e.getAttribute("data-toggle-checked")&&(this.togglerInitState=!0),this.unlinked=e.getAttribute("data-toggle-unlinked")}function jF(){var t=jy.length;if(t)for(var e=t;e--;){var n=jy[e].okBehavior;n&&n.resetToggleBlock()}}function FF(t,e){var n=this,a=n.viewContext;t.href&&(e.preventDefault(),Py.hasClass(t,"js-ajax-toggle-link")&&Dy.goSpecific(t)),Py.hasClass(a,My)?(n.togglerState=!1,By.close.trigger(),Py.removeClass(a,My)):(n.togglerState=!0,By.close.trigger(),Py.addClass(a,My)),n.switchTopClass(),n.switchCenterClass(),Fy||(Fy=!0,jy=hR.querySelectorAll("[data-view=toggleView]"),xy.tapPreview.attach(n.onOutClick,n),Ry.navigating.attachOnce(function(){n.removeOutClickListener(),n.resetToggleModule()})),void 0===n.togglerInitState&&(n.togglerInitState=!n.togglerState);var i=t.getAttribute("data-toggle-events"),o=t.getAttribute("data-appId"),r=t.getAttribute("data-userId");i&&""!==i&&i.split(" ").forEach(function(t){var e=Ay[t];e&&e.trigger(n.togglerState,o,r)}),xy.allowDefault(e)}function qF(t,e){this.element=e,this.inputFile=e.getElementsByClassName("input-file_upload-element")[0],this.label=e.getElementsByClassName("input-file_filename-label")[0],this.inputFile.addEventListener("change",this)}function HF(t,e){var n=[],a=function(t){var e=Hy.parentBySelector(t,Wy);if(e)return e.getElementsByClassName(zy);return null}(e),i=parseInt(e.getAttribute("data-counter-maxlength")||e.getAttribute("maxlength"),10);this._canWork=!1,this.input=e,this._counters=a,this._countersTexts=n,this.valueLength=e.value.length,this.maxLength=i,this.isValid=!0,a&&0!==a.length&&!isNaN(i)&&(this._canWork=!0,Uy(a,function(t){var e=Hy.getTextNode(t);n.push(e)}),UF(this))}function UF(t){var e,n,a,i;t.isValid=(e=t).valueLength<=e.maxLength,a=(n=t).maxLength-n.valueLength,i=n.isValid,Uy(n._countersTexts,function(t,e){t.nodeValue=a,i?Vy.removeClass(n._counters[e],Xy):Vy.addClass(n._counters[e],Xy)})}function VF(t,e){this._select=e}function QF(){null!==rb&&(nb.stop(rb),rb=null)}function WF(){var t=Date.now();if(sb&&yb<t-cb&&XF(),!sb&&ub<t-lb){for(var e=0,n=vb+mb,a=vb,i=ob.length;a<i&&a<n;a++){var o=ob[a];o.spriteCanvas?zF(t,o)||n++:!(e<gb&&function(t,e){if(!e.spriteCanvas&&!function(t){var e=t.sprite,n=e.naturalHeight;if(n<=0)return!1;var a=t.fpsReduction||pb&&t.fps>fb?Math.round(t.fps/fb):1,i=hR.createElement("canvas");t.spriteCanvas=i;var o=Math.ceil(e.naturalWidth/(n*a)),r=Math.ceil(Math.sqrt(o)),s=Math.ceil(o/r);t.spriteRows=s,t.spriteColumns=r,i.width=r*n,i.height=s*n;var l=i.getContext("2d");if(t.startTime=Date.now()+Math.round(34*Math.random()),1<a&&!t.fpsReduction){t.fpsReduction=a;for(var c=t.frameIndices,u=0;u<c.length;u++)c[u]=Math.floor(c[u]/a)}for(var d=Math.floor(e.naturalWidth/(n*a)),h=0;h<d;h++)l.drawImage(e,h*n*a,0,n,n,n*Math.floor(h%r),n*Math.floor(h/r),n,n);return!0}(e))return!1;{var n,a,i,o;e.canvas||(n=e.sprite,a=e.target,(i=a.querySelector("canvas")||hR.createElement("canvas")).className="sprite-anim-canvas",i.width=i.height=n.naturalHeight,e.drawing2d=i.getContext("2d"),e.canvas=i,e.frameDuration=Math.round(1e3/e.fps),zF(t,e),a.hasAttribute("data-static-image")||a.setAttribute("data-static-image",a.style.backgroundImage),(o=e.elementToHide)&&(o.style.display="none"),a.appendChild(i),e.target.style.removeProperty("background-image"))}return!0}(t,o))?n++:e++}vb=i<=a?0:a}rb=nb.run(WF)}function zF(t,e){var n=e.frameIndices;e.currentFrame=Math.max(0,Math.round((t-e.startTime)/e.frameDuration)%n.length);var a=n[e.currentFrame];if(a!==e.previousFrame){e.previousFrame=a;var i=e.canvas,o=e.drawing2d,r=i.width,s=i.height;hb?i.width=i.width:o.clearRect(0,0,r,s);var l=e.spriteColumns;return o.drawImage(e.spriteCanvas,Math.floor(a%l)*r,Math.floor(a/l)*s,r,s,0,0,r,s),1}}function XF(){lb=Date.now(),sb=!1}function GF(){var t=Array.prototype.slice.apply(hR.getElementById("content").getElementsByClassName("js-gift"));Bb.length=0;for(var e=Bb.length,n=t.length;e<n;e++){var a=t[e],i=_b.getOrMakeBehavior(a);i&&i.gift&&i.gift.overlay&&Bb.push(i)}0<Bb.length&&!Ob&&(Db=-1,JF())}function JF(){if(0!==Bb.length&&!Lb){var t,e=Db<0?0:Db;do{Db=++Db>=Bb.length?0:Db,t=Bb[Db];var n=Ib.fit(t.node,1,1,-t.node.offsetWidth/2),a=n.fitLeft&&n.fitTop&&n.fitRight&&n.fitBottom;if(Db===e&&!a)return void(Mb=!0)}while(!a);t.togglePlay(!0)}}function YF(t,e,n){var a,i=n.parentNode,o=t.appearance.position||{},r=n.offsetWidth,s=n.offsetHeight,l=n.offsetTop,c=n.offsetLeft,u=1,d=gt.getComputedStyle(n).backgroundSize||"";d.indexOf("%")===d.length-1&&(l+=s*(a=1-(u=parseFloat(d)/100))/2,c+=r*a/2);var h=r*o.width*u,p=s*o.height*u,f=hR.createElement("div");Tb.addClass(f,Nb),"above"===o.entity&&function(t,e,n,a){Tb.addClass(t,"__under-gift");var i=n.cloneNode(!1);Tb.addClass(n,"__overlayed-by-copy"),Tb.addClass(i,Rb),Tb.removeClass(i,"js-gift"),i.removeAttribute("data-view"),i.removeAttribute("data-model");var o=i.style;o.top=n.offsetTop.toFixed(2)+"px",o.left=n.offsetLeft.toFixed(2)+"px",i.appendChild(e.toggleOverlayPlayNode.cloneNode(!1)),a.appendChild(i),n.okPositioningClone=i,KF(n,!0)}(f,e,n,i);var g=f.style;return g.position="absolute",g.top=l+(s-p)/2+"px",g.left=c+(r-h)/2+"px",g.width=h+"px",g.height=p+"px",i.appendChild(f),e.overlayHost=f}function KF(t,e){var n=t.okPositioningClone;n&&Tb.switchClass(n,!e,"__on-hold")}function ZF(t,e){this.gift=t,this.node=e,this.playingOverlay=null,this.overlayHost=null,this.toggleOverlayPlayNode=e.getElementsByClassName("__gift-overlay-toggle")[0]}function $F(a){var t=Ub.start().then(i,i),e=0;function n(){var t,e,n;t=a,e=new Image,n=Hb.onload(e),e.src=t,n.img=e,n.then(o,r)}function i(){delete Vb[a]}function o(){t.resolveIfNotDone(this.img)}function r(){t.done||(++e>=Qb?t.reject():setTimeout(n,200))}return n(),t}function tq(){if((Zb-=1e3)<0)return function(){tC&&(gt.clearTimeout(tC),tC=null,0);var t=hR.getElementById(Jb);{var e;!t||(e=hR.getElementById(Yb))&&(Gb.addClass(e,"dsn"),Gb.removeClass(t,"dsn"),Gb.addClass(t,"dsib"))}}(),!1;var t=Math.floor(Zb/6e4),e=Math.floor(Zb/1e3)%60;e<10&&(e="0"+e),$b.innerText=t+":"+e,tC=setTimeout(tq,1e3)}function eq(t,e){this.img=hR.getElementById("captcha"),this.input=e.getElementsByClassName("js-captcha_input")[0]}function nq(t,e){this.container=e,this.dom=oC.byDataId(this.container),this.firstItemOffsetTop=this.container.childNodes[0].offsetTop,iq(this),lC.attachUntilRendering(sC.resize,aq,this)}function aq(){iq(this)}function iq(t){var e=t.container,n=t.firstItemOffsetTop,a=t.dom;if(rC.hasClass(e,"__bound")){rC.addClass(a.expandItem,"hidden");var i,o,r,s,l,c,u,d=e.getAttribute("data-max-height");if(d&&!(e.scrollHeight<=d)){if(a.atSelectedItem&&oq(a.atSelectedItem,n,d))return rC.removeClass(e,"__bound"),void rC.removeClass(a.collapseItem,"hidden");rC.removeClass(a.expandItem,"hidden"),i=e,o=a.expandItem,r=n,s=d,l=i.childNodes,c=l.length,0<(u=function(t,e,n,a){for(var i=0;i<n;i++)if(oq(e[i],t,a))return i;return-1}(r,l,c,s))&&(o.parentNode.insertBefore(o,l[u]),oq(o,r,s)&&o.parentNode.insertBefore(o,l[u-1]))}}}function oq(t,e,n){return t.offsetTop-e>=n}function rq(t){return t<10?"0":""}function sq(t){this._timerTextNode=cC.getTextNode(t)}function lq(t,e,n){this._animationFrameId=-1,this._time=e,this._frameProcessor=t,this._context=n,this._onNewFrame=function(){var t=(Date.now()-this._startTime)/this._time;1<=t&&(t=1);this._frameProcessor.call(this._context,t),1!==t&&(this._animationFrameId=dC.run(this._onNewFrame))}.bind(this),this._startTime=Date.now(),this._onNewFrame()}function cq(t){this._size=t.offsetWidth;var e=t.getAttribute("data-model"),n=JSON.parse(e);this._color=n.indicatorColor;var a=hR.createElement("canvas");a.className="progress-indicator",t.appendChild(a);var i=gt.devicePixelRatio||1;a.width=this._size*i,a.height=this._size*i,this._context=a.getContext("2d"),this._context.scale(i,i)}function uq(t){var e,n=(this._root=t).getAttribute("data-model"),a=JSON.parse(n),i=a.saleTimeLeftSeconds,o=a.saleTimeLeftPercent,r=a.savedEndDateMS;null==r?(e=Date.now()+1e3*i+10,a.savedEndDateMS=e,t.setAttribute("data-model",JSON.stringify(a))):e=r,this._endDateMS=e;var s,l,c=i/o;this._msInPercent=Math.floor(1e3*c),this._timer=new mC(t.getElementsByClassName("js-timer")[0]),this._loader=new vC(t.getElementsByClassName("js-loader")[0]),this._giftHotSaleFrame=function(){var t=dq(this);{var e,n;1e3<t?(this._timer.set(t),this._loader.set(hq(t,this)),this._currentTimeoutId=setTimeout(this._giftHotSaleFrame,1e3)):(this._timer.set(0),this._loader.set(100),yC.addClass(this._root,CC),(e=this._root.getElementsByClassName(SC)[0])&&bC.setDisabled(e,!0),(n=this._root.getElementsByClassName(kC)[0])&&n.removeAttribute("href"))}}.bind(this),this._currentTimeoutId=-1,0<(l=dq(s=this))&&s._loader.animateInitialState(hq(l,s),200),this.run()}function dq(t){return t._endDateMS-Date.now()}function hq(t,e){return 100-t/e._msInPercent}function pq(t){this._root=t,this.startTime=Date.now(),this.millisLeft=1e3*(parseInt(t.getAttribute("data-left-seconds"),10)||0);var e=t.getElementsByClassName("js-hot-sale")[0];e&&(this._timer=new EC(e),this._hotSaleFrame=function(){var t=function(t){return t.millisLeft-(Date.now()-t.startTime)}(this);{var e;1e3<t?(this._timer.set(t),this._currentTimeoutId=setTimeout(this._hotSaleFrame,1e3)):(this._timer.set(0),AC.addClass(this._root,xC),(e=this._root.getElementsByClassName(PC)[0])&&e.removeAttribute("href"))}}.bind(this),this._currentTimeoutId=-1,this.run())}function fq(t,e){for(var n="",a=0,i=t.length;a<i;a++){var o=t.charAt(a);-1!=e.indexOf(o)&&(n+=o)}return(+n||"")+""}function gq(t,e,n){t.disabled=e.length<n||+e<=0}function mq(){var t,e,n,a,i,o,r,s=hR.getElementById("js-interactive-art");s&&(t=s.getAttribute("data-url"),e="true"===s.getAttribute("data-receive-mode"),n="true"===s.getAttribute("data-is-android"),a=s.getAttribute("data-overlay-name"),i=hR.getElementById("js-topText"),HC.update(),n&&(r=(o=hR.getElementById("js-interactive-art_w")).getBoundingClientRect().height,o.style.minHeight=r-54-56+"px"),FC.play({baseUrl:t,name:a,appendToHost:!0,createHost:function(){return s},onStarted:function(t){UC=t.playing,t.overlay.createControlsDomRoot().innerHTML=i.innerHTML},onFinished:function(t){},onGameStarted:function(){var t=hR.getElementById("js-gift-interaction-btns");t&&e&&(t.classList.remove("__light"),t.classList.add("__normal"))},onGameFinished:function(){}}))}function vq(){UC&&(UC.stop(),UC=null)}function yq(){vq(),mq()}function bq(t){var e;this.node=t,this.data=(e=t.getAttribute("data-map"))?JSON.parse(e):null}function Cq(t){var e=t.envelopes[0];e&&"attribute"==e.action&&0<e.value.indexOf("js-collapsed-widths")&&(--nS||(_q(tS),Iq(),wq()))}function Sq(t,e){t?e.beaconNode=t:e.position=e.position==oS?iS:oS}function kq(){ZC&&(aS.joinedGroupTopOffset=ZC.getBoundingClientRect().top,aS.prevSimilarGroupsContainerTopOffset=eS?eS.getBoundingClientRect().top:null,aS.columnCount=Math.ceil($C.offsetWidth/ZC.offsetWidth))}function _q(t){$C.removeChild(t)}function wq(){ZC=$C=tS=eS=nS=mt}function Tq(){tS&&(_q(tS),wq(),Iq(),JC.changed.detach(kq),XC.htmlFromEnvelopeInserted.detach(Cq))}function Iq(){aS.columnCount=0,aS.joinedGroupTopOffset=0}function Eq(){}function Aq(t,e){this.node=e,this.model=t}function xq(){var t=hR.getElementById("fastcom-source").getElementsByClassName("js-fastcom-trouble-text")[0];pS.show(t.textContent)}function Pq(){for(var t in wS)if(wS.hasOwnProperty(t))for(var e=wS[t],n=0,a=e.length;n<a;n++){var i=e[n];TS[i.model.pluginData.name].call(i)}}function Oq(){this.proxyConfig={},Lq(this,this.proxyConfig,"prepare",Rq),Lq(this,this.proxyConfig,"success",Dq),Lq(this,this.proxyConfig,"cancel",Bq),this.ajaxEnvelopeHandler=PS.getAjaxEnvelopeHandler(this.proxyConfig),this.originalConfig=OS.clone(this.proxyConfig)}function Lq(n,t,e,a){var i=a.name;n[i]=a,Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:function(){return n[i].bind(n)},set:function(e){n[i]=function(t){return"function"==typeof e&&e.call(n,t),a.call(n,t)}}})}function Rq(t){var e={},n=t.target,a=n&&n.href;return a?(t.uri=a,t.method="post"):RS.hasClass(n,"js-axb")?xS.allowDefault(t):e.cancelled=!0,e}function Nq(t){OS.resetObjectState(t.proxyConfig,t.originalConfig,!1),t._isBusy=!1,RS.removeClass(t.rootNode,NS)}function Bq(t){Nq(this)}function Dq(t){Nq(this)}function Mq(t){vk.isScrollActionShown&&(t=t||!1,GS.switchClass(ok,!t,"hidden"),vk.isScrollActionShown=t)}function jq(){GS.addClass(ik,"__y-fit-content")}function Fq(){ik.offsetHeight+pk<Vq()&&(zS.calculateForElement(ik,{height:Vq(),fullheightNodesWrapper:ik}),gk&&(ik.style.height=ik.style.minHeight)),vk.isFullHeightApplied=!0}function qq(){var t=mk.scrollTop;if(ik.style.minHeight="",gk&&(ik.style.height=""),Mq(!0),mk.scrollTop=0,gt.scrollTo(0,0),!(0<t&&.18<t/ck)){var e=function(){jq();var t=ik.offsetHeight;return GS.removeClass(ik,"__y-fit-content"),t}();if(hR.body.scrollHeight>ck){vk.isPageHasScroll=!0;var n=e/Vq();if(n<hk.spaceForFeed&&uk>ek.breakpoint.phablet)return n<hk.spaceForScrollAction&&Mq(!1),void jq()}else vk.isPageHasScroll=!1;e<=Vq()?(Mq(vk.isPageHasScroll),Fq()):e-rk<=Vq()?(Mq(!1),Fq()):(Mq(!1),vk.isFullHeightApplied=!1)}}function Hq(t){var e,n=sk&&"function"==typeof sk.getBoundingClientRect&&sk.getBoundingClientRect().top;0<n?(e=mk.scrollTop+n-(dk?pk:0),XS.run(mk,function(t,e){t.scrollTop=e},{to:e,time:200}).onAnimationEnd.attachOnce(function(){mk.scrollTop=e})):(sk.scrollIntoView(),dk&&(mk.scrollTop-=pk))}function Uq(){gt.scrollTo(0,1);var t=mk.scrollTop;0<t&&t<=1||(mk=hR.body),gt.scrollTo(0,0)}function Vq(){return ck-fk}function Qq(t,e){this.root=e,Ik.attachUntilRendering(Tk.filesSelected,this.doOpenLayerWithUploader,this)}function Wq(t,e){var n=this;n.root=e;var a=n.dom=wk.byDataId(e);n.textActivated=!1,n.expandable=Sk.hasClass(e,Nk),n.opened=!1,n.pickerMod=a.startDecor?Qk:Wk,n.pickerLastEnabledMod=a.startDecor?Qk:Wk,n.tmpPickedItems=null,n.defaultNonDecoratorFontRule=JSON.parse(a.noPick&&a.noPick.getAttribute("data-font-rule")||"{}"),n.defaultDecoratorFontRule=JSON.parse(a.decorActive&&a.decorActive.getAttribute("data-default-font-rule")||"{}"),n.prevFontSize,n.calendarOpened=!1,n.toStatusDefault=a.setToStatusCheckbox&&a.setToStatusCheckbox.checked,n.textDefault=a.postingTextarea.value||"",n.pickedRule=n.defaultNonDecoratorFontRule,n.onDecorHideElements=e.getElementsByClassName("js-decor-hide"),a.startDecor&&(Xq(n,a.startDecor),zq(n)),Ik.attachUntilRendering(Tk.photosStartUpload,this.disablePicker,this),Ik.attachUntilRendering(Tk.photosCleared,this.enablePicker,this),Ik.attachUntilRendering(Tk.photosUploadLimitReached,this.photosUploadLimitReached,this),Ik.attachUntilRendering(Tk.photosUploadLimitCleared,this.photosUploadLimitCleared,this),Ik.attachUntilRendering(Ok.opening,function(){a.postingTextarea.blur()}),Ik.rendering.attachOnce(this.closeForm,this)}function zq(t){var e,n,a;t.dom.inputDecoratorId&&(e=t.dom.postingTextarea.value||"",(n=function(t,r){if(!t)return null;var s=0,l=1,c=Uk,u=0;for(var e=0;e<t.length;e++){var n=t[e];if(function(t){var e=r.length;if(!(t.symbolCountDefined&&e>t.symbolCount)){if(t.lineCountDefined){var n=t.lineLength;c!=n&&(l=1,c=n,u=s=0);var a=t.lineCount;if(a<l)return;for(var i=t.lineLengthDefined;s<e;s++){var o=!1;if("\n"==r.charAt(s)?o=!(u=0):(u++,i&&n<u&&(u=1,o=!0)),o&&++l>a)return void s++}}return 1}}(n))return n.size}return null}(t.pickedRule,e)||0)!=t.prevFontSize&&(t.prevFontSize&&Sk.removeClass(t.root,Hk+t.prevFontSize),Sk.addClass(t.root,Hk+n),a=0===(t.prevFontSize=n),Yq(t,a),t.onDecorHideElements&&kk(t.onDecorHideElements,function(t){Sk.switchClass(t,!a,"hidden")})))}function Xq(t,e){var n,a,i,o,r=t.dom;r.inputDecoratorId&&e&&(n=e.getAttribute("data-decor-id"),t.tmpPickedItems&&kk(t.tmpPickedItems,function(t){Sk.removeClass(t,jk)}),t.tmpPickedItems=t.root.querySelectorAll('[data-decor-id="'+n+'"]'),kk(t.tmpPickedItems,function(t){Sk.addClass(t,jk)}),r.inputDecoratorId.value=n,a=e.getAttribute("data-font-rule"),t.pickedRule=a?JSON.parse(a):n?t.defaultDecoratorFontRule:t.defaultNonDecoratorFontRule,i=e.getAttribute("data-img"),Sk.hasClass(e,Fk)?(Sk.removeClass(r.postingTextareaCover,qk),Sk.removeClass(r.postingTextarea,qk),r.postingTextareaCover.removeAttribute("style")):(Sk.addClass(r.postingTextareaCover,qk),Sk.addClass(r.postingTextarea,qk),o=e.getAttribute("style"),i&&(o+="background-image: url('"+i+"');"),r.postingTextareaCover.setAttribute("style",o)),Sk.switchClass(r.postingTextareaCover,i,"__decor-image"),t.updateCatalogMaxHeight())}function Gq(t,e){e!=t.opened&&(t.opened=e,t.expandable&&($q(t.root,e,Rk,Nk),Lk.log("postingTopicFormOld",["status","open"])))}function Jq(t,e){t.dom.inputDecoratorId&&e!=t.pickerMod&&(e!=zk&&(t.pickerLastEnabledMod=e),t.pickerMod=e,t.dom.inputDecoratorId.disabled=e==Wk||e==zk,function(t,e){for(var n=e.root,a=Xk.length;a--;){var i=Xk[a];Sk.switchClass(n,t==i,i.className)}}(e,t))}function Yq(t,e){Jq(t,e?zk:t.pickerLastEnabledMod)}function Kq(t){!function(t){var e=t.dom;Tk.clearForm.trigger(),e.postingTextarea.value=t.textDefault,e.postingTextarea.style.minHeight="0",e.postingTextareaCover.removeAttribute("style",""),e.setToStatusCheckbox&&(e.setToStatusCheckbox.checked=t.toStatusDefault),e.toStatusCont&&Sk.removeClass(e.toStatusCont,"hidden"),e.calendarInpt&&(e.calendarInpt.checked=!1,$q(t.root,!1,Bk,Dk));var n=e.errors;n&&n.firstChild&&n.removeChild(n.firstChild)}(t),Xq(t,t.dom.noPick),zq(t),Jq(t,Wk),Gq(t,!1),Zq(t,!1);var e=Ak.parentBySelector(t.root,".post-in-layer");e&&(Sk.removeClass(hR.body,"ofh"),Sk.removeClass(e,Mk),Vk.unlock()),t.dom.statMDecor&&(t.dom.statMDecor.value="off")}function Zq(t,e){var n=t.dom;n.decorCatalog&&(Sk.switchClass(n.decorCatalog,!e,"hidden"),Sk.switchClass(n.decorActive,e,"hidden"))}function $q(t,e,n,a){Sk.switchClass(t,e,n),Sk.switchClass(t,!e,a)}function tH(t,e){}function eH(t,e){var n,a;Yk&&Yk.length&&((n=hR.getElementsByClassName("posting-photos")[0])&&(a=Gk.getOrMakeBehavior(n)).processingInput(a,Yk))}function nH(t,e){!function t(e,n,a,i){l_.run(function(){1<i?(e.scrollLeft=e.scrollLeft+a,t(e,n,a,i-1)):e.scrollLeft=n})}(t,e,(e-t.scrollLeft)/5,5)}function aH(t,e){var n=this;n.root=e,n.dom=i_.byDataId(e),n.imageWidth=e.getElementsByClassName("product-slider_list_pic")[0].offsetWidth,n.scrollContainer=e.getElementsByClassName("product-slider_list")[0],n.imagesCount=Math.floor(n.scrollContainer.scrollWidth/n.imageWidth),n.currentImageIndex=0,n.currentStartTouchX=0,n.currentScrollLeft=0}function iH(t,e){var n=this;n.root=e,n.mallCard=e.querySelector(".mall-card"),n.imageScrollComponent=e.querySelector(".product-slider");var a=n.mallCard?n.mallCard.getAttribute("data-variant-sid-to-data"):null;n.variantSidToData=a?JSON.parse(a):null,n.variantSidToData&&(n.variantSid=n.variantSidToData["selected-variant-sid"],n.productId=n.variantSidToData["product-id"],n.sectionName=n.variantSidToData["section-name"],n.filterIds=n.variantSidToData["filter-ids"]),n.dom=h_.byDataId(hR),n.scrollContainer=e.getElementsByClassName("product-slider_list")[0],n.maxQuantity=n.dom.mallCounterContainer?n.dom.mallCounterContainer.getAttribute("data-max-quantity"):0,n.quantity=1,n.currentPriceCoins=n.mallCard?parseInt(n.mallCard.getAttribute("data-price-coins"),10):0,n.paymentEl=e.querySelector(".__active")}function oH(t,e){var n=t.dom;t.quantity+=e?1:-1,n.mallCounter.value=t.quantity,n.mallCounterDec.disabled=t.quantity<=1,n.mallCounterInc.disabled=t.quantity>=t.maxQuantity,dH(t),uH(t)}function rH(t){var e,n,a=t.productId;return{sectionName:t.sectionName,productId:a,variantId:(n=(e=t).variantSid,e.variantSidToData.varIds[n]),quantity:t.quantity}}function sH(t,e){t&&f_.switchClass(t,e,"hidden")}function lH(t,e,n){t&&(t.innerHTML=e||(n||""))}function cH(t,e){t&&(t.disabled=e)}function uH(t){var e=rH(t);v_.trigger(e)}function dH(t){var e,n,a=t.dom;a.mallCounterPrice&&(e=!isNaN(t.currentPriceCoins),f_.switchClass(a.mallCounterPrice,!e||t.quantity<=1,"hidden"),e&&(3<(n=""+Math.ceil(t.quantity*t.currentPriceCoins/100)).length&&(n=n.substring(0,n.length-3)+" "+n.substring(n.length-3,n.length)),a.mallCounterPriceValue.innerHTML=n))}function hH(t){var e,n,a,i,o,r,s=t.data;s&&((e=t.origin).lastIndexOf("/")!==e.length-1&&(e+="/"),n=L_&&0===e.indexOf(A_)&&function(t){if(!t)return;var e=JSON.parse(t);return e&&e.action_params&&"result_success"==e.action_params.alias}(s),(0===e.indexOf(O_)||n)&&E_.matchType(s,E_.T_STRING)&&("paymentCallback"!==(a=s.split(","))[0]&&!n||((i={"ds.posted":"set"})["st.orderId"]=n?x_:a[1],i["st.paymentCallbackResult"]=n?P_:a[2],(r=(o=__.byDataId(hR)).mallPurchaseForm?o.mallPurchaseForm.getAttribute("action"):null)&&k_.request(r,"post",i).send())))}function pH(t){var e,n,a,i,o,r,s,l;hR.getElementById("mallPurchaseForm")&&(n=(e=hR.getElementById("field_productId"))?e.value:null,i=(a=hR.getElementById("field_productCk"))?a.value:null,r=(o=I_.params(gt.location.search))["st.ePT"],s=o["st.section"],l=o["st.bct"],T_.run("mall.log",{productId:n,productCookie:i,entryPoint:r,section:s,boundCardType:l,declineReason:"back"}))}function fH(t,e){this.minRatingToFeed=parseInt(e.getAttribute("data-feed-min-value"),10)||4,this.maxRatingToSupport=parseInt(e.getAttribute("data-support-max-value"),10)||2,this.dom=B_.byDataId(e)}function gH(t,e){this.model=t=t||{},this.layer=e,this.searchResults=e,this.inited=!1,this.viewOpen=!1,this.selectedSuggest=null,this.viewOpened=H_.create();var n=this;this.initTask=V_.start().then(function(t){n.searchController=t,n.viewOpened.attach(t.viewChanged.trigger,t.viewChanged),t.waitingResults.attach(mH,n),n.inited=!0})}function mH(t){var e=this.layer,n=t.task;n.done||(U_.start(n),q_.addClass(e,z_),n.anyway(function(){q_.removeClass(e,z_)}))}function vH(t){return t&&t.value}function yH(t,e){this.form=e}function bH(t,e){this.lookup(t,e)}function CH(){}function SH(t){var e,n;e=t.photoUrl,wH().getElementsByClassName("photowall-picker")[0].style.backgroundImage="url("+e+")",n=t,hR.getElementById("pw-form-input-id").value=n.photoId,hR.getElementById("pw-form-input-tkn").value=n.photoId+","+n.uploadData.token,_H()}function kH(t,e){e.currentSetMainTask.reject(t),_H()}function _H(){var t=hR.body;tw.removeClass(t,"js-sm-upldng"),tw.removeClass(t,"js-multi-uploading");var e=wH();tw.removeClass(e,"ld"),e.getElementsByClassName("js-sm-upload-file-input")[0].value=""}function wH(){return hR.getElementById(aw)}function TH(t,e){0<=this.redrawTimerValue(t.countdownEndTime,e).total&&this.animateCountdown(e,t.countdownEndTime)}function IH(t){return 10<=t?t:0<t?"0"+t:"00"}function EH(t,e){var n=(this._root=e).querySelector(".send-gift-by-one-click-rejection");this._rejection=n,this._rejectionLoaderLine=n.querySelector(".send-gift-by-one-click-rejection_loader_line"),this._sendingTimeoutId=-1}function AH(t,e,n,a,i){var o,r,s=e.prefix||"",l=e.mask,c=e.allowedRegexTokens,u=s+l,d=parseInt(e.fixedPart,10)||0,h=s&&Iw(s,c).result||"",p=Iw(t,c).result;e.isDynamic&&(o=Math.max(p.length+1-h.length,2),r=new Array(o).join(kw),u=u.replace(_w,5<o?r.match(ww).join(" "):r));var f,g,m,v,y=(i&&i.selectionStart||mt)-(i&&i.selectionEnd||mt)==0,b=u[n]&&u[n]!==kw;a&&y&&b&&(m=t.length,v=u.slice(0,m),a===Cw.DeleteMode.BACKWARD?(g=n,n=f=v.lastIndexOf(kw,n)):(f=n,g=v.indexOf(kw,n)),t=t.slice(0,f)+(0<g&&t.slice(g)||""));var C,S,k,_,w,T,I,E,A,x,P,O=0<n&&Iw(t.substring(0,n),c).result,p=Iw(t,c).result,L=(C=p,k=(S={minMaskLength:d,carretPlace:n}).greed||!0,_=S.carretPlace||0,w=S.minMaskLength,I=-1,A=E=T=0,x=[],P=C.length,{getData:function(){return{replaceCount:T,lastReplaceIndex:I,carretIndex:E,decorCount:A,wildcardPositions:x}},replacer:function(t,e){var n,a="";return T<P?(n=C[T],a=t.toLowerCase()===kw&&x.push(e)||k&&t===n?(++T===_&&(E=T),T===P&&(I=e-1),n):(A++,t)):e<w&&(A++,a=t),a}}),R=u.replace(Sw,L.replacer),N=R.length,B=L.getData().wildcardPositions[Math.max(O.length-h.length-1,0)];return B=B+1||d,xH(R,N<=n?N:B)}function xH(t,e){return{value:t,carretPlace:e}}function PH(t,e){this.field=t,this.maskData=e||{unsettled:!0},this.events={maskApplied:bw.create()}}function OH(t,e){this.form=e,this.suggestSearchInstance}function LH(t,e){var n=this.form.field_cityCustomName;this.suggestSearchInstance=this.suggestSearchInstance||Ew.resolve(n,"SuggestSearch"),this.suggestSearchInstance.updateArgument({location:Aw.getSelectedOptions(e)[0].value},n)}function RH(t,e){this.input=e,this.deleteMode=Ow.DEFAULT}function NH(){}function BH(t,e){this.regexp=t,this.pos=e,this.symbolLength=1,this.type=0}function DH(t,e){var n=e.localMasks,a=e.localPrefixes,i=e.strategy,o=e.forceLocal;return!!i&&i(t,n,a,o)}function MH(t,e){Ww.construct.apply(this,arguments)}function jH(t,e,n){this.processSelectCountry(t,e,n)}function FH(t,e){cT.construct.apply(this,arguments);var n=this.decoratorData={};n.mask=new pT.MaskDecorator(e),n.mask.setMaskData({allowedRegexTokens:fT}).setRequireMask(),0<e.value.length&&this.mask.input.apply(this,[null,e])}function qH(t,e){this.model=t,this.form=e,this.disabledTargets={};var n=this.form;this.docBehavior=vT.getOrMakeBehavior(pR);for(var a=n.parentNode.querySelectorAll("[data-form-init-task]"),i=0,o=a.length;i<o;i++){var r=a[i];this._runTasks(r.getAttribute(TT),{type:IT,target:n},n)}this.formFunctionNames=n.getAttribute(wT),this.isInited=!0}function HH(t,e){this._formHandler(t,e)}function UH(t,e){return-1<PT.call(arguments,1).indexOf(t)}function VH(t){return"true"!==t.getAttribute("data-field-unrecoverable")}function QH(t){return _T+t.id}function WH(){var t=Array.prototype.slice.apply(hR.getElementsByTagName("iframe"));return BT(t,function(t){t.src="about:blank"}),gt.stop(),t}function zH(){qT=setTimeout(XH,jT),WH()}function XH(){RT.getState().wizardDoneStep&&(RT.back(),zH())}function GH(t,e,n){t.currentBannerIndex=e,t.currentX=n.offsetLeft,t.dom.bannersList.style[XT]="translateX("+-1*t.currentX+"px)",t.markersEnabled&&(t.markerCheckboxes[e].checked=!0),t.prevElem=t.curElem,t.curElem=n}function JH(t,e){GH(t,e,t.bannerImages[e])}function YH(t,e){return function(t,e){if(e<0){if(e=t.bannersLastIndex,t.cycle)return GH(t,e,t.dom.fakeLeft),!0}else if(e>t.bannersLastIndex&&(e=0,t.cycle))return GH(t,e,t.dom.fakeRight),!0;return GH(t,e,t.bannerImages[e]),!1}(t,e?t.currentBannerIndex+1:t.currentBannerIndex-1)}function KH(e,t){var n=this;n.root=t,n.model=e,n.fordibTouch=e.fordibTouch,n.autoPlayEnabled="boolean"!=typeof e.autoPlayEnabled||e.autoPlayEnabled,n.dom=UT.byDataId(t);var a=n.markerCheckboxes=t.getElementsByClassName("slides_marker_check");function i(){ZH(n);var t=YH(n,!0);$H(n,t),n.timerActive&&(n.timeoutId=setTimeout(i,e.interval))}n.markersEnabled=a.length,n.bannerImages=t.getElementsByClassName("js-banner"),n.bannersCount=n.bannerImages.length,n.bannersLastIndex=n.bannersCount-1,n.currentBannerIndex=0,n.currentStartTouchX=0,n.currentStartTouchY=0,n.cycle=!0,n.startTimer=function(){n.autoPlayEnabled&&(n.timerActive=!0,n.timeoutId=setTimeout(i,e.interval))},n.clearTimer=function(){n.timerActive=!1,clearTimeout(n.timeoutId)},n.startTimer(),WT.attachUntilRendering(zT.resize,this.initLayout,this),WT.rendering.attachOnce(function(){n.clearTimer()}),this.initLayout()}function ZH(t){QT.addClass(t.dom.bannersList,JT)}function $H(t,e){setTimeout(function(){t.prevElem&&QT.removeClass(t.prevElem,KT),QT.removeClass(t.dom.bannersList,JT),e&&JH(t,t.currentBannerIndex),QT.addClass(t.curElem,KT)},GT)}function tU(){sI={}}function eU(t){var e=t.touches;sI={},e&&1===e.length&&(sI.pointerStartX=e[0].clientX,sI.pointerStartY=e[0].clientY)}function nU(t){var e,n,a,i,o=eI.firstTouchRaw(t);o&&nI&&(e=((aI?sI.pointerStartY-o.clientY:sI.pointerStartX-o.clientX)/Math.pow(Math.PI,rI)).toFixed(2),n=gt.getComputedStyle(nI),a=aI?n.backgroundPositionY:n.backgroundPositionX,i=(i=parseFloat(a.substring(0,a.length-1))+parseFloat(e))<0?0:100<i?100:i,aI?(nI.style.backgroundPositionY=i+"%",hR.getElementById("fr_offsetY").value=i):(nI.style.backgroundPositionX=i+"%",hR.getElementById("fr_offsetX").value=i))}function aU(t){sI={pointerStartX:t.clientX,pointerStartY:t.clientY},rU().addEventListener("mousemove",nU),$T.addClass(iI,"dsn")}function iU(){sI={},rU().removeEventListener("mousemove",nU)}function oU(){var t=rU();t&&(t.addEventListener("touchstart",eU),t.addEventListener("touchmove",nU),t.addEventListener("touchend",tU),t.addEventListener("mousedown",aU),t.addEventListener("mouseup",iU)),iI=hR.getElementsByClassName("js-adjust-init_button")[0]}function rU(){return hR.getElementsByClassName(oI)[0]}function sU(t,e){this.domRoot=e,this.model=t}function lU(t){var e=hR.querySelector(".input-text_visual .ic-mic"),n=hR.getElementById("voice-recording-dialog");lI.switchClass(e,t,"__mod"),lI.switchClass(n,!t,"dsn")}function cU(){pI&&(lU(!1),pI.stop(),pI=null)}function uU(t,e){this.options=t||bI,this.defaultConfig=this.config=e||0}function dU(t,e,n){return e[t+n]}function hU(t,e,n,a){return e[t+n]=a}function pU(t){var e,n=t.target,a=t.payload;a?e=a.value:(e=n.getAttribute("data-value"),t.appendData({value:e,data:n.innerText,isSelected:wI.hasClass(n,"__selected"),isDisabled:wI.hasClass(n,"__disabled"),isSecondary:wI.hasClass(n,"__secondary")})),xI.value=e,RI.trigger({target:n,value:e,valueChanged:PI!==e}),PI=e}function fU(t){t.open?II.searchProvider=AI.searchProvider:II.searchProvider=null}function gU(t){var e;t.valueChanged&&(FI=MI.byDataId(jI.form),e=t.target,jI.checked=!e.getAttribute("data-has-specializations"),FI.skillsTumbler.checked=!0,FI.skillsSpecializations.value="",FI.skillsSpecializationsEnum&&(BI.addClass(FI.skillsSpecializationsEnum,"hidden"),BI.removeClass(FI.skillsSpecializationsEmpty,"hidden")))}function mU(t){t.valueChanged&&(VI.buttonToActivate.disabled=!t.value)}function vU(){}function yU(t,e){WI.switchClass(t,e,"__loading")}function bU(t){XI(t)}function CU(){bE(function(){iE.addClass(pE,mE),iE.removeClass(fE,yE),fE.style.width=hE.offsetWidth+"px",CE.style.paddingBottom=parseInt(dE,10)+fE.offsetHeight+"px",bE(function(){iE.addClass(fE,vE)})})}function SU(t){t.inViewport?(setTimeout(function(){iE.addClass(fE,yE)},450),bE(function(){iE.removeClass(pE,mE),iE.removeClass(fE,vE),dE&&(CE.style.paddingBottom=dE)})):CU()}function kU(t,e){var n,a;this.root=e,this.model=t,(this.searchForm=hR.querySelector(t.formQs))&&(n=this.searchField=this.searchForm.getElementsByClassName("search_input")[0],a=TE.getOrMakeBehavior(n),(this.nonLiveSearch=a instanceof xE)?IE.cancelled.attach(function(){this.toggleSearch(!1)},this):(this.toggleSearch(EE.get("isSearchFieldActive")||EE.get("isSearchResultState")),EE.onChanged("isSearchFieldActive",this.toggleSearch,this)))}function _U(){FE&&LE.onResultSelected.detach(TU,FE)}function wU(t){return{target:t.target,get form(){return this.target.getElementsByClassName("geo-link_form")[0]}}}function TU(t){var e,n,a,i=t.payload;"search.country.predefined"===i.name&&(n=(e=this.target).getAttribute("data-context"),e.getElementsByClassName("geo-link_label_tx")[0].textContent=i.data,"offersGeoService"!==n&&jE!==n||(a=i.geoIP)&&function(t,e){t.getElementsByClassName("js-geo-field")[0].value=e;var n=t.elements;OE.onLayerClosed.attachOnce(function(){n.accept_geo.click()})}(this.form,a))}function IU(t,e){this.context=e.getAttribute("data-context")}function EU(){}function AU(){}function xU(t,e){UE.request(t.getAttribute(XE),"POST").then(e||function(){}).send()}function PU(){var t=hR.getElementById(GE);t&&t.getAttribute(XE)&&xU(t,function(){zE(this.response())})}function OU(t){xU(t,function(){QE.hide(),PU()})}function LU(t,e){e.addEventListener("submit",function(){tA.remove(e)},!1)}function RU(t){var e,n,a,i,o=hR.getElementById("ok-app-frame");o&&(e=(new Date).getTime(),n=0<rA.length&&e-iA>rA[0]?rA.shift():0,a={type:t,start:iA,now:e,appId:o.getAttribute("data-appId"),ref:o.getAttribute("data-ref-place"),reload:o.getAttribute("data-reload"),focus:hR.hasFocus&&hR.hasFocus(),milestone:n},(i=o.getAttribute("data-platform"))&&(a.platform=i),aA.run("fapi.time-wasted.log",a))}function NU(t,e){var n,a=this;this.root=e,this.text=e.getElementsByClassName("js-clamp-text")[0],this.isClampApplied=!1,this.text&&(this.textParent=this.text.parentElement,this.checkClamping(),n=uA(BU,300),cA.changed.attach(n,this),dA.navigating.attachOnce(function(){cA.changed.detach(n,a)}))}function BU(){var t=this.textParent,e=this.text,n=e.cloneNode(!0),a=n.style;a.display="block",a.height="auto",a.maxHeight="none",a.whiteSpace="normal",a.width=Math.ceil(e.offsetWidth+1)+"px",a.visibility="hidden",a.position="fixed",a.pointerEvents="none",t.appendChild(n);var i=this.isClamped=1<n.offsetHeight-e.offsetHeight;this.isClampApplied=i,lA.switchClass(this.root,i,hA),lA.switchClass(this.root,!i,pA),lA.remove(n)}function DU(){}function MU(t,e){t=t||{};var n=this;this.topmostMenu=e,this.root=e,this.controls=[],this.checkedControlsCount=0,this.semiCheckedControlsCount=0,this.isChild=yA.hasClass(e,"expandable-menu_container"),this.parentInput=null,this.cacheDOMvalues=t.cacheDomValues||!gt._ok_forms_cacheValuesDisabled,this.isChild||("loading"===hR.readyState?hR.addEventListener("DOMContentLoaded",function(){n.initMenu()}):this.initMenu())}function jU(t,e,n){this.target=t,this.targetParent=e,this.menu=n,this.innerMenu=null,this.roleType=null,(this.parentInputId=t.getAttribute("data-parent-id"))&&this.initChildType(),yA.hasClass(t,kA)&&this.initRootType()}function FU(t,e){this.video=hR.getElementsByClassName("js-video-to-switch-sound")[0]}function qU(t,e){this.root=e,this.state=this.initState=EA.hasClass(e,"__true")}function HU(t){var e;t&&t.event===KA&&(e=XA.payload,!t.cancel&&e.url===t.url&&Date.now()-e.created<=3e4?XA.resolve(t):XA.reject(t))}function UU(t,e){var n=BA.run(t,JSON.stringify({url:e.state&&e.state.url||gt.location.href}));return"string"==typeof n||n instanceof String?JSON.parse(n):null}function VU(t){return YA&&YA[t]}function QU(t){"topicCreated"===t.event&&nx.reload()}function WU(t){t.redirectUrl?location.replace(t.redirectUrl):t.errorText?zU(t.errorText):zU(gx)}function zU(t){var e=hR.getElementsByClassName(vx)[0];e&&(e.style.display="block");var n=hR.getElementsByClassName(mx)[0];n&&(n.innerHTML=t)}function XU(){zU(gx)}function GU(t){if(!t)return null;var e={};e.provider=t.provider;var n,a=t.payload;return a&&((n={}).type=a.type,n.auth=a.auth,n.token=a.token,n.uuid=a.uuid,n.ttl=a.ttl,e.payload=n),e}function JU(){}function YU(a){if("https:"===location.protocol)try{function n(t){var e,n;e=t,n=a,ox.invoke("vkconnect/signIn",{payload:GU(e),state:n}).then(WU).catch(XU)}function i(t){var e;e=t,ox.invoke("vkconnect/bind",{payload:GU(e)}).then(WU).catch(XU)}function o(t){t.payload.auth}OK.loader.use(rx).then(function(){var t,e={appId:sx,appSettings:{external_device_id:lx}};OK.vkSuperAppKit.Config.init(e),ux?(t={action:{name:"bind_ok_account",token:ux,params:{id:dx,firstName:hx,lastName:px,avatarUrl:fx}}},OK.vkSuperAppKit.Connect.userVisibleAuth(t).then(i,JU)):cx?(t={action:{name:"open_account",token:cx}},OK.vkSuperAppKit.Account.open(t).then(o,JU)):OK.vkSuperAppKit.Connect.userVisibleAuth().then(n,JU)},function(){})}catch(t){}else startFallback()}function KU(){var n;function t(t,e){n=e.getAttribute("data-login-state"),cx=e.getAttribute("data-super-app-token"),ux=e.getAttribute("data-bind-super-app-token"),dx=e.getAttribute("data-user-id"),hx=e.getAttribute("data-user-first-name"),px=e.getAttribute("data-user-last-name"),fx=e.getAttribute("data-user-avatar-url")}t.prototype={initVkConnect:{tap:function(t){!function(){var t=hR.getElementsByClassName(vx)[0];t&&(t.style.display="none");var e=hR.getElementsByClassName(mx)[0];e&&(e.innerHTML="")}();try{YU(n),t.preventDefault()}catch(t){startFallback(),t.preventDefault()}}}};try{ix.register("vkConnect",t)}catch(t){}}function ZU(t,e){t&&yx.switchClass(t,e,"hidden")}function $U(t){this.dom=t}function tV(t,e){this.dom=t,this.model=e}function eV(t,e){this.dom=t,this.model=e}function nV(t){this.dom=t}function aV(t,e){this.model=t,this.root=e;var n=Px.byDataId(e);this.dom=n,this.items=e.getElementsByClassName("motivator-game-carousel_item"),this.itemsCount=this.items.length/2,this.buttonsView=new Ox(n,t),this.resultView=new Lx(n,t),this.forecastView=new Rx(n,t),this.containerView=new Nx(n),this.initModel(t)}function iV(t,e){this.model=t,this.root=e;var n=Fx.byDataId(e);this.dom=n,this.items=e.getElementsByClassName("motivator-game-grid_item"),this.itemsCount=this.items.length,this.initModel(),this.buttonsView=new qx(n,t),this.resultView=new Hx(n,t),this.forecastView=new Ux(n,t)}function oV(t){this.column=t}function rV(t,e){this.model=t,this.root=e;var n=Zx.byDataId(e);this.dom=n,this.items=e.getElementsByClassName("motivator-game-slot_item"),this.itemsCount=this.items.length/6,this.columns=e.getElementsByClassName("motivator-game-slot_column_list"),this.columnViews=[];var a=this;aP(this.columns,function(t){a.columnViews.push(new nP(t))}),this.rootHeight=this.columns[0].parentNode.offsetHeight,this.initModel(t),this.buttonsView=new $x(n,t),this.resultView=new tP(n,t),this.forecastView=new eP(n,t)}function sV(t){this.dom=t}function lV(t,e){this.model=t,this.root=e;var n=dP.byDataId(e);this.dom=n,this.items=e.getElementsByClassName("motivator-game-wheel_item"),this.itemsCount=this.items.length,this.initModel(t),this.buttonsView=new hP(n,t),this.resultView=new pP(n,t),this.forecastView=new fP(n,t),this.containerView=new gP(n)}function cV(t,e){var n=function(t,e){switch(t.gameType){case"CAROUSEL":return new CP(t,e);case"GRID":return new SP(t,e);case"SLOT":return new kP(t,e);case"WHEEL":return new _P(t,e)}}(t,e);this.view=n,t.autoStartScroll&&n.canAutoStart()&&this.view.onStartRolling();var a=this.onRelayout.bind(this);yP.attachUntilRendering(bP.resize,a,this)}function uV(t){t=t||{},this._unloadWrapper=this._unloadWrapper.bind(this),this.createEvents(),this.start(),t.asService||TP.rendering.attachOnce(this.end,this)}function dV(t){t.cancelled=!0}function hV(t){t=t||{url:"?st.cmd=pageLeaveConfirmationDialog&st.rtu="+location.search,dontPush:!0,confirmByClose:!0};var e=IP.start();return EP.show(t).then(function(t){t?e.resolve():e.reject()},function(){e.reject()}),e}function pV(t){return NP.then(t)}function fV(u,d){for(var t=d.querySelectorAll(".promo-avatar-card"),e=0,n=t.length;e<n;e++){var a=t[e],i=a.dataset;i.cardIndex=String(e),i.currentDecorIndex=String(0),o(a),function(t){var e=f(t);if(!e)return!1;var n=l(e);return WP.hasClass(n,"__process")}(a)&&i.imageToken&&r(a)}function o(t){for(var e=u.cards[t.dataset.cardIndex],n=e.decorKeys[t.dataset.currentDecorIndex],a=u.decorsRegistry[n],i=t.getElementsByClassName("promo-avatar-card_decor")[0].childNodes,o=0,r=i.length;o<r;o++){var s=i[o];s.nodeType===Node.ELEMENT_NODE&&("STATIC"!==a.type&&"OLD_YOUNG"!==a.type||!WP.hasClass(s,"promo-avatar-card_one-frame")?"DYNAMIC"===a.type&&WP.hasClass(s,"promo-avatar-card_sprite")?(s.style.width=a.spriteWidth+"px",s.style.backgroundImage="url("+h(a.spriteSrc)+")",s.style.backgroundSize=a.spriteWidth+"px 224px",s.style.animationDuration=a.durationSec+"s",s.style.animationTimingFunction="steps("+a.framesNumber+", end)",WP.removeClass(s,"hidden")):WP.addClass(s,"hidden"):(s.src=h("STATIC"===a.type?a.firstFrameOverlaySrc:a.filteredPhotoSrc),WP.removeClass(s,"hidden")))}var l,c=a.decorId||n;e.friendId||(l=t.getElementsByClassName("js-promo-avatar-card_button-target")).length&&(l[0].href=p(a.section,null,c)),d.getElementsByClassName("promo-avatar-content_footer-link")[0].href=p(a.section,e.friendId,c)}function h(t){return t&&t[0]===u.decorUrlsInfo.prefixPlaceholder?u.decorUrlsInfo.commonPrefix+t.substring(1):t}function p(t,e,n){return(e?u.openAppInfo.friendTemplate.replace(u.openAppInfo.friendIdPlaceholder,e):u.openAppInfo.selfTemplate).replace(u.openAppInfo.decorIdPlaceholder,n).replace(u.openAppInfo.sectionPlaceholder,t)}function r(a,t){var e,n=a.dataset;30<Number(n.attempt)||(e=(u.commitPromoAvatarInfo.delay||2e3)*(t?3:1),setTimeout(function(){var e,t,n;t=g(e=a),n=e.dataset,zP.commit(t.cardData.selfPhotoId,n.imageToken,t.decorId,n.encryptedPhotoId).then(function(t){"IN_PROGRESS"===t.status?(n.attempt=String(Number(n.attempt)+1),r(e)):"SUCCESS"===t.status&&(delete n.imageToken,delete n.encryptedPhotoId,delete n.attempt,c(e,u.commitPromoAvatarInfo.decoratedText),XP(t.ajaxEnvelopes))},function(){n.attempt=String(Number(n.attempt)+1),r(e,!0)})},e))}function s(t){var e=l(t);WP.addClass(e,"__process")}function l(t){return t.getElementsByClassName("js-promo-avatar-card_button-target")[0]}function c(t,e){var n=f(t),a=n.parentNode;a.removeChild(n);var i=hR.createElement("div");i.className="promo-avatar-card_done",i.textContent=e,a.appendChild(i)}function f(t){return t.getElementsByClassName("js-promo-avatar-card_button")[0]}function g(t){var e=u.cards[t.dataset.cardIndex],n=e.decorKeys[t.dataset.currentDecorIndex];return{cardData:e,decorId:u.decorsRegistry[n].decorId||n}}this.findCardElem=function(t){return VP.findParent(t,function(t){return!!t.dataset.cardIndex},d)},this.renderNextDecor=function(t){var e=Number(t.dataset.currentDecorIndex),n=u.cards[t.dataset.cardIndex].decorKeys.length;t.dataset.currentDecorIndex=String((e+1)%n),o(t)},this.sendPresentAvatar=function(t){var e=f(t),n=g(t);setTimeout(function(){e.parentNode&&s(e)},200),zP.sendPresent(n.cardData.friendId,n.decorId).then(function(){c(t,u.sendAvatarInfo.buttonSentText)})},this.decorateInPlace=function(n){var t=f(n),e=g(n);s(t),zP.create(e.cardData.selfPhotoId,e.decorId).then(function(t){var e=n.dataset;e.imageToken=t.token,e.encryptedPhotoId=t.encryptedPhotoId,e.attempt=String(1),r(n)})}}function gV(t){return t.dataset.used}function mV(t){t.dataset.used="true"}function vV(t,e){this.node=e,this.model=t}function yV(t,e){}function bV(t){var e="\x3c!--".length,n="--\x3e".length;return t&&(0!==t.indexOf("\x3c!--")||(t=t.substring(e,t.length-n).replace(/\\u0026#45;\\u0026#45;/g,"--")).length)?JSON.parse(t):null}function CV(t){return vO.get(["resolve","reject","all"]).then(function(){fO.all([SO.use("quasi-state"),yO.getLocale()]).then(function(){SO.use("dailyphoto-model").then(t)})})}function SV(t){for(var e=kO.length;e--;){var n=kO[e];if(t&&!t(n))return;if(!n.hookInstance)return;try{var a=n.element,i=a.getAttribute(bO)||CO;n.hookInstance[i](a),kO.splice(e,1)}catch(t){mO.info("dailyphoto","HookFactory deactivate"),mO.send({error:t})}}}function kV(t,e){var n=RO[t];n&&n.trigger(e)}function _V(t,e){PO.show({url:t,dontPush:!0,onShowed:function(){kV(e,!0),LO.hide()},onClosed:function(){kV(e,!1)}})}function wV(){}function TV(t){qO=t;var e=xV(gt.location.href);return!PV(e)&&OV()?DO.dailyphoto.dailyphotoModel&&DO.dailyphoto.dailyphotoModel.closeLayer(!0):PV(e)?EV(e):void 0}function IV(t){var e=xV(t.uri);if(PV(e)){if(OV())return!1;if("_self"===t.target.getAttribute("target"))return!1;if(qO&&qO.state){var n=xV(qO.state.url);if(FO.areEqual(e,n))return qO=mt,!1}return EV(e),!0}return!1}function EV(t){var e,n;HO===t[2]?AV(e=t[1],t[3]):(UO===t[1]&&(VO===t[2]?LV(zO,XO):AV(e=t[2],t[3])),QO===t[1]&&(e=t[2],3<(n=t).length&&HO.equals(n[0])&&QO.equals(n[1])&&WO.equals(n[3])?LV(GO+e,WO):LV(GO+e,null)))}function AV(t,e){LV(t,e)}function xV(t){return!!t&&jO.path(t).replace(/^https?:\/\//,"").split("/").slice(1)}function PV(t){return t&&(HO===t[2]&&4===t.length||HO===t[2]&&3===t.length||HO===t[0]&&1<t.length)}function OV(){return DO.dailyphoto.dailyphotoModel&&DO.dailyphoto.dailyphotoModel.isLayerOpened()}function LV(t,e){BO.getDailyPhotoDeps(function(){DO.dailyphoto.dailyphotoModel&&DO.dailyphoto.dailyphotoModel.handleUrl(t,e)})}function RV(){}function NV(t,e,n){for(var a=[],i=0;i<arguments.length;i++)arguments[i]!==mt&&a.push(arguments[i]);return a}function BV(t,e){mL=e,yL||(fL.initObserver(vL,{viewThreshold:.9}),gL.rendering.attachOnce(function(){yL=!1}),yL=!0),fL.observe(t,bL,vL)}function DV(t){fL.unobserve(t,vL)}function MV(){}function jV(t,e,n,a){t.phase!==DL.Phase.DISCARDING&&(e&&e(t),t.inViewport?t.inPlay||(n(t),t.inPlay=!0):t.inPlay&&(a(t),t.inPlay=!1))}function FV(n){return function(t){var e=t.target;DL.observe(e,{registered:MV,track:n}),VL.attachOnce(function(){DL.unobserve(e)})}}function qV(t,e){this.element=e}function HV(){gt.addEventListener("message",UV),tR.rendering.attachOnce(function(){gt.removeEventListener("message",UV)})}function UV(t){var e=t.data;e&&e.close&&($L.invoke("/headSlide/close"),ZL.removeClass(hR.body,"head-slide"),ZL.remove(hR.getElementById("top-slides-iframe")),gt.removeEventListener("message",UV))}function VV(t){for(var e=0;e<cR.length;e++)cR[e](t)}function QV(a){return function(){var n=function(t){try{var e=t.getAttribute("data-value");if(e)return JSON.parse(e)}catch(t){}return{}}(hR.getElementById("flow-data"));Promise.all([sR,lR]).then(function(t){var e;(e=hR.getElementById("content").querySelector(".js-loader"))&&e.classList.add("hidden"),gt.flow(hR.getElementById("content"),{version:a.version,source:a.source,initialData:n,l10n:t[0],history:{back:function(){iR.back()},pushState:function(t){iR.accountState({url:t},"pushState")},replaceState:function(t){iR.accountState({url:t},"replaceState")},onHistoryChange:function(t){cR.push(t)}},logger:oR.logging.logger})})}}uR.a=dR.suN7Qvg,uR.b=dR.re2JFYg,uR.d=dR.gh4Wvfw,uR.e=dR.ffi0zg,uR.f=dR.fR7JqXA,uR.g=dR.uih3DA,uR.h=dR.tZ1fdwg,uR.i=dR.taWQcQ,uR.j=dR.anMiJqQ,uR.k=dR.lEjiK2w,uR.l=dR.rS1Fsew,uR.m=dR.tRKdv8A,uR.n=dR.drmw1pw,uR.o=dR.dkYTtkQ,uR.p=dR.enDyBg,uR.q=dR.cTB47WQ,uR.r=dR.inIv7XA,uR.s=dR.sq2VowA,uR.t=dR.i1cv4hw,uR.v=dR.oLP05wA,uR.w=dR.o32dCkQ,uR.x=dR.tj5MoQ,uR.z=dR.pqIV3MA,uR.aa=dR.fDfeuPQ,uR.ad=dR.pUR9NiQ,uR.ae=dR.eZbnNRg,uR.af=dR.p5v5Bpg,uR.ah=dR.bNXpVIA,uR.ai=dR.dAScy1A,uR.aj=dR.tFQn7A,uR.ak=dR.cSkJoQg,uR.al=dR.aSQOUbQ,uR.am=dR.lfEjqEA,uR.an=dR.sCNXRig,uR.ao=dR.srbkIYw,uR.ap=dR.tTkx9Vg,uR.aq=dR.tn0yWTQ,uR.ar=dR.tHdjjgg,uR.as=dR.pDEtI1A,uR.at=dR.soifKuQ,uR.au=dR.s4bYXpw,uR.aw=dR.pULNjqA,uR.ba=dR.tkjLYA,uR.bb=dR.t06j1LA,uR.bc=dR.dZOX2ow,uR.bd=dR.vz5ZtYw,uR.be=dR.lK2Wdw,uR.bf=dR.aCr3dbg,uR.bg=dR.snrKpaQ,uR.bh=dR.sMgQSJQ,uR.bj=dR.hKFfvg,uR.bk=dR.rkxiB0A||(dR.rkxiB0A=((t=hR.createElement("a")).href="/",e=t.href,n=/^(\w{1,40}\:)|((\w{1,10}\:)?[\/\\]{2})/gi,{see:function(t){return{internal:0==t.indexOf(e),appHook:-1!=t.indexOf("/apphook/")}},abs:function(t){return 0==t.search(n)?t:e+("/"==t[0]?t.substr(1):t)},relative:function(t){return 0===t.indexOf(e)?t.substr(e.length-1):t}})),uR.bl=dR.iQlh52w||(dR.iQlh52w=(a=uR.aa,function(t,e){return t.prototype=a.OBJECT_CREATE?Object.create(e.prototype):function(t){function e(){}e.prototype=t.prototype;var n=new e;return e.prototype=null,n}(e),Object.defineProperties(t.prototype,{constructor:{writable:!0,value:t},superclass:{writable:!0,value:e}}),t})),uR.bm=dR.aGvMJ9g||(dR.aGvMJ9g=function(t,n,r,s,e){var a,i,o=gt.navigator,l=o&&o.appVersion;l&&l.indexOf&&-1!=l.indexOf("MSIE 9")&&(a=gt.XMLHttpRequest.prototype,i=a.getResponseHeader,a.getResponseHeader=function(t){var e=i.apply(this,arguments);return""==e?null:e});var c=t.create(),u=t.create(),d=t.create(),h=gt.okHead,p=h.xtkn;function f(t,e){!e&&t.aborted||(t.reject(),u.trigger(t.xhr))}function g(t){var e=t.target,n=e.okTask;if(4===e.readyState&&n&&!n.aborted){if(200===e.status){var a={xhr:e};try{c.trigger(a)}catch(t){}a.rejected?f(n):n.resolveIfNotDone(e)}else f(n);e.onreadystatechange=e.onerror=e.ontimeout=e.okTask=null}}function m(t){f(t.target.okTask)}function v(t,e,n){t.setRequestHeader(e,n)}function y(t,e){n.constructor.call(this),this.url=t,this.xhr=e,this.useXHRHeader=!0}h.xtkn="",e(y,n.constructor);var b=y.prototype;return b.send=function(){var t,e,n,a=this.postData,i=this.postFormData,o=this.xhr;return this.useXHRHeader&&v(o,"X-Requested-With","XMLHttpRequest"),a&&v(o,"Content-Type",this.contentType||"application/x-www-form-urlencoded"),this.xhrWithCredentials&&(o.withCredentials=!0),d.trigger(this),this.postAttachFile?(t=this.postAttachFile,function(e,t,n){try{e.setRequestHeader("Content-Disposition","attachment; filename="+encodeURI(t))}catch(t){e.setRequestHeader("Content-Disposition","attachment; filename="+encodeURI(n))}}(o,this.postAttachFile.name,"image.jpg"),o.setRequestHeader("Content-Type","application/x-binary; charset=x-user-defined"),n="bytes 0-"+((e=t.size)-1)+"/"+e,o.setRequestHeader("Content-Range",n)):t=a||i,this.withXtkn&&p&&!this.xhrExternal&&s.see(s.abs(this.url)).internal&&v(o,"X-XTKN",p),o.send(t),this},b.header=function(t,e){return v(this.xhr,t,e),this},b.data=function(t){return this.postData=t,this},b.dataJson=function(t){return this.data(JSON.stringify(t)),this.contentType="application/json;charset=UTF-8",this},b.responseType=function(t){return this.xhr.responseType=t,this},b.formData=function(t){return this.postFormData=t,this},b.attachFile=function(t){return this.postAttachFile=t,this},b.withCredentials=function(){return this.xhrWithCredentials=!0,this},b.setExternal=function(){return this.xhrExternal=!0,this},b.isExternal=function(){return this.xhrExternal},b.abort=function(t){return this.done||(this.aborted=!0,this.xhr.abort(),t?this.reject():f(this,!0)),this},b.response=function(){return this.xhr.responseText},b.withToken=function(){return this.withXtkn=!0,this},b.withXHRHeader=function(t){return this.useXHRHeader=t,this},{preview:d,success:c,error:u,resolved:(new y).resolve(),request:function(t,e,n){e=e||"GET";var a=new XMLHttpRequest,i="GET"===e.toUpperCase();i&&n&&(t=r.insertParams(t,n)),a.open(e,t),a.onreadystatechange=g,a.onerror=m,a.ontimeout=m;var o=a.okTask=new y(t,a);return!i&&n&&o.data(r.formatParams(n)),o}}}(uR.p,uR.i,uR.g,uR.bk,uR.bl)||gt),uR.bn=dR.wC0ffBg||(dR.wC0ffBg=function(c,u,n,t){"use strict";var d={};Object.defineProperty(d,"__esModule",{value:!0}),d.invoke=d.WEB_API_PREFIX=void 0,d.WEB_API_PREFIX="/web-api/v2";var o=0,h=!1,p="api.communication-error";function e(t){return new Promise(t)}function r(r,s,l){return e(function(e,n){var t,a=c.request((t=r,d.WEB_API_PREFIX+(0===t.indexOf("/")?"":"/")+t),"POST").dataJson(s);function i(){a.abort()}function o(){l.signal&&l.signal.removeEventListener("abort",i)}a.then(function(){var t;h=!1,o();try{t=JSON.parse(a.response())}catch(t){return void n({type:200,typeName:"SERVER_ERROR",errorCode:p,errorMessage:(null==t?void 0:t.message)||p})}!0===t.success?e(t.result):n(t.error)},function(){o(),a.aborted?n({type:2,typeName:"ABORT",errorCode:"abort",errorMessage:a.xhr.statusText||"abort"}):(h||u.log(p),h=!0,n({type:200,typeName:"SERVER_ERROR",errorCode:p,errorMessage:a.xhr.statusText||p}))}),a.send(),l.signal&&l.signal.addEventListener("abort",i)})}function a(t,e,n){var a={id:++o,parameters:{},filter:mt},i=(n=n||{}).filter;return null!=e&&(a.parameters=e),null!=i&&(a.filter=i),r(t,a,n)}return t.PROMISE_BASIC||(e=function(t){var e=(0,n.start)();return t(e.resolve.bind(e),e.reject.bind(e)),e}),d.invoke=a,void 0!==gt&&(gt.webapi={invoke:a}),d}(uR.bm,uR.a,uR.i,uR.aa)||gt),uR.bo=dR.cObjQ9g||(dR.cObjQ9g=(fR.prototype={setItem:function(t,e){this[t]=e},getItem:function(t){return this[t]}},vR.prototype={fixKey:function(t){return"z"+this.keyFactory(t)},store:function(t,e){this.objectStorage.setItem(this.fixKey(t),e)},get:function(t){return this.objectStorage.getItem(this.fixKey(t))},update:function(e,t,n){t(e,function(t){this.store(e,t),mR(n,t)}.bind(this))},getOrAdd:function(t,e,n){var a=this.get(t);return null!=a?mR(n,a):this.update(t,e,n),a},getOrAddAndUpdate:function(t,e,n){null!=this.getOrAdd(t,e,n)&&this.update(t,e,n)}},{makePermanentCache:function(t){return new vR(yR("localStorage"),t)},makeSessionCache:function(t){return new vR(yR("sessionStorage"),t)},makeObjectsCache:function(t){return new vR(new fR,t)}})),uR.bp=dR.rcv7FFg||(dR.rcv7FFg=function(n,a,i,t,o,e,r){var s,l,c,u=gt.performance,d=u&&u.timing,h=!1,p=e.makeSessionCache(),f=400,g=2e3,m="NONE";function v(t){n.measure=t}if(d)return v(function(t){s=t.timeout,l=t.detectCdn;var e=setTimeout(function(){e=null,C()},s);a.fullyLoaded.then(function(){clearTimeout(e),C()})}),t.navigating.attach(function(){v(k)}),{detectCdn:y};function y(){var t,e;return c||(c=o.start(),t=p.get("CDN"),!l||t?c.resolve(t):(setTimeout(function(){c.resolveIfNotDone(t)},g),function a(i){n.cookie=i?{setCookie:function(t,e,n){"CDN"===t&&i(e),a(null)}}:null}(function(t){t=t||m,p.store("CDN",t),c.resolveIfNotDone(t)}),(e=hR.createElement("script")).src="//mycdn.me/static/cdn/cdn.js?timestamp="+Date.now(),hR.head.appendChild(e),c.anyway(function(){i.remove(e)}))),c}function b(n,a){y().then(function(t){var e="/dk?st.cmd=clientStat&st.opid="+gt.pageCtx.stateId+"&st.rtime="+n+"&st.dtime="+a+"&st.cdn="+(t||m);!gt._ok_tmp_beaconEnabled&&r.BEACON_API?navigator.sendBeacon(e):(new Image).src=e})}function C(){h||(h=!0,setTimeout(function(){var t=d.loadEventEnd-d.navigationStart,e=d.domContentLoadedEventEnd-d.navigationStart;t<0&&(t=s),e<0&&(e=s),b(t,e)},f))}function S(t){setTimeout(function(){b("x",t.domLoadedTime)},f)}function k(){t.navigated.attachOnce(S)}v(function(){})}(uR.d,uR.k,uR.n,uR.r,uR.i,uR.bo,uR.aa)||gt),uR.bq=dR.pGswjBw||(dR.pGswjBw=function(){"use strict";var t={};return Object.defineProperty(t,"__esModule",{value:!0}),t.AJAX_NAV_RENDER_MEASURE=t.AJAXNAV_RENDER_MARK_START=void 0,t.AJAXNAV_RENDER_MARK_START="ajaxnavRender:start",t.AJAX_NAV_RENDER_MEASURE="ajaxnavRender",t}()||gt),uR.br=dR.ct2wHtg||(dR.ct2wHtg=function(t,n,a,i,e,o,r,s){"use strict";var l,c,u,d,h=n.PERFORMANCE_LEVEL1_API,p=n.PERFORMANCE_LEVEL2_API,f=n.PERFORMANCE_OBSERVER,g=n.VISIBILITY_PROPERTY_KEY,m=r.create(),v={stalled:0,stalledByEvent:{},webVitals:{CLS:0,CLS_count:0,LCP_count:0}},y=!0,b=!1,C=!1,S=!0;function k(){var t=Date.now();"visible"===hR[g]?u&&(v.stalled+=t-u):u=t}function _(){var t,e,n=function(){var t;p&&(t=performance.getEntriesByType("navigation")[0]);!t&&h&&(t=performance.timing);return t}();if(n){var a=n.domainLookupStart,i=n.connectStart,o=n.requestStart,r=n.responseStart,s=n.responseEnd,l=n.domInteractive,c=n.domContentLoadedEventStart,u=n.domComplete,d=n.loadEventStart||mt;return{timestamps:(t=N(a,i,o,r,l,c,u,d),e=n,t.redirectCount=e.redirectCount,t.size=e.transferSize,t),durations:function(t,e){t.redirect=e.redirectEnd-e.redirectStart,t.duration=e.duration,C&&(t.stalled=v.stalled);return t}(N(n.domainLookupEnd-a,n.connectEnd-i,r-o,s-r,l-s,n.domContentLoadedEventEnd-c,u-l,n.loadEventEnd-d),n),timing:n}}return null}function w(e){return new PerformanceObserver(function(t){t.getEntries().forEach(e||E)})}function T(t){return{type:t,buffered:!0}}function I(t,e){if(C){var n=v.stalled;return t-=n-(v.stalledByEvent[e]||0),v.stalledByEvent[e]=n,t}return t}function E(t,e){if(!g||"visible"===hR[g]){var n=v.webVitals;switch(t.entryType){case"largest-contentful-paint":var a="LCP",i=I(t.startTime,a);a in n?n.LCP_last=i:n[a]=i,n.LCP_count++;break;case"paint":"first-contentful-paint"===t.name?a="FCP":"first-paint"===t.name&&(a="FP"),a&&(n[a]=I(t.startTime,a));break;case"layout-shift":t.hadRecentInput||(n.CLS+=t.value,n.CLS_count++);break;case"first-input":var a="FID",o=t.processingEnd-t.startTime,r=I(t.startTime-(o||0),a);n[a]=r,s=function(t){t.webVitals.FID=r},(l=P())&&(s(l),O(l))}}var s,l}function A(t){m.trigger(t)}function x(t){t.name===s.AJAX_NAV_RENDER_MEASURE&&L({lifecycle:{ajaxnavRender:t.duration},stateId:B()},"/reports/lifecycle")}function P(){var e;try{var t=localStorage.getItem(l);t&&(localStorage.removeItem(l),e=JSON.parse(t))}catch(t){e=c,c=mt}return e}function O(e){try{localStorage.setItem(l,JSON.stringify(e))}catch(t){c=e,logClientEvent("performanceObserver:localStorageOff")}}function L(t,e){return t?(e=e||"/reports/performance",S&&n.BEACON_API?(navigator.sendBeacon(a.WEB_API_PREFIX+e,JSON.stringify({parameters:t})),o.resolved):a.invoke(e,t)):o.rejected}function R(){for(var t in d)d[t].disconnect();l=c=v=u=d=mt,hR.removeEventListener("visibilitychange",k),y=!1}function N(t,e,n,a,i,o,r,s){return{DNS:t,TCP:e,request:n,TTFB:a,DOMInteractive:i,DOMContentLoaded:o,DOMComplete:r,loaded:s}}function B(){return gt.pageCtx&&pageCtx.stateId||"unknown"}function D(t){return performance.getEntriesByType(t)}return t.create({name:"perfReports",init:function(t){l="performanceObserver",L(P()),t.countStalled&&hR.addEventListener("visibilitychange",k),f&&(d=function(){var t=w(),e=w(),n=w(),a=w(),i=w(A),o="first-input",r="largest-contentful-paint",s="paint",l="layout-shift",c="measure";try{t.observe({entryTypes:[o]}),e.observe(T(r)),n.observe(T(s)),a.observe(T(l)),i.observe(T(c))}catch(t){var u=["all"],d=PerformanceObserver.supportedEntryTypes;d&&d.length&&(u=["navigation",o,r,s,l,c].filter(function(t){return-1===d.indexOf(t)})),logClientEvent("performanceObserver:unsupportedTypes",[u.join(",")])}return{FID:t,LCP:e,paint:n,CLS:a}}()),m.attach(x),e.fullyLoaded.then(function(){setTimeout(function(){(function(){var t=o.start(),e=_();if(e){gt.pageCtx;var n=e.timing,a={timestamps:e.timestamps,durations:e.durations,webVitals:v.webVitals,misc:{unixTimeOffset:n instanceof PerformanceTiming&&n.navigationStart?performance.timeOrigin||n.navigationStart:0,stateId:B(),navType:h?performance.navigation.type:p?n.type:mt}};return b?(i.detectCdn().then(function(){a.misc.CDN=name||mt}).anyway(function(){t.resolve(a)}),t):t.resolve(a)}return t.reject()})().then(O)},50)})},update:function(t){S=t.useBeacon,b=t.detectCDN,C=t.countStalled},discard:function(){y&&L(P()).then(R)}}),{createPerformanceObserver:w,getEntries:D,processEntries:function(t,e){return D(t).forEach(e)},markMeasureEvent:m}}(uR.s,uR.aa,uR.bn,uR.bp,uR.k,uR.i,uR.p,uR.bq)||gt),uR.bs=dR.iv2Gm6g||(dR.iv2Gm6g=(i=uR.s,o=navigator.serviceWorker,i.create({name:"serviceWorker",init:function(t){o&&t.install&&o.register("/mres/pwa/sw.js",{scope:"/"}).then(bR,CR)},update:function(t){o&&t.uninstall&&(o.getRegistrations().then(function(t){for(var e in t)t.hasOwnProperty(e)&&t[e].unregister()}),logClientEvent("frontend.serviceWorker",["remove"]))}}),gt)),uR.bt=dR.pcJ6slg||(dR.pcJ6slg=(uR.bs,gt)),uR.bu=dR.pKS0myw||(dR.pKS0myw={darkTheme:-1<pR.className.indexOf("dark-theme")}),uR.bv=dR.b8nwuaQ||(dR.b8nwuaQ=(function(t,e,n,a,i){"use strict";function o(t,e){this.root=t,this.bindListeners()}function r(t){this.setActive("sidebar",t)}o.prototype={constructor:o,bindListeners:function(){n.onChanged("active",r,this),a.navigating.attachOnce(function(){n.offChanged("active",r,this)})},setActive:function(t,e){var n=hR.getElementById("bottombar-item-"+t);n&&i.switchClass(n,e,"__active")},openSidebar:{tap:function(){var t=e.sidebar;n.get("active")?t.close():t.open()}}},t.register("bottomNavbar",o)}(uR.ah,(uR.an,uR.au),uR.ao,uR.r,uR.n),gt)),uR.bw=dR.baYFGtA||(dR.baYFGtA=(r=uR.s,s=uR.w.create({enabled:!1,active:!1}),r.create({name:"bottomNavbarService",update:function(t){s.set("enabled",t.enabled)}}),s||gt)),uR.bx=dR.mNKAJAg||(dR.mNKAJAg={createDomTree:function(t,e){var n=hR.createElement(e||"div");return n.insertAdjacentHTML("beforeend",t),n}}),uR.by=dR.ssHLxcA||(dR.ssHLxcA=(l=uR.e,c=uR.n,{run:SR,runAll:function(t,e){e&&-1===e.indexOf("<script")||l(t.querySelectorAll("script"),SR)}})),uR.bz=dR.p3k7WdQ||(dR.p3k7WdQ=(u={},{put:function(t,e){u[t]=e},get:function(t){return u[t]}})),uR.ca=dR.gqLTew||(dR.gqLTew=(d=uR.e,function(t){var e=hR.createDocumentFragment();return d(t.childNodes,kR,null,e),e})),uR.cb=dR.anHJ8iA||(dR.anHJ8iA=(h=uR.n,p=uR.bd,f=uR.be,g=f.toolbar.height+20,{needsContainer:!1,parseDomNode:function(t,e){},run:function(t){var e,n,a,i,o,r,s,l=hR.getElementById(t.targetId)||hR.querySelector(t.targetSelector);l&&(e=p.calc(),n=l.offsetHeight,i=(a=h.getTotalOffsetTop(l))-g,o=e.scrollTop,r=!1,i<0&&(i=0),h.hasClass(pR,"messaging")?(l.scrollIntoView(),r=!0):i<o?(p.resetScroll(i),r=!0):0<(s=a+n-(e.scrollTop+e.height))&&(p.resetScroll(e.scrollTop+s+20),r=!0),r&&(t.wasScrolled=!0,t.savedScrollPosition=e))},invert:function(t,e){t.wasScrolled&&p.resetScroll(t.savedScrollPosition)}})),uR.cc=dR.dPovqyw||(dR.dPovqyw=(m=uR.d,v=uR.r,y=[],v.rendering.attach(function(){if(0<y.length)for(var t=y.slice(),e=y.length=0,n=t.length;e<n;e++){var a=t[e];clearTimeout(a.timeoutId),a.delayedApply()}}),{needsContainer:!1,parseDomNode:function(t,e){e.delay=t.getAttribute("data-delay")},run:function(e){e.delayedApply=function(){m.processAjaxEnvelope(e.content);var t=y.indexOf(e);-1!==t&&y.splice(t,1)},e.timeoutId=setTimeout(e.delayedApply,e.delay),y.push(e)},invert:function(t,e){throw new Error}})),uR.cd=dR.dTJ13LA||(dR.dTJ13LA={services:{animateSticker:"stickers-gallery-js",adsGeoManagerPage:b="campaigns-js",adsExtraManagerPage:b,adsInterestsManagerPage:b,postingFormView:"posting-module-js",reactLoader:"react-loader-js",promoBlock:"landing-module-js"},behaviors:{expandableMenu:b,formAjaxSubmitProxy:b}}),uR.ce=dR.ao0DpBA||(dR.ao0DpBA=(C=uR.d,S=uR.r,k=uR.ah,_=uR.i,w=uR.l,T=uR.cd,I=uR.k,k.behaviorCreated.attach(function(t){var e=t.behavior,n=e.discard;n&&S.rendering.attachOnce(n,e)}),I.domLoaded.then(function(){w.use("common-js",TR)}),C.initFunc=function(t){k.callFunc(t.target,"init")},S.requestAot.attach(TR),{process:TR,processScope:_R})),uR.cf=dR.tjvWMA||(dR.tjvWMA=(E=uR.n,A=uR.aj,x=uR.ap,P=uR.j,O=uR.al,{start:IR,startRemoval:function(t,e,n){e&&IR(t,e),setTimeout(function(){E.remove(t)},n||500)},setStyle:function(t,e){t.style[x.transition]=e||""},pause:function(t,e){t.style[e]=gt.getComputedStyle(t).getPropertyValue(e)},css:{shown:{__shown:!0},hidden:{__hidden:!0,__shown:!1}},onEnd:function(t,e){P(t,A,e)}})),uR.cg=dR.pjLo1bQ||(dR.pjLo1bQ=(R=uR.cf,N=uR.i,uR.n,ER.prototype={show:function(){var t=this.domNode;t&&R.start(t,R.css.shown)},hide:function(){var t=this.domNode;t&&(R.startRemoval(t,{__obsolete:!0},1e3),this.domNode=null,this.task=null)},start:function(t){var e;t.done||((e=this).domNode=e.config.getDomNode(),e.show(),e.task=e.task?N.all(e.task,t):t,e.task.then(e.onTaskComplete,e.onTaskComplete))}},{create:function(t){return new ER(t)}})),uR.ch=dR.psf6SqA||(dR.psf6SqA=(B=uR.n,{start:(F=uR.cg.create({getDomNode:function(){return D||(D=hR.getElementById("toolbarProgress"))&&(j=D.parentNode,AR(),j.replaceChild(M,D)),M&&!M.parentNode&&(AR(),j.appendChild(M)),M}})).start.bind(F)})),uR.ci=dR.s3A13yw||(dR.s3A13yw=(q=uR.e,H=uR.l,U=uR.ch,V=uR.bx,Q=uR.by,W=uR.bd,{fixScrollRecord:function(){X=W.recordScroll()},createScroll:function(t){return{action:"special",specialTarget:"scroll",options:t}},processing:{js:{run:function(t){var e,n=t.context;n.postponeJs?n.postponedJs=t:(e=V.createDomTree(t.content),Q.runAll(e,t.content),z=e)},invert:function(t,e){var n,a,i,o,r,s;z?e.content=z.innerHTML:(n=hR.getElementById("beforeBodyClose"))&&(a=Array.prototype,i=n&&n.parentNode.childNodes,-1!=(o=n&&a.indexOf.call(i,n))&&(r=a.slice.call(i,o+1),s=hR.createElement("div"),q(r,function(t){"SCRIPT"!=t.tagName||t.src||s.appendChild(t.cloneNode(!0))}),e.content=s.innerHTML))}},css:{run:function(t){var e=H.addCss(V.createDomTree(t.content),t.priority);return U.start(e),{task:e}},parseDomNode:function(t,e){e.priority=t.getAttribute("priority")}},scroll:{run:function(t){W.resetScroll(t.scroll)},invert:function(t,e){e.scroll=X||W.recordScroll(),X=null}}}})),uR.cj=dR.nJ3CDKQ||(dR.nJ3CDKQ=function(){"use strict";return function(e,n){return function(t){requestAnimationFrame(requestAnimationFrame.bind(this,e.bind(n,t)))}}}()||gt),uR.ck=dR.pOrhggw||(dR.pOrhggw=function(t,r,s,l,S,o,k,c,e,n,a,h,i){function u(){throw new Error}function d(t){return{position:t,relaunchScripts:!1,run:function(t){var e=t.container,n=t.contentDom,a=this.position;n?e.insertBefore(c(n),"beforeend"===a?null:e.firstChild):e.insertAdjacentHTML(a,t.content)},invert:u}}function _(t,e,n,a){if("special"===e)return null;var i=a.targetId;if(!i){var o=a.targetsSelector,r=a.targetSelector||o;if(r)return hR[o?"querySelectorAll":"querySelector"](r)}return hR.getElementById(i)}var w={content:{relaunchScripts:!0,run:function(t){t.container.innerHTML=t.content},invert:function(t,e){e.content=t.container.innerHTML}},replace:{relaunchScripts:!0,run:function(t){var e,n,a=t.container,i=t.contentDom,o=a.parentNode;i?(t.container=i.firstChild,e=c(i),o.replaceChild(e,a)):(n=l.indexOfChild(o,a),a.outerHTML=t.content,t.container=o.childNodes[n])},invert:function(t,e){e.content=t.container.outerHTML}},append:d("beforeend"),prepend:d("afterbegin"),remove:{run:function(t){var e=!0,n=t.options.onBeforeRemove,a=t.container;n&&(e=n(t.index,t.content,a)),!1!==e&&l.remove(a)},invert:u},attribute:{parseDomNode:function(t,e){e.name=t.getAttribute("name"),e.value=t.getAttribute("value")},run:function(t){var e=t.name,n=t.value;e&&e.length&&(null===n?t.container.removeAttribute(e):t.container.setAttribute(e,n))},invert:function(t,e){var n,a=t.name;a&&a.length&&(n=t.container,e.value=n.getAttribute(a))}},switch_class:{parseDomNode:function(t,e){e.value=t.getAttribute("value"),e.checkAdd="true"===t.getAttribute("checkAdd")},run:function(t){l.switchClass(t.container,t.checkAdd,t.value)},invert:function(t,e){e.checkAdd=l.hasClass(t.container,t.value)}},insert:{needsContainer:!1,parseDomNode:function(t,e){e.beforeId=t.getAttribute("before")},run:function(t){var e,n=t.beforeId,a=t.content,i=t.container;n&&0<n.length?(e=hR.getElementById(n))&&e.insertAdjacentHTML("beforebegin",a):i&&i.insertAdjacentHTML("beforeend",a)},invert:u},special:{needsContainer:!1,parseDomNode:function(t,e){var n=t.getAttribute("target-special");e.specialTarget=n;var a=e.options.special[n].parseDomNode;a&&a(t,e)},run:function(t){return t.options.special[t.specialTarget].run(t)},invert:function(t,e){var n=t.options.special[t.specialTarget].invert;n&&n(t,e)}},scroll_to:e,delay:n};function T(t,e,n){var a,i;!t||(i=(a=o.get(t))&&a[e])&&i.call(a,n)}function I(t,e,n){return{pushType:t,envelope:e,domNode:n}}function E(t,e){return t||!1===e.needsContainer}function A(g,m,v){var y=g.getContainer||_,b=g.onEnvelope,t=g.onComplete,e=g.onCompleteDeferred,C=!0;s(m,function(t,e){var n=t.pushType,a=t.action,i=t.content,o=y(e,a,i,t);!1===o&&(o=_(0,a,0,t)),t.content=i,t.container=o;var r,s,l,c=w[a],u=null;if(c)if(E(o,c)){var d,h,p=0,f=o instanceof NodeList?o:null;f&&(o=f[p],t.container=o,t.containers=f),g.computeUndo&&!t.irreversible&&(d=v.undo||(v.undo=[]),s=t,l={},k.copy(s,l),l.container=null,l.content=null,l.contentDom=null,h=l,c.invert(t,h),d.push(h));do{if(E(o,c)&&(u=c.run(t),(o=t.container)&&c.relaunchScripts&&S.runAll(o,t.content)),!f)break;t.container=o=++p<f.length?f[p]:null}while(o);f&&(t.container=null)}else v&&t.isCritical&&(v.failed||(v.failed=[])).push(t);if(b&&b(e,a,i,o),T(n,"pushProcessed",I(n,t)),(r=u&&u.task)&&e!==m.length-1)return r.anyway(function(){A(g,m.slice(e+1),v)}),!(C=!1)}),C&&t&&(t(v),e&&i(e)(v)),a.process()}function p(t,e,n){var a,l,c,u,i,d,o;(e=e||{}).special||(e.special={}),e.special.css=h.processing.css,A(e,(a=t,l=e,c=n,u=[],i=r.createDomTree(a),d=l.parseDomEnvelope,o=l.onDomParsed,s(i.childNodes,function(t,e){var n,a,i,o,r,s;t.getAttribute&&(a=(n=t.getAttribute("target-id"))?null:t.getAttribute("target-qs"),i=n||a?null:t.getAttribute("targets-qs"),r={pushType:o=t.getAttribute("push-type"),action:t.getAttribute("action"),isCritical:t.hasAttribute("data-critical"),irreversible:t.hasAttribute("data-irreversible"),index:e,options:l,context:c,content:t.innerHTML,contentDom:i?null:t,contentDomFirst:t.firstChild,contentDomLast:t.lastChild,targetId:n,targetSelector:a,targetsSelector:i},(s=w[r.action])&&s.parseDomNode&&s.parseDomNode(t,r),d&&d(t,r),T(o,"pushParse",I(o,r,t)),T(o,"pushReceived",I(o,r)),u.push(r))}),c&&(c.envelopes=u),o&&o(c),u),n)}t.OP_APPEND="append";var f=t.processAjaxEnvelope=p;return f.processAjaxEnvelopes=A,f.default=p,f}(uR.d,uR.bx,uR.e,uR.n,uR.by,uR.bz,uR.v,uR.ca,uR.cb,uR.cc,uR.ce,uR.ci,uR.cj)||gt),uR.cl=dR.Axua2g||(dR.Axua2g=(G=uR.al,J=uR.p,Y=gt.performance,K=Y&&"function"==typeof Y.now,Z=G.isNativeRAFSupported,$=Z?gt.requestAnimationFrame:xR,tt=Z?gt.cancelAnimationFrame:PR,OR.prototype={drawFrame:function(){var t=this.props;for(var e in t){var n=t[e],a=n.progressMap;!a||n.done||n.stopped||n.dataProcessor(a,n,this.animationData)}},run:function(){var t,e=this.props;if(e.name)this.animationsCount=1,this._animate(e);else for(var n in e)e.hasOwnProperty(n)&&(this.animationsSet.push(n),this.animationsCount++,(t=e[n]).name=n,this._animate(t));return this},stop:function(t,e){var n=this;t&&(n=this.props[t]),n.stopped=!0,tt(n.animationId),this.animationsStopped.push(t||"##all")},addProps:function(t){return this.props=t,this},disableLoop:function(){this.loop=!1},_animate:function(m){var a=0,v=this.loop,y=this.animationData,b=m.dataProcessor||(m.dataProcessor=this.dataProcessor),C=m.name||"@no_name_animation",S=m.group,k=m.duration,_=m.delay,w=m.from,T=m.to,I=m.timingFn;if(S){if(m.totalTypesCount=0,Object.keys)m.totalTypesCount=Object.keys(S).length;else for(var t in S)m.totalTypesCount++;k=k||S.duration,_=_||S.delay,w=w||S.from,T=T||S.to,I=I||S.timingFn,this.animationsCount+=m.totalTypesCount-1}k=k||150,_=_||0,w=w||0,T=T||0;var E=(K?Y:Date).now(),i=T-w,o=E+_,A=this;S?m.animationId=$(function t(e){e=K&&e||Date.now();var n,a=m.progressMap||(m.progressMap={});for(var i in S){var o,r=S[i];r.goNext&&((o=r.next).from===mt&&(o.from=r.endPoint),S[i]=r=o,r.isNext=!0,r.startWithDelay=e+(r.delay||0));var s=r.to||T,l=r.from||w,c=r.delay||_,u=r.startWithDelay||(r.startWithDelay=E+c);if(r.done)a[i]=r.endPoint;else{if(!r.started){if(!(r.started=u<=e)){a[i]=l;continue}r.eventData={animationData:y,name:C,type:i},r.isNext?(r.eventData.chain=r.name,A.onAnimationChainStart.trigger(r.eventData)):A.onAnimationStart.trigger(r.eventData)}r.notSameProgress===mt&&(r.notSameProgress=0<r.duration||r.timingFn||0<c);var d,h=r.duration||k,p=r.progress=Math.min(1,(e-u)/h),f=r.diff=s-l,g=r.timingFn||I;r.notSameProgress||n===mt?(d=g?g(p):p,r.notSameProgress||(n=d)):r.progress=d=n,a[i]=l+d*f,1===p&&(r.next?r.goNext=!0:(r.done=!0,--m.totalTypesCount,A.onAnimationEnd.trigger(r.eventData)),r.endPoint=a[i])}}return A.stopped||m.stopped?A.onAnimationStop.trigger(r.eventData):(v&&b(a,m,y),0===m.totalTypesCount?(tt(m.animationId),m.done=!0,void(m.animationId=null)):void(m.animationId=$(t)))}):(m.animationId=$(function t(e){e=K&&e||Date.now(),a=m.progress=Math.min((e-o)/k,1);var n=m.tweenProgress=I?I(a):a;return 1<=a?(v&&b(T,m,y),tt(m.animationId),m.animationId=null,void A.onAnimationEnd.trigger({animationData:y,name:C})):A.stopped||m.stopped?A.onAnimationStop.trigger({animationData:y,name:C}):(v&&b(w+n*i,m,y),void(m.animationId=$(t)))}),A.onAnimationStart.trigger({animationData:y,name:C}),m.started=!0)}},{build:OR})),uR.cm=dR.iPG21BQ||(dR.iPG21BQ=function(){"use strict";var t={};function o(t){return"visible"!==t&&("auto"===t||"scroll"===t)}return Object.defineProperty(t,"__esModule",{value:!0}),t.isScrollable=void 0,t.isScrollable=function(t,e){var n="overflowX",a="overflowY",i=gt.getComputedStyle(t);return e?o(i["x"===e?n:a]):o(i[n])||o(i[a])},t}()||gt),uR.cn=dR.s6a9iGw||(dR.s6a9iGw={IObserverPhases:et={DISCARDING:"discard"},defaultViewThreshold:.34,discardItem:function(t,e){var n=t.listener;t.phase=et.DISCARDING,e&&Object.assign(t,e),n.track(t),n.discard&&n.discard(t)}}),uR.co=dR.v9FpOqw||(dR.v9FpOqw=function(r,s,a){if(!("IntersectionObserver"in gt&&"IntersectionObserverEntry"in gt&&"intersectionRatio"in gt.IntersectionObserverEntry.prototype))return{isNative:!1};var i={},o={};function l(t){return o[t]}var n={};function c(t){var e=n[t];return e===mt&&u(t,e=[]),e}function u(t,e){n[t]=e}function d(t,e){return t.okTrackNoticeMap[e]}function h(t,e){s(t,function(t){!function(t,e){var n=d(t.target,e.observerName),a=t.intersectionRatio,i=0<a,o=a>n.viewThreshold;{n.inViewport===i&&n.reachedViewThreshold===o||(n.inViewport=i,n.reachedViewThreshold=o,n.listener.track(n))}}(t,e)})}function p(i){var t,o,e=l(i);e&&(e.disconnect(),t=c(i),u(i,o=[]),s(t,function(t){var e,n,a;e=t,n=i,a=o,pR.contains(e)?a.push(e):r.discardItem(d(e,n),{inViewport:!1,reachedViewThreshold:!1})}))}function f(t){var e=l(t);e&&e.disconnect(),delete o[t],delete n[t]}function g(t,e){p(t);var n,a=new IntersectionObserver(h,{threshold:[0,e]});a.observerName=t,a.viewThreshold=e,n=a,o[t]=n;var i=c(t);s(i,a.observe,a)}return{isNative:!0,Phase:r.IObserverPhases,initObserver:function(t,e){var n=e.viewThreshold||r.defaultViewThreshold;g(t,n),delete i[t],a.rendering.attachOnce(function(){i[t]=!0}),a.navigated.attachOnce(function(){i[t]&&(delete i[t],f(t))})},observe:function(t,e,n){var a=l(n),i={target:t,inViewport:!1,viewThreshold:a&&a.viewThreshold||r.defaultViewThreshold,reachedViewThreshold:!1,listener:e};return function(t,e,n){t.okTrackNoticeMap||(t.okTrackNoticeMap={});t.okTrackNoticeMap[e]=n}(t,n,i),c(n).push(t),a&&a.observe(t),e.registered(i),i},unobserve:function(t,e){var n=l(e);n&&n.unobserve(t);var a=c(e),i=a.indexOf(t);-1<i&&(r.discardItem(d(t,e)),a.splice(i,1))},addListener:function(t){},reflow:function(){}}}(uR.cn,uR.e,uR.r)||gt),uR.cp=dR.fMMcdA||(dR.fMMcdA=function(i,t,e,n,s,o){if(n.isNative)return n;var C=3,S=0,k=1,_=2,a=!1,l=[],c=t(function(t){var e=t.target;p(e),P();var n=h(e);n.forEach(f);for(var a=0,i=l.length;a<i;a++){var o=l[a];-1!==n.indexOf(o.listener)&&m(o)}},gt.okHead.scrollThrottle),w=i.calc(),T={x:0,y:0},I={top:0,left:0,width:0,height:0},r=[],u=e.isScrollable,d={};function h(t){return t.okISOSP}function E(t){return t.okSO}function p(t){var e=E(t);e.x=t.scrollLeft,e.y=t.scrollTop}function f(t){t.lastVisibleIndex=null}function g(t){w=t,P(),r.forEach(f),l.forEach(m)}function m(t){var e=t.element,n=t.listener,a=n.supportsScrollParent,i=a&&E(t.scrollParent)||T,o=t.rect;if(!o){if(!(n.aheadOfTime||null==n.lastVisibleIndex||t.index<n.lastVisibleIndex+C))return;var r=function(t){try{return t.getBoundingClientRect()}catch(t){return I}}(e),s=a?r.left-e.clientLeft+i.x:0,l=a?r.width:0,c=r.top+w.scrollTop-e.clientTop+i.y,u=r.height;t.rect=o={left:s,right:s+l,width:l,top:c,bottom:c+u,height:u}}var d,h,p=t.state,f=t.notice,g=S,m=f.viewThreshold,v=w.scrollTop+i.y,y=w.scrollBottom+i.y,b=Math.max(0,Math.min(o.bottom,y)-Math.max(o.top,v))/o.height;0<b&&(a&&(d=i.x,h=i.x+w.width,b*=Math.max(0,Math.min(o.right,h)-Math.max(o.left,d))/o.width),0<b&&(g=m<b?_:k,(null==n.lastVisibleIndex||n.lastVisibleIndex<t.index)&&(n.lastVisibleIndex=t.index))),g!==p&&(t.state=g,f.inViewport=g!==S,f.reachedViewThreshold=g===_,n.track(f))}function v(t){var e,n;pR.contains(t.element)?l.push(t):(e=t.listener,(n=t.notice).inViewport=!1,n.reachedViewThreshold=!1,e.track(n),e.discard&&e.discard(n))}function y(t){"IMG"===t.target.tagName&&A()}var b=-1;function A(){-1===b&&(b=setTimeout(x,17))}function x(){b=-1,a=!0,g(i.calc())}function P(){var n;a&&(n=[],l.forEach(function(t){t.rect=null;var e=t.listener.supportsScrollParent&&t.scrollParent;e&&E(e)&&-1===n.indexOf(e)&&n.push(e)}),n.forEach(function(t){p(t)}),a=!1)}return{isNative:!1,Phase:s.IObserverPhases,initObserver:function(t,e){var n,a=e.viewThreshold||s.defaultViewThreshold;n=a,d[t]=n,i.changed.attach(g),pR.addEventListener("load",y,!0),o.navigated.attachOnce(function(){var t;t=l,l=[],t.forEach(v)})},observe:function(t,e,n){var a=d[n]||s.defaultViewThreshold,i=e.supportsScrollParent?function(t){var e,n=null,a=t;for(;(e=a!==t&&a.okIsSP?a:a.okIOSP)||(u(a)?(a.okIOSP=pR,a.okIsSP=!0,e=a===t?pR:a):((n=n||[]).push(a),a=a.parentElement)),!e&&a;);e=e||pR;n&&n.forEach(function(t){t.okIOSP=e});return e}(t):pR;!function(t,e){{var n;t!==pR&&((n=h(t))?-1===n.indexOf(e)&&n.push(e):(t.okISOSP=[e],t.okSO={x:0,y:0},t.addEventListener("scroll",c)))}}(i,e);var o={target:t,inViewport:!1,viewThreshold:a,reachedViewThreshold:!1,listener:e},r={index:l.length,element:t,listener:e,scrollParent:i,isInViewport:!1,rect:null,state:S,notice:o};return e.registered(o),l.push(r),m(r),o},unobserve:function(n){var a=-1;l.forEach(function(t,e){if(t.element===n)return a=e}),-1<a&&(s.discardItem(l[a].notice),l.splice(a,1))},addListener:function(t){r.push(t)},reflow:A}}(uR.bd,uR.bb,uR.cm,uR.co,uR.cn,uR.r)||gt),uR.cq=dR.i2u1ldQ||(dR.i2u1ldQ=(nt=uR.cp,((at=uR.co).isNative?at:nt)||gt)),uR.cr=dR.aCPSXSg||(dR.aCPSXSg=(it=uR.d,ot=uR.r,uR.bd,rt=uR.cq,it.autoPausableAnimation=function(t){var e=t.target,n={registered:function(){},track:function(t){e.style.animationPlayState=t.inViewport?"":"paused"}};rt.observe(e,n),ot.rendering.attachOnce(function(){rt.unobserve(e)})},gt)),uR.cs=dR.aTRbAsg||(dR.aTRbAsg=(st=uR.al,lt=uR.p,ct=gt.performance&&"function"==typeof gt.performance.now,{run:function(n,a,t){var i,o,r,s=ct?gt.performance.now():Date.now(),l=t.time||150,c=t.from||0,u=t.to,e=t.by,d=t.timing,h=lt.create();return o=u-c,e&&(u=c+(o=e)),r=st.run(function t(e){return e=ct&&e||Date.now(),1<=(i=(e-s)/l)?(a(n,d?1:u),st.stop(r),void h.trigger(n)):(a(n,d?i:c+Math.round(i*o)),void st.run(t))}),{onAnimationEnd:h}}})),uR.ct=dR.aHEJ56w||(dR.aHEJ56w={easings:{swing:function(t){return.5-Math.cos(t*Math.PI)/2},quad:function(t){return Math.pow(t,2)},cubic:function(t){return Math.pow(t,3)},easeOutQuad:function(t){return t*(2-t)}},getCubicBezierTiming:function(t,e,n){var a=1-t;return 3*t*(a*a)*e+t*t*3*a*n+t*t*t},createVector:function(e,n,a,i){return{getYByX:function(t){return(t-e)/(a-e)*(i-n)+n},getXByY:function(t){return(t-n)/(i-n)*(a-e)+e}}},factorial:RR,createGaussRandomizer:function(){var a,i,o,r=!0;return function(t,e){var n;if(t=t||0,e=e||1,r){for(;n=2*Math.random()-1,a=2*Math.random()-1,1<(o=n*n+a*a)||0===o;);return i=Math.sqrt(-2*Math.log(o)/o),r=!1,n*i*e+t}return r=!0,a*i*e+t}},normalizedRandomBy12:function(){for(var t=Math.random(),e=11;e--;)t+=Math.random();return t/12},createSimplerRandomizer:function(t,e){return t=void 0===t?0:t,e=e||1,function(){return t+Math.floor(Math.random()*(e-t+1))}}}),uR.cu=dR.lo4ogMg||(dR.lo4ogMg=(ut=uR.af,dt="IOS_TEST",{isSupported:function(){try{if(void 0!==gt.localStorage&&null!==gt.localStorage)return ut.iOS&&(gt.localStorage.setItem(dt,"OK"),gt.localStorage.removeItem(dt)),-1<localStorage.length}catch(t){}return!1}(),clear:function(t,e){for(var n=localStorage.length,a=[],i=0;i<n;i++){var o=localStorage.key(i);o&&0===o.indexOf(t)&&a.push(o)}for(var r,s=a.length;s--;)e(r=a[s]),localStorage.removeItem(r)}})),uR.cv=dR.dyy2LIQ||(dR.dyy2LIQ=function(){"use strict";var t={};return Object.defineProperty(t,"__esModule",{value:!0}),t.debounce=void 0,t.debounce=function(r,s,l){var c=null,u=null;return function(){var t=arguments,e=this||{delay:0,debounceId:null},n=s||e.delay,a=arguments.length,i=new Array(a);if(a)for(var o=0;o<a;o++)i[o]=t[o];c&&gt.clearTimeout(c),u&&gt.clearTimeout(u),l&&null===u?(r.apply(e,i),u=gt.setTimeout(function(){u=null},n)):c=e.debounceId=gt.setTimeout(function(){r.apply(e,i),u=null},n)}},t}()||gt),uR.cw=dR.djmTZrQ||(dR.djmTZrQ=uR.cv.debounce||gt),uR.cx=dR.tS3B5mw||(dR.tS3B5mw=(ht=uR.i,pt=uR.ai,ft=uR.n,vt=uR.ah,Ct="touchOverlay",pt.addFuncHandler(Ct,{touchStart:function(t){NR(t.target)}}),{lockScreen:function(t,e){var n,a=t||hR.body;return e&&(n=e.prepend),bt||(yt=ht.start(),(bt=hR.createElement("div")).className="touch-overlay",bt.setAttribute("data-view-level","doc"),bt.setAttribute("data-func",Ct),vt.listenPreventable(bt),n?a.insertBefore(bt,a.children[0]):a.appendChild(bt)),t&&t!==bt.parentNode&&(n?t.insertBefore(bt,t.children[0]):t.appendChild(bt)),yt},unlockScreen:function(){NR(bt)}})),uR.cy=dR.pSyOnNA||(dR.pSyOnNA={htmlFromEnvelopeInserted:uR.p.create()}),uR.cz=dR.CCPe3w||(dR.CCPe3w=(BR.prototype={process:function(t){var n=this,a=this.canvas,i=this.ctx,o=this.activeAnimations,r=!1;o.forEach(function(t,e){t.done||t.stopped?delete o[e]:(t.drawFrame(),r=!0)}),r?requestAnimationFrame(function(t){var e;i.clearRect(0,0,a._okReact_w,a._okReact_h),15<o.length&&(e=[],o.forEach(function(t){e.push(t)}),n.activeAnimations=e),n.process(t)}):(this.activeAnimations=[],this.busy=!1)},run:function(t){this.busy||(this.process(t),this.busy=!0)},add:function(t){t.disableLoop(),this.activeAnimations.push(t)},remove:function(t){var e=this.activeAnimations;delete e[e.indexOf(t)]},addAndRun:function(t){this.add(t),t.disableLoop(),t.run(),this.run()}},BR)),uR.da=dR.p5Cg5CQ||(dR.p5Cg5CQ=(St=uR.i,kt=gt.devicePixelRatio||1,_t=1.5<=kt?"@2x":"",DR._OKinterop={_baseKey:"image"},DR)),uR.db=dR.pxsC3GQ||(dR.pxsC3GQ=(wt=uR.da._OKinterop,function(t,e){var n,a,i,o,r,s,l,c,u=gt.devicePixelRatio||1,d=MR,h=jR;for(var p in e&&(d=e.getAsset||d,h=e.getResource||h,n=e.width,a=e.height),t)t.hasOwnProperty(p)&&(!(i=d(p,t))||(o=h(i))&&(s=(r=hR.createElement("canvas")).getContext("2d"),l=n||o.width,c=a||o.height,r.width=l*u,r.height=c*u,s.scale(u,u),s.shadowOffsetX=0,s.shadowOffsetY=1,s.shadowBlur=5*u,s.shadowColor="rgba(0,0,0,.35)",s.drawImage(o,0,0,l,c),i.canvas=r))})),uR.dc=dR.mmytIDw||(dR.mmytIDw=(Tt=180/Math.PI,It=Math.PI/180,Et=2*Math.PI,At=4*Math.PI,{ANGLES_IN_RADIAN:Tt,RADIANS_IN_ANGLE:It,TWO_PI:Et,QUAD_PI:At,clampNumber:function(t,e,n){var a=t/(e=e||1);return t%e&&(a=n?parseFloat(a.toFixed(n)):Math.round(a)),a},truncateNumber:function(t,e,n){return Math.min(Math.max(t,e),n)},getFlooredPercent:function(t,e){return Math.floor(t/e*100)},randomSign:function(){return.5<Math.random()?1:-1},degToRad:function(t){return t*It},radToDeg:function(t){return t*Tt}})),uR.dd=dR.coFbwCg||(dR.coFbwCg=function(){"use strict";var t,e={};function i(){return t||(t=hR.createElement("style"),hR.head.appendChild(t)),t.sheet}function n(t){void 0===t&&(t=-1),-1<t&&i().deleteRule(t)}function a(t){for(var e=i().cssRules,n=0,a=e.length;n<a;n++){if(e[n].selectorText===t)return n}return-1}return Object.defineProperty(e,"__esModule",{value:!0}),e.searchRuleBySelector=e.deleteRuleBySelector=e.insertRule=e.deleteRule=e.injectionPoint=void 0,e.injectionPoint=i,e.deleteRule=n,e.insertRule=function(t,e){void 0===e&&(e=0);var n=i();return n.insertRule(t,0<e?Math.min(e,n.cssRules.length):e)},e.deleteRuleBySelector=function(t){n(a(t))},e.searchRuleBySelector=a,e}()||gt),uR.de=dR.cgdNIFg||(dR.cgdNIFg=(xt=uR.d,Pt=uR.s,Ot={},xt.copyService=Pt.create({init:function(t){Ot=Object.assign(Ot,t)}}),Ot||gt)),uR.df=dR.cqKztVw||(dR.cqKztVw=(FR.prototype={run:function(){for(var t=this.handlers,e=t.length-1;0<=e;e--){var n=t[e].apply(0,arguments);if(n)return n}return!1},enqueue:function(t){t instanceof Function&&(t.okIsChainRoot?this.handlers.splice(0,0,t):this.handlers.push(t))},dequeue:function(t){var e=this.handlers,n=e.indexOf(t);-1!==n&&e.splice(n,1)}},{create:function(){return new FR}})),uR.dg=dR.aFANw||(dR.aFANw={clickEvent:(Lt=uR.p).create(),outlinkClickEvent:Lt.create()}),uR.dh=dR.aD4uIVg||(dR.aD4uIVg=(Rt=uR.d,Nt=uR.df,Bt=uR.g,Dt=uR.bk,uR.p,Mt=uR.n,jt=uR.dg,Ft=uR.ae,qt=uR.ai,Ht=uR.o,Vt=jt.clickEvent,Qt=jt.outlinkClickEvent,Wt=!1,zt=40,Xt=300,Gt={},function(){qt.setNavigation({handleClick:qR,handleSubmit:UR}),hR.addEventListener("submit",HR),Ut=Nt.create();var t=Rt.asapHandle,e=t.event;e&&setTimeout(function(){UR(t.link,e)},4),t.dispose(),VR(QR)}(),{register:function(t){VR(t)},revoke:function(t){Ut.dequeue(t)},go:function(t,e,n){var a=hR.createElement("a");return a.href=t,zR(a,e,n)},goSpecific:zR})),uR.di=dR.cf3Inlg||(dR.cf3Inlg=function(){"use strict";var t,e={};function a(){return t=t||navigator.clipboard&&"Promise"in gt}function n(t){if(a())return navigator.clipboard.writeText(t);var e=hR.createElement("textarea");e.value=t,e.className="screen-reader-only",hR.body.appendChild(e),e.select();var n=hR.execCommand("copy");return hR.body.removeChild(e),n?Promise.resolve():Promise.reject()}return Object.defineProperty(e,"__esModule",{value:!0}),e.copy=e.detectClipboardApi=void 0,e.detectClipboardApi=a,e.copy=n,gt.OK.clipboard={copy:n,detectClipboardApi:a},e}()||gt),uR.dj=dR.cVUgv4g||(dR.cVUgv4g=(Jt=uR.de,Yt=uR.i,Kt=uR.dh,Zt=uR.g,$t=uR.di,{copy:function(t){var e=Yt.start();return $t.copy(t).then(e.resolve.bind(e),function(){e.reject.call(e),function(t){var e=Jt.linkToState,n=Jt.fieldRtu,a={};a[Jt.fieldText]=t,a[n]=gt.location.pathname+gt.location.search;var i=Zt.insertParams(e,a);Kt.go(i,null)}(t)}),e}})),uR.dk=dR.tr86EjQ||(dR.tr86EjQ=(te=uR.r,ee=null,ne="__toggle-on",{show:function(t,e){XR()&&JR(),ee=setTimeout(JR,e||3e3),te.rendering.attachOnce(JR);var n=GR();n&&(n.toastContent.innerHTML=t,n.toastRoot.classList.add(ne))},hide:JR})),uR.dl=dR.sWvwgKg||(dR.sWvwgKg=(ae=uR.dk,function(t,e){t&&0<t.length&&ae.show(t,e)})),uR.dm=dR.aMBnvQ||(dR.aMBnvQ=(ie=uR.af,oe=gt.OKApp,re="{}",se={backBefore:1},{run:YR,runAndRetry:KR,supports:function(t){return gt.OKApp&&gt.OKApp[t]}})),uR.dn=dR.OeHQmjQ||(dR.OeHQmjQ={UPDATE_EVENT_COUNTERS:"updateEventCounters",COPY_AND_TOAST:"copyAndToast"}),uR.dp=dR.pRsodQ||(dR.pRsodQ=function(){"use strict";var e={};return Object.defineProperty(e,"__esModule",{value:!0}),e.getPts=e.getStateId=e.pageCtx=void 0,e.pageCtx=gt.pageCtx,e.getStateId=function(){return e.pageCtx.stateId},e.getPts=function(){var t=e.pageCtx.pts;return"string"==typeof t?e.pageCtx.pts=JSON.parse(t):t||{}},e}()||gt),uR.dq=dR.c0rL0Q||(dR.c0rL0Q=(le=uR.dj,ce=uR.dl,ue=uR.dm,de=uR.dn,he=uR.dp,function(t,e){e=e||he.getPts().textCopied,ue.supports(de.COPY_AND_TOAST)?ue.run(de.COPY_AND_TOAST,JSON.stringify({text:t,toast:e})):le.copy(t).then(function(){ce(e)})})),uR.dr=dR.oVyTYsQ||(dR.oVyTYsQ={OkArt:gt.OkArt||(gt.OkArt={})}),uR.ds=dR.SS1GOkA||(dR.SS1GOkA=function(t,i,o,r){"use strict";var e={};Object.defineProperty(e,"__esModule",{value:!0}),e.Surprise=void 0;function n(t,e,n,a,i,o){this.el=t,this.surpriseName=e,this.surpriseUrl=n,this.clickX=a,this.clickY=i,this.copyTextMessage=o}return n.prototype.destroy=function(){this.cleanSurprise&&(this.cleanSurprise(),delete this.cleanSurprise)},n.prototype.run=function(){var a=this,e=this.el.getBoundingClientRect();(0,t.use)(this.surpriseUrl+"/main.js",function(){var n=hR.createElement("div"),t=["position: fixed","left: "+e.left+"px","width: "+e.width+"px","top: 0","bottom: 0","z-index: 10000"];n.setAttribute("style",t.join(";")),hR.body.appendChild(n),a.cleanSurprise=function(){hR.body.removeChild(n)},r.OkArt.run({name:a.surpriseName,rootUrl:a.surpriseUrl+"/",host:n,appendToHost:!0,onFinished:function(){a.destroy()},onCallPixel:function(t){(new Image).src=t.url},onCopyText:function(t){i(t.value,a.copyTextMessage)},onFinishedWithData:function(t){var e=hR.createElement("a");e.href=t.redirect,o.iOS||(e.target="_blank"),n.appendChild(e),e.click(),a.destroy()},click:{x:(a.clickX-e.left)/(e.width-1),y:a.clickY/(gt.innerHeight-1)}})})},e.Surprise=n,e}(uR.l,uR.dq,uR.af,uR.dr)||gt),uR.dt=dR.ryEoSw||(dR.ryEoSw=(uR.l,pe=uR.n,fe=uR.o,uR.cs,ge=uR.cl,me=uR.ct,ve=uR.ai,ye=uR.ah,be=uR.s,Ce=uR.d,uR.e,Se=uR.bm,ke=uR.g,_e=uR.cu,we=uR.ap,uR.cw,Te=uR.al,Ie=uR.cx,Ee=uR.ck,Ae=uR.cy,xe=uR.bd,uR.ae,Pe=uR.cz,Oe=uR.da,Le=uR.db,Re=uR.dc,Ne=uR.dd,Be=uR.ds,De=uR.v,Ue="reaction-source",Ve="reactions_item_img",Qe="__touched",We="__chosen",ze="__private",Qe="__active",Xe="__super-react",Ge="__closing",Je="g--untouchable",Ye="__waiting",Ke="__processing",Ze="private-reaction-hint-shown",$e="longtap-reaction-hint-shown",tn="reaction-hint-shown-stamp",en=gt.devicePixelRatio||1,nn=5,an=Math.PI/180,on=3*Math.PI,rn=22.5,sn=we.transform,ln=350,dn=(un=48)/2,hn=1300,gn=1.8,mn=(fn=650)/3,vn=.9*(pn=2.8),yn=2.5*un,bn=1.5*un,Cn=4*un,Sn=(cn=5)*un,kn=6*un,_n=Math.sqrt(42632),wn={},Tn={},In=me.createGaussRandomizer(),En=me.createGaussRandomizer(),An=Re.randomSign,Te.isNativeRAFSupported,xn=[!1,!1,!1],On=ge.build,tN.prototype={replaceLikeLink:function(){var t,e=this.elem.getElementsByClassName("widget_like")[0];e&&(e.href?(this.likeUrl=e.href,e.setAttribute("data-like-url",this.likeUrl),t=e.outerHTML,e.outerHTML=["<span",t.substring(2,t.length-4),"</span>"].join("")):this.likeUrl=e.getAttribute("data-like-url"))},performLike:{tap:function(t,e){var n,a,i,o=this.reactionPanelNode,r=this.elem;pe.addClass(e,Je),wn.loaderEnabled&&setTimeout(function(){pe.addClass(e,Ye)},175),wn.longTapLearningEnabled&&_e.isSupported&&((a=parseInt(gt.localStorage.getItem($e)||0))<nn&&(!wn.softLearningHintEnabled||parseInt(gt.localStorage.getItem(tn)||0)+wn.softLearningHintDelay<Date.now())&&(n=oN(this,e,a))),wn.instantReactionEnabled&&(pe.addClasses(e,Qe+" __ajax-updated"),(i=e.getElementsByClassName("ic-react")[0])&&pe.addClass(i,"like-react"));var s,l,c,u,d=e.getAttribute("data-reaction-base-id")||0,h=e.getAttribute("data-surprise-url"),p=e.getAttribute("data-surprise-surprise-name"),f=e.getAttribute("data-surprise-copy-text-msg"),g=ke.insertParams(this.likeUrl,{"st.rid":d});h?(s=hR.querySelector(".feed-card-list,.theme-comments-head"))&&new Be.Surprise(s,p,h,t.clientX,t.clientY,f).run():(l=r.getElementsByClassName(Ve)[0],c=r.querySelector(".widget-list_i.__like .fi")||r.querySelector(".widget-list_i.__like .ic"),l.style.left=c.getBoundingClientRect().left-r.getBoundingClientRect().left-12+"px",l.style.display="block",r.appendChild(l),(u=new On({animatable:l},fN,{transform:{duration:350,group:{translateY:{to:-(yn+Math.abs(En(0,.5)*un))},translateX:{to:un*In(0,.75)},rotate:{to:30*(2*Math.random()-1)},scale:{from:.34,to:2,next:{name:"scale-out",to:1.85,duration:20,timingFn:null,next:{name:"scale-bounce",to:2.3,duration:600,timingFn:$R,next:{name:"scale-end",to:0,duration:185,delay:200}}}}}}})).onAllAnimationsEnd.attach(function(t){pe.remove(t.animationData.animatable)}),u.run()),lN(e,g,null,null,null,n),o&&pe.hasClass(o,"__open")&&Pn&&Ie.unlockScreen()},longTap:nN,keyDown:function(t,e){13===t.keyCode&&ye.getOrMakeBehavior(e).performLike.tap.call(this,t,e)}},openReactionPanel:{tap:nN,longTap:nN,keyDown:function(t,e){13===t.keyCode&&ye.getOrMakeBehavior(e).performLike.tap.call(this,t,e)}},performUnreact:function(t,e){if(wn.longTapControlsEnabled){var n=this.elem.getElementsByClassName("hint_body")[0];if(n)return logClientEvent("reaction",["unlike-by-hint-prevented"]),void pe.remove(n)}var a,i;fe.parentBySelector(e,".widget-list_i")&&(pe.addClass(e,Je),wn.loaderEnabled&&setTimeout(function(){pe.addClass(e,Ye)},175),wn.instantReactionEnabled&&(pe.removeClass(e,Qe),pe.removeClass(e.getElementsByClassName("ic-react")[0],"like-react"),pe.addClass(e,"__ajax-updated"),a=e.getElementsByClassName("ic_tx")[0],i=e.getAttribute("data-default-label"),"function"==typeof a.textContent?a.textContent=i:a.innerHTML=i),lN(e,this.likeUrl,null,null,null,null))},unReact:{tap:function(t,e){this.performUnreact(t,e)},longTap:nN,keyDown:function(t,e){13===t.keyCode&&this.performUnreact(t,e)}}},tN.isInstant=!0,ye.register("widgetBehavior",tN),cN.isInstant=!0,cN.prototype={update:function(t){var e;for(var n in Tn)e=!1,this.animationStorage[n]=[];if(e)for(var n in JSON.parse(t.reactionMap))this.animationStorage[n]=[]},flushStorageOfType:function(t){this.animationStorage[t]=[]},removeInstanceFromStorage:function(t,e){var n=this.animationStorage[t],a=n.indexOf(e);-1<a&&n.splice(a,1)},getInstancesFromStorage:function(t){return this.animationStorage[t]},isSuper:function(t){return t===this.lastSuper},clearLastSuper:function(){var t=this.lastSuper;t&&(t.setAttribute("data-reaction",t._okRId-=100),pe.removeClass(t,Xe)),this.lastSuper=null},lockTap:function(t){var e=this;e.tapLocked=!0,setTimeout(function(){e.tapLocked=!1},t)},launchReaction:{touchStart:function(t,e,n){var a,i,o,r,s,l,c,u,d;this.tapLocked||(i=(a=this).widgetBehavior,o=a.isSuper(e),r=e._okRId,s=a.canvas,n=n||wn.advancedAnimationsEnabled,e!==a.lastSelected&&(a.lastSelected&&(a.clearLastSuper(),pe.removeClass(a.lastSelected,We)),pe.addClass(e,We),dN(e,i)),this.lastSelected=e,n?(l={reactionBehavior:a,reactionId:r,target:e},(c=new uN(parseInt(e.getAttribute("data-reaction"))).addRectBox(e.getBoundingClientRect())).centerPosX-=s._okReact_x,c.centerPosY-=s._okReact_y,l.animatable=c,l.ctx=s.getContext("2d"),(u=qe.result[r])&&(l.asset=u.canvas),d=new On(l,aN,{transform:{duration:425,group:{translateY:{to:-Math.min(yn,yn+En(0,.5)*un)},translateX:{to:un*In(0,.75)},rotate:{to:30*An()},scale:{from:1,to:2,next:{name:"scale-out",to:1.85,duration:20,timingFn:null,next:{name:"scale-bounce",to:2.3,duration:600,timingFn:$R,next:{name:"scale-end",to:0,duration:185,delay:200}}}}}}}),this.animationStorage[r].push(d),o||d.onAnimationStart.attach(pN,d),d.onAllAnimationsEnd.attachOnce(hN,d),a.canvasAnimator.addAndRun(d)):sN(i))},touchEnd:function(t,e){},touchMove:function(){},keyDown:function(t,e){13===t.keyCode&&ye.getOrMakeBehavior(e).launchReaction.touchStart.call(this,t,e,!1)}}},ye.register("reactionsBehavior",cN),uN.prototype={addRectBox:function(t){return this.box=t,this.width=t.width,this.height=t.height,this.halfWidth=this.width>>1,this.halfHeight=this.height>>1,this.centerPosX=this.halfWidth+t.left,this.centerPosY=this.halfHeight+t.top,this}},ve.addFuncHandler("triggerTogglingMenu",{tap:function(t){var e,n=hR.getElementsByClassName("react-list")[0];!n||(e=ye.getOrMakeBehavior(n))&&e.toggleView.tap.call(e,t,t.target)}}),Ce.logLikeClick=function(t){xn=[!1,!1,!1];var e=t.target,n=fe.parentBySelector(e,".widget_action.widget_like");n&&!pe.hasClass(n,Qe)&&(xn[0]=!0,setTimeout(function(){logClientEvent("reaction-clicks",xn)},2e3))},Ce.initReactions=be.create({init:function(t){t.reactionMap.length&&(Tn=JSON.parse(t.reactionMap)),wn=t||{};var e,n=[],a=[],i=[];for(var o in Tn){var r={},s={},l={},c=Tn[o],u=c.name,d=(e=o,99<(e=parseInt(e))%1e3);s[o]={path:c.extraAssets?c.extraAssets.main:"/mres/img/react/l/",name:u},l[o]={path:c.extraAssets?c.extraAssets.widget:"/mres/img/react/w/",name:u},d&&(s[o].name=u+"_sup",l[o].name=u+"_sup",r[o]={path:c.extraAssets?c.extraAssets.large:"/mres/img/react/xl/",name:u,useCustomVariants:!0,variants:{sup:"_sup"}},a.push(r)),n.push(s),i.push(l)}qe=Oe(n).then(function(t){Le(t,{width:50,height:50})}),He=Oe(a).then(function(t){Le(t,{width:146,height:146,getResource:function(t){return t.sup}})}),Oe(i.concat([{"btn-hor-loader":{path:"/mres/img/loaders/",ext:"gif",useCustomVariants:!0,variants:{x1:""}}},{shadow_c_55:{path:"/mres/img/react/",useCustomVariants:!0,variants:{x1:""}}}]))},update:function(t){cn=t.tapsToSuper||cn,wn=t||{},Me=hR.getElementById("content"),je=hR.getElementById(Ue),(Fe=ye.getOrMakeBehavior(je))&&Fe.update(t)},discard:function(){xe.changed.detach(eN,ye.getOrMakeBehavior(je))}}),gt)),uR.du=dR.RPcdOng||(dR.RPcdOng=function(c,u,n,d,h,p,f,g,t,e){"use strict";var a="__animate",i=t.create(),m=t.create(),v=t.create(),y={};y[y.SINGLE=1]="SINGLE",y[y.DUAL=2]="DUAL";var b=r();b[y[y.SINGLE]]={updateCurrentX:function(){return this.x_1=this.x_curr,this}},b[y[y.DUAL]]={updateCurrentX:function(){var t=this.x_curr;return this.increaseToHead?this.x_1=Math.max(t,this.x_2):this.x_2=Math.min(t,this.x_1),this},resolveController:function(){var t=this.x_curr,e=Math.abs(t-this.x_1),n=Math.abs(t-this.x_2);this.increaseToHead=!(n<e)&&(e<n||t>=this.x_2)},processDoubleTap:function(){var t=this;if(Date.now()-this.lastTap<200)return!0;this.lastTap=Date.now(),setTimeout(function(){t.lastTap=0},200)}};var C=r();function o(t,e){var n=this;c.listenCritical(e),t=t||{},this.model=t,this.type=y[e.getAttribute("data-range-type")]||y.SINGLE,this.typeName=y[this.type],this.isDualType=this.type===y.DUAL,this.isMoving=!1,this.notTouchEvent=!1,this.increaseToHead=!0,this.root=e,this.id=t.id||e.id,this.sliderContent=e.getElementsByClassName("js-range-inner")[0],this.progress=e.getElementsByClassName("js-range-bg")[0],this.background=e.getElementsByClassName("range-input_slider_bg-w")[0],this.controlMax=this.sliderContent.getElementsByClassName("js-range-control")[0],this.isDualType&&(this.controlMin=this.sliderContent.getElementsByClassName("js-range-control")[1]),this.transformStyleName=d.transform,Object.assign(this,b[this.typeName]),this.linkFields();var a,i,o,r=this.input_1,s=this.input_2;this.bindObservable("isMoving",function(){return a},function(t){a=t,u.switchClass(this.sliderContent,t,"__moving")}),this.min=parseInt(t.min||s&&s.min||r&&r.min||0,10),this.max=parseInt(t.max||r&&r.max||100,10),this.tweenFunc=t.tweenFunc,!this.tweenFunc||(i=C[this.tweenFunc])&&(o=t.tweenArgs||[],this.interpolateX=i.interpolationBuilder(o),this.deinterpolateX=i.deinterpolationBuilder(o),this.interpolation=!0),this.initResizableState(),this.debouncedResizibleStateInit=g(this.initResizableState,100),p.changed.attach(this.debouncedResizibleStateInit,this),v.attach(S,this),m.attach(this.updateLinkedFields,this),r&&r.addEventListener("input",function(t){t._okEventEmitter||(n.value_1=t.target.value,n.x_1=n.convertValueToX(n.value_1,parseInt(n.value_2,10),null),n.steps&&n.normalizeXByStep(),n.moveTweenTo())}),s&&s.addEventListener("input",function(t){t._okEventEmitter||(n.value_2=t.target.value,n.x_2=n.convertValueToX(n.value_2,null,parseInt(n.value_1,10)),n.steps&&n.normalizeXByStep(),n.moveTweenTo())});var l=function(t){this.isMoving&&(this.isMoving=!1,this.steps&&!this.stepsMagnet&&this.normalizeXByStep().moveTweenTo().notify())}.bind(this);h.addPointerListener(e,"pointerup",l),e.addEventListener("mouseleave",l),e.addEventListener("mouseout",l),f.rendering.attachOnce(this.cleanState,this)}function S(t){t.id===this.id&&this.initResizableState()}function s(t,e,n){var a=new Event(t,{bubbles:!0,cancelable:!0});n&&Object.assign(a,n),e.dispatchEvent(a)}function r(){return(r=e.OBJECT_CREATE?function(){return Object.create(null)}:function(){return{}})()}return C.pow={interpolationBuilder:function(t){var e=t[0];return function(t){return Math.pow(t,e)}},deinterpolationBuilder:function(t){var e=1/t[0];return function(t){return Math.pow(t,e)}}},o.prototype={constructor:o,bindObservable:function(t,e,n){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,get:e,set:n})},updateLinkedFields:function(t){t.id===this.id&&this.linkFields()},linkFields:function(){var t=this.model,e=t.input_1,n=t.input_2;this.input_1=e&&(hR.getElementById(e)||hR.querySelector(e)),this.input_2=n&&(hR.getElementById(n)||hR.querySelector(n)),this.hasLinkedFields=this.input_1||this.input_2},cleanState:function(){p.changed.detach(this.debouncedResizibleStateInit,this),v.detach(S,this),m.detach(this.updateLinkedFields,this)},initResizableState:function(){var e,n,t=this.model,a=this.input_1,i=this.input_2,o=this.sliderContent.getBoundingClientRect(),r=gt.pageXOffset;this.rangeLOffset=r+o.left,this.rangeROffset=r+o.right,this.rangeLengthPx=o.width,this.CONST_MIN_MAX=this.min-this.max,this.steps=t.steps,this.steps&&(this.stepsMagnet=t.stepsMagnet||!1,this.oneStepPx=this.rangeLengthPx/this.steps,this.oneStepHalfPx=this.oneStepPx/2,e=this.background,n=this.steps,requestAnimationFrame(function(){var t=e.style;t.backgroundImage="linear-gradient(to right, #cbcbcb 50%, #848484 50%)",t.backgroundSize=200/n+"%",u.addClass(e,"__stepsReady")})),this.value_1=t.value_1||a&&a.value||this.max,this.x_1=this.convertValueToX(this.value_1),this.value_2=t.value_2||i&&i.value||this.min,this.x_2=this.convertValueToX(this.value_2),this.moveTweenTo()},convertValueToX:function(t,e,n){var a=parseInt(t,10);return e=e||this.min,n=n||this.max,a<e?a=e:n<a&&(a=n),this.deinterpolateX(this.getRelativeDistance(a))*this.rangeLengthPx},interpolateX:function(t){return t},deinterpolateX:function(t){return t},getRelativeDistance:function(t){return(t-this.min)/-this.CONST_MIN_MAX},convertXToValue:function(t){var e=this.interpolateX(t/this.rangeLengthPx);return Math.round(this.min+this.min*-e+this.max*e)},normalizeXFromPointer:function(t){var e,n=this.rangeLOffset;return t<n?t=n:(e=this.rangeROffset)<t&&(t=e),this.x_curr=t-n,this},normalizeXByStep:function(){var t=this.x_curr,e=this.oneStepPx,n=t%e;return n>this.oneStepHalfPx?t+=e-n:t-=n,this.x_curr=t,this},moveTweenTo:function(){var t=this.root;return u.addClass(t,a),setTimeout(function(){u.removeClass(t,a)},200),this.moveTo()},moveTo:function(){var t=this.transformStyleName,e=this.x_1,n=this.x_2,a=this;return requestAnimationFrame(function(){a.controlMax.style[t]="translateX("+e+"px)",a.isDualType&&(a.controlMin.style[t]="translateX("+n+"px)"),a.progress.style[t]="matrix("+.01*(e-n)+", 0, 0, 1, "+n+", 0)"}),this},notify:function(){var o=this,r=[{input:this.input_1,x:this.value_1=this.convertXToValue(this.x_1)}];return this.isDualType&&r.push({input:this.input_2,x:this.value_2=this.convertXToValue(this.x_2)}),this.hasLinkedFields&&requestAnimationFrame(function(){for(var t=0,e=r.length;t<e;t++){var n,a=r[t],i=a.input;i&&(n=a.x,parseFloat(i.value)!==n&&(i.value=n,s("input",i,{_okEventEmitter:o})))}}),this.emitter&&i.trigger({id:this.id,notifyList:r}),this},setToX:function(t,e){return this.x_1=t,this.x_2=e,this},resolveController:function(){},updateCurrentX:function(){},processDoubleTap:function(){return!1},select:{tap:function(t,e){this.normalizeXFromPointer(n.firstTouchRaw(t).pageX),this.steps&&this.normalizeXByStep();this.resolveController(),this.processDoubleTap()?this.setToX(this.x_curr,this.x_curr):this.updateCurrentX();this.moveTweenTo().notify()}},move:{touchStart:function(){},touchMove:function(t,e){{void 0!==t.buttons&&0===t.buttons||(this.normalizeXFromPointer(n.firstTouchRaw(t).pageX),this.stepsMagnet&&this.normalizeXByStep(),this.isMoving||((this.notTouchEvent="mousemove"===t.type||!t.touches)&&u.addClass(this.root,"__nontouch-layer"),this.resolveController(),this.isMoving=!0),this.updateCurrentX().moveTo().notify())}}}},o.isInstant=!0,c.register("rangeInput",o),{onRangeChanged:i,onPostInit:v,onLinkedFieldsUpdate:m,updateRangeControlEnvelope:{updateRangeControl:{parseDomNode:function(t,e){var n=t.getAttribute("data-exception");n&&(e.context={exception:JSON.parse(n)})},run:function(t){var e,n,a,i,o,r=t.context.exception;!r||(e=hR.getElementById(r.fieldId))&&"MINMAX"===r.type&&(n=r.args[0],(a=r.args[1])<(i=r.args[2])?o=a:i<n&&(o=n),e.value=o,s("input",e))}}},applyValue:function(t,e){t.value=e,s("input",t)}}}(uR.ah,uR.n,uR.ae,uR.ap,uR.ad,uR.bd,uR.r,uR.cw,uR.p,uR.aa)||gt),uR.dv=dR.lEMgXaQ||(dR.lEMgXaQ=uR.w.create({workWithOutsideInputs:!1,heightBySidebar:!1,blockHeight:!0,"toolbarSearch.enabled":!1,"toolbarSearch.active":!1})||gt),uR.dw=dR.tt9qziQ||(dR.tt9qziQ=uR.w.create({enabled:!1,showToolbarMenuConfigure:!1,showToolbarMenuEnable:!1,isFloatSidebarConfigure:!1,isContextualColumnFloat:!1,isCenterPortalContentConfigure:!1,isCenterPortalContentEnabled:!1})||gt),uR.dx=dR.sHWROaQ||(dR.sHWROaQ=uR.w.create({heightBySidebar:!1})||gt),uR.dy=dR.m1sDnaQ||(dR.m1sDnaQ=(Ln=uR.ao,Rn=uR.dv,Nn=uR.dw,Bn=uR.dx,Dn=uR.bw,Nn.synced("enabled",function(t){Rn.set("heightBySidebar",t),Bn.set("heightBySidebar",t),gN(),yN(),vN(),mN(),Dn.set("shown",!t)}),Rn.synced("toolbarSearch.enabled",function(){gN()}),Ln.synced("configured",function(){mN()}),Nn.synced("showToolbarMenuEnable",function(){vN(),mN()}),Nn.synced("isCenterPortalContentEnabled",function(){vN(),mN()}),Ln.synced("stickyConfigured",yN),gt)),uR.dz=dR.rYQ1zeA||(dR.rYQ1zeA=(Mn=uR.e,jn="okMark"+Date.now(),function(t,e,i,n,a,o){var r=jn+t;return Mn(e,function(t,e,n,a){if(t){if(t[r])return;t[r]=!0}i.call(this,t,e,n,a)},n,a,o)})),uR.ea=dR.g52S7QA||(dR.g52S7QA=function(t,i,o,r,s,l){var c,u,d,h,p,f,g=!1,m="__showed",v="__animated",y=0,b=!1,C={1:"INFO",2:"WARNING",3:"ERROR",4:"CRITICAL",5:"TRANSPARENT",getCssClass:function(t){var e=this[t];return e?"__"+e.toLowerCase():""}};function S(){b||(i.removeClass(h,m),i.removeClass(h,v),h.setAttribute("aria-hidden","true"),f?(i.replace(d,p),f=mt):p&&(i.replace(d,p),g=!1),p=mt)}function k(){0!==y&&(clearTimeout(y),y=0),w()}function _(t){return"translateY("+t+(0===t?"":"px")+")"}function w(){y=0,b&&(b=!1,l.setStyle(d,_(-d.offsetHeight)))}C[C[1]]=1,C[C[2]]=2,C[C[3]]=3,C[C[4]]=4,C[C[5]]=5;return t.Toast={show:function(t,e,n){var a;d=hR.querySelector(".error-notification"),p=p||d.cloneNode(!0),g||s("error-notice",hR.querySelectorAll(".error-notification_txt"),function(t){d=hR.querySelector(".error-notification"),h=hR.querySelector(".error-notification-w"),u=(c=t).innerHTML,g=!0,d.addEventListener(r,S,!1),d.addEventListener("click",k,!1)}),f="outerHTML"===(n=n||{}).insertMode,c&&(d.className="error-notification",i.addClass(d,C.getCssClass(n.type||C.ERROR)),f?(c.outerHTML=t||u,g=!1):p?(a=p.cloneNode(!0),i.replace(d.firstChild,p.firstChild),p=a,hR.querySelector(".error-notification_txt").innerHTML=t||u):c.innerHTML=t||u,b||(b=!0,l.setStyle(d,_(-d.offsetHeight)),i.addClass(h,m),h.setAttribute("aria-hidden","false"),o.request(function(){o.request(function(){i.addClass(h,v),l.setStyle(d,_(0))})})),y&&clearTimeout(y),y=setTimeout(w,e||2e3))},hide:w,NotificationType:C,NotificationInsertMode:{TEXT:"TEXT",CONTENT:"outerHTML"}}}(uR.d,uR.n,uR.al,uR.aj,uR.dz,uR.ar)||gt),uR.eb=dR.akSzoUA||(dR.akSzoUA={ERROR_TOAST_HTTP_HEADER:"X-Error-Toast",AJAX_VALIDATE_HTTP_HEADER:"X-Form-Ajax-Validate",AJAX_NO_VALIDATE_HTTP_HEADER:"X-Form-Ajax-No-Validate",AJAX_UPDATE_HTTP_HEADER:"X-Form-Ajax-Submit",REDIRECT_LOCATION_HEADER:"Redirect-Location",FULL_REFRESH_HEADER:"X-Full-Refresh",ERROR_MESSAGE_HEADER:"X-Error-Message",BOTTOM_MENU_REQUEST:"X-Request-BottomMenu"}),uR.ec=dR.aeNbOHQ||(dR.aeNbOHQ=uR.p.create()||gt),uR.ed=dR.pzQEZSQ||(dR.pzQEZSQ={treatAsSamePage:!1}),uR.ee=dR.lj3hoIA||(dR.lj3hoIA=(Fn=uR.d,qn=uR.dh,Hn=uR.ed,Fn.Location={change:function(t,e,n){!e&&qn.go(t,null,n)||(bN().href===t?bN().reload(!0):bN().href=t)},reload:function(t){this.change(bN().href,t)},replace:function(t,e,n){Hn.treatAsSamePage=!0,!e&&qn.go(t,null,n)||bN().replace(t)}})),uR.ef=dR.ghSletg||(dR.ghSletg=(uR.d,Un=uR.ea,Vn=uR.bm,Qn=uR.eb,Wn=uR.ec,zn=uR.ee,uR.af,Xn=uR.dm,Jn=Qn.REDIRECT_LOCATION_HEADER,Yn=Qn.FULL_REFRESH_HEADER,Kn=Qn.ERROR_MESSAGE_HEADER,Zn=Qn.ERROR_TOAST_HTTP_HEADER,Vn.success.attach(function(t){t.rejected=kN(t.xhr)}),kN)),uR.eg=dR.cNzQkQ||(dR.cNzQkQ={}),uR.eh=dR.azlWUbg||(dR.azlWUbg=($n=uR.i,ta=uR.bm,{request:function(t,e,n){var a=$n.start(),i=ta.request(t,e,n).then(IN,EN);return(i.jsonTask=a).ajaxTask=i,a.withToken=wN,a.send=_N,a.abort=TN,a}})),uR.ei=dR.cFbigA||(dR.cFbigA=(ea=uR.cu,na=uR.o,uR.n,aa=uR.bf,ia=uR.g,oa=uR.bk,ra=uR.eg,sa=uR.eh,la=uR.s,ca=uR.ah,ua="data-log-click",da="/dk?st.cmd=clickLog",ha=/\b(clnk|clickarea)\b/,pa="lastLogId",fa="_cl.id",ga="_clickLog",ma="_cl.list",va=Math.pow(1024,2),ba=ya=!1,Ca=ea.isSupported,la.create({name:"initClickLog",update:function(t){ca.tapPreview.attach(AN),ra.impl={previewClick:AN},ya=t.useImageBeacon,ba=Ca&&t.localStorageEnabled},discard:function(){ra.impl=null,ca.tapPreview.detach(AN)}}),{resendStat:LN})),uR.ej=dR.lL3b26w||(dR.lL3b26w=(Sa=uR.s,ka=uR.ei,Sa.create({name:"logService",update:function(t){t.localStorageEnabled&&ka.resendStat(t.useImageBeacon)}}),gt)),uR.ek=dR.soLgGug||(dR.soLgGug=(_a=uR.bm,wa=uR.o,Ta=uR.ah,(Ea=gt.pageCtx.secKey)&&(_a.success.attach(function(t){t.xhr.okTask&&t.xhr.okTask.isExternal()||(Ia=(t.xhr||this.xhr).getResponseHeader("X-Sec-Token"))}),Ta.tapPreview.attach(function(t){Ia&&wa.findParent(t.target,function(t){var e=t.href,n=t.form;return e&&(t.href=NN(e||"")),n&&(n.action=NN(n.action||"")),(e||n)!==mt})})),gt)),uR.el=dR.mHcne8w||(dR.mHcne8w=(Aa=uR.d,xa=uR.i,Pa=gt._tmr||(gt._tmr=[]),(Oa=gt.pageCtx.vkcId)&&Pa.push({type:"setUserParams",params:{VKConnectID:Oa}}),{getOrFetch:function(){var t=xa.start(),e=BN();return e?t.resolve(e):Aa.loader.use("my-tracker-js").then(function(){t.resolve(BN())}),t},get:BN})),uR.em=dR.gDo0vJQ||(dR.gDo0vJQ=((La=uR.d).getViewportSize=function(){var t,e=gt.innerHeight?(t=gt.innerWidth,gt.innerHeight):"CSS1Compat"==hR.compatMode?(t=pR.offsetWidth,pR.offsetHeight):(t=hR.body.offsetWidth,hR.body.offsetHeight);return[t,e]},La.getViewportSize||gt)),uR.en=dR.cJ2StaA||(dR.cJ2StaA=(Ra=uR.d,Na=uR.em,Ba=uR.n,Ra.scrollToCommentForm=function(t){Da=t.alwaysFocus,setTimeout(DN,100)},gt)),uR.eo=dR.nzpbqQg||(dR.nzpbqQg=function(e,t,c,n){function a(){var t=this;t.states=[],t.history=gt.history,t.signupForPopState=!0,d.onStart(t),t.programmaticBack=e.create(),t.stateAccounting=e.create(),t.stateAccounted=e.create(),t.statePopping=e.create(),t.renderState=e.create(),t.inited=!1,this.onPopStateHandler=this.onPopState.bind(this)}a.prototype={getState:function(){return this.cachedState||(this.cachedState=this.history.state||{})},back:function(){this.cachedState=null,this.history.back(),d.onWentBack(this),this.programmaticBack.trigger()},backToRoot:function(t){var e;this.canGoBackToRoot(t)?(e=this.currentState,setTimeout(function(){var t=this.currentState;e===t&&gt.location.reload()}.bind(this),100),this.newRootState=t,this.history.go(-this.cachedState.okNavIndex)):this.go(t,"replaceState")},canGoBackToRoot:function(t){var e=this.cachedState;return this.getState()&&t.type===e.type&&0<e.okNavIndex},go:function(t,e){delete this.newRootState,this.accountState(t,e),this.openState(t)},accountStateUpdate:function(){this.accountState(this.cachedState,"replaceState")},accountState:function(t,e){var n={state:t,samePage:"replaceState"===e};this.stateAccounting.trigger(n);var a,i,o=e||"pushState";t&&(i=(a=this.currentState)&&a.type===t.type||t.indexThrough,t.okNavIndex=this.newRootState?0:(i&&a.okNavIndex||0)+("pushState"!==o||a&&!i?0:1));try{this.history[o](t,null,t.url||null)}catch(t){}d.onStateAccounted(this,t),this.cachedState=t,this.currentState=t,this.stateAccounted.trigger(n)},recoverState:function(t){this.openState(t),this.currentState=t},openState:function(t){this.cachedState=t=t||{},this.renderState.trigger(t)},prepareForFutureStateChange:function(){n.stopLoading()},onPopState:function(t){var e,n,a,i;this.pseudoPopState?this.pseudoPopState=!1:(e=this,n=t.state,e.newRootState&&(e.accountState(e.newRootState,"replaceState"),n=e.newRootState),d.onStateAccounted(e,n),a={state:n=n||{}},this.statePopping.trigger(a),a.cancelled&&n?a.cancelTask&&(i=this,a.cancelTask.then(function(){i.pseudoPopState=!0;var t=n.okNavIndex;t&&t>=(i.cachedState&&i.cachedState.okNavIndex||0)?e.history.back():e.history.forward()},function(){e.go(n,"replaceState")})):(n=a.state,e.openState(n),e.currentState=n))},init:function(){this.inited||(this.history.scrollRestoration="manual",this.inited=!0,this.cachedState=this.currentState=this.history.state,d.onStateAccounted(this,this.getState()),this.signupForPopState&&this.attachHistoryManager())},attachHistoryManager:function(){gt.addEventListener("popstate",this.onPopStateHandler,!1),d.onSignedUpForPopstate(this)},detachHistoryManager:function(){gt.removeEventListener("popstate",this.onPopStateHandler,!1),d.onSignedOutForPopstate(this)}};var i,o,r,s,l,u,d=(i=t.android&&t.androidVersion.number,o=i&&i<4,u={onStart:h,onSignedUpForPopstate:h,onSignedOutForPopstate:h,onWentBack:h,onStateAccounted:h},history.pushState||(u.onStart=function(n){var a=n.history,i="state";a.okPolyfill=!0,n.signupForPopState=!1;var o=(new Date).getTime(),r=(new Date).getTime(),s={};function e(t,e){var n=c.clone(e);s[i+t]=n,a.state=n}s[i+r]=null;var l="#"+i;a.pushState=function(t){e(r=(new Date).getTime(),t),location.hash=l+r},a.replaceState=function(t){e(r,t)},gt.addEventListener("hashchange",function(){var t,e=location.hash;0==(e=e||"#"+(i+o)).indexOf(l)&&(e=e.slice(l.length))!=r&&(r=e,t=c.clone(s[i+r]),a.state=t,n.onPopState({state:t}))})}),o&&(r={onPageShow:null,onBeforeUnload:null},u.onSignedOutForPopstate=function(t){gt.removeEventListener("pageshow",r.onPageShow,!1),gt.removeEventListener("beforeunload",r.onBeforeUnload,!1)},u.onSignedUpForPopstate=function(e){var n=!1;r.onPageShow=function(t){n&&(n=!1,p(e.getState()),e.accountStateUpdate())},r.onBeforeUnload=function(t){n=!0},gt.addEventListener("pageshow",r.onPageShow,!1),gt.addEventListener("beforeunload",r.onBeforeUnload,!1)},l=null,u.onStateAccounted=function(t,e){e!=l&&(s=l,l=e)},u.onWentBack=function(t){s&&p(s),l=s,s=null,t.onPopState({state:l})}),u);function h(){}function p(t){t.okNavIndex=0}return new a}(uR.p,uR.af,uR.v,uR.k)||gt),uR.ep=dR.pZtF2Vg||(dR.pZtF2Vg=(Ma=uR.d,ja=uR.dh,Fa=uR.s,qa=uR.eo,Ha=Ma.loader,Ua="photo-layer-js",Va="photo-layer-css",Wa=!(Qa={userTouchPhoto:1,groupTouchPhoto:1,touchPhotoAttachment:1,altGroupPhoto:1,friendPhoto:1,friendStreamPhoto:1,friendAlbumPhoto:1,userStreamPhoto:1,userPhoto:1,userAlbumPhoto:1,sharedAlbumPhoto:1,altGroupStreamPhoto:1,altGroupPhotoInList:1,userPhotoInList:1,contestPhoto:1,adHocPhotoLayer:1}),za={run:jN},Ma.initPhotoLayer=Fa.create({init:function(){FN(MN),ja.register(jN)},update:function(t){Ma.photoOptions=t,Wa&&(t.returnUrl=null),Wa=!0,t.openPhotoSoon&&(ja.go(gt.location.href,za)||FN(qN(function(){Ma.photoLayer.launchShortlink()})))}}),{goPhoto:function(t){ja.goSpecific(t,za)}})),uR.eq=dR.imaxwvg||(dR.imaxwvg=(Xa=uR.p,Za={},{immutable:{ROOT:"discus",WIDE_ROOT:"discus_w",PANEL_SHOWN_CSS_MOD:"__panelShown"},inited:Xa.create(),loadingInitiated:Xa.create(),messageLoaded:Xa.create(),messageEdited:Xa.create(),smilePanelOpen:Xa.create(),smilePanelOpened:Xa.create(),smilePanelClose:Xa.create(),stickerTabSelected:Xa.create(),attachmentMenuClose:Xa.create(),attachmentMenuHide:Xa.create(),keyboardOpen:Xa.create(),keyboardClosed:Xa.create(),scrollDown:Xa.create(),registerTextChange:Xa.create(),closeRedLink:Xa.create(),openRedLink:Xa.create(),audioMessagePlaying:Xa.create(),musicMessagePlaying:Xa.create(),wasInitOnce:!1,getScrollContainer:function(){return hR.getElementsByClassName("discus_list-w")[0]},flushCache:function(){Za={}},find:{element:function(t){var e,n,a=t.context||hR,i=t.id||t.cssClass||t.selector;if(t.ignoreCache||(e=Za[i]),!e){if(t.id)n=a.getElementById;else if(t.cssClass)n=a.getElementsByClassName;else{if(!t.selector){var o="Invalid function arguments";throw new Error(o)}n=a.querySelector}e=Za[i]=n.call(a,i)}return e},textareaElement:function(t){return this.element({id:"ta-emul",ignoreCache:t})},postingForm:function(t){return!t&&Ya||(Ya=hR.getElementById("chat-form")||hR.getElementById("cmnt-form"))},smilesPanel:function(t){return!t&&Ja||(Ja=hR.getElementById("sml-pnl"))},textarea:function(t){return!t&&Ga||(Ga=hR.getElementById("ta-emul"))},messagesList:function(t){return!t&&Ka||(Ka=hR.getElementsByClassName("discus_list")[0]||hR.getElementById("comments-list"))}}})),uR.er=dR.ns1fqw||(dR.ns1fqw=uR.p.create()||gt),uR.es=dR.aClBajg||(dR.aClBajg=($a=uR.p,ti=uR.i,ei=uR.eh,ni=uR.v,ai=uR.g,ii=uR.r,oi=uR.ce,ri=uR.l,hi={},pi=4,fi=$a.create(),gi=[],HN(),ii.navigated.attach(function(){HN(!0)}),UN(),{send:VN,handle:function(t){ni.copy(t,hi)},run:GN,failed:fi})),uR.et=dR.mNBDDRg||(dR.mNBDDRg=function(n){"use strict";function t(t){this.trackerId=t}function e(e){e.id||(e.id=this.trackerId);var t=n.get();t?t.push(e):n.getOrFetch().then(function(t){t.push(e)})}return t.prototype={constructor:t,pushEvent:e,trackPage:function(t,e){this.pushEvent({type:"pageView",url:t,referrer:e,start:Date.now()})},trackCustomGoal:function(t,e){this.pushEvent({type:"reachGoal",goal:t,params:e})}},{construct:t,pushEvent:e}}(uR.el)||gt),uR.eu=dR.betCAKg||(dR.betCAKg={pixelsMapRequest:(mi=uR.p).create(),eventTracking:mi.create(),video:{trackingPixelsParsed:mi.create(),starting:mi.create()}}),uR.ev=dR.cNjmNnQ||(dR.cNjmNnQ={set:function(t,e,n,a,i){var o=t+"="+e;n&&(o+="; expires="+new Date(Date.now()+1e3*n).toUTCString()),a&&(o+="; path="+a),i&&(o+="; domain="+i),o+=";",hR.cookie=o},get:function(t){var e=hR.cookie;if(e)for(var n=t+"=",a=e.split(";"),i=0;i<a.length;i++){var o=a[i].trim();if(0==o.indexOf(n))return o.substring(n.length)}}}),uR.ew=dR.vadqk1Q||(dR.vadqk1Q=function(a,t,B,o,F,q,D,M,H,U,j,r,V,Q,e,W,z,n,u,X){var G,J,Y=1963260,K=1,Z=t.create();var $={},tt=function(){},et={play:function(){},stop:function(){}};function i(e){(tt=function(t){return e?e[t]:null})("comscore")&&OK.loader.use("streamsense-js",function(){var n=null,a=!1,i=null,o=gt.ns_;function r(t,e){(!n||t&&null!==i&&t!==i)&&(n=new o.StreamingTag({customerC2:"9999305"})),t&&(i=t),e(o,n)}function t(t,e,n){try{a&&"stop"===t?(r(e,n),a=!1):a||"play"!==t||(r(e,n),a=!0)}catch(t){logClientEvent("vplayer",["comscore-stat-error"])}}o&&(et={play:function(i,o,r,s,l){t("play",i,function(t,e){var n={ns_st_ci:i,ns_st_cl:1e3*o,ns_st_st:l||"*null",ns_st_pu:"*null",ns_st_pr:s,ns_st_ep:"*null",ns_st_sn:"*null",ns_st_en:"*null",ns_st_ge:"*null",ns_st_ti:"*null",ns_st_ia:"0",ns_st_ce:"1",ns_st_ddt:"*null",ns_st_tdt:"*null",c3:"odnkls",c4:r,c6:"*null"},a=t.StreamingTag.ContentType.UserGeneratedLongFormOnDemand;switch(r){case"LIVE_TV_APP":a=t.StreamingTag.ContentType.UserGeneratedLive;break;case"LIVE_TV_ODKL":a=t.StreamingTag.ContentType.Live;break;case"PARTNER":a=t.StreamingTag.ContentType.LongFormOnDemand}e.playVideoContentPart(n,a)})},stop:function(){t("stop",null,function(t,e){e.stop()})}})})}function nt(t){t&&t.parentNode&&q.removeClass(t.parentNode,"ldng")}function at(t){t&&t.parentNode&&q.addClass(t.parentNode,"ldng")}var d,it=(d="vdsig",{refresh:function(e,t){function i(t){e&&e(t)}var n,o=tt("loginUrl"),a=tt("altLoginUrls"),r=3;function s(){logClientEvent("vplayer",["login.success",o,r]);var t,e,n=this.response(),a=JSON.parse(n);a&&(t=a.vtkn,e=a.ttl),h(d,t,e),i(t)}function l(){logClientEvent("vplayer",["login.fail",o,r]),a&&0<a.length&&0<r--?(o=a.shift(),c()):i()}function c(){n&&(o+="?suggSig="+n),Q.request(o,"POST").withCredentials().setExternal().then(s,l).send()}o?(n=u.get(d))&&5<n.trim().length&&!t?i(n):c():i()},invalidate:function(){h(d,"",0,s())}});function s(){var t=/^([0-2]?[0-9][0-9]?)(\.([0-2]?[0-9][0-9]?)){3}$/.test(location.hostname)?location.hostname:location.hostname.split(".").slice(-2).join(".");return t}function h(t,e,n){u.set(t,e,n,"/",s())}function ot(t,e){for(var n=this.currentTime,a=Math.round(n/this.duration*100),i=t.playheadReachedValueList,o=i?i[0]:null;o&&o<=a;)logClientEvent("vplayer",["checkpoint",o,t.providerName],t.videoSrc,t.movieId),st(e,"playheadReachedValue"+o,!0),i.splice(0,1),o=i[0];!t.reached3s&&3<=n&&(st(e,"playheadReachedValue3",!0),t.reached3s=!0)}function rt(t){var e,n,a=[];for(var i in t){!t.hasOwnProperty(i)||"string"!=typeof i||(e=i.match(/^playheadReachedValue([0-9]+)$/i))&&a.push(parseInt(e[1]))}return-1<(n=a.indexOf(3))&&a.splice(n,1),a.sort(function(t,e){return t-e})}function st(t,e,n){return z.eventTracking.trigger({target:t,action:e,onlyOnce:n})}function lt(e,n,a,i){at(e);var o=null;return it.refresh(function(t){n.vdsig=t,o=function(c,e,n,a){var i=e.videoName,o=e.videoChannelName,r=e.videoDuration,u=e.videoSrc,t=e.videoPosterSrc,d=e.providerName,h=e.movieId,p=e.externalStats,s=e.errorCheckUrl,l=e.vdsig,f=e.loopVideo,g=e.initiallyMuted,m=e.needTrackMyTracker,v=e.isAutoplay,y=H.getLogLoc(c),b={},C=!1,S=0,k=0,_=!1,w=ct(c),T=V.androidVersion&&V.androidVersion.number,I=V.android&&T<5&&V.androidDevice.isStockVersion;if($={},"object"!=typeof u||s){var E,A;l&&(u+="&vdsig="+l),w&&(E={result:null,target:c},z.pixelsMapRequest.trigger(E),(A=E.result)&&(b.playheadReachedValueList=rt(A)))}else if(b=u.statistics,w&&(z.video.trackingPixelsParsed.trigger({target:c,pixelMap:b}),b.playheadReachedValueList=rt(b)),u=u.src,(b.s=0)===u.indexOf("/apphook/video/",0))return b&&b.playbackStarted&&((new Image).src=b.playbackStarted.url,w&&st(c,"playbackStarted",!0)),n&&q.preventDefault(n),gt.location.href=u,!1;b.videoSrc=u,b.movieId=h,b.providerName=d,b.firstPlayEvent=!0,b.firstLoop=!0,logClientEvent("vplayer",["init",y,d],u,h),p&&p.init&&((new Image).src=p.init,p.init=null);var x=c.parentNode,P=hR.createElement("video");tt("crossorigin")&&P.setAttribute("crossorigin","anonymous");if(!P||!P.canPlayType)return logClientEvent("vplayer",["nohtml5",y,d],u,h),!0;if(0===P.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"').length)return logClientEvent("vplayer",["nocodec",y,d],u,h),!0;f&&P.setAttribute("loop","");g&&(P.setAttribute("muted",""),P.muted=!0);V.iOS&&P.setAttribute("playsinline","");n&&q.preventDefault(n);var O=hR.createElement("div"),L=O.style;L.width="100%",x.appendChild(O);var R=function(){L.height=Math.floor(x.clientHeight)+"px"};function N(){P&&(P.onerror=null,P.pause(),P.src="",P.load(),P.parentNode&&P.parentNode.removeChild(P)),x.removeChild(O),nt(c),gt.removeEventListener("resize",R),P=null}if((x.okResize=R)(),gt.addEventListener("resize",R,!1),s){return Q.request(s).then(function(){var t;null==this.xhr.getResponseHeader(W.ERROR_MESSAGE_HEADER)&&(N(),(t=this.response())&&0<t.length?x.innerHTML=t:(e.errorCheckUrl="",lt(c,e,n)))}).send(),!1}nt(c),P.setAttribute("preload","none"),P.controls=!0,P.setAttribute("controlsList","nodownload"),P.addEventListener("contextmenu",function(t){return q.preventDefault(t),!1}),P.autoplay=!0;var B=-1!==u.indexOf("st.hls=on")?"m3u8":"mp4";P.src=u.replace("/dk?","/dk/video."+B+"?"),P.poster=t,tt("crossorigin")||(P.poster=t);if(P.className="vdo vpl fll",I){for(var D=c;D&&D!=hR;){if(q.hasClass(D,"vpopup")){q.addClass(D,"old-andr-vid");break}D=D.parentNode}q.addClass(P,"old-andr-vid")}P.onerror=function(t){nt(c);var e="unknown";try{e=t.target.error.code}catch(t){}logClientEvent("vplayer",["error",e,d],u,h),this.onerror=null,it.refresh(function(){},!0)},P.addEventListener("play",function(){var t;w?b.firstLoop&&(b.firstPlayEvent?(this.defaultMuted?(t="playVideoVolumeOff",b.volumeOn=!1):(t="playVideoVolumeOn",b.volumeOn=!0),st(c,["playVideo","playbackStarted",t],!0),logClientEvent("vplayer",["play",y,d],u,h),_||et.play(h,r,d,i,o),b.firstPlayEvent=!1):st(c,"playbackResumed")):($.play||(logClientEvent("vplayer",["play",y,d],u,h),$.play=!0,m&&(G=G||new U.construct(Y))&&(J||(G.pushEvent({type:"pageView",start:Date.now()}),J=!0),G.trackCustomGoal("view_sport_broadcast",{autoplay:v?1:0}))),_||et.play(h,r,d,i,o))},!1);var M=X(function(t){st(t.target,t.action)},1e3);P.addEventListener("volumechange",function(){var t,e;w&&b.firstLoop&&(t=this.volume,e=this.muted,b.volumeOn&&(e||t<.05)&&(M({target:c,action:"volumeOff"}),b.volumeOn=!1),!b.volumeOn&&!e&&.05<=t&&(M({target:c,action:"volumeOn"}),b.volumeOn=!0))}),P.addEventListener("loadstart",function t(e){at(c),this.removeEventListener(e.type,t)},!1),P.addEventListener("playing",function(){w||(b&&b.p&&b.playbackResumed?(new Image).src=b.playbackResumed.url:b&&b.playbackStarted&&(b.p=1,(new Image).src=b.playbackStarted.url)),p&&p.play&&((new Image).src=p.play,p.play=null),nt(c)},!1),P.addEventListener("pause",function(){(_=K<k)||et.stop(),$.pause&&!w||($.pause=!0,this.ended||(w&&b.firstLoop?st(c,"playbackPaused"):b&&b.playbackPaused&&((new Image).src=b.playbackPaused.url)),nt(c),logClientEvent("vplayer",["play_toggle",y,d],u,h))},!1);var j=X(ot.bind(this),300);P.addEventListener("seeked",function(){w&&j(b,c)},!1),P.addEventListener("seeking",function(){$.seeking||(logClientEvent("vplayer",["seek",y,d],u,h),$.seeking=!0)},!1),P.addEventListener("timeupdate",function(t){k=Math.abs(t.target.currentTime-S),S=t.target.currentTime;var e,n,a,i=t.target;if(.01<i.currentTime&&(C=!0),p&&p.checkpoints&&p.checkpoints.length)for(var o=100*i.currentTime/i.duration,r=p.checkpoints,s=0;s<r.length;++s){var l=r[s];o>=l.pos&&!l.__sent&&(l.__sent=!0,l.url&&((new Image).src=l.url))}w?ot.call(this,b,c):((e=b&&b.playheadReachedValue?b.playheadReachedValue:null)&&!b.s&&3<i.currentTime&&e[3]&&e[3].url&&((new Image).src=e[3].url,b.s=3),0<(n=25*Math.floor(4*i.currentTime/i.duration))&&this.lastPercent!==n&&(100!=n&&logClientEvent("vplayer",["checkpoint",n,d],u,h),a=n/25-1,e&&e[a]&&e[a].url&&a<3&&((new Image).src=e[a].url),this.lastPercent=n))},!1),P.addEventListener("ended",function t(e){b&&b.playbackCompleted&&((new Image).src=b.playbackCompleted.url),nt(c),w&&st(c,"playbackCompleted"),p&&p.end&&((new Image).src=p.end,p.end=null),w||(logClientEvent("vplayer",["checkpoint","100",d],u,h),this.removeEventListener(e.type,t)),b.firstLoop=!1,a&&a(e)},!1),P.addEventListener("canplay",function(){nt(c)},!1),P.addEventListener("suspend",function(){nt(c)},!1),c.style.display="none",O.appendChild(P),Z.trigger(P),Z.attachOnce(function(t){t!==P&&N(),c.style.display="block"}),P.load(),P.play(),I&&setTimeout(function(){P.load(),P.play()},100);e.liveRedirectWorkaround&&F.run("movie.getLiveUrl",{movieId:h}).then(function(t){t&&t.liveUrl&&!C&&P&&(P.src=t.liveUrl,P.play())},function(){logClientEvent("vplayer",["error","live.redirect.fix",d],u,h)});return P}(e,n,a,i)}),a&&q.preventDefault(a),o}function ct(t){return q.hasClass(t,"adv-video-link")}e.register(function(t){if(q.hasClass(t.target,"js-copy-link"))return!0}),e.register(function(t){var e=t.target,n=e.getAttribute("data-video");if(n&&!q.hasClass(e,"js-vlayer")){var a=JSON.parse(n);if(a)return lt(e,a),!0}}),gt.embedVPlayer=lt,function(){gt.addEventListener("message",function(t){if("http://static.pladform.ru"===t.origin||"http://out.pladform.ru"===t.origin){var e;if(hR.getElementsByClassName)for(var n=hR.getElementsByClassName("og_iframe"),a=0,i=n.length;a<i;a++){var o=n[a];if((o.contentWindow||o)==t.source){e=o;break}}var r=H.getLogLoc(e),s=e?e.getAttribute("data-objid"):null,l="";t.data.p1&&(l=t.data.p1),logClientEvent("vpladform",[t.data.event,r,"OG_PLADFORM",l],"",s)}},!1);var i={},e=[],C=!1,S=!1;function k(t,e,n){var a=e[0]+"_"+t+"_"+e[1];i[a]||(i[a]=1,logClientEvent("ytplayer",e,t,n))}function _(t){C?t():e.push(t)}gt.onYouTubePlayerAPIReady=function(){for(var t=0;t<e.length;t++)e[t]();e=[],C=!0};var w=function(){};function t(){null!=T&&(T.stopVideo&&T.stopVideo(),T=null),I=null,P=O=!1;var t=hR.getElementById(L);null!=t&&q.remove(t),A&&q.removeClass(A,"mvplaying")}var T,I,E,A,x,P,O=!1,L="ytplid";function R(){var t,e,n,a,i,o,r,s=hR.getElementById(L);s&&A&&x&&(t=q.getTotalOffsetTop(A),e=q.getTotalOffsetLeft(A),n=Math.floor(t-q.getTotalOffsetTop(x)),a=Math.floor(e-q.getTotalOffsetLeft(x)),i=Math.round(A.offsetWidth),o=Math.round(A.offsetHeight),(r=s.style).top=n+"px",r.left=a+"px",r.width=i+"px",r.height=o+"px",s.width=i,s.height=o,T&&T.setSize(i,o))}function N(){setTimeout(R,100)}function n(){var t=hR.querySelector("a[data-ytid]");t!=A&&l(t)}gt.onYTClicked=function(e,t,n,a,i,o){var r,s,l=H.getLogLoc(e),c=ct(e),u={},d=o||{};r=e,(s=j.impl)&&s.previewClick({target:r}),z.video.starting.trigger({domEvent:a,target:e}),A&&q.removeClass(A,"mvplaying"),A=e,a&&a.stopPropagation();var h,p=hR.getElementById(L);null===p&&(T=null,(p=hR.createElement("div")).id=L,x||(x=(x=D.parentBySelector(e,".discus_list,.portal,.mvplayer_cont"))||hR.body,(h=hR.createElement("div")).style.position="relative",h.className="js-nav-tmp",x.insertBefore(h,x.firstChild),x=h),x.appendChild(p),R()),q.addClass(p,"vdoytplr");var f,g,m,v=e.getAttribute("data-embedclass");function y(){R(),N()}function b(){var t=hR.createElement("script");t.src="//www.youtube.com/player_api",t.async=!0,hR.body.insertBefore(t,hR.body.childNodes[0])}return v&&q.addClass(p,v),p.style.visibility="visible",Z.trigger(p),Z.attach(function(t){t!==p&&null!==T&&T.pauseVideo&&(T.pauseVideo(),c&&st(e,"playbackPaused"))}),E=e.getAttribute("data-objid"),T?(I=t,p.style.top=-9999,P?T.loadVideoById(t):T.cueVideoById?T.cueVideoById(t):O=!0,N()):(I||(gt.addEventListener("resize",N,!1),gt.addEventListener("orientationchange",N,!1),B.messageLoaded.attach(y),M.layoutChanged.attach(y),M.updated.attach(function(){var t;D.isChildOf(A,hR.body)||((t=hR.getElementById(L))&&(t.style.visibility="hidden"),T&&T.stopVideo&&T.stopVideo())})),f=i?1:0,I=t,_(function(){null==T&&(T=new YT.Player(p.id,{videoId:I,playerVars:{showinfo:0,html5:1,autoplay:1,mute:f},events:{onStateChange:function(t){if(T){if(O)return O=!1,void T.cueVideoById(I);t.data===YT.PlayerState.PLAYING&&(et.play(E,T.getDuration(),"YoutubeUser",T.getVideoData().title,null),k(T.getVideoUrl(),["play",l],E),P=!0,c&&(u.paused?st(e,"playbackResumed"):st(e,["playbackStarted","playVideo"],!0))),t.data===YT.PlayerState.PAUSED&&(et.stop(),k(T.getVideoUrl(),["play_toggle",l],E),c&&(u.paused=!0,st(e,"playbackPaused"))),t.data===YT.PlayerState.ENDED&&(k(T.getVideoUrl(),["checkpoint","100"],E),c&&st(e,"playbackCompleted")),d[t.data]&&d[t.data]()}},onPlaybackQualityChange:function(t){T&&k(T.getVideoUrl(),["quality",t.data],E)},onError:function(t){if(T)return O?(O=!1,void T.cueVideoById(I)):void k(T.getVideoUrl(),["error",t.data],E)}}}))}),S||(S=!0,b(),g=4,m=5e3,setTimeout(function t(){C||(g--<=0?(S=!1,w()):(b(),15e3<(m*=2)&&(m=15e3),setTimeout(t,m)))},m))),q.addClass(e,"mvplaying"),_(function(){gt.playYTPlayer=function(){T&&T.playVideo&&T.playVideo()},gt.pauseYTPlayer=function(){T&&T.pauseVideo&&T.pauseVideo()}}),!1},w=function(){A&&q.addClass(A,"ytlderr"),k(null,["error","loadTO"],E),t()},M.init.attach(function(){t(),x=hR.getElementById("live-search")}),M.cancelled.attach(function(){t(),x=null}),r.rendering.attach(function(){t(),x=null}),o.attach(n),a.initYouTubeVideos=function(){n()}}(),n.create({name:"initVideo",update:function(t){i(t),G=new U.construct(Y)},discard:function(){G=null}});var l=function(t,e,n,a){var i;t&&null!==t.offsetParent&&(i=e||t.getAttribute("data-ytid"),onYTClicked(t,i,0,0,n,a))};return{embed:lt,runYTplayer:l}}(uR.d,uR.p,uR.eq,uR.er,uR.es,uR.n,uR.o,uR.am,uR.at,uR.et,uR.eg,uR.r,uR.af,uR.bm,uR.dh,uR.eb,uR.eu,uR.s,uR.ev,uR.cw)||gt),uR.ex=dR.sWsQO1Q||(dR.sWsQO1Q=(vi=uR.n,yi=!1,bi=pR,{newInstance:function(t){var e=(t=t||{}).container;return{lock:function(){yi||(vi.addClass(e||bi,"scroll-locked"),yi=!0)},unlock:function(){yi&&(vi.removeClass(e||bi,"scroll-locked"),yi=!1)}}}})),uR.ey=dR.dmITcaQ||(dR.dmITcaQ=(Ci=uR.bd,Si=uR.n,ki=uR.o,_i=uR.bc,wi=uR.ex,Ti="visible",Ii="__inner-scroll",JN.prototype={constructor:JN,init:function(t,e){var n=this;this.opts=e||{},n._el=t,n._container=t.querySelector(".content"),n._locker=new wi.newInstance,n._visible=!1,Si.addClass(t,"dialog");var a=t.querySelector(".cls");a&&a.addEventListener("click",function(t){t.preventDefault(),setTimeout(function(){n.close()},0)},!1),this.opts.closeOnShadowClick&&n._el.addEventListener("click",function(t){t.target===n._el&&(t.preventDefault(),t.stopPropagation(),setTimeout(function(){n.close()},0))},!1)},lockScrolling:function(){this._locker.lock()},unlockScrolling:function(t){this._locker.unlock(),void 0===t&&(t=!0),this._reposition=t},addCssClass:function(t){return Si.addClass(this._el,t),this},removeCssClass:function(t){return Si.removeClass(this._el,t),this},show:function(t){var o=this._el,r=this;function e(i){var t=r._reposition;if(r._visible&&t&&i){var e=hR.activeElement;if(e&&ki.isChildOf(e,o)&&0==(e.type||"").indexOf("text")){var n=i.height;return void(void 0!==r._viewportHeight&&r._viewportHeight!=n&&setTimeout(function(){var t=(i=Ci.calc()).scrollTop,e=r._container.offsetHeight,n=i.height,a=n<e?t-e+n:t+(n-e)/2;o.style.top=a+"px"},100))}YN(o),r._checkHasContentScroll()}}t=t||{},YN(o),Si.removeClass(o,"hidden"),Si.addClass(o,Ti),t.isFullScreenDialog?(Si.addClass(o,"__fullscreen"),this.isFullScreen=!0):this.isFullScreen=!1,o.setAttribute("aria-hidden","false"),r._viewportHeight=Ci.calc().height,r._locker.lock(),Ci.changed.attach(e),setTimeout(e,_i.keyboard.closeTimeout),r._reposition=!0,r._onViewChange=e,r._visible=!0},close:function(){var t,e=this,n=e._el,a=this.opts;e._onViewChange&&(Ci.changed.detach(e._onViewChange),e._onViewChange=null),e._locker.unlock(),n.setAttribute("aria-hidden","true"),Si.removeClass(e._container,Ii),Si.removeClass(n,Ti),Si.addClass(n,"hidden"),this.isFullScreen=!1,n.style.top="-9999px",e._visible=!1,a.onExit&&a.onExit(),a.clearOnExit&&(t=e._container,setTimeout(function(){Si.clear(t)},0))},getElement:function(){return this._el},getContentElement:function(){return this._container},handleScreenResize:function(){this._visible&&(YN(this._el),this._checkHasContentScroll())},isVisible:function(){return this._visible},initContentScroll:function(){this._innerContent=this._el.querySelector(".modern-dialog_content");var t=hR.getElementById("dialog-content"),e=null!=this._innerContent;Si.switchClass(this._el,e,"modern-dialog"),Si.switchClass(t,e,"modern-dialog_container"),0<this._el.getElementsByClassName("js-modern-dialog").length&&Si.addClass(this._container,Ii),setTimeout(this._checkHasContentScroll.bind(this),0)},_checkHasContentScroll:function(t){var e,n=this._innerContent;n&&(e=t||n.scrollHeight>n.clientHeight,Si.switchClass(n,e,"__has-scroll"))}},JN)),uR.ez=dR.dELQYlA||(dR.dELQYlA=(Ei=uR.n,{isDialogLink:function(t){return KN(t.href,t)},isDialogElement:KN})),uR.fa=dR.pJWDPJw||(dR.pJWDPJw=(Ai=uR.eo,xi=uR.p,uR.e,Pi=uR.s,Oi=uR.r,Li=uR.bf,Bi=[],Di={},Mi={},ji=Pi.create({init:function(){Ai.init(),Ai.renderState.attach(ZN)},update:function(t){Bi.push(t),(Di[t.type]=t).typeIncludesDefault&&(Ri=t),t.isActive()&&(Ni=t)}}),$N.prototype={isActive:function(t){var e=(t||Ai.getState()).type;return e===this.type||!e&&this.typeIncludesDefault},getState:function(){var t=Ai.getState();return this.isActive(t)?t:null},appendPipeline:function(t){this.pipeline=this.pipeline.concat(t)},removeFromPipeline:function(e){Li.filterSelf(this.pipeline,function(t){return t!==e})},init:function(t){this.isInited?this.config.trigger(t):(this.launch.trigger(t),this.config.trigger(t),this.isInited=!0)},render:function(t){if(t=t||Ai.getState(),this.isActive(t)&&this.isInited){var e={state:t,cancelled:!1};if(this.prepare.trigger(e),!e.cancelled){for(var n=this.pipeline,a=0,i=n.length;a<i;a++)n[a](t);Oi.requestAot.trigger()}}},stamp:function(t){t.type=this.type,this.accountingState.trigger({state:t})},go:function(t,e){this.stamp(t);var n=this.useSwap;this.useSwap=!1,e=n?"replaceState":e||"pushState",Ai.go(t,e)},swapOnGo:function(){this.useSwap=!0},swap:function(t){this.go(t,"replaceState")},goOrSwapIfSamePage:function(t){var e=Ai.getState();this[e&&e.pageName==t.pageName?"swap":"go"](t)},backToRoot:function(t){this.stamp(t),this.useSwap=!1,Ai.backToRoot(t)}},{create:function(t,e){return new $N(t,e)}})),uR.fb=dR.fxpkQA||(dR.fxpkQA={serialize:function(t){for(var e={},n=0,a=t.length;n<a;++n){var i=t[n];if(i.name)switch(i.type){case"checkbox":e[i.name]=i.checked?"on":"off";break;case"select-one":e[i.name]=i.options[i.selectedIndex].value}}return e},getSelectedOptions:tB,getSelectedOption:function(t){return tB(t)[0]}}),uR.fc=dR.faPc1hQ||(dR.faPc1hQ=(Fi=uR.e,qi=uR.fb,{data:function(t){var e=t.okFormData||{};return eB(t.elements,e,{ignoreDisabled:t.getAttribute("data-ignore-disabled"),submitElement:t.okSubmitSender||t.okSubmitBtn}),e},dataOfElements:function(t){var e={};return eB(t,e,{ignoreDisabled:!0}),e}})),uR.fd=dR.aZrBKQ||(dR.aZrBKQ=function(h,p,f,L,t,R,g,N,B,D,M,e,n,j,F,q,a,H,U){var V,Q,W="cmpl",i=".dialog",z=i+" a,"+i+" input,"+i+" button",X=n.create("ajaxDialog"),G={},J=Date.now(),Y=!1;function o(t){t.blur()}X.isAjaxDialog=!0;var K=a.okApp&&a.iOS?function(t){setTimeout(function(){o(t)},20)}:o;t.startDialog=function(t){V({url:t.dialogUrl})},e.create({name:"initAjaxDialog",init:function(t){Y=t.handlesBack;var m,v,y,i,o,b,C,S,e=hR.getElementById("dialog"),r=t.deferredPush,n=hR.getElementById("content"),k=e&&e.firstChild?e.firstChild.className:"";function a(){o&&(o.focus(),o=null)}function _(t){n&&n.setAttribute("aria-hidden",t)}function s(){var a=!1,t=y.querySelector("form");t&&g(t.elements,function(t){var e=t.type,n=-1!==navigator.userAgent.indexOf("OS 8_");if("hidden"!==e&&(!n||"submit"!==e))return(i=t).focus(),a=!0,t}),a||(y.focus(),i=y)}function w(){var t;s(),t=v.getContentElement().offsetHeight,N.calc().height<t&&(v.isFullScreen||v.unlockScrolling(!1)),v.initContentScroll(),p.trigger({dialog:v,target:S})}function T(){m&&(m.abort(),m=null)}function I(){v||(v=new h(e),y=v.getElement(),b=y.querySelector(".dialog-ld"))}function E(t,e){X[e?"swap":"go"]({url:t})}function A(t){return t&&null!==t.getAttribute("data-skip-history")}function l(a,i){G=i=i||{},S=i.target||null,a=M.abs(a);var t,e,n,o,r,s=void 0!==i.dontPush?Boolean(i.dontPush):A(S),l=i.method||"GET",c=M.see(a),u=i.contentHtml,d=i.contentAsEnvelope,h=i.replaceHistory,p=i.modifier;function f(){var e=this.xhr,n=u||this.response();n&&0<n.length&&setTimeout(function(){o.className=k;var t=p||e&&e.getResponseHeader("X-Modifier");t&&L.addClass(o,t),e&&"1"===e.getResponseHeader("X-New-Modal")&&L.addClass(o,"__redesign"),null==u||d?U(n,{onComplete:w}):(o.innerHTML=n,setTimeout(w,0)),v.removeCssClass("ld").addCssClass(W),i.deferredPush&&!s&&E(a,h),gt.__pstd=0,i.onShowed&&i.onShowed(o,i)},0)}function g(){v.removeCssClass("ld").addCssClass(W),y.setAttribute("aria-busy","false"),L.remove(b);var t,e=this.xhr;!e||200!==e.status||null!=(t=e.getResponseHeader(q.ERROR_MESSAGE_HEADER))&&0<t.length&&v.unlockScrolling()}C=i,0!=a.trim().indexOf("//")&&c.internal&&(e=mt,S&&L.hasClass(S,"js-with-form-data")&&(e=(t=R.findParent(S,function(t){return"FORM"===t.tagName}))?H.data(t):mt),n=S&&L.hasClass(S,"js-fullscreen-dialog"),T(),I(),v.lockScrolling(),o=v.getContentElement(),L.clear(o),_("true"),i.deferredPush||s||E(a,h),v.addCssClass("ld").removeCssClass(W),y.appendChild(b),y.setAttribute("aria-busy","true"),v.show({isFullScreenDialog:n}),hR.addEventListener("keydown",P,!1),v.getElement().addEventListener("click",O,!1),u?(f(),g()):((r=B.request(a,l,e)).header("X-Requested-Popup","1"),r.then(f,x).anyway(g).send(),m=r))}function x(t){t=t||{errorInfo:"dialog request internet error"},v.unlockScrolling(),c(t)}function c(t){_("false"),v&&v.isVisible()&&v.close(),i&&K(i),v.getElement().removeEventListener("click",O,!1),hR.removeEventListener("keydown",P,!1),o&&setTimeout(a,0),C&&C.onClosed&&(C.onClosed(t),C=null),G={}}function u(){T(),v.unlockScrolling(),_("false"),c(),a()}function d(){X.isActive()?(j.back(),setTimeout(function(){X.isActive()?(X.swap({url:"#",avoidDialog:!0}),u()):v.isVisible()&&u()},50)):v.isVisible()&&u()}function P(t){"Escape"!==t.key&&27!==t.keyCode||d()}function O(t){R.isChildOf(t.target,v.getContentElement())||d()}return X.activated.attach(function(){{var t,e;v&&v._visible||!(1e3<Date.now()-J)||(t=X.getState(),(e=t.url)&&!t.avoidDialog&&l(e,{dontPush:!0,deferredPush:r}))}}),X.deactivated.attach(function(){v&&u()}),N.resize.attach(function(){I(),setTimeout(function(){v.handleScreenResize()},100)}),f.register(function(t){var e=t.target,n=t.uri,a=t.method,i="_blank"===e.target;return!n||i||y&&y.contains(e)||!D.isDialogElement(n,e)?!!R.matches(e,z)&&function(t){var e,n,a,i=t.target;if(R.matches(i,z)&&!R.parentBySelector(i,".js-axh")){if(e=i.href,n=e&&-1!==e.indexOf("js-bck")||R.parentBySelector(i,".bck"),a=e&&-1!==e.indexOf("__apphook=1"),n)return Y||d(),!0;if(e)return c(),a?(Y||d(),!1):(setTimeout(function(){var t;t=e,F.change(t)},10),!0);i.form&&"submit"===i.type&&c()}return!1}(t):(o=e,setTimeout(function(){l(n,{dontPush:A(e),method:a,deferredPush:r,target:e})},0),!0)}),hR.addEventListener("focus",function(t){y&&!y.contains(t.target)&&setTimeout(s,0)},!0),V=function(t){l(t.url,{dontPush:t.dontPush||!1,method:t.method||"GET",deferredPush:r,onShowed:t.onShowed||null,onClosed:t.onClosed||null,target:t.target||null,contentHtml:t.contentHtml,contentAsEnvelope:t.contentAsEnvelope||!1,replaceHistory:Boolean(t.replaceHistory),modifier:t.modifier})},Q=u,Z.isInited=!0,this}});var Z={isInited:!1,close:function(){G.dontPush?Z.hide():X.isActive()&&j.back()},show:function(t){V&&V(t)},hide:function(t){Q&&Q(t)}};return Z}(uR.ey,uR.er,uR.dh,uR.n,uR.d,uR.o,uR.e,(uR.g,uR.bd),uR.bm,(uR.by,uR.ez),uR.bk,uR.s,uR.fa,uR.eo,uR.ee,(uR.ce,uR.eb),uR.af,uR.fc,uR.ck)||gt),uR.fe=dR.o7hUphA||(dR.o7hUphA=(Object.assign||(Object.assign=function(t,e){for(var n=1,a=arguments.length;n!==a;n+=1){var i=arguments[n];for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o])}return t}),gt)),uR.ff=dR.uh4tz6Q||(dR.uh4tz6Q=(uR.d,Hi=uR.o,Ui=uR.g,Vi={parentBySelector:Hi.parentBySelector},Qi={collectCount:function(t,e){var n,a,i,o,r=t.target,s=nB(r,e,"target-kind")||"parentBySelector",l=Vi[s];l&&(n=nB(r,e,"target")||".js-collect-container",a=nB(r,e,"target-item")||"pure-item",(i=l(r,n))&&(o=i.getElementsByClassName(a).length,t.uri=Ui.insertParam(t.uri,e,o)))},getParentId:function(t,e){var n,a=t.target,i=nB(a,e,"target-kind")||"parentBySelector",o=Vi[i];!o||(n=o(a,nB(a,e,"target")||".js-collect-container"))&&(n.id||(n.id="jsrnd"+Math.random()),t.uri=Ui.insertParam(t.uri,e,n.id))}},{processUriFunc:function(t,e){for(var n=e.target,a=t.split(/\s+/g,20),i=a.length,o=0;o<i;o++){var r=a[o],s=nB(n,r,"func"),l=Qi[s];l&&l(e,r)}}})),uR.fg=dR.p7ukmgA||(dR.p7ukmgA=(Wi=uR.dh,zi=uR.o,Xi=uR.n,Gi=uR.bm,Ji=uR.fc,Yi=uR.ck,Ki=uR.ff,rB.prototype={go:function(t){Wi.go(t,this)},goSpecific:function(t){Wi.goSpecific(t,this)}},{onLink:oB,onLinkToAjaxEnvelope:function(t){oB(iB(t))},getAjaxLinkHandler:function(t){return oB(t,!0)},getAjaxEnvelopeHandler:function(t){return oB(iB(t),!0)}})),uR.fh=dR.s0ZA72A||(dR.s0ZA72A=($i=uR.e,{simpleReplacer:function(t,i,o){return o=o||{},t.replace(o.regexp||/{{(\w+)}}/g,function(t,e,n,a){return i[e]||(o.keepNotKnown?t:"")})},camelCase:function(t){var n="";return $i(t.split("-"),function(t,e){n+=e?t[0].toUpperCase()+t.slice(1):t}),n},splitBySpaces:function(t){return t.split(/\s+/)},isWordBoundingChar:function(t){return" "===t||"\n"===t||" "===t},isMultilineText:function(t){return-1<t.indexOf("\n")}})),uR.fi=dR.bEc0AQ||(dR.bEc0AQ=function(n,t,e,a,i,y,b,C,S,o,k){var r,s="bottomPopupMenu";function l(t,e){this.root=e;var n=this.header=hR.getElementById("bottom-menu-header");this.content=hR.getElementById("bottom-menu-body"),this.menu=e.getElementsByClassName("bottom-menu")[0],this.titleTextRoot=n.getElementsByClassName("title_text_main")[0],this.loader=e.getElementsByClassName("bottom-menu-loader")[0],this.screenLocker=a.newInstance(),this.keepOpenOnTap=!1}function _(){0}t.register(s,l),l.prototype={constructor:l,clean:function(){return this.open&&this.close(),i.clear(this.content),this},hide:function(){var t=this;this.root.classList.remove("__open"),this.screenLocker.unlock();var e=this.request;return e&&e.abort(),setTimeout(function(){t.menu.style.maxHeight=""},150),setTimeout(function(){t.content.scrollTop=0,t.menu.classList.remove(t.modificator)},300),this.open=!1,this},show:function(e,t){t=t||{};var n=y.resolved;this.open&&(n=y.start(),setTimeout(function(){n.resolve()},300),this.hide());var a=this,i=e.supplier,o=e.bmenuHtml,r=e.bmenuXhr,s=e.childToAppend,l=e.bmenuFrom,c=y.start().then(function(){var t=e.bmenuModificator;e.bmenuHeight&&(a.menu.style.maxHeight=e.bmenuHeight+"px"),t&&a.menu.classList.add(t),a.drawTitle(e.bmenuTitle),a.root.classList.add("__open"),a.open=!0,a.screenLocker.lock(),a.modificator=t});if(i)return n.then(function(){c.join(i({menu:{content:a.content}}).then(function(t){t&&a.insertContent(t)}))}),c;if(s)return this.insertContent(s),e.childToAppend=null,c.resolve();if(l){var u=hR.querySelector(l);return u?(this.drawContent(u.innerHTML),c.resolve()):c.reject("node_not_find")}if(o)return c.join(n.then(function(){a.drawContent(o)}));if(r){c.resolve(),a.loaderTId=setTimeout(function(){a.drawLoader(!0)},200);var d=e.bmenuXhrData;return a.request=b.request(r,"GET",d&&("string"==typeof d?JSON.parse(d):d)).header(C.BOTTOM_MENU_REQUEST,1).then(function(){a.drawContent(function(t,e){{return e.isSimpleXhr?t:e.onXhrResponse?e.onXhrResponse(t):(S(t,{special:{showBottomMenu:{run:function(t){n=t.content}}}}),n);var n}}(this.response(),t))},_).anyway(function(){clearTimeout(a.loaderTId),a.drawLoader(!1)}).withToken().send(),y.start().join(a.request)}if(e.bmenuJson){var h=JSON.parse(e.bmenuJson),p=h.items;if(this.keepOpenOnTap=h.keepOpenOnTap||!1,p&&p.length){for(var f="",g=0,m=p.length;g<m;g++)f+=k.simpleReplacer(this.getTemplate(),function(t){t.iconClass||(t.iconClass="hidden");return t}(p[g]));var v=function(t){var e=hR.createElement("UL");e.classList.add("bottom-menu-list"),t.listClass&&e.classList.add(t.listClass);return e}(h);return v.insertAdjacentHTML("beforeend",f),this.insertContent(v),c.resolve()}return c.reject("error_json_empty")}},drawContent:function(t){t&&(this.content.innerHTML=t)},insertContent:function(t){var e=this.content;e.innerHTML="",e.appendChild(t.cloneNode(!0))},drawTitle:function(t){this.menu.classList.toggle("__untitled",!t),t&&(this.titleTextRoot.textContent=t)},drawLoader:function(t){t&&this.insertContent(this.loader.cloneNode(!0)),this.menu.classList.toggle("__loading",t)},getTemplate:function(){return this.template||(this.template=this.root.querySelector(".innerMenuItemTpl").textContent)},cancelAction:{tap:function(t){0==(16&this.menu.compareDocumentPosition(t.target))&&this.hide()}},hideAction:{tap:function(){this.hide()}},showAction:{tap:function(t,e){this.show(e.dataset)}},hideAndTapAction:{tap:function(t,e){this.keepOpenOnTap||this.hide(),n.onTap(t)}}};var c={behavior:function(){return t.getOrMakeBehavior(r)},getInstanceIfExist:function(){return r&&t.getBehaviorIfExist(r,s)},show:function(t,e){c.behavior().show(t,e)},showHtml:function(t){c.show((new u).addHtml(t))},showByXHR:function(t,e){e=e||{},c.behavior().show((new u).addXhrLink(t).addDataset(e.menuModel),e)},close:function(){c.behavior().hide()},specialEnvelope:{showBottomMenu:{parseDomNode:function(t,e){e.menuModel=(new u).addHtml(e.content).addDataset(t.dataset)},run:function(t){c.show(t.menuModel)}}}};function u(){}return u.prototype={constructor:u,addHtml:function(t){return this.bmenuHtml=t,this},addXhrLink:function(t){return this.bmenuXhr=t,this},addFrom:function(t){return this.bmenuFrom=t,this},addDataset:function(t){return Object.assign(this,t),this}},e.create({name:"bottomPopupMenu",init:function(){r=hR.getElementById("bottom-menu-fader"),n.addFuncHandler("showBottomMenu",{tap:function(t,e){c.show((new u).addDataset(e.dataset))}}),o.onLinkToAjaxEnvelope({selector:".js-ajax-envelope-bmenu",tuneRequest:function(t){t.ajaxTask.header(C.BOTTOM_MENU_REQUEST,1)},processing:{special:c.specialEnvelope}})},update:function(t){t.menuModel},discard:function(){var t=c.getInstanceIfExist();t&&t.hide().clean()}}),c}((uR.fe,uR.ai),uR.ah,uR.s,uR.ex,uR.n,uR.i,uR.bm,uR.eb,uR.ck,uR.fg,uR.fh)||gt),uR.fj=dR.iesFvfQ||(dR.iesFvfQ={MyPlaylistId:"my",musicUtils:{secondsToMinutes:function(t){var e=Math.floor(t/60),n=Math.floor(t%60);return[e,":",n<10?"0":"",n].join("")}},trackSelected:(to=uR.p).create(),trackIsPlayingChanged:to.create(),buffering:to.create(),go:{ownMusic:to.create(),userMusic:to.create(),groupMusic:to.create(),recommended:to.create(),subscriptions:to.create(),current:to.create()},page:null,pageNames:{Home:"home",Recommended:"recommended",Search:"search",Subscriptions:"subscriptions",Current:"current",FriendMusic:"friend",GroupMusic:"group"},callPlayEarly:!1,umaLog:!1,ownMusicCache:null}),uR.fk=dR.sTPRQGw||(dR.sTPRQGw=(eo=uR.fj,no=uR.a,ao=uR.af,so={NEXT_BTN:1,PLAYLIST_CHANGE:3,COMPLETED:4},lo="externalMusic",io=gt.navigator.platform,co=-1!==["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(io)?"Mac OS":ao.iOS?"iOS":-1!==["Win32","Win64","Windows","WinCE"].indexOf(io)?"Windows":ao.android?"Android":/Linux/.test(io)?"Linux":mt,{logListened:function(t,e,n){eo.umaLog&&e&&n&&(no.log(lo,["listened",JSON.stringify({umaPayload:n.umaPayload,startTimestamp:n.startTimestamp,trackId:e.id,ctx:e.ctx,releaseId:e.releaseId,endReason:so[t],useDuration:Math.round((Date.now()-n.startTimestamp)/1e3),stateStart:n.stateStart?2:1,stateEnd:hR.hasFocus&&hR.hasFocus()?2:1,addedDuringListening:ro,previousUmaPayload:oo,osType:co})]),oo=n.umaPayload,ro=!1)},logAddTrack:function(t,e){eo.umaLog&&(e&&(ro=!0),no.log(lo,["like",JSON.stringify({trackId:t.id,ctx:t.ctx,releaseId:t.releaseId,startTimestamp:Date.now(),osType:co})]))}})),uR.fl=dR.pajxxvg||(dR.pajxxvg=(uo=uR.ea,ho=uR.fk,{create:function(a,i){return function(t){var e=t.error||"unknown.error";logClientEvent("music",["playError",e.substring(0,30<e.length?30:e.length)]),setTimeout(function(){var t=a.playingTrack();ho.logListened("PLAYLIST_CHANGE",t&&t.track,a.stats()),a.playNext(!0)},400);var n=e.replace("error.","");n in i&&uo.show(i[n],3e3)}}})),uR.fm=dR.m2TAWIg||(dR.m2TAWIg={updateMediaMetadata:function(t,e){var n,a=navigator.mediaSession;a&&(t&&(a.metadata=(n=t,new MediaMetadata({title:n.name,artist:n.ensemble,album:n.albumName,artwork:n.imageUrl?[{src:n.imageUrl,type:"image/png",sizes:"128x128"}]:mt}))),e&&(a.setActionHandler("play",e.resume),a.setActionHandler("pause",e.pause),a.setActionHandler("seekbackward",e.seekBackward),a.setActionHandler("seekforward",e.seekForward),a.setActionHandler("previoustrack",e.previous),a.setActionHandler("nexttrack",e.next)))}}),uR.fn=dR.mKbksKw||(dR.mKbksKw=(po=uR.d,fo=uR.n,go=uR.o,mo=uR.j,vo=uR.e,uR.dg,yo=uR.s,bo=uR.ee,Co=uR.ah,So=uR.fl,ko=uR.eq,_o=uR.fm,Lo="data-uid",Ro="data-playlist",No="music-attach",uB.prototype={play:{tap:function(){var t=this;Oo&&mB(t.dom,!1);var e,n=(Oo=t).dom,a=go.parentBySelector(n,"[data-uid]"),i="";a&&(i=a.getAttribute(Lo)||""),(a=go.parentBySelector(n,"[data-playlist]"))&&(e=a.getAttribute(Ro));var o,r,s,l,c=t.trackId;c&&(mB(t.dom,!0),gB(t.dom),bo.change((s=(r=[o=c,e||o,i]).length,l=0,wo.replace(/%s/g,function(t){var e=l<s?r[l]:"";return l++,e})),!0))}},pause:{tap:function(t){mB(this.dom,!1),Co.allowDefault(t)}}},dB.prototype={setIsSelected:function(t){t?xo.trackSelected.trigger({track:this}):(mB(this.trackElement,!1),pB(self,!1))},onPlayheadMove:function(){},onBufferProgress:function(){},isFromStatus:!0,play:Co.handle("tap",function(){this.playTrack()}),pause:Co.handle("tap",function(){this.pauseTrack()}),playTrack:function(){var d=this;lB(function(){var u,t=Ao.playingTrack();t&&t.trackElement&&vB(t.trackElement,!1),Ao.select(d),pB(d,!0),d.sourceUrl&&d.track?(Ao.play(),cB(d)):d.trackId&&((u=function(t){d.sourceUrl=u.q(t.play),Ao.load(),Ao.play();var e,a,i,o,n,r=Ao.playingTrack(),s=r.track,l=s?s.queueCache:null,c=t.track;d.track=c,cB(d),(!l||l.length<1)&&(a=d.trackElement,i=c,o=[],n=hR.querySelectorAll(".js-topic-track"),vo(n,function(t){var e,n;t!==a?!(e=t.getAttribute("data-model"))||(n=JSON.parse(e).trackFullInfo)&&(n.cachedTopicTrackDom=t,o.push(n)):o.push(i)}),vo(o,function(t,e){t.queueCache=o,t.queueIndex=e}),(e=o).includes(c)||(e.push(c),c.queueCache=e,c.queueIndex=e.length),r.track=c,r.trackElement.okData.track=c)}).onError=So.create(Ao,Po),Io.getAudioSource(d.trackId,d.ctx,d.locale,u)),hB()&&ko.musicMessagePlaying.trigger({}),vB(d.trackElement,!0)}),mB(d.trackElement,!0),gB(d.trackElement)},pauseTrack:function(){Ao&&(Ao.pause(),mB(this.trackElement,!1),pB(this,!1),vB(this.trackElement,!1))},togglePlay:function(){this[Ao.isPlaying()?"pause":"play"]()},isPlayable:function(){return!0},getPrevious:function(){var t=this.track;if(t){var e=t.queueCache,n=t.queueIndex;if(e&&null!=n){t=0===n?e[e.length-1]:e[n-1];var a=findTopicTrackDom(t);return a?fB(a):null}}},getNext:function(){var t=this.track;if(t){var e=t.queueCache,n=t.queueIndex;if(e&&null!=n){var a=(t=n===e.length-1?e[0]:e[n+1]).cachedTopicTrackDom;return a?fB(a):null}}var i,o,r=this.trackElement;if(fo.hasClass(r,No)){if(i=go.parentBySelector(r,".discus_list_w"))for(i=i.nextSibling;i;){var s=i.getElementsByClassName(No);if(s&&0<s.length)return fB(s[0]);i=i.nextSibling}}else o=(i=go.parentBySelector(r,"li"))?i.nextSibling:null;return o?fB(o):null},add:{tap:function(t){var e,n,a;this.isAdding||(n=!(e=this).isAdded,a=t.target,e.isAdding=!0,lB(function(){var t=xo.MyPlaylistId;Io[n?"addTrack":"removeTrack"](t,e.trackId,function(){e.isAdded=n,e.isAdding=!1;var t=a.closest(".js-add-track");fo.switchClass(t,n,"__done")})}))}}},ko.audioMessagePlaying.attach(function(){var t=hR.querySelector(".music-attach.__playing");t&&Co.getOrMakeBehavior(t).pause()}),po.initMusicStatus=yo.create({init:function(){Co.register("topicTrack",dB),Co.register("appMusicTrack",uB)},update:function(t){wo=t.playUrl,t.trackListEnabled,To=t.wmf,Po=t.wmfErrorPhrases,vo(hR.querySelectorAll(".gift-price"),function(t){mo(t,"click",sB,!0)})}}),{stopAudioPlayer:function(){Ao&&Ao.pause()}})),uR.fo=dR.afbV1jw||(dR.afbV1jw={items:{added:uR.p.create()}}),uR.fp=dR.mDNWJg||(dR.mDNWJg=(Bo=uR.d,Do=uR.dz,Mo=uR.s,jo=uR.fo,Ho=qo=!(Fo="placemap_osm"),Bo.initMap=Mo.create({update:function(t){CB(),jo.items.added.attach(CB)},discard:function(){jo.items.added.detach(CB)}}),gt)),uR.fq=dR.ayoYgwQ||(dR.ayoYgwQ=function(t){for(var e,n,a=t.length;a;)n=Math.floor(Math.random()*a),e=t[--a],t[a]=t[n],t[n]=e;return t}),uR.fr=dR.lnkszZQ||(dR.lnkszZQ={updateLastClick:function(t,e){t.okLastClicked=e||Date.now()},submitAllowed:function(t,e){return e<=0||Date.now()-(t.okLastClicked||0)>=e}}),uR.fs=dR.lhuYqaA||(dR.lhuYqaA=(Uo=uR.d,uR.dh,Vo=uR.n,Qo=uR.o,uR.bm,Wo=uR.fg,zo=uR.s,Xo=uR.e,Go=uR.fq,Jo=uR.fr,Ko=".widget",Zo=".widget-list_i",$o="__animated",tr="__ajax-updated",er=["red","blue","yellow"],Uo.listenToLikeClicks=zo.create({init:function(t){var i=t.delay;Yo=Wo.onLink({selector:".widget_like_old",indicatorSelector:Ko,loaderTimeout:250,prepare:function(t){var e=t.target,n=Qo.parentBySelector(e,Zo),a=Qo.parentBySelector(e,Ko);return n&&Jo.submitAllowed(n,i)?{block:a,wrapper:n}:{cancelled:!0}},success:function(t){var n,a,e,i,o=t.response,r=t.block,s=t.wrapper,l=[];o&&0<o.length&&(r.insertAdjacentHTML("beforeBegin",o),r.parentNode.removeChild(r),t.block=r=s.querySelector(Ko),t.wrapper=s=Qo.parentBySelector(r,Zo),(e=Vo.hasClass(r,tr))&&setTimeout(function(){Vo.removeClass(r,tr)},350),r&&Vo.hasClass(r,$o)&&e&&Vo.hasClass(r,"__active")&&(n=hR.createDocumentFragment(),Xo(Go(er),function(t,e){(a=hR.createElement("div")).className="widget_balloon __"+e+" __"+t,n.appendChild(a),l.push(a)}),i=l,setTimeout(function(){var e=i[0].parentNode;e&&(Xo(i,function(t){e.removeChild(t)}),e.getElementsByClassName("widget_balloon").length||Vo.removeClass(e,$o))},2500),s.insertBefore(n,r),Vo.addClass(s,$o)))},complete:function(t){var e;(e=t.wrapper)&&Jo.updateLastClick(e)}})}}),{click:function(t){Yo.goSpecific(t)}})),uR.ft=dR.s0IDiew||(dR.s0IDiew=(nr=uR.d,ar=uR.o,ir=uR.dh,or=uR.n,rr=uR.s,sr="&st.phlst=",lr="&spids=",cr="href",nr.scrollCollagePhotos=rr.create({init:function(){ir.register(function(t){var e,n,a,i=t.target;!or.hasClass(i,"collage-item")&&!or.hasClass(i,"feed-collage-item")||(e=ar.parentBySelector(i,".collage, #photo-collage-feed"))&&(!(n=e.getAttribute("data-scroll-ids"))||-1!==(a=i.getAttribute(cr)).indexOf("?")&&(-1!==a.indexOf("/apphook/userPhoto?")?-1===a.indexOf(lr)&&(a=a+lr+n,i.setAttribute(cr,a)):-1===a.indexOf(lr)&&(a=-1!==a.indexOf("#")?a.replace("#",sr+encodeURIComponent(n)+"#"):a+sr+encodeURIComponent(n),i.setAttribute(cr,a))))})}}),nr.scrollCollagePhotos||gt)),uR.fu=dR.eOT0UXg||(dR.eOT0UXg=(ur=uR.f,dr=uR.o,{listen:SB.bind(0,"addEventListener"),stopListening:SB.bind(0,"removeEventListener"),delegate:function(a,t,i,o,e){a.addEventListener(t,function(t){var e=t.target,n=dr.parentBySelector(e,i);n&&dr.isChildOf(n,a)&&o.call(n,t)},e||!1)}})),uR.fv=dR.soIbhEA||(dR.soIbhEA={processed:uR.p.create()}),uR.fw=dR.sJZDS4Q||(dR.sJZDS4Q=(hr=uR.d,pr=uR.n,fr=uR.o,gr=uR.am,mr=uR.e,vr=uR.fv,yr=uR.dx,br=uR.bd,Cr=uR.af,Sr=uR.ah,_r=[],Tr="",Ir=!(wr="__init"),gr.updated.attach(_B),gr.cancelled.attach(_B),hr.initStubs=_B,wB.prototype={proxy:{tap:function(t,e){var n=hR.querySelector(e.getAttribute("data-querySelector"));n&&(n.click(),n.focus(),Cr.iOS&&setTimeout(function(){hR.body.scrollTop=n.parentNode.getBoundingClientRect().top+hR.body.scrollTop-8},0))}}},Sr.register("tapProxy",wB),{blockHasStub:function(t){return 0!==t.getElementsByClassName("empty-page").length},setStubParentSelector:function(t){return Tr=t||"",this},recalculateStubs:function(){return _B(),this}})),uR.fx=dR.lzaWiig||(dR.lzaWiig=(Er=uR.dv,Ar=uR.bd,{init:function(){Ar.manageSyncChanged(!0,function(t){Er.set("toolbarSearch.enabled",480<=t.width)})}})),uR.fy=dR.tvGodNw||(dR.tvGodNw={open:uR.p.create()}),uR.fz=dR.aMJmAGg||(dR.aMJmAGg=function(t){"use strict";var e={};return Object.defineProperty(e,"__esModule",{value:!0}),e.close=e.open=void 0,e.open=(0,t.create)(),e.close=(0,t.create)(),e}(uR.p)||gt),uR.ga=dR.mTVlbdg||(dR.mTVlbdg=uR.p.create()||gt),uR.gb=dR.lghbp4Q||(dR.lghbp4Q=(function(t,y,b,C,d,i,o,e,h,a,r,p,l,f,s,g,m,c,u,v,S,n,k,_,w,T,I,E,A,x,P,O,L){var R="search-on",N="search_mod",B="js-search",D="js-search_cancel",M=pR,j="ontouchstart"in M?"touchstart":"mousedown",F=[],q=[];function H(){return y.hasClass(M,"messaging")}function U(s,t){var e,n,a,i=this;i._options=t||{},i._saveFocus=!1,i._searchInputActive=!1,i._searchTimeout=-1,i._sessionData=null,i._resultsRequestTask=null,i._lastFocusedSearchInput=null,i._outsideSearchInput=null,i._outsideCancelButton=null,i._focusedSearchInput=null,i._lastFocusedInput=null,(e=(i._searchLayer=s).getElementsByClassName("search_input")).length&&(i._searchLayerSearchInput=e[0],i._searchLayerSearchInputWrapper=b.parentBySelector(i._searchLayerSearchInput,".input-text"),(n=s.getElementsByClassName(D)).length&&(i._searchLayerCancelButton=n[0],i._searchLayerResults=s.querySelector(".a-search_results"),i._searchLayerContentWrapper=s.querySelector(".a-search_i"),i._cancelled=!1,i._resultsHeight=0,i._model=a=l.create({isResult:!1,isActive:!1,inLooking:!1,query:"",sessionData:null,isOutsideInputActive:!1}),a.onChanged("isResult",function(t){y.switchClass(s,t,"results")},i),a.onChanged("isActive",function(t){var e=this._searchLayer;e.setAttribute("aria-hidden",!t),y.switchClass(e,t,"active"),y.switchClass(M,t,R),this._searchLayerSearchInputWrapper&&y.switchClass(this._searchLayerSearchInputWrapper,t,"__active")},i),a.onChanged("inLooking",function(t){y.switchClass(s,t,"__loading"),this._searchLayerResults.setAttribute("aria-busy",t),this._searchLayerSearchInputWrapper&&y.switchClass(this._searchLayerSearchInputWrapper,t,"__in-progress")},i),a.onChanged("isOutsideInputActive",function(t){y.switchClass(this._searchLayerContentWrapper,t,"__outside-search-field-active")},i),a.onChanged("sessionData",function(t,e){var n,a,i,o,r=this;e&&(r._outsideSearchInput=null,r._outsideCancelButton=null,r._focusedSearchInput=null,n=e.haveOutsideInput,a=e.input,(i=e.searchMeta.searchScope)&&y.removeClass(M,i+"-search-scope"),(o=e.searchMeta.from)&&y.removeClass(M,"search-from-"+o),n&&a&&K(r,a),Z(r,e.cancel),e.onend()),t&&((i=t.searchMeta.searchScope)&&y.addClass(M,i+"-search-scope"),(o=t.searchMeta.from)&&y.addClass(M,"search-from-"+o),n=t.haveOutsideInput,a=t.input?t.input:null,r._outsideSearchInput=t.input,r._outsideCancelButton=t.cancel,r._endpointUrl=t.form.getAttribute("data-endpoint"),r._defaultEndpointUrl=r._endpointUrl,r._endpointUrl&&h(s.getElementsByClassName(N),function(t){t.name&&y.switchClass(s,-1!==r._endpointUrl.indexOf("__OK_"+t.name+"__"),"__has_mod_"+t.name)}),n&&a&&(J(r,a),r._focusedSearchInput=a,r._model.set("isOutsideInputActive",!0)),Y(r,t.cancel))},i),x.open.attach(function(t){this._model.get("isActive")&&g.request(function(t,e){t._calculateSearchViewHeight(e)},this,t)},i),P.close.attach(function(){this._model.get("isActive")&&this._calculateSearchViewHeight()},i)))}function V(){this._calculateSearchViewHeight(null,"visible")}function Q(t){return t._searchLayerContentWrapper.getBoundingClientRect().height}function W(t,e,n){var a=hR.getElementById("head");a&&(e+=a.offsetHeight),t._resultsHeight=e,A.height.override("search",e+"px",n||"hidden")}function z(t,e,n){return e===t[n]||e.parentNode===t[n]}function X(t){this.value!==t&&(this.value=t)}function G(t){var e=this._model.get("sessionData").searchMeta;d.queryChange.trigger({query:t,from:e.from,searchScope:e.searchScope,input:e.input}),ft.isActive()&&(ft.getState().query=t,_.accountStateUpdate())}function J(t,e){m.listen(e,{focus:t,input:t}),e.addEventListener("blur",t,!0),m.listen(e.form,{submit:t,change:t})}function Y(t,e){e&&e.addEventListener("click",t,!1)}function K(t,e){m.stopListening(e,{input:t,focus:t}),e.removeEventListener("blur",t,!0),m.stopListening(e.form,{submit:t,change:t})}function Z(t,e){e&&e.removeEventListener("click",t,!1)}function $(t){t&&this._calculateSearchViewHeight()}function tt(){this._calculateSearchViewHeight()}function et(){ft.isActive()&&_.back()}function nt(t){gt.scrollTo(0,t||0)}function at(t){t.preventDefault(),t.stopPropagation()}function it(t){var e,n=hR.getElementById("boxPage");n&&(e=n.style,t?(e.visibility="",n.setAttribute("aria-hidden","false"),H()||(e.pointerEvents="",h(F,function(t){t.removeEventListener("click",at,!1)}))):(e.visibility="hidden",n.setAttribute("aria-hidden","true"),H()||(e.pointerEvents="none",h(F,function(t){t.addEventListener("click",at,!1)}))))}function ot(){return hR.getElementsByClassName("toolbar-search-input")[0]}function rt(t){return hR.activeElement===t}U.prototype={handleEvent:function(t){var e,n,a,i,o,r,s,l,c,u,d,h,p,f,g,m,v;switch(t.type){case"click":h=this,!(v=(p=t).currentTarget)||z(h,v,"_searchLayerCancelButton")||z(h,v,"_outsideCancelButton")?(p.preventDefault(),h.end(!0)):(m=b.findParent(p.target,function(t){if(null!==(f=t.getAttribute("data-target")))return!0}),!f||(g=m.getAttribute("data-endpoint"))&&(p.preventDefault(),h._endpointUrl=g,h._submitRequest()));break;case"keyup":u=this,27===(d=t).keyCode?u.end(!0):13!==d.keyCode||H()||u._notifyFormSubmission();break;case"input":case"change":s=this,l=t,c=y.hasClass(l.target,N),"change"===l.type&&!c||(c||s._model.set("query",l.target.value),C.android&&C.androidDevice.isStockVersion&&nt(),s._submitRequest());break;case"focus":r=t,(o=this)._searchInputActive=!0,o._focusedSearchInput=r.target;break;case"blur":case"touchstart":case"mousedown":a=this,(i=t).target!==a._focusedSearchInput&&(a._searchInputActive=!1),C.android&&"blur"==i.type&&a._searchInputActive&&a._focusedSearchInput.focus();break;case"submit":e=this,n=t,y.preventDefault(n),H()||e._notifyFormSubmission()}},start:function(t){var e,n,a=this,i=a._model;if(!i.get("isActive")){var o=a._searchLayerSearchInput;i.set("sessionData",t),a._saveFocus=!1,gt.addEventListener("keyup",a,!1),n=(e=a)._searchLayerResults,m.listen(n,{touchstart:e,mousedown:e,click:e}),J(a,o),Y(a,a._searchLayerCancelButton),null===a._focusedSearchInput&&(a._focusedSearchInput=o);var r=a._model.get("sessionData").searchMeta.toggleClass;return r&&y.removeClass(M,r),i.onChanged("query",X,o),i.onChanged("query",G,a),i.set("query",""),it(!0),a._scrollPositionRecord=p.recordScroll(),a._returnScrollPosition=function(){p.resetScroll(this._scrollPositionRecord)}.bind(a),p.setOverflow(),nt(),i.set("isActive",!0),H()||setTimeout(function(){a._focusedSearchInput&&a._focusedSearchInput.focus()},I.keyboard.closeTimeout),a._focusedSearchInput.focus(),a._setSearchInputCursorToEnd(a._focusedSearchInput),i.synced("inLooking",$,a),f.onChanged("heightBySidebar",tt,a),d.init.trigger(i.get("sessionData").searchMeta),g.request(function(){p.resetOverflow()}),setTimeout(function(){nt(-500)},400),p.resize.attach(V,a),a}},end:function(t,e){var n,a,i=this,o=i._model;if(o.get("isActive")){var r=i._searchLayerSearchInput,s=i._searchLayerCancelButton,l=i._searchLayerResults,c=o.get("sessionData").searchMeta;o.offChanged("query",G,i),o.set("query",""),gt.removeEventListener("keyup",i,!1),n=i,a=l,m.stopListening(a,{touchstart:n,mousedown:n,click:n}),K(i,r),Z(i,s),o.offChanged("query",X,r),rt(i._focusedSearchInput)&&i._focusedSearchInput.blur(),i._cancelled=t||!1,o.set("sessionData",null),o.set("isOutsideInputActive",!1),y.clear(i._searchLayerResults),it(!0),A.height.revert(),o.set("isActive",!1),o.set("isResult",!1);var u=c.toggleClass;return u&&y.addClass(M,u),o.offChanged("inLooking",$,i),f.offChanged("heightBySidebar",tt,i),i._scrollPositionRecord&&g.request(function(){g.request(i._returnScrollPosition)}),!1!==e&&et(),d.cancelled.trigger(c),p.resize.detach(V,i),i}},changeSearchInitial:function(t){var e=this._model;return e.set("sessionData",ct(this,t)),t.value=e.get("query"),t.focus(),this._calculateSearchViewHeight(),this},query:function(t){var e=this._model;return e.get("isActive")&&(e.set("query",t),this._submitRequest()),this},_setSearchInputCursorToEnd:function(t){var e=t.value;return e&&e.length&&(t.selectionStart=t.selectionEnd=e.length),this},_notifyFormSubmission:function(){var t,e,n=this._model;return n.get("sessionData").onsubmit&&(t=n.get("query"),e=this._createQueryUrl(this._searchLayer,t),n.get("sessionData").onsubmit(t,e)),this},_createQueryUrl:function(t,e){var n=this._endpointUrl;if(!n)return null;var a=this._serializeForm(t);return o(a,function(t,e){n=n.replace("__OK_"+e+"__",encodeURIComponent(a[e]))}),n.replace("__OK_QUERY__",encodeURIComponent(e))},_serializeForm:function(t){return e.serialize(t.getElementsByClassName(N))},_submitRequest:function(){var a=this,i=a._model,n=i.get("query").trim();return a._resultsRequestTask&&(a._resultsRequestTask.abort(),a._resultsRequestTask=null),-1!==a._searchTimeout&&gt.clearTimeout(a._searchTimeout),n&&n.length?(i.set("inLooking",!0),a._searchTimeout=gt.setTimeout(function(){var t,e;i.get("isActive")&&((t=s.request(a._createQueryUrl(a._searchLayer,n))).__searchDebugQery=n,(a._resultsRequestTask=t).header("Content-Type","application/x-www-form-urlencoded"),t.header("X-Live-Search","1"),(e=i.get("sessionData").searchMeta).from&&t.header("X-Search-From",e.from),t.then(function(t){var e,n=t.getResponseHeader("X-Live-Query");n&&(e=decodeURIComponent(n)),e&&e!==i.get("query").trim()||(a._resultsRequestTask=null,a._searchLayerResults.innerHTML=this.response(),i.set("isResult",!0),a._calculateSearchViewHeight(),d.updated.trigger(e))}).anyway(function(){i.set("inLooking",!1)}).withToken().send()),a._searchTimeout=-1},a._options.searchThreshold||0)):(y.clear(a._searchLayerResults),a._endpointUrl=a._defaultEndpointUrl,i.get("inLooking")?i.set("inLooking",!1):a._calculateSearchViewHeight(null,"visible"),i.set("isResult",!1),d.updated.trigger("")),a},_calculateSearchViewHeight:function(t,e){var n,a,i,o=this,r=0,s=Q(o);return t&&(!(n=b.parentBySelector(t,".a-menu"))||(a=n.getElementsByClassName("a-menu_content_w")[0])&&(i=y.getTotalOffsetTop(a),h(a.children,function(t){i+=t.offsetHeight}),s<i&&(s=i))),g.request(function(){"visible"!==e&&f.get("heightBySidebar")&&u.get("inited")&&(r=c.sidebar.getOffsetHeight()),s<r&&(s=r),H()||(v.blockHasStub(o._searchLayerResults)&&S.processed.attachOnce(function(){var t=Q(o);t<r&&(t=r),W(o,t,e)}),W(o,s,e))}),o}};var st={handleEvent:function(t){this._handleEventAtTarget(t.target)},_handleEventAtTarget:function(t){var e,n,a=t.form;null!==a&&(!(e=a.querySelector(".search_input"))||(n=e.value.trim())&&0<n.length&&T.submitForm(a,e))}};function lt(t){y.switchClass(this,t,"__in-progress")}function ct(t,n){var e,a="not-moved"===n.getAttribute("data-search-relation"),i=n.getAttribute("data-from"),o=n.getAttribute("data-search-scope"),r=n.parentNode,s=n.form,l=s.getElementsByClassName(D)[0],c=n.value||"",u=b.parentBySelector(n,".input-text"),d=null!==u,h=a&&d;function p(){a||(null!=e?r.insertBefore(n,e):r.appendChild(n))}return t._model.onChanged("query",X,n),h&&t._model.onChanged("inLooking",lt,u),d&&y.addClass(u,"__active"),a||(n.blur(),e=n.nextSibling,r.removeChild(n)),{form:s,haveOutsideInput:a,input:a?n:null,cancel:l,inputValueOnInitStart:c,searchMeta:{input:n,from:i,searchScope:o,toggleClass:!H()||"sidebar"!==i&&"toolbar"!==i?null:"messaging"},onend:function(){p(),rt(n)&&n.blur(),d&&y.removeClass(u,"__active"),t._model.offChanged("query",X,n),h&&t._model.offChanged("inLooking",lt,u),t._cancelled&&(n.value=c)},onsubmit:function(t,e){p(),n.value=t,s.action=e,T.submitForm(s,n)}}}T.addFuncHandler("goToGlobalSearch",{tap:function(t){var e=b.parentBySelector(t.target,".js-to-global-search");L.change(e.getAttribute("data-endpoint")),setTimeout(function(){var t=hR.getElementById("GlobalSearchFormField");t&&(t.focus(),t.select())},250)}}),T.addFuncHandler("redirectToGlobalSearch",{tap:function(t){var e=t.target.getAttribute("data-endpoint");e&&(r.navigated.attachOnce(function(){var t=hR.getElementById("GlobalSearchFormField");t&&(t.focus(),t.select())}),L.change(e))}});var ut,dt,ht,pt,ft=k.create("search");t.initLiveSearch=n.create({init:function(t){var s,c,e=hR.getElementById("live-search");function a(t){var e,n,a,i=!0;if(y.hasClass(t,B)){if(e=t.getAttribute("data-from"),n=t.getAttribute("data-search-scope"),a=ot(),s._model.get("isActive")){if("sidebar"!==e&&("toolbar"!==e||s._outsideSearchInput===t))return;s.end(!0,!1),i=!1}else if(f.get("toolbarSearch.active")&&a&&a!==t&&"global"===n)return void(t=a).focus();if(!ut||ut===t){var o,r=t.value;return s.start(ct(s,t)),i&&(o=t.getAttribute("data-uid")||"searcInput"+Date.now(),t.setAttribute("data-uid",o),ft.go({query:r,inputUid:o})),r&&r.length&&s.query(r),1}t.blur()}}function n(t,e){s&&(t===mt||t)&&s.end(!0,e)}function u(t){var e=t.target,n=e.form;n&&(y.switchClass(n,t.type.toLowerCase()==c,"__input-focused"),y.hasClass(e,B)||(y.addClass(n,"__input-active"),d.layoutChanged.trigger())),"blur"==t.type&&(t.relatedTarget&&y.hasClass(t.relatedTarget,D)||!y.hasClass(M,R)||setTimeout(function(){d.updated.trigger()},500))}e&&(hR.body,s=new U(e,t),f.onChanged("workWithOutsideInputs",function(t){var e=this._model;e.get("isActive")&&(t||this._focusedSearchInput===this._searchLayerSearchInput?t&&null!==this._outsideSearchInput&&(this._calculateSearchViewHeight(),e.set("isOutsideInputActive",!0),this._outsideSearchInput.focus()):(this._calculateSearchViewHeight(),e.set("isOutsideInputActive",!1),this._searchLayerSearchInput.focus()))},s),h(q,function(t){h(hR.getElementsByClassName(t),function(t){F.push(t)})}),gt.onpageshow=function(t){t.persisted&&(s.end(),et())},d.returnToSearch.attach(function(){s._model.get("isActive")&&null!==s._focusedSearchInput&&s._focusedSearchInput.focus()}),E.init(),f.onChanged("toolbarSearch.active",function(t){var e=this._model;t&&e.get("isActive")&&"global"===e.get("sessionData").searchMeta.searchScope&&this.changeSearchInitial(ot())},s),r.rendering.attach(function(t){n(!0,!1)}),ft.deactivated.attach(function(t){n(!t.current.isAjaxDialog,!0)}),ft.activated.attach(function(t){var e,n,a;s._model.get("isActive")||(n=(e=t.state).query,(a=hR.querySelector(["[data-uid=",e.inputUid,"]"].join("")))&&(s.start(ct(s,a)),s.query(n)))}),dt={handleEvent:function(t){var e=t.target;switch(t.type){case j:ut=e;break;case"click":if(a(e))return t.preventDefault(),!1;break;case"keyup":var n=t.keyCode;9!==n&&16!==n&&27!==n&&a(e);break;case"input":a(e)}}},ht=C.ie?"keyup":"input",(pt={click:dt})[j]=dt,pt[ht]=dt,hR.activeElement&&a(hR.activeElement),i.opening.attach(function(){var t=s._focusedSearchInput;s._model.get("isActive")&&rt(t)&&(s._saveFocus=!0,t.blur())}),i.closed.attach(function(){var t=s._focusedSearchInput;s._model.get("isActive")&&s._saveFocus&&null!==t&&t.focus()}),i.open.attach(function(){H()&&s.end(!0)}),c="focusin",w.domLoaded.then(function(){var l;h(hR.getElementsByClassName("search_input"),function(t){var e,n,a,i,o,r,s;t.addEventListener(c,u,!1),l=l||("ondeactivate"in t?"deactivate":"blur"),t.addEventListener(l,u,!1),i=(e=t).form,o=e.getAttribute("data-from"),r=e.getAttribute("data-search-scope"),s=null!==r,i&&(a=i.querySelector(".search_input_stub"))&&(n=e.parentNode,d.init.attach(function(t){(t.from===o||s&&t.searchScope===r)&&y.addClass(n,"__show-stub")}),d.cancelled.attach(function(t){(t.from===o||s&&t.searchScope===r)&&y.removeClass(n,"__show-stub")}),d.queryChange.attach(function(t){(t.from===o||s&&t.searchScope===r)&&(a.value=t.query)}),a.addEventListener("click",function(){d.returnToSearch.trigger()},!1))}),h(hR.getElementsByClassName(N),function(t){b.parentBySelector(t,"#live-search")||t.addEventListener("checkbox"===t.type?"click":"change",st)})}),O.attach(function(t){s._model.get("isActive")&&s._calculateSearchViewHeight()}))},update:function(n){a("search",hR.getElementsByClassName(B),function(t){m.listen(t,pt);var e=t.form;e&&!h(e.getElementsByClassName(N),function(t){if("checkbox"===t.type){if("on"===t.getAttribute("data-init-val")!==t.checked)return st._handleEventAtTarget(t),!1;t.addEventListener("click",st,!1)}else if("select-one"===t.type){if(t.getAttribute("data-init-val")!==t.options[t.selectedIndex].value)return st._handleEventAtTarget(t),!1;t.addEventListener("change",st,!1)}})||n&&!n.activateOnFocus&&!t.hasAttribute("data-work-on-focus")||t.addEventListener("focus",dt,!1)})}})}(uR.d,(uR.m,uR.n),uR.o,uR.af,uR.am,uR.an,uR.f,uR.fb,uR.e,uR.dz,uR.r,uR.bd,uR.w,uR.dv,uR.bm,uR.al,uR.fu,uR.au,uR.ao,uR.fw,uR.fv,uR.s,uR.fa,uR.eo,uR.k,uR.ai,uR.bc,uR.fx,uR.as,uR.fy,uR.fz,uR.ga,uR.ee),gt)),uR.gc=dR.hgLY79g||(dR.hgLY79g=(xr=uR.d,Pr=uR.n,Or=uR.e,Lr=uR.dz,Rr=uR.o,Nr=uR.s,Br=uR.ah,Dr=uR.cu,Fr=".hint_body",qr="data-hint",PB.prototype={link:{tap:function(t){Br.allowDefault(t)}},closableLink:{tap:function(t){EB(this.root,this.model),Br.allowDefault(t)}},close:Br.handle("tap",function(){EB(this.root,this.model)})},Br.register("hints",PB),xr.initHints=Nr.create({init:function(){Mr=TB()},update:function(t){jr=t.cookieAge,Lr("cls-hint",hR.querySelectorAll(".__close-hint"),function(t){t.addEventListener("click",xB,!1)}),Lr("hint",hR.querySelectorAll(Fr),OB)}}),{initHint:OB})),uR.gd=dR.oQaaGMg||(dR.oQaaGMg={portrait:function(){return gt.innerWidth<gt.innerHeight},landscape:function(){return gt.innerWidth>gt.innerHeight}}),uR.ge=dR.scwkdwg||(dR.scwkdwg=(Hr="data-js-swipe-ignore",Ur="data-js-swipe-ignore-scroll",{markAsSwipeIgnore:function(t){t.setAttribute(Hr,"")},isMarkedAsSwipeIgnore:function(t){return t.hasAttribute(Hr)},markAsIgnoreScroll:function(t){t.setAttribute(Ur,"")},isMarkedAsIgnoreScroll:function(t){return t.hasAttribute(Ur)}})),uR.gf=dR.sL9YUsw||(dR.sL9YUsw=(Vr=uR.af,Qr=uR.gd,Wr=uR.cm,zr=uR.o,Xr=uR.ge,Gr=uR.ai,Jr=uR.ae,Yr=12,Kr=14,Zr=Vr.iOS,$r=Zr?Vr.iOSVersion<8?1.7:1.85:1.1,ts=screen,es=ts.width,ns=ts.height,as=Wr.isScrollable,NB.prototype={touchStart:function(t){var e,n=t.touches;this.isTouched=!1,this.isDetect=!1,n&&1===n.length&&(this.isTouched=!0,e=n[0],this.pointerStartX=e.clientX,this.pointerStartY=e.clientY)},touchMove:function(t){var e,n,a,i,o,r,s,l=Jr.firstTouchRaw(t),c=this;c.isTouched&&(i=c.pointerStartX,e=l.clientX,c.isDetect?n=e-c.pointerLastX:(n=i-e,a=Math.abs(n),o=Math.abs(c.pointerStartY-l.clientY),c.isSwiped=o<30&&(r=t.target,s=c.node,!zr.findParent(r,RB,s))&&a>=c.range&&o*$r<=a&&!function(t,e,n){for(var a;e!==t&&e!==hR;){if(a=as(e,"x"),!Xr.isMarkedAsIgnoreScroll(e)&&a&&!(n<0&&0===e.scrollLeft))return 1;e=e.parentNode}}(c.node,t.target,n)&&LB(i),c.isSwiped&&(c.isClickBlock=!0,c.onSwipeStart&&c.onSwipeStart(n,i)),c.isDetect=!0),c.isSwiped&&(c.pointerLastX=e,c.onSwipeMove&&c.onSwipeMove(n,i)))},touchEnd:function(t){this.isSwiped&&this.stop()},enable:function(t){var e=Gr.lowPriority;return t?(e.touchStart.attach(this.touchStart,this),e.touchMove.attach(this.touchMove,this),e.touchEnd.attach(this.touchEnd,this)):(e.touchStart.detach(this.touchStart,this),e.touchMove.detach(this.touchMove,this),e.touchEnd.detach(this.touchEnd,this)),this},stop:function(){var t;return this.isSwiped&&((t=this).isSwiped=!1,t.onSwipeEnd&&t.onSwipeEnd(t.pointerStartX-t.pointerLastX,t.pointerStartX)),this},destroy:function(){}},{create:function(t,e,n,a,i){return new NB(t,e,n,a,i)}})),uR.gg=dR.sxqsnDQ||(dR.sxqsnDQ=(uR.d,uR.n,uR.o,is=uR.gf,os=uR.au,rs=uR.ao,ss=uR.ge,rs.synced("inited",function(t){t&&os.options.isSwipeEnabled&&BB(os.sidebar)}),gt)),uR.gh=dR.t8nt8Tw||(dR.t8nt8Tw=(ls=uR.n,cs=uR.o,us=uR.er,ds=uR.al,hs=uR.fy,ps=uR.fz,fs=uR.bd,gs=uR.af,ms=uR.ah,vs="__open-up",ys=[],Cs=bs=null,us.attach(function(t){var e,n=t.target;!n||(e=cs.parentBySelector(n,".a-menu.toggle"))&&cs.isChildOf(bs,e)&&ps.close.trigger()}),hs.open.attach(function(t){var a,i=cs.findParent(t,function(t){return ls.hasClass(t,"js-popup")});function e(){var t=0,e=hR.querySelector(".chat_w");e&&(t=e.getBoundingClientRect().left+16);var n=fs.fitWidth(a,t);(i.__okPositionConfirmed.fitLeft=n.fitLeft)?ls.removeClass(i,"__unfit-left"):ls.addClass(i,"__unfit-left"),(i.__okPositionConfirmed.fitLeft=n.fitRight)?ls.removeClass(i,"__unfit-right"):ls.addClass(i,"__unfit-right"),ls.removeClass(i,"__processing")}i&&!i.__okPositionConfirmed&&(i.__okPositionConfirmed={},ys.push(i),ls.addClass(i,"__processing"),a=i.getElementsByClassName("a-menu_content")[0],"7.0"===!gs.iOSVersion?ds.run(e):setTimeout(e,0))}),fs.changed.attach(function(){DB(),ys.forEach(function(t){t.__okPositionConfirmed=mt}),ys=[]}),ps.close.attach(DB),ms.tapPreview.attach(function(t){var e,n,a,i,o,r=t.target;ls.hasClass(r,"tgl-cbox")||(ls.hasClass(r,"a-menu_open")?((e=hR.getElementById(r.getAttribute("for")))!==bs&&ps.close.trigger(),hs.open.trigger(r),e.checked&&(bs=e,(n=hR.getElementsByClassName("layout-bottom-panel")[0])&&(a=e,i=n,o=cs.parentBySelector(a,".a-menu"),ds.request(function(){var t=a.parentNode.getElementsByClassName("a-menu_content")[0];t.offsetHeight+t.getBoundingClientRect().top>i.getBoundingClientRect().top&&(ls.addClass(o,vs),Cs=o,0)})))):(ls.hasClass(r,"a-menu_close")||bs&&!cs.parentBySelector(r,".a-menu.js-noAutoClose"))&&setTimeout(MB,10))}),gt)),uR.gi=dR.tZ8pjXg||(dR.tZ8pjXg=(function(i,o,t,e,n){var r=JSON.stringify({message:{type:"notification",subject:"payment-completed"},headers:{}});t.put("toolbar-counters",{pushParse:function(t){t.envelope.updateLink=t.domNode.getAttribute("update-link")},pushReceived:function(t){var e,n,a,i=t.envelope.updateLink;i&&((e=t.envelope.targetId)?n=o.parentBySelector(hR.getElementById(e),".ntf"):(a=hR.querySelector(t.envelope.targetSelector))&&(-1===a.className.indexOf("reply")?n=a.previousSibling:t.envelope.targetSelector=mt),n&&(n.href=i))},pushProcessed:function(t){var e,n,a=t.envelope.targetId;a?(e=hR.getElementById(a))&&i.removeClass(e,"hidden"):t.envelope.content||(n=hR.querySelector(t.envelope.targetSelector))&&i.clear(n)}});var a={config:mt,node:mt,autoCloseTimeoutId:mt,manualCloseTimeoutId:mt};function s(t){t&&n.allowDefault(t),i.addClass(a.node,"__closed"),a.config&&(a.manualCloseTimeoutId=setTimeout(function(){a.node&&(hR.body.removeChild(a.node),a.node=null)},a.config.animationTime))}t.put("toolbar-red-link",{pushParse:function(t){var e=t.domNode;clearTimeout(a.manualCloseTimeoutId),clearTimeout(a.autoCloseTimeoutId),a.node&&(hR.body.removeChild(a.node),a.node=null),a.config={animationTime:parseInt(e.getAttribute("data-animationTime"))||300,shownTime:parseInt(e.getAttribute("data-shownTime"))||15e3}},pushReceived:function(t){-1==t.envelope.content.indexOf("p-block")&&(t.envelope.targetId=t.envelope.targetSelector=null)},pushProcessed:function(){var t=a.config.shownTime;a.node=hR.getElementsByClassName("notification-top")[0],logClientEvent("red.link.push-promo.shown"),0<t&&(a.autoCloseTimeoutId=setTimeout(function(){s(null)},t))}}),t.put("toolbar-events",{pushProcessed:function(){var t,e,n,a=hR.getElementById("ok-app-frame");!a||(t=a.contentWindow)&&t.postMessage&&(t.postMessage(r,"*"),(e=hR.getElementById("ok-app-frame-ctoolbar"))&&0<e.offsetHeight&&((n=e.querySelector("iframe"))&&0<n.offsetHeight?n.setAttribute("data-result","notif"):t.postMessage("showPayment$ok$notif","*")))}}),e.addFuncHandler("close-topPush",{tap:function(t){clearTimeout(a.autoCloseTimeoutId),s(t)}}),e.addFuncHandler("close-log-topPush",{tap:function(){logClientEvent("red.link.push-promo.close"),clearTimeout(a.autoCloseTimeoutId),s(null)}})}(uR.n,uR.o,uR.bz,uR.ai,uR.ah),gt)),uR.gj=dR.c5t4gVQ||(dR.c5t4gVQ=(uR.gi,Ss=uR.d,ks=uR.bm,_s=uR.q,ws=uR.s,Ts=uR.aw,Bs=4e3,Ds=25,Ms=Ns=500,js=0,_s.adBannerClicked.attach(jB),ws.create({name:"initCometPush",init:function(t){Ts.visibilityChangeEventName&&(hR.addEventListener(Ts.visibilityChangeEventName,FB),Ls=t)},dispose:function(){jB()},lateUpdate:function(t){t.maxJsErrorTimeout&&(Bs=t.maxJsErrorTimeout),t.maxDummyReqCount&&(Ds=t.maxDummyReqCount),Es=t.renderedBlocks,xs=t.pushStateId,qB()&&HB(xs,"transition")}}),gt)),uR.gk=dR.oQEgnDg||(dR.oQEgnDg=(Fs=uR.s,qs=uR.ah,Hs=uR.a,Us=uR.ee,UB.prototype={link:{tap:function(){var t=this.href;Hs.log(this.model.eventId,[this.model.param1],null,null,function(){Us.change(t,!0)})}}},Fs.create({name:"outClickStat",init:function(){qs.register("logAndContinue",UB)}}),gt)),uR.gl=dR.sUy4anw||(dR.sUy4anw=function(n,a){var i,o=!1;return function(t){i=t;var e=this;o||(o=!0,setTimeout(function(){o=!1,n.call(e,i)},a))}}),uR.gm=dR.cLgSGbQ||(dR.cLgSGbQ=(Vs=uR.d,Qs=uR.p,Ws=uR.cq,zs=uR.es,Xs=uR.gl,Gs=uR.s,Js=uR.r,Ys="data-log-click",{createCardReadTracking:function(a){var n,i,o,r,s=500,l=!1,c={items:[]},u=[],d=a.listIds||[a.listId],h=y,e=Qs.create(),p=Qs.create(),f=Qs.create(),g={supportsScrollParent:a.supportsScrollParent,registered:function(t){t.logInfo=t.target.getAttribute(Ys)||"{}",l&&(t.isViewed=!1,t.isRead=!1,t.reachedViewThresholdTime=-1),e.trigger(t),u.push(t)},track:function(t){var e;l&&!t.isRead&&(t.isViewed?(o?t.reachedViewThreshold:t.inViewport)||(e=Date.now()-t.reachedViewThresholdTime,s<e?(t.isRead=!0,m(t,e)):t.isViewed=!1):t.reachedViewThreshold&&(t.reachedViewThresholdTime=Date.now(),t.isViewed=!0,function(e){e.awaitsCheckRead||(e.awaitsCheckRead=!0,setTimeout(function(){var t;e.awaitsCheckRead=!1,!e.isRead&&e.isViewed&&(t=Date.now()-e.reachedViewThresholdTime,e.isRead=!0,m(e,t))},n))}(t))),p.trigger(t)}};function m(t,e){r||v(),c.page=r;var n={info:JSON.parse(t.logInfo),durationMs:e};a.updateLogInfo&&a.updateLogInfo(t,n),c.items.push(n),f.trigger(t),h()}function v(){for(var t=0,e=d.length;t<e;t++){var n=hR.getElementById(d[t]),a=n&&n.getAttribute(Ys);if(r=a?JSON.parse(a):null)break}null==r&&(r={location:"anonymous"})}function y(){var t=c.items;c.items=[];var e=c.page;e&&a.actionName&&zs.run(a.actionName,{cards:t,page:e})}function b(){for(var t=0;t<u.length;t++){var e,n=u[t];!n.isRead&&n.isViewed&&(e=Date.now()-n.reachedViewThresholdTime,s<e&&(n.isRead=!0,m(n,e))),i&&(n.isViewed=!1)}u.length=0}Ws.addListener(g),Vs[a.serviceName]=function(t){Ws.observe(t.target,g,a.observerName)};var C=Gs.create({init:function(t){Js.rendering.attach(b)},update:function(t){Ws.initObserver(t.customObserverName,t)},lateUpdate:v}),S=Gs.create({init:function(t){h=Xs(y,t.logInterval),s=t.readDuration,n=t.maxReadDuration,i=t.fixesEnabled,o=t.outOfViewOnThreshold,l=!0}});return{trackUsage:C,trackReads:S,trackReadsSimple:function(t){S(t),C(t)},notice:{created:e,track:p,trackOnRead:f}}}})),uR.gn=dR.fkKruHw||(dR.fkKruHw=(Ks=uR.d,Zs=uR.gm.createCardReadTracking({listId:"feed-list",itemClassName:"feed-card",actionName:"feed.logReads",serviceName:"trackFeedCard"}),Ks.trackFeedUsage=Zs.trackUsage,Ks.trackFeedReads=Zs.trackReads,Zs||gt)),uR.go=dR.fm5aNkw||(dR.fm5aNkw=($s=uR.d,tl=uR.gm.createCardReadTracking({listId:"feed-list",serviceName:"trackFeedBannerCard",observerName:"feedBanner"}),$s.trackFeedBannerUsage=tl.trackUsage,$s.trackFeedBannerReads=tl.trackReads,tl||gt)),uR.gp=dR.bpMRlDA||(dR.bpMRlDA=(el=uR.t,uR.o,nl=el.bannerActionType,(al={})[nl.CLICK]=al[nl.JOIN_GROUP]=al[nl.LINK_EXT]=al[nl.AUTHOR_CLICK]=al[nl.OPEN_APP]=al[nl.PLAY_VIDEO]=al[nl.COMMENT]=al[nl.RESHARE]="click",al[nl.SHOWN_ON_SCROLL]="view",{logActionOnBanner:function(t,e){var n,a;(e=al[e])&&(a=e,(n=t)&&n.length&&el.log(a,n))}})),uR.gq=dR.bPJUp8Q||(dR.bPJUp8Q=(function(t,e,n,a,r,o,i,s,l,c,u,d,h,p){var f=[],g=s.bannerActionType,m=c.video,v="data-model",y=g.SHOWN_ON_SCROLL,b=g.IGNORE;function C(t,e){var n={actionHistory:{},model:JSON.parse(e.getAttribute(v)||"{}"),pixelMap:JSON.parse(e.getAttribute("data-pixel-map")||"{}"),type:_(e)||_(e.parentElement)||"typeNotFound"};I(t.banner=n,g.SHOWN),e.okBanner=n,e.addEventListener("click",E)}function S(t){var e,n=t.target;!r.hasClass(n,"__adv")||(e=n.getElementsByClassName("js-pixelsMap")[0])&&C(t,e)}function k(t){var e;t.hasViewedBanner||(t.hasViewedBanner=!0,(e=t.banner)&&I(e,y,!1,!0))}function _(t){return t.getAttribute("data-btype")}function w(){for(var t=f.length;t--;)(new Image).src=f[t];f.length=0}var T=h(w,1e3);function I(t,e,n,a){var i,o;e&&e!==b&&(i=t.actionHistory,n&&i[e]!==mt||(i[e]=!0,(o=t.pixelMap[e])&&(r.pushManyToArray(f,o),(e===g.SHOWN||e===g.SHOWN_ON_SCROLL&&!a?T:w)()),l.logActionOnBanner(t.type,e)))}function E(t){var e,n=t.target,a=this,i=this.okBanner;(i=i||(a=A(n))&&a.okBanner)&&(n.hasAttribute(v)||(n=o.findParent(n,function(t){return t.hasAttribute(v)},a.parentElement)),(e=n?JSON.parse(n.getAttribute(v)).action:b)&&I(i,e))}function A(t){return o.findParent(t,function(t){return t.okBanner})}function x(t){var e=A(t.target);return e&&e.okBanner}m.trackingPixelsParsed.attach(function(t){var e=x(t);e&&u.copy(t.pixelMap,e.pixelMap)}),m.starting.attach(E),c.eventTracking.attach(function(t){var e=t.action,n=e instanceof Array?e:null,a=t.onlyOnce,i=x(t);if(i)for(var o=0,r=n?n.length:1;o<r;o++)n&&(e=n[o]),I(i,e,a)}),c.pixelsMapRequest.attach(function(t){var e=x(t);t.result=e&&e.pixelMap});var P={aheadOfTime:!0,registered:function(t){C(t,t.target)},track:function(t){var e,n;!(e=t).hasViewedBanner&&e.reachedViewThreshold&&(e.hasViewedBanner=!0,(n=e.banner)&&I(n,y))}};function O(t){t.okIsBannerObserved||(t.okIsBannerObserved=!0,e.observe(t,P))}e.addListener(P),t.trackAds=d.create({init:function(t){var e=t.observerBannerFeedSeparateEnabled?a:n;e.notice.created.attach(S),t.observerBannerFeedSeparateEnabled?e.notice.trackOnRead.attach(k):e.notice.track.attach(P.track)},update:function(){p.ready(function(){var t=hR.getElementsByClassName("js-custom-adv");i(t,O)})}})}(uR.d,uR.cq,uR.gn,uR.go,uR.n,uR.o,uR.e,uR.t,uR.gp,uR.eu,uR.v,uR.s,uR.cw,uR.r),gt)),uR.gr=dR.nYIzEMg||(dR.nYIzEMg=(il=uR.d,ol=uR.gm.createCardReadTracking({listId:"events-list",itemClassName:"notify",actionName:"notif.logReads",serviceName:"trackNotifSeen"}),il.trackNotif=ol.trackReadsSimple,ol||gt)),uR.gs=dR.gog7vGA||(dR.gog7vGA=(rl=uR.d,sl=uR.gm.createCardReadTracking({supportsScrollParent:!0,listId:"groups-top-new-list",actionName:"group.logReads",serviceName:"trackGroup"}),rl.trackGroupReads=sl.trackReadsSimple,gt)),uR.gt=dR.mX0AS6Q||(dR.mX0AS6Q=(ll=uR.d,cl=uR.gm.createCardReadTracking({supportsScrollParent:!0,listIds:["mall-list","mall-product-showcase-list","list-mall","js-mall-showcase-vertical-stories-list","mall-list-search"],actionName:"mall.logReads",serviceName:"trackMall"}),ll.trackMallReads=cl.trackReadsSimple,gt)),uR.gu=dR.m5cesZQ||(dR.m5cesZQ=(ul=uR.d,dl=uR.gm.createCardReadTracking({listId:"feed-list",actionName:"mall.feedPortletSeen",serviceName:"mallFeedPortletService"}),ul.mallFeedPortletTrack=dl.trackReadsSimple,gt)),uR.gv=dR.sn7eBBA||(dR.sn7eBBA=(hl=uR.d,pl=uR.gm.createCardReadTracking({supportsScrollParent:!0,listId:"stars-portlet-list",actionName:"starsPortlet.logReads",serviceName:"trackStarsPortlet"}),hl.trackStarsPortletReads=pl.trackReadsSimple,gt)),uR.gw=dR.s9rvszQ||(dR.s9rvszQ=(fl=uR.s,gl=uR.n,ml=uR.cq,vl="hidden",yl="starsPortletVideoObserver",bl={supportsScrollParent:!0,registered:function(t){t.src=t.target.getAttribute("data-videoSrc"),t.videoTag=t.target.children[0],t.state=vl},track:function(t){var e=t.videoTag,n=t.src;t.inViewport&&e.src!==n&&(e.src=n),t.reachedViewThreshold?(e.play(),gl.switchClass(t.target,!1,"__hidden")):e.pause()}},fl.create({name:"starsPortletVideo",init:function(t){ml.initObserver(yl,{viewThreshold:.5}),ml.addListener(bl)},update:function(t){ml.observe(t.target,bl,yl)},discard:function(t){ml.unobserve(t.target,yl)}}),gt)),uR.gx=dR.aEbDjrA||(dR.aEbDjrA=(Cl=uR.d,Sl=uR.gm.createCardReadTracking({listIds:["feed-list","mall-list"],supportsScrollParent:!0,actionName:"mall.aliExpressProductReads",serviceName:"trackAliExpressProduct",updateLogInfo:function(t,e){e.info.actionType=t.target.getAttribute("data-action-type"),e.info.productId=t.target.getAttribute("data-product-id")}}),Cl.trackAliExpressProductReads=Sl.trackReadsSimple,gt)),uR.gy=dR.ppQRrNg||(dR.ppQRrNg=(kl=uR.d,_l=uR.gm.createCardReadTracking({listId:"list-pymk",actionName:"pymk.logReads",serviceName:"trackPymk",supportsScrollParent:!0}),kl.trackPymkReads=_l.trackReadsSimple,gt)),uR.gz=dR.g2j5pQw||(dR.g2j5pQw=(wl=uR.d,Tl=uR.gm.createCardReadTracking({listIds:["sections-list"],actionName:"gift.logSeen",serviceName:"trackGift"}),wl.trackGiftSeen=Tl.trackReadsSimple,Tl||gt)),uR.ha=dR.opgcQRg||(dR.opgcQRg=(uR.fe,Il=uR.d,El=uR.gm.createCardReadTracking({supportsScrollParent:!0,listIds:["offers-list","feed-list"],serviceName:"trackOffer",actionName:"offers.logRead",updateLogInfo:function(t,e){var n=t.target.getElementsByClassName("clnk __offer-body")[0];n&&(e.info=Object.assign(e.info,JSON.parse(n.getAttribute("data-log-click"))))}}),Il.trackOfferReads=El.trackReadsSimple,gt)),uR.hb=dR.gn8dYA||(dR.gn8dYA=(Al=uR.d,xl=uR.s,Ol=[],Ll=null,Al.gemius=xl.create({init:function(t){Pl=t.trackingId},update:function(){setTimeout(VB,500)},discard:function(){Ll=location.href}}),gt)),uR.hc=dR.nRf7wZw||(dR.nRf7wZw=(Rl=uR.n,Nl=uR.ah,WB.prototype.touchStart=function(t){var e,n=t.target,a=this.btns,i=this.slds,o=this.active;Rl.hasClass(n,"promo-lst_lnk")&&o!==(e=a.indexOf(n.parentElement))&&(Rl.removeClass(a[o],"__act"),Rl.removeClass(i[o],"__act"),Rl.addClass(a[e],"__act"),Rl.addClass(i[e],"__act"),this.active=e)},{createSlider:function(){new WB}})),uR.hd=dR.sDoyIFw||(dR.sDoyIFw=(Bl=uR.d,Dl=uR.s,Ml=uR.ai,jl=uR.o,Fl=uR.n,uR.es,uR.hc,uR.af,ql=uR.e,Ml.addFuncHandler("closeSplashScreen",{tap:function(t){var e=jl.parentBySelector(t.target,".js-splash-injection")||jl.parentBySelector(t.target,".splash-wrapper");e&&Fl.remove(e)}}),Bl.serverSplashScreen=Dl.create({update:function(){Bl.loader.use("native-css",function(){var e;(e=hR.querySelector(".splash-wrapper.invisible"))&&(e.imagesToLoad=0,ql(e.getElementsByTagName("img"),function(t){t.complete&&0!==t.naturalHeight||(t.addEventListener("load",function(){1==e.imagesToLoad&&Fl.removeClass(e,"invisible"),e.imagesToLoad--}),e.imagesToLoad++)}),e.imagesToLoad||Fl.removeClass(e,"invisible"))})},discard:function(){}}),gt)),uR.he=dR.s0KW9w||(dR.s0KW9w=function(){"use strict";return(0,uR.w.create)({isShown:!1})}()||gt),uR.hf=dR.affa2yA||(dR.affa2yA=(Hl=uR.s,Ul=uR.ah,uR.r,Vl=uR.ev,Ql=uR.n,Wl=uR.he,zB.isInstant=!0,zB.prototype={constructor:zB,show:{tap:function(){var e;this.switchPanelVisibility(!1),this.deferredPrompt&&((e=this).deferredPrompt.prompt(),this.deferredPrompt.userChoice.then(function(t){logClientEvent("android.native.banner.interaction",[t.outcome]),"dismissed"===t.outcome&&e.closePanel()}))}},close:{tap:function(){this.closePanel()}},switchPanelVisibility:function(t){Ql.switchClass(this.root,t,"__shown"),Ql.switchClass(this.portalWrapper,t,"__shown-smart-banner"),Wl.set("isShown",t),Vl.set("smartBannerShown",t,t?this.oneYear:-1,"/")},closePanel:function(){this.isClosed=!0,this.switchPanelVisibility(!1),Vl.set("smartBannerClosingTime",Date.now(),this.oneYear,"/")}},Hl.create({name:"trackNativeAppBannerInteraction",init:function(){Ul.register("nativeAppBanner",zB),gt.addEventListener("beforeinstallprompt",function(t){var e;0===hR.getElementsByClassName("smart-banner").length&&(e=t,logClientEvent("android.native.banner.shown"),e.userChoice.then(function(t){logClientEvent("android.native.banner.interaction",[t.outcome])}))})}}),gt)),uR.hg=dR.rNCLGPw||(dR.rNCLGPw=(zl=uR.s,Xl=uR.ah,Gl=uR.ev,Jl=uR.af,Yl=uR.n,XB.prototype={constructor:XB,installApp:{tap:function(t){var e=this;logClientEvent(Kl+".native.banner.interaction","accepted"),this.closePanel(),this.isAddToHomeScreen?OK.loader.use("addtohomescreen-js",function(){OK.loader.use("addtohomescreen-css",function(){addToHomescreen.removeSession(),addToHomescreen({message:e.lang,skipFirstVisit:!1,startDelay:0,lifespan:30,displayPace:0,privateModeOverride:!0,maxDisplayCount:0})})}):Xl.allowDefault(t)}},close:{tap:function(){logClientEvent(Kl+".native.banner.interaction","dismissed"),this.closePanel()}},switchPanelVisibility:function(t){Yl.switchClass(this.root,t,"__shown"),Yl.switchClass(this.portalWrapper,t,"__shown-smart-banner")},closePanel:function(){this.switchPanelVisibility(!1),Gl.set("ruSmartBannerClosingTime",Date.now(),this.cookieTTL,"/")}},XB.isInstant=!0,zl.create({name:"ruSmartBannerInteraction",init:function(t){Kl="unknown",Jl.android?Kl="android":Jl.iOS&&(Kl="ios"),Xl.register("smartBanner",XB),t.show&&logClientEvent(Kl+".native.banner.shown")},update:function(t){var e=hR.getElementById("ruSmartBanner");e&&e.okBehaviors&&(t.show&&!Yl.hasClass(e,"__shown")&&logClientEvent(Kl+".native.banner.shown"),e.okBehaviors.smartBanner.switchPanelVisibility(t.show))}}),gt)),uR.hh=dR.skKXvUg||(dR.skKXvUg=function(t){var e,n;gt.setImmediate?e=function(t){gt.setImmediate(t)}:gt.postMessage?(n="m.ok.ru-setImmediate_"+Math.random(),e=function(){gt.postMessage(n,"*")},gt.addEventListener("message",function(t){t.data===n&&a.processingCallbacks()})):e=function(t){setTimeout(t,0)};var a=t.create(e);return a.getCallCallbacksArgumentsProvider()}(uR.ak)||gt),uR.hi=dR.anmqBZA||(dR.anmqBZA={userSettingChangeVisibility:uR.p.create()}),uR.hj=dR.aCzpLig||(dR.aCzpLig=(Zl=/\.([a-z])/g,function(t){return t.replace(Zl,GB)})),uR.hk=dR.cOttvQ||(dR.cOttvQ=($l=uR.i,tc=uR.fd,ic=null,{show:function(t){var e,a;return ic?JB("confirm is showed",e=$l.start()):(t=t||{},ic=e=$l.start().anyway(tc.close),a=t.confirmByClose,t.onShowed=YB,t.onClosed=function(t){var e,n;e=t,n=a,ic&&(e?JB(e):ZB(!!n))},tc.show(t)),e},hide:function(t){tc.hide(t)}})),uR.hl=dR.eW1aYQw||(dR.eW1aYQw={dialog:{ajaxDialogDoesNotSupport:0}}),uR.hm=dR.agky4wQ||(dR.agky4wQ=(uR.d,uR.hh,oc=uR.es,rc=uR.i,sc=uR.hk,lc=uR.fd,cc=uR.ee,uc=uR.hl,nD.prototype.start=function(t,e){if(this.processingTask)return null;var n,a=rc.start();return this.processingTask=a,this.ajaxTaskData=t,this.hasDialog?lc.isInited?(n=sc.show({url:this.dialogLinkURL,fromElement:e})).then(iD,oD,this):(a.resolve({error:{code:uc.dialog.ajaxDialogDoesNotSupport}}),cc.change(this.dialogLinkURL),lD(this)):aD(this),{processingTask:a,dialogTask:n}},{create:function(t,e){return new nD(t,e)}})),uR.hn=dR.azTiNuw||(dR.azTiNuw=(dc=uR.d,hc=uR.ah,pc=uR.e,fc=uR.hh,gc=uR.hi,mc=uR.hj,vc=uR.ea,yc=uR.dg,bc=uR.hm,Cc=uR.ee,Sc=uR.hl,kc=[],_c=[],cD.prototype={},cD.isInstant=!0,hc.register("ajaxCheckbox",cD),uD.prototype={onTriggered:function(t){this.isInteropIgnore?this.isInteropIgnore=!1:t!==this.isChecked&&(this.isChecked=t,this.checkbox.checked=t)}},{init:dc.initAjaxCheckbox=yD})),uR.ho=dR.u947nGw||(dR.u947nGw=(wc=uR.d,Tc=uR.hi,Ic=uR.e,uR.dz,Ec=uR.n,uR.r,Ac=Tc.userSettingChangeVisibility,xc="__invisible",Pc=[],{init:wc.initUserChangeVisibility=kD})),uR.hp=dR.fYdoUgA||(dR.fYdoUgA=(Oc=uR.d,Lc=uR.bd,Rc=uR.e,uR.bb,Nc=uR.am,Bc=uR.n,Dc=uR.s,Mc=uR.dw,Uc="js-full-height",Vc="full-height",Qc=[0,0,0,0],Wc=12,zc=[function(t){var e=t[0];return[e,e,e,e]},function(t){var e=t[0],n=t[1];return[e,n,e,n]},function(t){var e=t[0],n=t[1];return[e,n,t[2],n]},function(t){for(var e=[],n=0;n<4;n++)e.push(t[n]);return e}],Oc.fullHeight=Dc.create({init:function(){AD(),Mc.synced("enabled",function(t){t&&AD()}),Lc.resize.attach(xD),Nc.init.attach(function(){Bc.removeClass(hR.body,Vc)}),Nc.updated.attach(function(t){t!==mt&&Bc.switchClass(hR.body,""!==t,Vc)}),Nc.cancelled.attach(function(){Bc.addClass(hR.body,Vc)})},update:function(){wD(),_D(!0),AD()}}),{set:AD,update:xD,updateWithStretch:function(t){var e=hR.getElementsByClassName("js-height-stretch")[0];e&&(t>e.offsetHeight?e.style.minHeight=t+"px":e.style.minHeight=0)},calculateForElement:TD})),uR.hq=dR.fM8JjXA||(dR.fM8JjXA=(Xc=uR.d,uR.s,Gc=uR.bd,Jc=uR.r,Yc=uR.be,Zc=Kc=null,Xc.limitMaxHeight=function(t){Zc=t.target,Kc=hR.getElementsByClassName("js-max-height-bottom")[0],PD(),Jc.attachUntilRendering(Gc.resize,PD,this)},gt)),uR.hr=dR.ekpC1mg||(dR.ekpC1mg=(OD.prototype.equalizeHeight=function(){for(var t=this.length;t--;)this.collection[t].style.minHeight=this.maxHeight+"px"},{newEvenHeightGroup:function(t){return new OD(t)}})),uR.hs=dR.tYybVAg||(dR.tYybVAg=($c=uR.d,tu=uR.n,uR.t,eu=uR.bb,nu=uR.cs,au=uR.al,iu=uR.ae,ou=uR.e,ru=uR.af,su=uR.eu,lu=uR.t,uR.s,cu=uR.hr,uR.p,uu=uR.ah,du=uR.ad,pu="__vert",fu=function(){},(hu=HD.prototype).init=function(){var t,n=this,e=n.node,a={moveHandler:ND,touchHandler:LD,touchendHandler:BD,touchcancelHandler:DD,clickHandler:RD},i=gt.screen.availWidth||pR.clientWidth;for(var o in 490<i&&(n.stepCoeficient*=490/i*1.5),a)!function(e){n[o]=function(t){e.call(n,t)}}(a[o]);ru.winphoneVersion&&"7.5"==ru.winphoneVersion?(tu.addClass(e,"wp7"),e.addEventListener("scroll",function(t){n.scrollInitialPos||(n.scrollInitialPos=e.scrollLeft),clearTimeout(n.isScrolledTimeoutID),n.isScrolledTimeoutID=setTimeout(function(){qD(t,n,!0),n.scrollInitialPos=!1},350)},!1)):gt.navigator.msPointerEnabled?(ou(e.getElementsByClassName("clnk"),function(t){t.addEventListener("click",function(t){n._moveActive&&Date.now()-n._moveActive<200&&(t.preventDefault(),t.stopPropagation())},!1)}),e.addEventListener("MSPointerDown",n.touchHandler,!1),e.addEventListener("MSPointerMove",n.moveHandler,!1),e.addEventListener("MSPointerUp",n.touchendHandler,!1)):(du.addPointerListener(e,"pointerdown",n.touchHandler),du.addPointerListener(e,"pointermove",n.moveHandler),du.addPointerListener(e,"pointerup",n.touchendHandler),e.addEventListener("click",n.clickHandler,!1),e.addEventListener("touchcancel",n.touchcancelHandler,!1)),t=eu(function(){n.prepareData()},200),gt.addEventListener("resize",function(){t()},!1),n.prepareData(),n.inited=!0,tu.addClass(e,"__inited"),tu.removeClass(e.parentNode,"__loading")},hu.prepareData=function(){var t=this,e=t.node,n=t.length||e.children.length,a=e.firstChild.offsetWidth,i=e.offsetWidth/a,o=Math.floor(i)+(i%1>t.showCoeficient?1:0),r=e.scrollLeft;0<r&&(clearTimeout(t.recalcCallbackId),t.recalcCallbackId=setTimeout(function(){nu.run(e,jD,{time:125,from:e.scrollLeft,to:t.slideWidth*Math.floor(r/a)})},350));for(var s=0;s<n;){var l=e.children[s];s<o?(l.okSlideIsShowed=!0,this.onShowCallback(l),s++):(l.okSlideIsShowed=!1,s++)}cu.newEvenHeightGroup(e.getElementsByClassName("adv-card_content_inner")).equalizeHeight(),cu.newEvenHeightGroup(e.getElementsByClassName("adv-card_content")).equalizeHeight(),t.slideWidth=a,t.slidesInView=o},$c.touchSlider=HD,$c.advSliderInitAll=function(){var t,e,n=$c.advSlidersArr;if(n&&(e=n.length)){for(var a=0;a<e;a++)(t=n[a]).touchSlider||(t.touchSlider=new HD(t.touchSliderConfig||{body:t,init:!0}));$c.advSlidersArr=null}},UD.isInstant=!0,uu.register("touchSlider",UD),gt)),uR.ht=dR.sx2ng6A||(dR.sx2ng6A={sended:uR.p.create()}),uR.hu=dR.sG692CQ||(dR.sG692CQ=(gu=uR.bm,mu=uR.an,vu=uR.ck,yu=uR.ht,mu.open.attach(function(t){VD(t.sidebar.getAttribute("data-state"))}),{send:VD})),uR.hv=dR.fdrDUew||(dR.fdrDUew=(uR.d,bu=uR.n,Cu=uR.o,Su=uR.bk,uR.s.create({name:"initFastTap",init:function(){var i,o,r,s=!1;ku=function(t){var e=t.changedTouches[0];o=e.pageX,r=e.pageY,s=!0,i=t.timeStamp},wu=function(t){var e,n,a;s&&(n=(e=t.changedTouches[0]).pageX,a=e.pageY,12<Math.sqrt(Math.pow(n-o,2)+Math.pow(a-r,2))&&(s=!1))},_u=function(t){if(s){s=!1;var e=t.timeStamp-i;if(0<=e&&e<=300){var n=t.target;if(!function(t){var e;if((e=Cu.parentBySelector(t,"a"))&&e.href&&Su.see(e.href).appHook)return 1;switch(t.nodeName.toLowerCase()){case"button":case"textarea":if(t.value||t.disabled)return 1;break;case"input":if(("text"===t.type||"number"===t.type)&&t.value)return 1;if("file"===t.type||t.disabled)return 1;break;case"label":return!t.htmlFor;case"select":case"iframe":case"video":return 1}return t.isContentEditable||Cu.parentBySelector(t,".nofasttouch")}(n)){t.preventDefault(),t.stopPropagation(),function(t){switch(t.nodeName){case"TEXTAREA":case"SELECT":case"LABEL":return 1;case"INPUT":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return}return!t.disabled&&!t.readOnly;default:return t.isContentEditable||bu.hasClass(t,"fasttouchfocus")}}(n)&&n.focus(),QD(n);var a;try{a=new MouseEvent("click",{detail:1,view:gt,bubbles:!0,cancelable:!0})}catch(t){hR.createEvent&&(a=hR.createEvent("UIEvents")).initUIEvent("click",!0,!0,gt,1,t.screenX,t.screenY,t.clientX||1,t.clientY||1,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,0,null)}a?n.dispatchEvent(a):n.click()}}}},Tu=function(){s=!1}},update:function(){WD(!0)},discard:function(){WD(!1)}}),gt)),uR.hw=dR.ao3SZgQ||(dR.ao3SZgQ=(Iu=uR.d,uR.e,Eu=uR.dg,Au=uR.o,xu=uR.s,Pu="giftApp",Iu.launchApp=function(t){var e;switch(t.platform){case"IOS":try{zD(t.schemaURL),setTimeout(function(){gt.location.replace(t.storeData)},100),e=200}catch(t){}break;case"Android":gt.location.replace("intent://"+(t.host?t.host:"m.ok.ru")+"/#Intent;scheme="+t.schemaURL+";package="+t.storeData+";end;"),e=200;break;default:localStorage.getItem(Pu)?(localStorage.removeItem(Pu),history.back()):(localStorage.setItem(Pu,""),zD(t.schemaURL),setTimeout(function(){gt.location.replace(t.storeData)},1500)),e=2e3}t.isNotNeedBack||setTimeout(function(){history.back()},e)},Iu.initAppLauncher=xu.create({init:function(a){Eu.clickEvent.attach(function(t){var e,n=Au.parentBySelector(t.target,a||".js-launch-native-app");n&&(e=n.getAttribute("data-launch-app"))&&Iu.launchApp(JSON.parse(e))})}}),gt)),uR.hx=dR.gxru7Jg||(dR.gxru7Jg=(Ou=uR.ai,Lu=uR.eo,Ou.addFuncHandler("goBack",{tap:function(t){Lu.back()}}),gt)),uR.hy=dR.hgXk2IQ||(dR.hgXk2IQ=(XD.prototype={addDataStorageItem:function(t,e){this.dataStorage.push({url:t,data:e})},deleteDataFromStart:function(t){for(var e=this.dataStorage,n=e.length,a=0;a<n;a++)if(e[a].url===t)return e.splice(a,1)},deleteDataFromEnd:function(t){for(var e=this.dataStorage,n=e.length;n--;)if(e[n].url===t)return e.splice(n,1)},deleteByRegex:function(t){for(var e=this.stack,n=e.length-1;0<=n;n--){var a=e[n];t.test(a)&&(e.splice(n,1),this.deleteDataFromStart(a))}},push:function(t,e){var n=this.stack;n.push(t),this.addDataStorageItem(t,e),11===n.length&&this.deleteDataFromStart(n.shift())},replace:function(t,e){var n=this.stack,a=n[n.length-1],i=this.get(t);if(a)for(var o=n.length-1;0<=o;o--)n[o]===t&&(n[o]=e);void 0!==i&&(this.addDataStorageItem(e,i),this.deleteDataFromEnd(t))},get:function(t){for(var e=this.dataStorage,n=e.length;n--;){var a=e[n];if(a.url===t)return a.data}return mt}},{create:function(){return new XD}})),uR.hz=dR.pPyFFDw||(dR.pPyFFDw=function(t,e,s,n,l,a,c,i,u,d,o,h,r,p,f,g,m,v,y,b){var C,S=b.AJAXNAV_RENDER_MARK_START,k=b.AJAX_NAV_RENDER_MEASURE,_=t.PERFORMANCE_LEVEL2_MEASURE_API,w=1;function T(){return gt.location.pathname+gt.location.search}function I(t,e){var n={state:t,fromCache:w===e,cancelled:!1};return c.navigating.trigger(n),n}function E(t){c.rendering.trigger({state:t})}function A(t){var e=t.indexOf("#");return 0<e?t.substr(0,e):t}function x(t){v.cancelScrollTarget(),t.name&&-1!=t.name.indexOf("horiz-only")?t.scrollIntoView(!1):t.scrollIntoView()}d.programmaticBack.attach(c.programmaticBack.trigger.bind(c.programmaticBack));var P,O,L,R,N,B,D=o.create("nav",{isDefault:!0}),M=p.create(),j={cancelled:!0,allowDefault:!0},F={cancelled:!0,allowDefault:!1},q=null,H={},U="",V=!1,Q=!1,W=f.processing,z={computeUndo:!0,onDomParsed:function(t){var e=t.envelopes,n=f.createScroll(z);(t.samePage||t.keepScroll)&&(n.scroll=v.calc().scrollTop),e.unshift(n),Q=!1},onComplete:function(t){var e,n,a,i,o,r,s,l=q;q=null,t.failed?gt.location.replace(h.insertParams(t.url,{_ajaxnav:"failed"})):(Q||(M.push(l&&l.from||Y(T()),{redo:t.undo}),e=t.state,n=hR.title,V=!0,hR.title=t.oldTitle,D[t.samePage?"swap":"go"](e),hR.title=n,J(T()),(a=gt.location.hash)&&setTimeout(function(){var t,e=a.substring(1),n=hR.getElementsByName(e);n&&n[0]?x(n[0]):(t=hR.getElementById(e))&&x(t)},1)),i=Date.now()-t.timestamp,(o=t.postponedJs)&&(t.postponeJs=!1,W.js.run(o)),function(t){if(!t.fromCache&&_)try{performance.measure(k,S),performance.clearMarks(S),performance.clearMeasures(k)}catch(t){logClientEvent("perf_mark_error",[pageCtx&&pageCtx.stateId])}}(t),r=e,s=i,c.navigated.trigger({state:r,domLoadedTime:s}),G())},special:W},X={prepare:function(t){var e=q||y.treatAsSamePage||u.hasClass(t.target,"js-nav-same-page"),n=!e&&u.hasClass(t.target,"js-nav-refresh-page"),a=t.uri;if(_&&performance.mark(S),y.treatAsSamePage=!1,t.triggerClickEvent(),n||O.disabled||!e&&(!O.isForwardFine||!R(a))||t.isDefaultPrevented()||!e&&-1!==a.indexOf("#")&&A(gt.location.href)===A(a))return j;if(e||d.prepareForFutureStateChange(),P){if(!P.done&&P.url===a)return F;P.abort(),B=P=null}var i={url:a},o=I(i,2),r=t.settings;return{samePage:e,keepScroll:r&&r.keepScroll||u.hasClass(t.target,"js-nav-keep-scroll"),url:a,state:i,oldTitle:hR.title,timestamp:Date.now(),postponeJs:!0,cancelled:o.cancelled,navigationTask:o.navigationTask}},tuneRequest:function(t){(P=t.ajaxTask).header("X-Nav-Kind",t.samePage?"SAME":"FORWARD"),P.header("X-Build",C),P.isSamePage=t.samePage,P.anyway(function(){P=null}),r.start(P)},avoidToken:!0,prepareProcessing:function(t){E(t.state)},fail:function(t){var e,n=t.ajaxTask;n.redirected||(n.xhr.getResponseHeader(a.ERROR_MESSAGE_HEADER)||g.show(),e=t.state,c.navigationFailed.trigger({state:e}))},processing:z,isDefault:!0};function G(){B&&(d.recoverState(B),B=null)}function J(t){U=t}function Y(t){return H[t]||t}function K(){J(T()),D.appendPipeline(function(t){var e,n,a,i,o,r;V?V=!1:(e=Y((B=t.stateToRecover)?t.locationKey:T()))!==U?(n=U,J(e),(a=M.get(e))?I(t,w).cancelled||(E(t),i=a,o=n,r={fromCache:Q=!0},l.processAjaxEnvelopes(z,i.redo,r),o&&M.push(o,{redo:r.undo})):(q={from:n},s.go(gt.location.href,N))):G()}),d.stateAccounting.attach(function(t){var e=t.state;D.isActive(e)||(e.locationKey=U)}),d.stateAccounted.attach(function(t){var n;D.isActive(t.state)||(n=T(),U!==n&&(M.replace(U,n),i(H,function(t,e){t===U&&(H[e]=n)}),H[U]=n),J(n))}),d.statePopping.attach(function(t){P&&!P.done&&(P.abort(),B=P=null);var e,n,a=t.state;D.isActive(a)||(e=a.locationKey)&&(n={stateToRecover:a,locationKey:e},D.stamp(n),t.state=n)})}function Z(){return!0}function $(t){var e=L.exec(t);return e&&0<e.length}e.create({name:"ajaxNavigation",init:function(t){D.init(),!t.disabled&&t.isForwardFine&&K(),N=n.onLinkToAjaxEnvelope(X),C=t.build},update:function(t){var e=(O=t).forwardFilter;e?(R=$,L=new RegExp(e,"gi")):R=Z,C!==t.build&&m.reload(!0)}});var tt={cache:M,isActiveState:function(){return D.isActive()}};return c.pageLinks=tt}((uR.hx,uR.aa),uR.s,uR.dh,uR.fg,uR.ck,uR.eb,uR.r,uR.f,uR.n,uR.eo,uR.fa,uR.g,uR.ch,uR.hy,uR.ci,uR.ea,uR.ee,uR.bd,uR.ed,uR.bq)||gt),uR.ia=dR.gfjxswg||(dR.gfjxswg=function(t,e,o,r){"use strict";var n={};function a(t,e){}return Object.defineProperty(n,"__esModule",{value:!0}),a.prototype={go:{tap:function(a){var i=e.getState();e.statePopping.attachOnce(function(t){t.state=i;var e=a.target,n=e.form;n&&(n.okFormData=(0,r.data)(n),n.okFormData[e.name]="y"),o.goSpecific(e)},this),e.back()}}},t.register("goBackAndRefresh",a),n}(uR.ah,uR.eo,uR.dh,uR.fc)||gt),uR.ib=dR.pbFuBXQ||(dR.pbFuBXQ=(Ru=uR.n,Nu=uR.bd,Bu=uR.be.toolbar.height,{shallOpenUpwards:function(t){var e=t.offsetHeight,n=t.parentNode,a=Ru.getTotalOffsetTop(n),i=n.offsetHeight,o=Nu.calc(),r=o.scrollTop,s=o.height,l=a-r-Bu;return 0<a-(i+8)&&s-i-Bu-l<e&&e<=l}})),uR.ic=dR.tbZJ5FA||(dR.tbZJ5FA=(Du=uR.d,Mu=uR.dg,uR.o,ju=uR.n,uR.bd,Fu=uR.s,qu=uR.ib,Hu=uR.fz,Du.initProfileMenu=Fu.create({init:function(){var a;function i(t){return t.parentNode.querySelector(".list.__inner")}function o(t,e){e?qu.shallOpenUpwards(t)&&(ju.addClass(t,"__top"),ju.removeClass(t,"__bottom")):(ju.removeClass(t,"__top"),ju.addClass(t,"__bottom"))}function e(){var t;a&&!a.checked&&(a.checked=!0,(t=i(a))&&o(t,!1))}Mu.clickEvent.attach(function(t){t.target===a||ju.hasClass(t.target,"tgl-lnk_off")||e()}),hR.addEventListener("change",function(t){var e,n=t.target;!ju.hasClass(n,"tgl-profile-menu")||(e=i(a=n))&&o(e,!n.checked)},!1),Hu.close.attach(e)}}),gt)),uR.id=dR.ai0a7tg||(dR.ai0a7tg=(Uu=uR.d,uR.hh,Vu=uR.ea,Qu=uR.hm,Wu=uR.n,zu=uR.hl,Xu=uR.s,Gu=uR.ah,Ju="js-join-group",Yu="ic-pls",Ku="ic-chk_g",GD.prototype={joinToGroup:{tap:function(t){var e,n;this.wasJoin||this.isProcessed||(t.preventDefault(),e=this.node,this.isProcessed=!0,(n=this.ajaxDialogDoing.start({groupId:parseInt(e.getAttribute("data-group-id"),10),location:e.getAttribute("data-location")},e)).processingTask.done||(n.dialogTask?n.dialogTask.then(JD,YD,this):$D(this)),n.processingTask.then(KD,ZD,this))}}},Uu.ajaxJoinToGroupInit=Xu.create({init:function(){Gu.register("joinToGroup",GD)}}),gt)),uR.ie=dR.as7MQQ||(dR.as7MQQ=(uR.d,Zu=uR.ea,$u=uR.hm,td=uR.n,uR.am,uR.eq,ed=uR.ah,nd=".js-ajax-join-to-chat-indicator,.base-button_content_icon",ad="ic-pls",id="ic-chk_g",eM.prototype={joinToChat:{tap:function(t){var e,n,a,i,o,r=this.node;this.isProcessed||(this.isProcessed=!0,n=!!(e=hR.getElementById("field_hst"))&&e.checked,a=hR.getElementById("js-invite-data"),i=this.ajaxDialogDoing.start({chatId:parseInt(a.getAttribute("data-chat-id"),10),inviteeId:parseInt(r.getAttribute("data-invitee-id"),10),originatorId:parseInt(a.getAttribute("data-originator-id"),10),showHistory:n},r),(o=this.node.querySelector(nd))&&(td.removeClass(o,ad),td.addClass(o,id)),i.processingTask.then(nM,aM,this))}}},ed.register("joinToChat",eM),gt)),uR.ig=dR.pTwSc5g||(dR.pTwSc5g=(od=uR.ao,rd=uR.au,sd=uR.be,ld=uR.bd,cd=uR.al,ud=sd.toolbar.height,od.synced("inited",function(t){t&&od.addControlledField("isShowedInViewport",{get:function(){return sM()},startSync:function(){ld.changed.attach(rM)},stopSync:function(){ld.changed.detach(rM)}})})||gt)),uR.ih=dR.fAfsdiw||(dR.fAfsdiw=(dd=uR.dw,hd=uR.n,pd=uR.as,fd=uR.ig,dd.onChanged("isCenterPortalContentEnabled",function(t){hd.switchClass(gd,t,"__sidebar-hided")}).onChanged("isCenterPortalContentConfigure",function(t){gd=gd||pd.getWrapper(),fd.switchChanges(t,"isShowedInViewport",lM),lM()}),gt)),uR.ii=dR.tof4pwQ||(dR.tof4pwQ=(md=uR.dw,vd=uR.bd,uR.n,yd=uR.s,uR.ih,bd=!1,Cd={activate:function(){md.set("enabled",!0)},deactivate:function(){md.set("enabled",!1)}},kd=Sd={activate:function(){},deactivate:function(){}},yd.create({name:"setColumnsLayout",update:function(t){bd=!0===t.isTwoColumnsLayout,md.setPart({showToolbarMenuConfigure:bd&&!0===t.showToolbarMenu,isFloatSidebarConfigure:!0===t.isFloatSidebar,isContextualColumnFloat:!0===t.isContextualColumnFloat,isCenterPortalContentConfigure:bd&&!0===t.isCenterPortalContent});var e=vd.resize;bd?e.attach(uM):e.detach(uM),cM()}}),gt)),uR.ij=dR.snzFL1Q||(dR.snzFL1Q=(_d=uR.dw,wd=uR.n,Td=uR.ig,_d.onChanged("showToolbarMenuEnable",function(t){wd.switchClass(Id,t,"__show-short-logo")}),_d.synced("showToolbarMenuConfigure",function(t){Id=Id||hR.getElementsByClassName("toolbar")[0],Td.switchChanges(t,"isShowedInViewport",dM),dM()}),gt)),uR.ik=dR.taDfKw||(dR.taDfKw=(Ed=hR,(Ad={}).createVideoPopup=function(){var t={ns:"video"},e=Ed.createElement("div");e.className="vpopup";var n=Ed.createElement("div");n.className="mvplayer_cont mv_ajax",n.id="mvplayer_cont";var a=Ed.createElement("div");t.playerContainer=a,n.appendChild(a);var i=Ed.createElement("div");i.className="vdospinner",n.appendChild(i),e.appendChild(n);var o=Ed.createElement("div");(t.loaderContainer=o).className="mvdynamic";var r=Ed.createElement("div");return r.className="vdospinner",o.appendChild(r),e.appendChild(o),e.okView="videoPopup",t.domRoot=e,t},Ad||gt)),uR.il=dR.lHPEkw||(dR.lHPEkw=(function(t,i,e,r,o,s,n,l,a,c){var u,d,h,p=hR.body;function f(){d&&(r.remove(h),u=h=d=null)}function g(t){var e=function(){var t=hR.getElementById("mvplayer_cont")||hR.getElementById("content"),e=0,n=0,a=0;a=t?(e=r.getTotalOffsetTop(t),n=r.getTotalOffsetLeft(t),t.offsetWidth):hR.body.clientWidth;return{x:n,y:e,width:a}}(),n=h.style;n.top=Math.round(e.y)+"px",n.left=Math.round(e.x)+"px",n.width=e.width+"px";var a,i,o=hR.querySelector(".mv_viewport");o&&d?(v(o,a=h.firstChild),a.okResize&&a.okResize(),(i=d.playerContainer.nextSibling)&&v(o,i)):!o&&t&&f()}e.register(function(t){var e,n,a;!r.hasClass(t.target,"js-vlayer")||(n=(e=t.target.getAttribute("data-video"))&&JSON.parse(e))&&(m(),f(),a=n,d=i.createVideoPopup(),h=d.domRoot,g(),p.appendChild(h),o.embed(d.playerContainer,a),u=a,l.navigating.attachOnce(function(t){t.state.video=a}),s.content.hide())});var m=n.create({init:function(){l.navigated.attach(function(t){var e=t.state&&t.state.video&&t.state.video;u&&(e&&e.videoSrc===u.videoSrc?h&&g(!0):f())}),l.rendering.attach(function(t){u&&s.content.show()}),a.changed.attach(function(){h&&g()})},update:function(){c.fixScrollRecord(),a.resetScroll()}});function v(t,e){e.style.height=t.offsetHeight+"px"}t.videoLayer=n.create({update:function(){d&&r.remove(d.loaderContainer)}})}(uR.d,uR.ik,uR.dh,uR.n,uR.ew,uR.as,uR.s,uR.r,uR.bd,uR.ci),gt)),uR.im=dR.bsHZaNQ||(dR.bsHZaNQ=(xd=uR.n,{setDisabled:function(t,e){(t.disabled=e)?t.setAttribute("disabled","true"):t.removeAttribute("disabled"),xd.switchClass(t,e,"__dis")},changeLabel:function(t,e){var n=t.getElementsByClassName("base-button_content_text")[0];n&&(n.innerHTML=e)}})),uR.io=dR.cSm7dsg||(dR.cSm7dsg=(Pd=uR.e,{get:function(t){var n=gt.getComputedStyle?gt.getComputedStyle(t):t.currentStyle,e=n.boxSizing;return e||Pd(["webkit","O"],function(t){var e=t+"BoxSizing";if(e in n)return n[e]})}})),uR.ip=dR.eihO5zA||(dR.eihO5zA=(Od=uR.d,Ld=uR.e,Rd=uR.bd,Nd=uR.io,Bd=uR.r,Dd=1.25,Md="data-max-height",jd="data-max-rows",Fd="ok-areaHeightChanged",Od.expandTextAreas=function(){Ld(hR.querySelectorAll("textarea.xpnd"),hM)},{setMaxRows:function(t,e){void 0===e?t.removeAttribute(jd):t.setAttribute(jd,e)},setMaxHeight:function(t,e){void 0===e?t.removeAttribute(Md):t.setAttribute(Md,e)},expand:Od.expandTextArea=hM,cancelExpand:function(t){delete t.okAreaOriginalSize,delete t.okAreaOuterSpace,delete t.okAreaInnerSpace,delete t.okAreaYScroll,delete t.okAreaExpand,delete t.okAreaData,t.removeEventListener("input",t._ok_oninput),Rd.resize.detach(t._ok_onresize),delete t._ok_oninput,delete t._ok_onresize},update:fM,data:function(t){var e=t.okAreaData;if(t.okAreaExpand&&e)return e},HEIGHT_CHANGED_EVENT_NAME:Fd})),uR.iq=dR.cnQuDyw||(dR.cnQuDyw=(uR.d,qd=uR.e,Hd=uR.n,uR.o,uR.r,Ud=uR.ah,gM.prototype={any:{change:function(t){var e=t.target,n=this.domRoot,a=e.id;if(e.checked)"field_toprivate"==a&&qd(n.querySelectorAll("input[type=checkbox]"),function(t){"field_toprivate"!=t.id&&(t.checked=!1)}),mM(n,e);else{if("field_toPublic"==a&&this.toPublic.checked)return;var i=n.querySelectorAll("[hierarchy-parent="+a+"]");qd(i,function(t){Hd.removeClass(t,"dsn")}),1==i.length&&(i.item(0).querySelector("input[type=checkbox]").checked=!0)}}}},gM.isInstant=!0,Ud.register("collapsingCheckboxes",gM),gt)),uR.ir=dR.rpuSqlQ||(dR.rpuSqlQ=(Vd=uR.e,Qd=uR.n,Wd=uR.ah,yM.prototype={any:{change:function(){var n=this.type,t=this.group,e=t?".js-rgs[data-rgs-group="+t+"]":".js-rgs";Vd(hR.querySelectorAll(e),function(t){var e=Qd.hasClass(t,"__"+n);Qd.switchClass(t,!e,"dsn")})}}},yM.isInstant=!0,Wd.register("radioGroupSwitcher",yM),gt)),uR.is=dR.peGQvug||(dR.peGQvug={processFormControls:(zd=uR.p).create(),extractSubmitCandidate:zd.create(),beforeNavigation:zd.create(),checkDynamicFormInputs:zd.create(),fastPostingInitiated:zd.create(),fastPostingDone:zd.create(),fastPostingSucceed:zd.create(),stickerSent:zd.create(),contentRemoved:zd.create(),postingFormRelayout:zd.create(),filesSelected:zd.create(),photosStartUpload:zd.create(),photosUploadLimitReached:zd.create(),photosUploadLimitCleared:zd.create(),photosCleared:zd.create(),clearForm:zd.create(),cancelUpload:zd.create(),config:void 0,updateConfig:function(t){this.config=t}}),uR.it=dR.adCtrfA||(dR.adCtrfA=(Xd=uR.d,Gd=uR.r,Jd=uR.eq,Yd=uR.n,Kd=uR.o,Zd=uR.fc,$d=uR.e,th=uR.bm,uR.fu,eh=uR.fg,nh=uR.ip,ah=uR.dh,ih=uR.is,oh=uR.af,rh=uR.fz,sh=uR.eb,lh=uR.ck,uh=!1,dh=".post-message",hh="POST",ph="textarea",fh="highlight",gh="ld",Xd.initAjaxPost=function(){var a,e,n,i,o=hR.getElementById("ta-emul")||!1;function r(){hR.getElementById("cmntMsg")&&SM(hR.getElementById("ta-emul")||hR.getElementById("field_msg")),CM(hR.querySelector(".uform textarea.xpnd"))}bM().ajaxPost&&(n="#cmntMsg, #umsg, .js-app-message-buttons",ah.register(function(t){if(t.form&&Kd.parentBySelector(t.form,n))return kM(t)}),$d(hR.querySelectorAll(n),function(t){var e=t.querySelector('input[type="submit"]');e&&(e.disabled=!1)})),bM().ajaxReply&&eh.onLinkToAjaxEnvelope({selector:".rpl",prepare:function(){a=o?Jd.find.textarea(!0):hR.querySelector(".uform textarea"),e=a&&a.value},processing:{onComplete:function(){var t=o?Jd.find.textarea(!0):hR.querySelector(".uform textarea");t&&(t.focus(),t.value=e,r())}}}),bM().ajaxEdit&&eh.onLinkToAjaxEnvelope({selector:".edt",prepare:function(t){var e,n=t.target;o&&(a=Jd.find.textarea(!0)),a&&(e=".a-menu",null!=n.querySelector(e))&&a.focus()},processing:{onComplete:function(){r(),rh.close.trigger(),a&&(ih.processFormControls.trigger({textInput:a}),o&&(oh.winphone||function(t){var e=gt.getSelection(),n=t.lastChild;{var a;0<e.rangeCount&&n&&((a=e.getRangeAt(0)).setStartAfter(n),e.removeAllRanges(),e.addRange(a.cloneRange()))}}(a),a.focus()))}}}),bM().ajaxReplyExpand&&(eh.onLinkToAjaxEnvelope({selector:".js-rexp-link",prepare:function(t){var e=t.target;e&&(i=Kd.parentBySelector(e,".discus_list_w, .discus_dialogs_i"))},tuneRequest:function(t){i&&(t.ajaxTask.header("X-Original-Comment",i.id),Yd.addClass(i,"ld"))},processing:{onComplete:function(t){var e;i&&((e=t.ajaxTask.xhr.getResponseHeader("has-attachment-class"))&&Xd.messaging&&(i.querySelector(".discus_list_i").className+=" "+e,-1==e.indexOf("_vid")&&-1==e.indexOf("_au")||Jd.messageLoaded.trigger()),Yd.removeClass(i,"ld"))}}}),eh.onLinkToAjaxEnvelope({selector:".js-rvrt-link",prepare:function(t){var e=t.target;e&&Xd.messaging&&(i=Kd.parentBySelector(e,".discus_list_w"))},tuneRequest:function(t){i&&t.ajaxTask.header("X-Original-Comment",i.id)},processing:{onComplete:function(){var t;i&&(t=i.querySelector(".discus_list_i"),Yd.removeClass(t,"attach_ph"))}}}))},gt)),uR.iu=dR.fQwi3A||(dR.fQwi3A={specialEnvelopes:{css:uR.ci.processing.css}}),uR.iv=dR.ezJLMJQ||(dR.ezJLMJQ=(mh=uR.iu,vh=uR.hz,mh.specialEnvelopes.cleanNavigationCache={parseDomNode:function(t,e){e.regex=t.innerHTML||".+"},run:function(t){vh.cache.deleteByRegex(new RegExp(t.regex,"gi"))}},gt)),uR.iw=dR.fPF1wQ||(dR.fPF1wQ=(yh=uR.d,bh=uR.o,Ch=uR.n,Sh=uR.e,kh=uR.r,_h=uR.is,wh=uR.dg,Th=uR.bm,Ih=uR.s,Eh=uR.fd,Ah=uR.ck,xh=uR.iu,uR.iv,Ph=uR.fr,Oh=uR.ea,Lh=uR.fw,Rh=uR.fc,Nh=uR.im,Dh=!1,yh.enableAjaxFormSubmit=Ih.create({init:function(t){var v,p="js-collapsed",e=yh.transitionEndEvent,n=e&&t.animationEnabled,y=t.clickDelayTime;n&&(hR.addEventListener(e,function(t){var e=t.target;Ch.hasClass(e,p)&&Ch.remove(e)}),v=function(t,e,n){if(n){var a,i=hR.createElement("div"),o=i.style,r=n.parentNode;i.className="js-holder",r&&r.insertBefore(i,n),i.appendChild(n),a=i.offsetHeight;var s,l,c,u,d=n.getAttribute("data-hide-style"),h=n.getAttribute("data-ajax-content-id");return h&&(s=hR.getElementById(h)),"heights-merge"===d&&s?(l=s.offsetHeight,u=l<a?(c=a,l):(c=l,a),o.opacity=1,o.height=c+"px",i._addedAjaxContent=s,setTimeout(function(){Ch.addClass(i,"js-collapsed-heights"),o.height=u+"px",setTimeout(function(){Ch.remove(i),Ch.removeClass(i._addedAjaxContent,"__hided"),i._addedAjaxContent=null},650)},0)):(o.height=a+"px",setTimeout(function(){Ch.addClass(i,p)},0)),!1}return!0}),wh.clickEvent.attach(function(t){var e=t.target;_M(e)&&(e.form.okSubmitSender=e)}),hR.body.addEventListener("submit",function(t){var e=t.target;if(bh.matches(e,"form.js-submit,.js-submit form")){var n=e.getAttribute("data-click-delay")||y;if(!Ph.submitAllowed(e,n))return t.stopPropagation(),t.preventDefault(),!1;Ph.updateLastClick(e);var a=e.getAttribute("data-entity");if(a&&1<hR.querySelectorAll('*[data-entity="'+a+'"]').length)return!0;var i=e.okSubmitSender||e.okSubmitBtn,o=e,r=e.okFormData||{},s=e.okFormRequestData||{};if(i){if(!Ch.hasClass(i,"js-axb")&&function(t){for(var e=t.elements||[],n=e.length,a=0,i=0;i<n;i++)if(_M(e[i])&&1<++a)return 1}(e))return!0;r[i.name]=i.value;var l,c=bh.next(i);c&&Ch.hasClass(c,"ldn")||((l=hR.createElement("span")).className="ldn",i.parentNode.insertBefore(l,c)),o=i.form,Ch.addClass(o,"ld")}e.isSubmitting=!0,Ch.preventDefault(t);var u=e.action,d=e.method||"POST",h=0;function p(){var t=this.xhr;t&&"1"===t.getResponseHeader("X-Modal")?Eh.show({url:location.href,contentHtml:this.response()}):Ah(this.response(),{onBeforeRemove:v,onComplete:function(){Eh.close()},special:xh.specialEnvelopes})}Sh(hR.querySelectorAll(".notify"),function(t){var e=t.getAttribute("data-tm"),n=parseInt(e,10)||0;h<n&&(h=n)}),e.okFormData||(r=Rh.data(e)),0<h&&(r["ds.lstTime"]=h);var f=Th.request(u,d,r).then(p,function(){this.redirected?this.response()&&p.call(this):Oh.show()}).anyway(function(){setTimeout(function(){Ch.removeClass(o,"ld")},300),e.isSubmitting=!1,e.okFormRequestData=null,kh.finished.trigger(e)}).withToken(),g=s.headers;if(g)for(var m in g)f.header(m,g[m]);f.send()}},!1)}}),yh.processPopUpTextArea=function(t){var e=t.value.replace(/^\s+|\s+$/g,"").length,n=hR.querySelector(".dialog_action_button.__main"),a=hR.querySelector(".modern-dialog_button .base-button.__accept input");n&&Ch.switchClass(n,!e,"dis"),a&&Nh.setDisabled(a,!e)},yh.ajaxifyPopupSubmit=function(t){var e,n=t.target,a={};!Dh&&n&&(Dh=!0,bh.matches(n,"form")||(n=bh.parentBySelector(n,"form")),e=n.action,Sh(n.querySelectorAll("input,textarea"),function(t){var e;"radio"==t.type&&!t.checked||(e="checkbox"==t.type?t.checked?"on":"off":t.value,a[t.name]=e)}),Ch.addClass(n,"ld"),(Bh=Th.request(e,"post",a)).then(function(){Ah(this.response(),{onComplete:function(){Eh.close(),Lh.recalculateStubs()},onBeforeRemove:function(t,e,n){_h.contentRemoved.trigger({index:t,content:e,container:n})}})},wM).anyway(function(){Ch.removeClass(n,"ld"),Dh=!1,kh.finished.trigger(n),Bh=null}).withToken().send(),Ch.preventDefault(t))},gt)),uR.ix=dR.ioJPhPQ||(dR.ioJPhPQ=(Mh=uR.af,jh=uR.r,Fh=uR.e,qh=uR.j,Hh=uR.d,Mh.ie?(Uh=function(){var t=hR.querySelectorAll('textarea, input[type="text"]'),e=function(t){t.value===t.placeholder&&(t.value="")};Fh(t,function(t){e(t),qh(t,"click",function(t){e(t.target)})})},jh.navigated.attach(Uh)):Uh=function(){},Hh.fixIEInputPlaceholder=Uh,gt)),uR.iy=dR.a6igMvw||(dR.a6igMvw=(function(t,n){t.disableAttach=function(t){var e=hR.getElementById("att-act");e&&((t.value||"").replace(/^\s+/,"").replace(/\s+$/,"").length?(n.setDisabled(e,!0),e.onclick=function(t){return t.preventDefault(),!1}):(n.setDisabled(e,!1),e.onclick=null))};var i="data-post-url",o="st.ofc";t.updateUploadButtonLink=function(){var t,e,n=hR.getElementById("att-act"),a=hR.getElementById("field_ofc");a&&n&&!n.disabled&&(t=a.checked?"on":"off",-1==(e=n.getAttribute(i)).search(o)?e+="&st.ofc="+t:e=e.replace(new RegExp(o+"=[a-zA-Z]*"),o+"="+t),n.setAttribute(i,e))}}(uR.d,uR.im,(uR.ip,uR.iq,uR.ir,uR.it,uR.iw,uR.ix)),gt)),uR.iz=dR.ukAetYA||(dR.ukAetYA=(function(u,d,t,h,e,p,n,a,i,f,r,g){function s(t){return t.form||d.parentBySelector(t,"form")}function m(t){if("file"==t.type)return t;var e=t.getAttribute("data-entry-for");if(e)return hR.getElementById(e);var n=s(t);return n&&n.querySelector(".js-sm-upload-file-input")}function v(t){var e=m(t),n=e&&e.value;return n&&0<n.length}function l(t){var e,n,a=hR.querySelector(".js-dyn-edit");!k(a,s(t))||(e=hR.querySelector(".js-dyn-edit-form"))&&((n=hR.createElement("input")).type="hidden",n.value=a.value,n.name=a.name,e.appendChild(n))}function c(t,e){v(e)||function(t,e){u.preventDefault(t),t.stopPropagation&&t.stopPropagation();var n=m(e);n.focus(),n.click()}(t,e)}a.ready(function(){e("upload",hR.getElementsByClassName("js-upload-form"),function(t){n.delegate(t,"change",".js-upload-file-input",function(t){u.addClass(t.target.form,"js-val-selected")})})});var y="js-dyn-edit-submit",b="js-sm-submit-btn",C="js-toggle-btn",S=[".",y,", .",b,", .",C].join("");function k(t,e){return t&&(t.getAttribute("data-post-alw")||t.value!=t.getAttribute("data-orig"))||u.hasClass(e,"post-message")||u.hasClass(e,"js-setup-topic")}t.clickEvent.attach(function(t){var e,n,a,i=d.parentBySelector(t.target,S);if(i){if(u.hasClass(i,y)){var o=i.getElementsByClassName("attach-notification")[0];if(o){if(!u.hasClass(o,"dsn"))return r.smilePanelClose.trigger(),void u.preventDefault(t);l(i)}else l(i)}u.hasClass(i,b)&&c(t,i),u.hasClass(i,C)&&(e=t,(a=s(n=i))&&u.toggleClass(a,"js-toggled-"+n.getAttribute("data-toggle-key")),u.preventDefault(e))}}),n.delegate(hR,"change",".js-sm-upload-file-input",function(t){var o,r,e,n,a,i,s=t.target;function l(){var i,t,e,n,a;u.addClass(o,"ld"),u.hasClass(o,"js-secondary-form")||u.addClass(hR.body,"js-sm-upldng"),k(r,o)?(r.disabled=!0,i={},h(hR.querySelectorAll(".js-ajax-input"),function(t){"radio"==t.type?t.checked&&(i[t.name]=t.value):i[t.name]=t.checked?"checked":t.value}),u.hasClass(o,"post-message")&&((t=d.parentBySelector(r,".dlist"))&&u.addClass(t,"js-complete-bot"),(e=hR.getElementById("field_msg"))&&(e.disabled=!0),hR.querySelector(".js-sm-prgrs").scrollIntoView(),(n=hR.getElementById("ta-emul"))&&!hR.getElementById("msg_attach_lst")&&(n.contenteditable=!1)),a=m(s),i.photoCount=a.files.length,i.multipleUploadEnabled=a.multiple,i.singleAjaxUpload=a.getAttribute("singleAjaxUpload"),p.request(r.getAttribute("data-post-url"),"POST",i).then(function(t){var e,n,a;i.multipleUploadEnabled||i.singleAjaxUpload?(e=f.getOrMakeBehavior(r),i.singleAjaxUpload?e.uploadPhoto(m(s).files[0],t):i.multipleUploadEnabled&&e.multiUploadPhoto(m(s),t)):((a="string"==typeof(n=t&&t.upload_url)?n:n[0])&&(o.action=a,o.enctype="multipart/form-data"),c())},function(){setTimeout(c,0),logClientEvent("ajax.topic.update.fail")}).withToken().send()):setTimeout(c,0)}function c(){(u.hasClass(o,"post-message")||u.hasClass(o,"js-setup-topic"))&&(o.okAvoidAjax=!0),o.okHandleSubmit&&!o.okHandleSubmit()||o.submit()}v(s)&&(o=s.form,r=null,h(o.querySelectorAll(".js-dyn-edit"),function(t){var e=t.getAttribute("data-entry-for");e&&e!=s.id||(r=t)}),r=r||hR.querySelector(".js-dyn-edit"),(e=o.getAttribute("data-size-restrictions"))?(n=m(s),a=URL.createObjectURL(n.files[0]),(i=new Image).onload=function(){var t=JSON.parse(e);t.min.w>i.width||t.min.h>i.height||t.max.w<i.width||t.max.h<i.height?(g.show(t.dimensionViolationLabel,1e4),n.value=""):l()},i.src=a):l())}),i.domLoaded.then(function(){a.ready(function(){e("upload-file",hR.querySelectorAll(".js-upload-file-input"),function(t){var e,n=t.value;n&&0<n.length&&((e=hR.querySelector(".js-upload-form"))&&u.addClass(e,"js-val-selected"))}),e("upload-orig-data",hR.querySelectorAll(".js-dyn-edit"),function(t){t.setAttribute("data-orig",t.value)})})})}(uR.n,uR.o,uR.dg,uR.e,uR.dz,uR.eh,(uR.g,uR.fu),uR.r,uR.k,(uR.bm,uR.ah),uR.eq,uR.ea),gt)),uR.ja=dR.fGTY1CQ||(dR.fGTY1CQ=(Vh=uR.cm,Qh=uR.n,Wh=uR.h,zh=uR.bd,Xh=uR.i,Gh="horizontal",Jh=TM.prototype,Yh=Vh.isScrollable,Jh.init=function(t,e){var a,n,i,o=this,r=this._findScrollableAncestor(t),s=(i=Date.now(),function(){if(n){if(1200<Date.now()-i)return;clearTimeout(n)}else i=Date.now();n=setTimeout(function(){o._onScroll(),n=null},250)}),l=function(){var t=o._options.direction==Gh;this._currentScrollPos=t?function(){return o._scroll.scrollLeft||0}:function(){return o._scroll.pageYOffset||o._scroll.scrollTop||0},this._lastScrollPos=this._currentScrollPos(),this._currentViewportSize=t?function(){return o._scroll.clientWidth}:function(){return o._scroll.innerHeight||o._scroll.clientHeight},this._currentElementOuterSize=t?function(){return o._el.offsetWidth}:function(){return o._el.offsetHeight||0};var e=r===gt;function n(){setTimeout(function(){o._updateDimensions()},25)}e?zh.changed.attach(s):r.addEventListener("scroll",s),this.on("data","_onData",this),this._updateDimensions(),zh.resize.attach(n),o.disposeCurrentInstance=function(){zh.resize.detach(n),e?zh.changed.detach(s):r.removeEventListener("scroll",s)},Wh.isFunction(a)&&a(this)}.bind(this);o._options=e||{},a=o._options.onInit,o._el=t,o._listeners={},o.checkTimeoutId=-1,o.onCheckEdgeTimeout=function(){this.checkTimeoutId=-1,this._onScroll()}.bind(o),o.checkEdge=function(t){return!0===t?this._onScroll():-1===this.checkTimeoutId&&(this.checkTimeoutId=setTimeout(this.onCheckEdgeTimeout,500)),this}.bind(o),this._scroll=r,l()},Jh.on=function(t,o,r){var s=this;s._listeners[t]=function(t){"string"==typeof o&&(o=r[o]);var e=[t.type,s],n=t.args;if(n&&n.length)for(var a=n.length,i=0;i<a;i++)e.push(n[i]);Wh.isFunction(o)&&o.apply(s,e)}},Jh.off=function(t){this._listeners[t]=function(){}},Jh.fire=function(t){var e=Array.prototype.slice.call(arguments).slice(1),n=this._listeners;t in n&&n[t].apply(this,[{type:t,args:e}])},Jh.getScrollPosition=function(){return this._currentScrollPos()},Jh.getViewportSize=function(){return this._viewportSize},Jh._findScrollableAncestor=function(t){for(var e=t.parentNode,n=t.ownerDocument;e&&e!=gt&&e!=hR&&(Qh.hasClass(e,"wrapper")||!Yh(e));)e=e.parentNode;return null==e||e==n||e==n.body?gt:e},Jh._updateDimensions=function(){var t=this._el;this._options.direction==Gh?this._offset=Qh.getTotalOffsetLeft(t):this._offset=Qh.getTotalOffsetTop(t),this._outerSize=this._currentElementOuterSize(),this._viewportSize=this._currentViewportSize(),this.fire("update-dimensions",t),this._scroll.refresh&&this._scroll.refresh()},Jh._insertFragment=function(t,e,n){for(var a=gt.document.createDocumentFragment();t.firstChild;)a.appendChild(t.firstChild);var i=this._el,o=Xh.start().then(function(){e?i.appendChild(a):i.insertBefore(a,i.firstChild)});this.processUpdateDimensions(e,n,o)},Jh.processUpdateDimensions=function(t,e,n){var a,i,o,r=this;function s(){"function"==typeof e&&e(),r._updateDimensions()}n=n||Xh.start(),t?(n.resolve(),setTimeout(s,17)):(a=r._currentElementOuterSize(),i=0,o=r._scroll,n.resolve(),s(),setTimeout(function(){var t;r._updateDimensions(),Math.abs(i-r._outerSize)<5||(t=(i=r._outerSize)-a,o.scrollBy?o.scrollBy(0,t):o.scrollTop+=t)},0))},Jh.addData=function(t,e,n){var a=gt.document.createElement("div");if("string"==typeof t)a.innerHTML=t;else if("object"==typeof t&&t.length)for(var i=t.length,o=0;o<i;o++)a.appendChild(t[o]);else a.appendChild(t);this._options.direction===Gh?function(t,e){var n=t.getElementsByTagName("img"),a=n.length,i=0;if(0<a)for(var o=0;o<a;o++){var r=n[o];r.complete||(i++,r.onload=r.onerror=function(){0==--i&&e()})}i||e()}(a,function(){this._insertFragment(a,e,n)}.bind(this)):this._insertFragment(a,e,n)},Jh._onData=function(t,e,n,a){this.addData(n,a)},Jh._onScroll=function(){var t=this._outerSize,e=this._offset,n=this._currentScrollPos(),a=this._options,i=Wh.isFunction(a.bottomThreshold)?a.bottomThreshold(n,this._viewportSize,e,t):e+t,o=Wh.isFunction(a.topThreshold)?a.topThreshold(n,this._viewportSize,e,t):0;(function(t,e){t<=e&&t<=this._lastScrollPos&&this.fire("at-edge",!1)}).call(this,n,o),function(t,e,n){t+e+this._viewportSize>=n&&t>=this._lastScrollPos&&(0<t||t===this._lastScrollPos)&&this.fire("at-edge",!0)}.call(this,n,e,i),this._lastScrollPos=n,this.fire("scroll",n,this._viewportSize,this._outerSize)},Jh.destructor=function(){this.disposeCurrentInstance&&this.disposeCurrentInstance(),this._scroll.destroy&&this._scroll.destroy()},{create:function(t,e){return new TM(t,e)}})),uR.jb=dR.dH4H79w||(dR.dH4H79w=function(t){return t.okData||(t.okData={})}),uR.jc=dR.fqhCXag||(dR.fqhCXag=((Kh=IM.prototype).reset=function(t){t?this._repeatedFetching?this._repeatedFetchesLeft=this._initialRepeatedFetches:this._tailFetchesLeft=0:this._headFetchesLeft=0},Kh.setRepeatedFetching=function(t){this._repeatedFetching=t},Kh.hasRepeatedFetching=function(){return this._repeatedFetching},Kh.decrement=function(t){this._repeatedFetching?this._repeatedFetchesLeft--:t?this._tailFetchesLeft--:this._headFetchesLeft--},Kh.hasMore=function(t){return 0<(this._repeatedFetching?this._repeatedFetchesLeft:t?this._tailFetchesLeft:this._headFetchesLeft)},{FetchCount:IM,create:function(t){return new IM(t)}})),uR.jd=dR.cSnzvg||(dR.cSnzvg=function(){if(!Zh){for(var t=hR.createElement("div"),e=gt.getComputedStyle(t,null),n=["webkit","Moz","O","ms"],a=n.length,i=0;i<a;i++){var o=n[i]+"ColumnWidth";if(o in e){Zh=o;break}}Zh=Zh||"columnWidth"}return Zh}),uR.je=dR.aGVLMbg||(dR.aGVLMbg={updateLoadingUrls:uR.p.create()}),uR.jf=dR.aFxGJvg||(dR.aFxGJvg=($h=uR.d,tp=uR.ja,ep=uR.eq,np=uR.ga,ap=uR.bm,ip=uR.jb,op=uR.e,rp=uR.bx,sp=uR.ca,lp=uR.n,cp=uR.jc,up=uR.fo,dp=uR.jd,hp=uR.o,pp=uR.dh,fp=uR.by,gp=uR.s,mp=uR.r,vp=uR.eo,yp=uR.x,bp=uR.be,Cp=uR.je,Sp=uR.ce,kp=uR.am,_p=uR.fw,wp=uR.ck,Ep="prevPageURL",Ap="nextPageURL",xp="loading",Pp="data-next-url",Op="data-prev-url",Lp="data-page-url",Np="."+(Rp="dlist")+" ."+Rp,Bp=".grid,.list-block:not(.js-no-paging)",Mp="."+Rp+"."+(Dp="init"),jp="before-load",Fp="load-succeeded",qp="after-load",Hp="load-error",Vp=(Up="ld")+"t",Qp=Up+"b",Wp="js-y",zp="js-n",Xp="js-append-top",Gp="js-append-bot",Jp="mnlt",Yp="mnlb",Kp="js-complete-top",Zp="js-complete-bot",$p=".js-load-more",tf=".js-load-more-bot",ef="__switch-feed",nf="switch-feed",af="stopScrollTimeout",of=400,rf=Array.prototype,sf=2,gp.create({name:"initAjaxBlock",update:function(t){(Ip=t).lists=[],sf=parseFloat(t.fetchScrollingMultiplier),pp.register(MM)},lateUpdate:function(t){t.dom=hR.getElementsByClassName(Rp),AM(t),t.initOnAutoLoading&&up.items.added.attach(NM),t.liveSearchOn&&kp.updated.attach(NM),t.initOnNavigationInterop&&mp.finished.attach(BM)},discard:function(t){DM(t),pp.revoke(MM),Ip=null,t.initOnNavigationInterop&&mp.finished.detach(BM)}}),{initAjaxListLoading:$h.initAjaxListLoading=NM})),uR.jg=dR.l2eMkKQ||(dR.l2eMkKQ=function(t,e,n,a){"use strict";var i=(0,t.create)({top:0});function o(){var t=0;e.get("isPositionFixed")&&(t+=a.toolbar.height),n.get("isShown")&&(t+=a.smartBanner.height),i.set("top",t)}return e.onChanged("isPositionFixed",o),n.onChanged("isShown",o),o(),i}(uR.w,uR.x,uR.he,uR.be)||gt),uR.jh=dR.sucQyhw||(dR.sucQyhw=function(t,i,o,r,s,l,e,n){"use strict";var c={};Object.defineProperty(c,"__esModule",{value:!0}),c.stickyPanelViewModel=void 0;c.stickyPanelViewModel=(0,e.create)({isShown:!1,isExists:!1,bottom:0,right:0});function a(t,e){this.topOffset=0,this.isAlreadySlidDown=!1;var n,a=e.getAttribute("data-target");this.panel=e,this.updateTopOffset(),a&&(this.target=hR.getElementsByClassName(a)[0],this.target&&(n=(0,s.throttle)(this.onViewportChanged,10),i.attachUntilRendering(r.changed,n,this),this.onViewportChanged(),c.stickyPanelViewModel.setPart({bottom:this.getBottom(),right:e.offsetLeft+e.offsetWidth,isExists:!0}),o.rendering.attachOnce(function(){c.stickyPanelViewModel.set("isExists",!1)}),l.onChanged("top",function(){this.updateTopOffset(),this.updateShownPanel(),c.stickyPanelViewModel.set("bottom",this.getBottom())},this)))}return a.prototype.onViewportChanged=function(){!(0,r.fitHeight)(this.target,this.topOffset-this.target.offsetHeight).fitTop?(c.stickyPanelViewModel.set("right",this.panel.offsetLeft+this.panel.offsetWidth),this.isAlreadySlidDown||this.switchShownPanel(!0)):this.isAlreadySlidDown&&this.switchShownPanel(!1)},a.prototype.getBottom=function(){return this.panel.offsetTop+this.panel.offsetHeight+this.topOffset},a.prototype.switchShownPanel=function(t){c.stickyPanelViewModel.set("isShown",t),this.isAlreadySlidDown=t,this.updateShownPanel()},a.prototype.updateShownPanel=function(){this.panel.style[n.transform]=c.stickyPanelViewModel.get("isShown")?"translateY("+this.topOffset+"px)":""},a.prototype.updateTopOffset=function(){this.topOffset=l.get("top")},a.isInstant=!0,(0,t.register)("stickyPanel",a),c}(uR.ah,uR.r,uR.r,uR.bd,uR.ba,uR.jg,uR.w,uR.ap)||gt),uR.ji=dR.mxSmWg||(dR.mxSmWg=function(i,n,t,o,a,r){"use strict";var e={};Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){this.isShown=!1,this.isIntersectWithPanel=!1,this.isExistsPanel=!1,this.any={tap:function(){l.scrollIntoView({behavior:"smooth",block:"start"})}},this.target=e,this.isExistsPanel=o.stickyPanelViewModel.get("isExists"),this.isExistsPanel&&this.listenPanelIsShowing(!0),n.changed.attach(this.onCheck,this),o.stickyPanelViewModel.onChanged("isExists",function(t){this.isExistsPanel=t,this.listenPanelIsShowing(t)},this),a.onChanged("top",this.calculateButtonPosition,this),this.calculateButtonPosition()}var l=hR.getElementsByClassName("wrapper")[0];return s.prototype.listenPanelIsShowing=function(t){o.stickyPanelViewModel.switchChanges(t,["isShown","bottom"],this.calculateButtonPosition,this)},s.prototype.onCheck=function(t){var e,n,a=t.scrollTop>t.height/2;!this.isExistsPanel||(e=this.target.offsetLeft-r.offsets.normal<o.stickyPanelViewModel.get("right"))!==this.isIntersectWithPanel&&(this.isIntersectWithPanel=e,this.calculateButtonPosition()),a!==this.isShown&&(n=this.target,(0,i.switchClass)(n,a,"__show-up"),(0,i.switchClass)(n,!a,"__close-up"),this.isShown=a)},s.prototype.calculateButtonPosition=function(){this.target.style.top=this.isIntersectWithPanel&&o.stickyPanelViewModel.get("isShown")?o.stickyPanelViewModel.get("bottom")+r.offsets.normal+"px":a.get("top")+r.offsets.normal+"px"},s.isInstant=!0,(0,t.register)("moveToTop",s),e}(uR.n,uR.bd,uR.ah,uR.jh,uR.jg,uR.be)||gt),uR.jj=dR.fNuWlJw||(dR.fNuWlJw=(df=uf=cf=lf=!1,{read:jM,upload:function(){var t;return df||(t=new XMLHttpRequest,uf=jM()&&"upload"in t,df=!0),uf}})),uR.jk=dR.c6J0hA||(dR.c6J0hA={createError:function(t,e,n,a){return{text:t,type:e,from:n,data:a}}}),uR.jl=dR.uCgnPGQ||(dR.uCgnPGQ=(hf=uR.i,uR.jk,pf=uR.r,ff=uR.h,UM.prototype.handleEvent=function(t){var e=this.uploadOperation;"progress"===t.type&&e.progressListener&&e.progressListener.call(this.uploadOperationHooksCtx,t)},{uploadMultiple:function(t,e){var n=hf.start(),a=t.files||t.fileInput.files,i=t.hooksCtx||t,o=a.length;return t.alreadyUploaded+o>t.uploadLimit&&(o=t.uploadLimit-t.alreadyUploaded,t.onLimitViolation.call(i)),0<o?qM(new UM(n,t,o,i,e)):n.reject(),n}})),uR.jm=dR.u4AVq2w||(dR.u4AVq2w=(gf=uR.bm,mf=uR.eh,uR.g,vf=uR.i,yf=uR.jk,bf="getUploadPhotoEndpoint",{upload:function(t,e,n,a){var i=vf.start();i.abort=function(){return this.currentTask&&this.currentTask.abort(),this}();var o={file:t,task:i,uploadSuccessAdaptee:null,progressListener:a};return n&&n.uploadUrl&&n.uploadSuccessAdaptee?(o.uploadSuccessAdaptee=n.uploadSuccessAdaptee,XM(t,n.uploadUrl,o)):i.currentTask=mf.request(e,"POST").then(VM,QM,o).withToken().send(),i}})),uR.jn=dR.fpjOALw||(dR.fpjOALw={showProgressDirect:function(t,e){e&&(e.style.width=GM(t))},showProgress:function(t,e){e&&(e.getElementsByClassName("file-progressbar_progress")[0].style.width=GM(t))},clearProgress:function(t){t&&(t.getElementsByClassName("file-progressbar_progress")[0].style.width="0")}}),uR.jo=dR.awkaNUg||(dR.awkaNUg=(Cf=uR.es,{editDescription:function(t,e,n,a){return Cf.run("photos.editDescription",{photoId:t,albumId:e,groupId:n,text:a})},getPhotos:function(t,e,n,a,i,o,r,s,l,c,u,d,h){return Cf.run("photos.get",{photoId:a,groupId:e,albumId:n,ownerId:t,single:i,initialOrder:o,isOrderFixed:r,photoStreamUserId:s,isGroupPhotoStream:l,chatMessageId:c,photoWallAggregatedArgument:u,logActivityId:d,isCropMode:h})},links:function(){return Cf.run("photos.links",{})},texts:function(){return Cf.run("photos.texts",{})},mark:function(t,e,n,a,i){return Cf.run("photos.mark",{photoId:t,albumId:e,ownerId:n,canSeeNext:a,mark:i})},del:function(t,e){return Cf.run("photos.delete",{photoId:t,groupId:e})},textsToSetMain:function(t){return Cf.run("photos.setMain.texts",{albumId:t})},setMain:function(t,e){return Cf.run("photos.setMain",{photoId:t,albumId:e})},setCover:function(t,e,n){return Cf.run("photos.setCover",{photoId:t,albumId:e,groupId:n})},info:function(t,e,n){return Cf.run("photos.info",{photoId:t,albumId:e,groupId:n})},vote:function(t,e){return Cf.run("photos.vote",{photoId:e,albumId:t})},voteInPhotoWall:function(t,e,n,a){return Cf.run("photos.photowall.vote",{photoId:t,photoWallContestId:e,isSuperVote:n,unVote:a})},photoWallRegisterView:function(t,e,n){return Cf.run("photos.photowall.register.view",{photoId:t,photoWallContestId:e,participating:n})},executePhotowallViewDonation:function(t,e,n){return Cf.run("photos.photowall.view-donation.execute",{photoId:t,photoWallContestId:e,photoOwnerId:n})},markSpam:function(t,e){return Cf.run("spam.mark",{entities:[{type:e,id:t}]})},acceptAllAutoPins:function(t){return Cf.run("photos.acceptAllAutoPins",{photoId:t})},acceptCustomPin:function(t,e,n,a){return Cf.run("photos.acceptCustomPin",{photoId:t,pinUserId:e,x:n,y:a})},deleteCustomPin:function(t,e){return Cf.run("photos.deleteCustomPin",{photoId:t,pinUserId:e})},blockMember:{prepare:function(t,e){return Cf.run("group.blockMember.prepare",{groupId:t,userId:e})},go:function(t,e){return Cf.run("group.blockMember",{groupId:t,userId:e})}},addBookmark:function(t,e){return Cf.run("photos.addBookmark",{photoId:t,groupId:e})},exitContest:function(t,e){return Cf.run("photos.exitPhotoWall",{photoId:t,photoWallContestId:e})},removeCover:function(t){return Cf.run("photos.removeCover",{photoId:t})},saveSinglePhoto:function(t,e,n,a,i){return Cf.run("photos.saveSingle",{photoId:t,albumId:e,token:n,place:a,groupId:i})},cropPhoto:function(t,e,n,a,i){return Cf.run("photos.crop",{photoId:t,x1:e,y1:n,x2:a,y2:i})},logPhotoView:function(t,e,n,a){return Cf.run("photos.log.view",{stateId:t,logCmd:e,photoId:n,isPhotoLayer:a})}})),uR.jp=dR.adwn7Dg||(dR.adwn7Dg=(Sf=uR.d,kf=uR.n,uR.bm,_f=uR.s,uR.ee,wf=uR.jl,Tf=uR.jm,If=uR.jn,Ef=uR.ea,Af=uR.e,uR.g,xf=uR.jo,Pf=uR.eh,Of=uR.ai,Lf=uR.o,Rf=uR.r,Uf=function(){return hR.getElementById("pphoto-upload_list")},Of.addFuncHandler("remove-photo-preview",{tap:function(t){var o=Uf(),r=Lf.parentBySelector(t.target,".js-pphoto-candidate"),s=r.getAttribute("data-photo-id");xf.del(s,null).then(function(){if(o.removeChild(r),0==lj(o))cj(),hR.getElementsByClassName("js-ui-state")[0].className="js-ui-state __initial";else{var t=hR.getElementById("field_pp_tokens"),e=t.value.split(";");if(1<e.length){for(var n=0;n<e.length;n++)if(s==e[n].split(",")[0]){e.splice(n,1);break}i=t,a=(a=e).filter(function(t){return t!=mt}),i.value=a.join(";")}else t.value=""}var a,i;kf.removeClass(ZM(),"dsn")},ej).anyway(function(){0==lj(o)&&(hR.getElementsByClassName("js-ui-state")[0].className="js-ui-state __initial"),kf.removeClass(ZM(),"dsn")})}}),Of.addFuncHandler("abort-userphoto-multiupload",{tap:function(){var t,e,n;Nf&&!Nf.done&&(Nf.reject({isManualReject:!0}),(t=Uf())&&(e=t.lastChild,kf.hasClass(e,"js-pphoto-candidate")&&e.getElementsByClassName("file-progressbar").length&&(t.removeChild(e),0==lj(t)?(hR.getElementsByClassName("js-ui-state")[0].className="js-ui-state __initial",cj()):JM("__complete"))),(n=hR.getElementById("upload_file_input"))&&(n.value=""))}}),Of.addFuncHandler("albumCreationIntermediate",{tap:function(t){var e=hR.getElementsByClassName("album-pack_form")[0],n=hR.getElementById("field_ro"),a=Lf.parentBySelector(t.target,".toggled-button_item-link.__placeholder");n.value=a.getAttribute("data-url"),e.querySelector("input[type=submit]").click()}}),Rf.navigating.attach(function(){Nf&&!Nf.done&&Nf.reject({isManualReject:!0})}),Sf.multipleUserPhotoUpload=_f.create({init:function(t){Bf=t.limitViolationLabel,Df=t.uploadErrorVocabulary,Mf=t.maxUploadSize,jf=t.maxSingleFileSizeMB,Hf=t.groupId},update:function(t){var e=uj();e&&e.addEventListener("submit",sj),Ff=t.knownAlbumId,Hf=t.groupId,qf=t.photoPlace},discard:function(){var t=uj();t&&t.removeEventListener("submit",sj)}}),{startMultiUpload:function(e,t,n){var a,i,o,r;n?(i={photoCount:e.files.length,multipleUploadEnabled:!0},o=t.getAttribute("data-js-allocate-url"),Pf.request(o,"POST",i).then(function(t){rj(e,t)},function(){Ef.show(Df.commonProblem)}).withToken().send()):a=JSON.parse(t.getAttribute("data-js-upload-url")),a&&(r=[],Af(Object.keys(a),function(t){var e=oj(a[t].uploadUrl,"&amp;","&"),n={status:"ok",uploadSuccessAdaptee:{availableForUpload:0,error:"Ошибка загрузки",photoId:t,photoUrl:oj(a[t].previewUrl,"&amp;","&"),status:"ok"},uploadUrl:e};r.push(n)}),rj(e,r))}})),uR.jq=dR.fAx330A||(dR.fAx330A=(Vf=uR.d,Qf=uR.n,Wf=uR.s,zf=uR.eo,Xf=uR.ee,Gf=uR.ah,Jf=uR.jj,Yf=uR.g,Kf=uR.jp,Zf="upload_file_input",Vf.fileUpload=Wf.create({init:function(){function t(t,e){this.dom=e,this.model=t,this.domLink=e.href?e:e.querySelector("a")}Vf.vuploadReplaceState=function(t){zf.getState().url=t,zf.accountStateUpdate()},t.prototype={selectFile:{tap:function(t){if(Jf.upload()){var e=hR.getElementById(Zf);e&&e.parentNode&&e.parentNode.removeChild(e);var i=this,o=this.domLink.href;return(e=hR.createElement("input")).setAttribute("class","hidden-file-input"),e.setAttribute("type","file"),e.setAttribute("id",Zf),e.addEventListener("change",function(t){var e,n,a;"true"===i.model.multiple?(e=t.target.files.length,o=Yf.replaceParams(o,{"st.ubs":e}),i.model.samePage?(n=hR.getElementById(Zf),a=hR.getElementById("photo_upload_form"),Kf.startMultiUpload(n,a,!0)):Xf.change(o)):Xf.change(o)},!1),hR.body.appendChild(e),this.model&&this.model.accept?e.setAttribute("accept",this.model.accept):e.removeAttribute("accept"),this.model&&"true"===this.model.multiple&&e.setAttribute("multiple","true"),e.style.top=Math.floor(Qf.getTotalOffsetTop(t.target))+"px",e.focus(),e.click(),!1}Gf.allowDefault(t)}}},Gf.register("fileUpload",t)},update:function(){Vf.updateVideoUploadState&&Vf.updateVideoUploadState()}}),gt)),uR.jr=dR.p4xQQ||(dR.p4xQQ=($f=uR.d,tg=uR.n,eg=uR.bm,ng=uR.s,ag=uR.ee,ig=uR.jp,og=uR.ea,$f.photoUpload=ng.create({init:function(){},update:function(){var e,n,a,i,o,t,r,s;rg&&(rg.abort(),rg=null),(s=hR.getElementById("upload_file_input"))&&s.files&&s.files.length&&((e=hR.getElementById("photo_upload_form"))&&(s.multiple?ig.startMultiUpload(s,e,!1):(n=e.getAttribute("data-js-upload-url"))&&(a=e.getAttribute("data-js-error-url"),i=e.getAttribute("data-size-restrictions"),o=s.files[0],i?(t=URL.createObjectURL(o),(r=new Image).onload=function(){var t=JSON.parse(i);t.min.w>r.width||t.min.h>r.height||t.max.w<r.width||t.max.h<r.height?og.show(t.dimensionViolationLabel,1e4):fj(e,n,o,a,s)},r.src=t):fj(e,n,o,a,s))))}}),gt)),uR.js=dR.o75K9kg||(dR.o75K9kg=(sg=uR.ah,lg=uR.bm,cg=uR.fc,gj.prototype={goAway:{tap:function(t){var e,n,a,i;-1!==gt.location.href.indexOf("jsessionid")?(e=t.target,(n=this.form).okSubmitBtn=e,a=cg.data(n),(i=lg.request(n.action,"post",a)).xhr.okNoReferrer=!0,i.send()):sg.allowDefault(t)}}},sg.register("form-outlink",gj),gt)),uR.jt=dR.eS69vjA||(dR.eS69vjA={found:(ug=uR.p).create(),cleared:ug.create()}),uR.ju=dR.g93fMQQ||(dR.g93fMQQ=(dg=uR.s,hg=uR.jt,uR.n,dg.create({name:"groupAccountPayout",update:function(){pg=hR.getElementById("button-transfer"),hg.found.attach(mj),hg.cleared.attach(vj)},discard:function(){hg.found.detach(mj),hg.cleared.detach(vj)}}),gt)),uR.jv=dR.dlOcQwQ||(dR.dlOcQwQ={byDataId:function(t){for(var e={},n=(e.root=t).querySelectorAll("[data-id]"),a=0;a<n.length;a++){var i=n[a];e[i.getAttribute("data-id")]=i}return e}}),uR.jw=dR.e7L1X5Q||(dR.e7L1X5Q=(uR.d,fg=uR.ah,gg=uR.jv,mg=uR.n,vg=uR.ck,yg=uR.ea,bg=uR.es,Cg=uR.jt,yj.prototype={search:{tap:function(t,e){var n=this.dom;bg.run(this.model.actionName,{data:n.fieldSearch.value}).then(function(t){vg(t.html),t.success?Cg.found.trigger():Cg.cleared.trigger()},function(){yg.show()})}},clear:{tap:function(t,e){var n=this.dom;mg.removeClass(n.fieldSearchContainer,"hidden"),mg.clear(n.entityContainer),Cg.cleared.trigger()}}},fg.register("entityInlineSearch",yj),gt)),uR.jx=dR.s1pZmvw||(dR.s1pZmvw=(Sg=uR.ee,kg=uR.bg,_g=uR.eo,wg=uR.i,Tg=uR.ak,Ig=uR.g,Eg=uR.r,Pg=xg=null,Og=-1,Lg=Tg.create(function(t){var e;return Ag&&Ag.searchThreshold&&(e=Ag.searchThreshold),setTimeout(t,e||500)},function(t){clearTimeout(t)}),Rg={tuneRequest:function(t){var e=t.ajaxTask;e.header("X-Ajax-Nav-Search","1"),this.data.searchFrom&&e.header("X-Search-From",this.data.searchFrom),kg.get("voiceSearchUsed")&&(e.header("X-Search-VoiceUsed","true"),kg.set("voiceSearchUsed",!1)),(xg=e).anyway(bj)},data:{searchFrom:null}},{setSettings:function(t){Ag=t},search:function(t,e,n){return Cj(),n.isCurrentPage||e||n.isAllowEmpty?(Pg=wg.start(),n.isImmediate?Sj(t,e,n):Og=Lg.callCallback(Sj,t,e,n),Pg):(kg.get("isSearchResultState")&&_g.back(),null)},closeGlobalSearch:function(){return Cj(),_g.back(),Eg.navigated}})),uR.jy=dR.iyxQSbw||(dR.iyxQSbw=(Bg=hR.selection?(Ng=function(){var t=hR.selection.createRange();return t.moveStart("textedit",-1),t.text.length},function(t,e){var n=t.createTextRange();n.collapse(!0),n.moveStart("character",e),n.select()}):(Ng=function(t){return t.selectionStart},function(t,e){t.setSelectionRange(e,e)}),{setToEnd:function(t){var e=t.value;e&&(t.selectionStart=t.selectionEnd=e.length)},getCursorPosition:Ng,setCursorPosition:Bg})),uR.jz=dR.cOfOWtA||(dR.cOfOWtA=function(n,r,e,a,i,t,o,s,l,c,u,d,h,p){var f="data-endpoint",g=t.QueryType.COMMON;function m(t){a.switchClass(this.inputRoot,t,"__active"),i.set("isSearchFieldActive",t)}function v(t,e){e.showOrCleanCompletions(),e.state.set("inProgress",!1)}function y(t){a.switchClass(this.inputRoot,t,"__in-progress")}function b(){S(this)}function C(){S(this)}function S(t){t.state.get("isActive")&&t._setQuery(i.get("contextSearchQuery"),!0)}function k(t,e){this._init(t,e)}function _(t,e){k.call(this,t,e)}k.prototype={_init:function(t,e){var n=e.getElementsByClassName("search_input")[0],a=n.form;return this.inputRoot=e,this.input=n,this.inputId=n.id,this.form=a,this.endpoint=a.getAttribute(f),this.endpointEmpty=a.getAttribute("data-endpoint-empty"),this.from=n.getAttribute("data-from"),this.isUsed=null!==n.getAttribute("data-used"),this.completionsRefnodeId="completions-for-"+this.inputId,this.completions=mt,this._initStateWatchers(n),this._ownInit(),this._focusInputIfShould(),this},_initStateWatchers:function(t){this.state=this._createState(t.value).onChanged("isActive",m,this).onChanged("inProgress",y,this)},_ownInit:function(){return this.canBeSearchWithEmptyQuery=!1,this.type="context",this.state.onChanged(["query","isFocused"],this._checkActiveStateWatcher,this),this._initSearchViewModelWatchers(this),this},_initSearchViewModelWatchers:function(){i.onChanged("contextSearchQuery",b,this).onChanged("isContextSearchState",C,this).onChanged("contextSearchEndpoint",this.setEndpoint,this)},_focusInputIfShould:function(){var t,e=this.input;"true"===e.getAttribute("data-focus-after-search")&&(t=e.value,e.focus(),e.setSelectionRange?e.setSelectionRange(t.length,t.length):(e.value="",e.value=t))},postConstruct:function(){this.filtersInstances=t.initSearchFieldFilters(this.inputId)},_checkActiveStateWatcher:function(){var t=this.state;t.set("isActive",""!==t.get("query")||t.get("isFocused"))},_getFiltersValues:function(){var e={};return o(this.filtersInstances,function(t){s.copy(t.getFiltersValues(),e)}),e},_runSearch:function(t,e,n){if(e&&!this._beforeRunSearch())return p.rejected;var a=this.endpoint,i=this.state.get("query");i&&0!==i.length||!this.endpointEmpty?this.filtersInstances&&i&&(this._getFiltersValues(),l(this._getFiltersValues(),function(t,e){a=a.replace("__OK_"+e+"__",t)})):a=this.endpointEmpty;var o=r.search(a,i,{isCurrentPage:this.isUsed,isAllowEmpty:this.canBeSearchWithEmptyQuery,isImmediate:t||!1,queryType:n||g,type:this.type,inputId:this.inputId,from:this.from});return null!==o&&(this.state.set("inProgress",!0),o.anyway(v,this)),o},_beforeRunSearch:function(){return!0},performSearch:function(t,e){e=e||{};var n=this.input;return this.state.set("isActive",!0),n.focus(),this._setQuery(t||""),h(function(){c.setToEnd(n)}),this._runSearch(!0,e.checkBeforeSearch,e.queryType)},initialSearch:function(t){return this.state.set("isActive",!0),this._runSearch(t)},_createState:function(t){return e.create(this._prepareStateModel({query:t,inProgress:!1,isActive:!1,isFocused:!1}))},_prepareStateModel:function(t){return t},_cleanInput:function(){return this._setQuery("")},_setQuery:function(t,e){var n,a=this.input,i=this.state;return t.trim()!==i.get("query")&&(a.setAttribute("value",t),e&&this.state.get("isFocused")&&hR.activeElement===a?(n=c.getCursorPosition(a),a.value=t,c.setCursorPosition(a,n)):a.value=t,i.set("query",t)),this},showOrCleanCompletions:function(){var t=hR.getElementById(this.completionsRefnodeId);return t?this.completions=n.resolve(t,"queryCompletions").renderCompletions(this.completions):this._removeCompletions(),this},_removeCompletions:function(){return this.completions&&(a.remove(this.completions),this.completions=null),this},activate:function(){return this.state.set("isActive",!0),this},clearOrClose:function(){return this.state.get("query")?(this.input.focus(),this._cleanInput(),this._runSearch()):(this.state.set("isActive",!1),this.input.blur()),this.canBeSearchWithEmptyQuery||this._removeCompletions(),this},setEndpoint:function(t){return this.endpoint=t,this.form.setAttribute(f,t),this},inputInteraction:{focus:function(t){n.allowDefault(t),this.state.set("isFocused",!0)},blur:function(t){n.allowDefault(t),this.state.set("isFocused",!1)},input:function(t){var e=this.input.value,n=this.state;e.trim()!==n.get("query")&&(n.set("query",this.input.value),this._runSearch(!1))},keyDown:function(t){var e=!0;switch(t.keyCode){case 13:if(d.searchConfiguration.dismissKeyboardOnEnter){this.input.blur();break}e=!1;break;case 27:e=!1,this.clearOrClose()}e&&n.allowDefault(t)}},closeInteraction:{tap:function(t){this.clearOrClose()}}},u(_,k);var w=_.prototype;w._initStateWatchers=function(t){this.state=this._createState(t.value).onChanged("isActive",A,this).onChanged("isFocused",I,this).onChanged("isFilled",E,this)},w._createState=function(t){return e.create(this._prepareStateModel({query:t,isActive:!1,isFocused:!1,isFilled:!1}))},w._runSearch=function(){this.form.submit()},w.closeInteraction={tap:function(){var t=this;t.input.value="",setTimeout(function(){t.form.submit()})},keyDown:function(t){n.allowDefault(t)}};var T=w.superclass.prototype.inputInteraction;function I(t){a.switchClass(this.form,t,"__focused")}function E(t){a.switchClass(this.form,t,"__filled")}function A(t){a.switchClass(this.form,t,"__active")}return w.inputInteraction={input:function(t,e){this.state.set("isActive",!0),this.state.set("isFilled",this.input.value)},focus:T.focus,blur:T.blur,keyDown:function(t,e){n.allowDefault(t)}},{behaviorConstructor:k,NonLiveSearchFieldBehavior:_,init:function(t){n.register("contextSearchField",k)},initNonLiveSearch:function(){n.register("nonLiveSearchField",_)}}}(uR.ah,uR.jx,uR.w,uR.n,uR.bg,uR.bh,uR.e,uR.v,uR.f,uR.jy,(uR.m,uR.bl),uR.am,uR.hh,uR.i)||gt),uR.ka=dR.A5TdziQ||(dR.A5TdziQ=(Dg=uR.jz,Mg=uR.bg,jg=uR.jx,Fg=uR.bd,qg=uR.v,(Hg=kj.prototype=qg.clone(Dg.behaviorConstructor.prototype)).deactivate=function(){return this.state.set("isActive",!1),this},Hg._ownInit=function(){var t=this;return t.canBeSearchWithEmptyQuery=!0,t.type="global",t.startScrollPosition=null,Mg.onChanged("globalSearchQuery",Tj,t).onChanged("clientGlobalSearchQuery",Aj,t).onChanged("isGlobalSearchState",Ij,t),t.state.onChanged("query",_j,t).onChanged("isActive",wj,t),t},Hg.clearOrClose=function(){return Dg.behaviorConstructor.prototype.clearOrClose.call(this),Mg.get("globalSearchQuery")||jg.closeGlobalSearch().attachOnce(this._returnInitialGlobalScroll,this),this},Hg._beforeRunSearch=function(){return!Mg.get("isGlobalSearchState")},Hg._saveAndResetGlobalScroll=function(){return this.startScrollPosition=Fg.recordScroll(),Fg.resetScroll(),this},Hg._returnInitialGlobalScroll=function(){return this.startScrollPosition&&(Fg.resetScroll(this.startScrollPosition),this.startScrollPosition=null),this},kj)),uR.kb=dR.tz2fXgA||(dR.tz2fXgA=(Ug=uR.ah,Vg=uR.ka,uR.n,Qg=uR.v,Wg=uR.af,(zg=xj.prototype=Qg.clone(Vg.prototype))._ownInit=function(){return Vg.prototype._ownInit.call(this),this.state.onChanged("wasInFocusInActiveSession",function(t){t&&this._saveAndResetGlobalScroll()},this),this},zg._prepareStateModel=function(t){return t.wasInFocusInActiveSession=!1,t},zg.inputInteraction.focus=function(t){this.state.set("wasInFocusInActiveSession",!0),Vg.prototype.inputInteraction.focus.call(this,t)},Wg.firefox&&(zg.inputInteraction.touchStart=Pj),zg.inputInteraction.tap=Pj,{behaviorConstructor:xj,init:function(){hR.getElementsByClassName("toolbar")[0],Ug.register("toolbarSearchField",xj)}})),uR.kc=dR.gw9ZwaA||(dR.gw9ZwaA=(Xg=uR.ah,Gg=uR.ka,Jg=uR.n,Yg=uR.as,Kg=uR.bg,Zg=uR.v,(Bj.prototype=Zg.clone(Gg.prototype))._ownInit=function(){return Gg.prototype._ownInit.call(this),Kg.onChanged("isGlobalSearchState",Rj,this),this.state.onChanged("isActive",Lj,this),this},{behaviorConstructor:Bj,init:function(){Xg.register("globalSearchField",Bj)}})),uR.kd=dR.pTpuXBA||(dR.pTpuXBA=($g=uR.ah,tm=uR.bh,em=uR.bg,nm=uR.n,Dj.prototype={_init:function(t,e){return this.inputRoot=e,this.input=e.getElementsByClassName("search_input")[0],em.onChanged("globalSearchQuery",Mj,this).onChanged("clientGlobalSearchQuery",jj,this),this},_provideQueryForGlobalSearch:function(){tm.provideQueryForGlobalSearch(this.input.value)},inputInteraction:{tap:function(){this._provideQueryForGlobalSearch()},input:function(){""!==this.input.value&&this._provideQueryForGlobalSearch()}},closeInteraction:{tap:function(){this.input.value="",this._provideQueryForGlobalSearch()}}},{behaviorConstructor:Dj,init:function(){$g.register("providerGlobalsSearchField",Dj)}})),uR.ke=dR.sKkPBcw||(dR.sKkPBcw=(am=uR.ah,im=uR.au,om=uR.kd,rm=uR.v,(Fj.prototype=rm.clone(om.behaviorConstructor.prototype))._provideQueryForGlobalSearch=function(){im.sidebar.close(!0),om.behaviorConstructor.prototype._provideQueryForGlobalSearch.call(this)},{behaviorConstructor:Fj,init:function(){am.register("sidebarSearchField",Fj)}})),uR.kf=dR.aJNWbQQ||(dR.aJNWbQQ=(sm=uR.es,{markConversationAsRead:function(t){return sm.run("chat.push.markAsRead",{conversationIdStr:t})},sendTypingStatus:function(t){return sm.run("chat.push.typing-status",{conversationIdStr:t})},sendStickerPM:function(t,e,n,a){return sm.run("chat.send.sticker",{conversationIdStr:t,stickerId:e,pervertStickerReply:n,replyMsgIdStr:a})},sendStickerDscs:function(t,e,n,a,i,o,r,s,l,c){return sm.run("discussion.send.sticker",{discussionSubjectID:t,discussionTypeID:e,discussionGroupID:n,replyLinkTemplate:a,returnUrl:i,stickerId:o,pervertStickerReply:r,replyCommentId:s,commentPublisherId:l,isOfficial:c})},renewStickerPanel:function(t){return sm.run("messaging.renew.sticker.recents",{stickerContext:t})},closeRedLink:function(t){return sm.run("messaging.close.red.link",{bannerId:parseInt(t)})},hideOkMessengerPromo:function(){return sm.run("messaging.hide.ok-messenger.promo",{})},touchDialogSearch:function(){return sm.run("lss.touchChats",{})}})),uR.kg=dR.mISbhQ||(dR.mISbhQ=(lm=uR.jz,uR.jy,cm=uR.bg,uR.bd,um=uR.v,uR.hh,dm=uR.ah,hm=uR.n,pm=uR.g,fm=uR.eo,gm=uR.kf,mm=3e5,(vm=qj.prototype=um.clone(lm.behaviorConstructor.prototype))._initStateWatchers=function(t){this.state=vm._createState(t.value).onChanged("isActive",Uj,this).onChanged("inProgress",Qj,this).onChanged("isFocused",Wj,this)},vm._initSearchViewModelWatchers=function(){cm.onChanged("isContextSearchState",Vj,this)},vm.clearOrClose=function(){var t,e,n=hR.querySelector("#dlgs-search .item.sm");n?(t=n.getElementsByClassName("sclnk")[0],e=pm.replaceParams(t.href,{_aid:"","st.lsrch":""}),gt.location.href=e):(Hj(!1,this),this._setQuery("",!0),fm.back())},{behaviorConstructor:qj,init:function(){dm.register("messagingSearchField",qj)}})),uR.kh=dR.gGKF5KQ||(dR.gGKF5KQ=(ym=uR.ah,bm=uR.bh,Cm=uR.o,Sm=uR.n,zj.prototype={_init:function(t,e){this.domRoot=e},more:{tap:function(){Sm.toggleClass(this.domRoot,"__expand")}},switchFilter:{tap:function(t){t.preventDefault();var e=Cm.parentBySelector(t.target,"[data-endpoint]",this.domRoot);e&&bm.provideEndpointForGlobalSearch(e.getAttribute("data-endpoint"))}}},{init:function(){ym.register("globalSearchFilterSwitcher",zj)}})),uR.ki=dR.sChxP7g||(dR.sChxP7g=(km=uR.ah,_m=uR.bh,wm=uR.n,Tm=uR.fb,Im=uR.o,Gj.prototype={_init:function(t,e){this.filtersRoot=e,this.searchFieldId=e.getAttribute("data-search-filter-for"),this.field=null},postConstruct:function(){this.field=_m.getSearchFieldInstance(this.searchFieldId),this.field.state.synced("isActive",Jj,this)},getFiltersValues:function(){return Tm.serialize(this.filtersRoot.getElementsByClassName("search_mod"))},_useFilter:Yj,_toggleCheckbox:function(t){var e=!t.checked;e?t.setAttribute("checked","checked"):t.removeAttribute("checked"),t.checked=e,this._useFilter()},filterRootInteraction:{touchStart:Xj},checkboxFilters:{touchStart:function(t){var e=Im.parentBySelector(t.target,".field");e&&this._toggleCheckbox(e.getElementsByTagName("input")[0])},tap:Xj},checkboxFiltersInput:{change:Yj,touchStart:function(t){this._toggleCheckbox(t.target)},tap:Xj}},{behaviourConstructor:Gj,init:function(){km.register("searchFilter",Gj)}})),uR.kj=dR.sR0tbQg||(dR.sR0tbQg=(Em=uR.ah,uR.bh,Am=uR.n,xm=uR.iu,Pm=uR.bg,Kj.prototype={clearChip:{tap:function(t,e){!function(t,e){var n=hR.getElementById(t);if(n){switch(function(t){return"SELECT"!==t.tagName?"INPUT"===t.tagName?t.type:null:"select"}(n)){case"checkbox":n.checked=!1;break;case"select":n.selectedIndex=0;break;case"text":case"tel":n.value=""}e.click()}}(e.getAttribute("data-id-for"),this.formSubmitButton),Am.remove(e)}}},Kj.isInstant=!0,Em.register("searchChips",Kj),xm.specialEnvelopes.contextSearchEndpoint={run:function(t){Pm.set("contextSearchEndpoint",t.contentDomFirst.textContent)}},gt)),uR.kk=dR.sP6ReGA||(dR.sP6ReGA=(Om=uR.d,Lm=uR.s,Rm=uR.bg,Nm=uR.jx,Bm=uR.bh,Dm=uR.jz,Mm=uR.kb,jm=uR.kc,Fm=uR.kd,qm=uR.ke,Hm=uR.kg,Um=uR.kh,Vm=uR.ki,uR.kj,Qm=uR.am,Om.search=Lm.create({init:function(t){Dm.init(),Mm.init(),jm.init(),Fm.init(),qm.init(),Hm.init(),Um.init(),Vm.init(),Bm.init(),Qm.searchConfiguration=t},update:function(t){Rm.set("isToolbarSearchOn",t.isToolbarSearchOn||!1),Bm.initGlobalSearchFields(),Nm.setSettings(t)}}),Om.nonLiveSearch=Lm.create({init:function(t){Dm.initNonLiveSearch(t)}}),Om.updateSearchState=function(t){var e=t.isGlobalSearchState,n=t.isContextSearchState,a=e&&t.query||"";(n||e)&&t.searchFieldId&&Bm.activateSearchField(t.searchFieldId),Rm.setPart({isSearchResultState:t.isSearchResultState||!1,isGlobalSearchState:e||!1,isContextSearchState:n||!1,globalSearchEndpoint:t.globalSearchEndpoint.replace(/&amp;/g,"&"),globalSearchQuery:a,clientGlobalSearchQuery:a,contextSearchQuery:n&&t.query||""})},gt)),uR.kl=dR.s4CIOdg||(dR.s4CIOdg=(Wm=uR.ah,zm=uR.bh,Xm=uR.n,Zj.prototype={renderCompletions:function(t){var e=hR.body.contains(t)?this.replaceCompletions(t):this.insertCompletions();return Xm.removeClass(e,"hidden"),e},replaceCompletions:function(t){var e=this.root;return e.removeAttribute("id"),Xm.replace(t,e),e},insertCompletions:function(){var t=this.root;t.removeAttribute("id");var e=hR.getElementById(this.refNodeId);if(e)switch(this.insertion){case"APPEND":e.appendChild(t);break;case"REPLACE":Xm.replace(e,t);break;case"AFTER":e.insertAdjacentElement("afterend",t);break;case"BEFORE":e.insertAdjacentElement("beforebegin",t);break;case"KEEP":return t}else 0;return t},updateQuerySearch:{tap:function(t,e){this.searchBehavior.performSearch(e.getAttribute("data-query-str"),{queryType:zm.QueryType.COMPLETION})}}},Wm.register("queryCompletions",Zj),gt)),uR.km=dR.cOF0LAg||(dR.cOF0LAg=(uR.d,Gm=uR.s,Jm=uR.n,uR.o,uR.ai,uR.eq,Ym=uR.ea,uR.is,Km=uR.ah,Zm=uR.jl,$m=uR.jm,tv=uR.jn,uR.af,ev=uR.jj,nv=uR.eh,av=uR.jv,eF.prototype={multiUploadPhoto:function(t,e){return iv=Zm.uploadMultiple({fileInput:t,uploadData:e,onPrepareUploadContainer:nF,alreadyUploaded:0,uploadLimit:1,onSingleItemUploaded:aF,onPreviewCreate:iF,progressListener:oF,hooksCtx:this},$m).then(rF,sF,this),this.currentUploadTask=iv},_processingInput:function(){return!(!ev.upload()||!this.dom.fileInput.files)&&(nv.request(this.getUploadUrlEndpoint,"POST").then($j,tF,this).withToken().send(),!0)},uploadInputInteraction:{change:function(t){this._processingInput()}},removeUploadPhoto:{tap:function(t){this.resetPhoto(!0)}},resetPhoto:function(t){this.dom.fieldPhoto.setAttribute("value",""),t&&(this.dom.fileInput.value=null),Jm.switchClass(this.dom.imageUploadAction,!t,"hidden"),Jm.switchClass(this.dom.imageUploadContent,t,"hidden")}},OK.initCoverPhotoUpload=Gm.create({init:function(t){var e;ev.upload()?Km.register("coverPhotoUpload",eF):(e=hR.getElementsByClassName("posting-cover")[0],Jm.addClass(e,"hidden"))},abort:function(){iv&&!iv.done&&(iv.reject({isManualReject:!0}),this.resetPhoto(!0))}}),gt)),uR.kn=dR.lrDBMew||(dR.lrDBMew=(uR.d,ov=uR.s,rv=uR.n,sv=uR.o,uR.ai,uR.eq,lv=uR.ea,cv=uR.is,uv=uR.ah,dv=uR.jl,hv=uR.jm,pv=uR.jn,uR.af,fv=uR.jj,gv=uR.eh,mv=uR.r,bv="."+(yv="posting-photos_item"),Cv="js-clone-source",Sv="__has-photos",uF.prototype={multiUploadPhoto:function(t,e){var n=this.dataModel.photoLimit,a=mF(this);return vv=dv.uploadMultiple({fileInput:t,uploadData:e,onLimitViolation:gF,onPrepareUploadContainer:dF,alreadyUploaded:a,uploadLimit:n,onSingleItemUploaded:hF,onPreviewCreate:pF,progressListener:fF,hooksCtx:this},hv).then(vF,yF,this),this.currentUploadTask=vv},_processingInput:function(){var t=this.fileInput;return!!(fv.upload()&&t&&t.files&&t.files.length)&&(cv.filesSelected.trigger(t),this.processingInput(this,t.files),!0)},processingInput:function(t,e){var n={};n.photoCount=e.length,gv.request(t.getUploadUrlEndpoint,"POST",n).then(lF,cF,t).withToken().send()},uploadInputInteraction:{change:function(t){this._processingInput()}},removeUploadPhoto:{tap:function(t){var e=sv.parentBySelector(t.target,bv);rv.remove(e),bF(this)}},onClearPostingForm:function(){var t=this.imageContainer.getElementsByClassName("js-cloned");if(t){for(var e=t.length-1;0<=e;e--)rv.remove(t[e]);bF(this)}}},OK.initListPhotoUpload=ov.create({init:function(t){var e;fv.upload()?uv.register("listPhotoUpload",uF):(e=hR.getElementsByClassName("posting-photos")[0])&&rv.addClass(e,"hidden")},abort:function(){var t,e;vv&&!vv.done&&(vv.reject({isManualReject:!0}),(t=this.imageContainer)&&(e=t.lastChild,rv.hasClass(e,yv)&&!rv.hasClass(e,"js-clone-source")&&e.getElementsByClassName("file-progressbar").length&&(t.removeChild(e),bF(this))),this.fileInput.value=null)}}),gt)),uR.ko=dR.dNQumng||(dR.dNQumng=(kv=uR.i,_v=uR.j,{onload:function(t){var e=kv.start();return _v(t,"load",function(t){e.resolveIfNotDone()}),_v(t,"error",function(t){e.rejectIfNotDone()}),e},ontime:function(t){var e=kv.start();return setTimeout(function(){e.resolve()},t),e}})),uR.kp=dR.fY2XXQ||(dR.fY2XXQ=(wv=uR.i,Tv=uR.ko,Ev=/\.(png|jpg|jpeg|gif)$/i,{validate:function(t){return t&&Ev.test(t.name)?(e=t,n=new Image,a=Tv.onload(n),n.src=URL.createObjectURL(e),a):Iv=Iv||wv.start().reject();var e,n,a}})),uR.kq=dR.rjAKwVg||(dR.rjAKwVg=(Av=uR.d,xv=uR.s,uR.bm,uR.eh,Pv=uR.n,uR.g,Ov=uR.i,Lv=uR.ah,Rv=uR.jm,Nv=uR.ch,Bv=uR.im,Dv=uR.w,Mv=uR.es,jv=uR.ea,Fv=uR.jk,qv=uR.ee,Hv=uR.jj,Uv=uR.kp,LF.prototype={renderImage:function(t){var e=!t;return this.imageContainer.style.backgroundImage="url("+t+")",this.state.set("inChoose",e),this},showError:function(t){return this.state.get("inChoose")?this.errorTextChoose.innerHTML=t:this.errorTextLoad.innerHTML=t,this.state.set("inError",!0),this},hideError:function(){return this.state.set("inError",!1),this},_processingFirstPhotoFromInput:function(){if(Hv.upload()){var t=this.fileInput.files[0];if(null!==t)return this.selectedFile=t,Uv.validate(t).then(PF,OF,{validatedFile:t,uploader:this}),!0}return!1},uploadPhoto:function(t){var e=this.initialUploadData;e&&(this.initialUploadData=null);var n=Rv.upload(t,this.getUploadUrlEndpoint,e).then(kF,_F,this);return this.currentUploadTask=n},setFileAsMainPhoto:function(t){var e=this.currentSetMainTask=Ov.start().then(TF,IF,this);return Nv.start(e),this.state.set("inProcess",!0),this.uploadPhoto(t),e},closeUploadedPhoto:function(){return this.fileInput.value="",this.renderImage().hideError()},closeAction:{tap:function(t){this.closeUploadedPhoto()}},uploadAction:{tap:function(){this.setFileAsMainPhoto(this.currentPhoto)}},retryUploadAction:{tap:function(){this.setFileAsMainPhoto(this.currentPhoto)}},uploadInputInteraction:{change:function(t){this._processingFirstPhotoFromInput()}}},Av.initRegistrationPhotoUpload=xv.create({init:function(t){Hv.upload()?Lv.register("registrationPhotoUpload",LF):qv.change(t.fallbackLink)}}),gt)),uR.kr=dR.fgQv9wQ||(dR.fgQv9wQ=(uR.ah,Vv=uR.n,Qv=uR.o,Wv=uR.e,zv=uR.bf,Xv="data-validate-patterns",Gv={ignore:function(t,e){var n,a=t.data;{var i,o,r,s;a&&e.test(a)&&(i=t.target,o="number"===this.fieldType,r=i.value||(o?i.getAttribute("value"):""),-1===(s=r.indexOf(a))&&(s=r.length),i.value=r.replace(e,""),o&&(n="number",i.type="tel"),i.setSelectionRange(s,s),n&&(i.type=n))}}},RF.prototype={constructor:RF,validate:function(t){return this._hideError(),this._validatePattern(t),this},_hideError:function(){return this.isErrorShown&&Wv(this.fieldRoots,function(t){Vv.removeClass(t,"__error")}),this},_validatePattern:function(t){var e=this.validationPatterns;if(e)for(var n in e){var a=Gv[n];a&&a.call(this,t,e[n])}}},{create:function(t){return new RF(t)}})),uR.ks=dR.fFVMVww||(dR.fFVMVww=(Jv=uR.kr,{createHandlers:function(){return{input:NF,change:NF}}})),uR.kt=dR.v6vE1Jw||(dR.v6vE1Jw=(uR.ah,Yv=uR.ks,BF.prototype={validate:Yv.createHandlers()},{behaviorConstructor:BF})),uR.ku=dR.fVmdnXA||(dR.fVmdnXA=(Kv=uR.d,Zv=uR.s,$v=uR.kt,ty=uR.ah,Kv.formValidation=Zv.create({init:function(){ty.register("validatableForm",$v.behaviorConstructor)}}),gt)),uR.kv=dR.jVlZkQA||(dR.jVlZkQA=(uR.d.showJamliveIframe=function(e){setTimeout(function(){var t;hR.getElementById("jamliveiframe")||((t=hR.createElement("iframe")).id="jamliveiframe",t.style.display="none",t.src=e.url,hR.body.appendChild(t))},e.timeout)},gt)),uR.kw=dR.gbxr74Q||(dR.gbxr74Q=(ey=uR.d,ny=uR.ex,ay=uR.ah,iy=uR.ai,oy=uR.s,ry=uR.eo,uR.bm,sy=uR.eh,ly=uR.g,cy=uR.ee,ey.showLottery=function(t,e,n){var a=0,i=new ny.newInstance;i.lock();var o=hR.getElementById("game-lottery-layer");o&&hR.body.removeChild(o),(o=hR.createElement("div")).className="game-lottery",o.id="game-lottery-layer",o.innerHTML='<div class="top-box"><div class="game-info"><img class="game-info-img u-ava_img" src="'+t+'"/><div class="game-block"><div class="game-name">'+e+'</div><div class="run-status">'+hy+'</div></div></div><div class="progress" id="game_lottery_progress"></div></div><div class="dialog-box"><div class="popup-box"><div class="box-bg"></div><div class="title">'+dy+'</div><div class="percent">+'+my+'%</div><div class="okbtn base-button __modern __accept" id="game_lottery_on_ok"><div class="base-button_bg"></div><div aria-hidden="true" class="base-button_content"><div class="base-button_content_text">'+py+'</div></div></div></div><input type="button" class="nobtn" value="'+fy+'" id="game_lottery_on_no"></div>',hR.body.appendChild(o);var r=hR.getElementById("game_lottery_progress"),s=setTimeout(function t(){a++,r.style.width=100*a/uy+"%",a<=uy?s=setTimeout(t,1e3):c()},1e3);function l(){i.unlock(),clearTimeout(s);var t=hR.getElementById("game-lottery-layer");t&&hR.body.removeChild(t)}function c(){ry.statePopping.detach(l),i.unlock(),clearTimeout(s),yy?(cy.change(n),hR.body.removeChild(o)):gt.location.href=n}hR.getElementById("game_lottery_on_no").onclick=c,hR.getElementById("game_lottery_on_ok").onclick=function(){ry.statePopping.detach(l),i.unlock(),clearTimeout(s),sy.request(ly.insertParams(vy,{"st.action":"accept"}),"POST").then(function(t){t.result?yy?cy.change(gy):gt.location.href=gy:yy?cy.change(n):gt.location.href=n},function(){yy?cy.change(n):gt.location.href=n}).send()},ry.statePopping.attach(l)},DF.prototype={click:{tap:function(t){var e,n,a=this.elem.getAttribute("data-app-url")||t.target.getAttribute("data-app-url"),i=this.elem.getAttribute("data-new-window")||t.target.getAttribute("data-new-window");return 0<my?(e=this.elem.getAttribute("data-app-icon")||t.target.getAttribute("data-app-icon"),n=this.elem.getAttribute("data-app-name")||t.target.getAttribute("data-app-name"),sy.request(ly.insertParams(vy,{"st.action":"check"}),"POST").then(function(t){t.result?yy?cy.change(a):gt.location.href=a:ey.showLottery(e,n,a)},function(){yy?cy.change(a):gt.location.href=a}).send()):"true"===i?gt.open(a,"_blank"):yy?cy.change(a):gt.location.href=a,t.preventDefault(),!1}}},ey.initGameLottery=oy.create({init:function(t){uy=t.maxLotteryDuration,dy=t.textMotivation,hy=t.textLaunching,py=t.textDeposit,fy=t.textNo,gy=t.paymentRechargeUrl,vy=t.lotteryPromoCommand||"/dk?st.cmd=ajaxGameLottery",my=t.discount,yy=t.fixAjaxNavigation,ay.register("showGameLottery",DF)}}),iy.addFuncHandler("openInNewWindow",{tap:function(t,e){gt.open(e.href,"_blank")}}),gt)),uR.kx=dR.df5N1A||(dR.df5N1A=function(a,t,i){"use strict";var o,r,s,l;return{play:function(n){s=hR.querySelector(".daily-reward-banner_host"),r=n.ticks,l=n.callback,s&&i.removeClass(s,"hidden"),t.use(n.url+"main.js",function(){null!=s&&setTimeout(function(){!function t(e){o=a.OkArt.run({name:n.name,rootUrl:n.url,host:s,appendToHost:!0,onFinished:void 0});r--;0<e?setTimeout(function(){t(r)},n.animationDelay):(i.addClass(s,"hidden"),l&&n.callback())}(r)},n.delay)})},stop:function(){o&&(r=0,o.stop(),setTimeout(function(){i.addClass(s,"hidden")},250))}}}(uR.dr,uR.l,uR.n)||gt),uR.ky=dR.dx3PKWg||(dR.dx3PKWg=(function(t,n,e,a,i,o,r){"use strict";var s,l;function c(t,e){this.root=e}function u(t){s&&(i.request(t.href,"POST").send(),s=!1)}c.prototype={closeDailyReward:{tap:function(t,e){a.stop(),u(e)}}},e.register("dailyRewardBehavior",c),t.create({name:"dailyRewardAnimation",update:function(t){var e;s||(e=t.bannerId,l=hR.getElementById("dailyRewardBanner").cloneNode(!0),r.removeClass(l,"hidden"),n.show(l.outerHTML,t.durationTotal,{type:n.NotificationType.TRANSPARENT,insertMode:n.NotificationInsertMode.CONTENT}),a.play({url:t.resourceUrl,name:t.name,delay:t.delay,animationDelay:t.animationDelay,ticks:t.animationTicks,callback:function(){s&&(u(hR.querySelector(".daily-reward-banner_close")),o.log("daily_rubies",["banner-show-finished",e]))}}),s=!0,o.log("daily_rubies",["banner-show-started",e]))},discard:function(){s=l=null}})}(uR.s,(uR.d,uR.ea),uR.ah,uR.kx,uR.bm,uR.a,uR.n),gt)),uR.kz=dR.lBEdgw||(dR.lBEdgw=(by=uR.s,Cy=uR.fg,Sy=uR.n,ky=uR.o,uR.p,_y=uR.cy,wy=".js-ajax-btn",Ty="js-env-loading",by.create({name:"listenToAjaxPageUpdateLinks",init:function(t){Cy.onLinkToAjaxEnvelope({selector:".js-ajax-envelope-btn",requestDelayTime:t.requestDelayTime||0,prepare:function(t){var e,n,a=t.target,i={};return Sy.hasClass(a,"js-env-loader")&&(n=(e=a.getAttribute("data-env-loader-id"))?hR.getElementById(e):a,Sy.addClass(n,Ty),i.loaderTarget=n),Sy.hasClass(a,"js-post")&&(t.method="post"),i},complete:function(t){t.loaderTarget&&Sy.removeClass(t.loaderTarget,Ty)},processing:{onComplete:function(t){_y.htmlFromEnvelopeInserted.trigger(t)}}}),Cy.onLink({selector:wy,requestDelayTime:t.requestDelayTime||0,prepare:function(t){var e=t.target;if(ky.matches(e,wy)||(e=ky.parentBySelector(e,wy)),e)return{target:e,wrapper:e.parentNode};t.cancelled=!0},success:function(t){t.wrapper.outerHTML=t.response}})}}),gt)),uR.la=dR.dWVe4Gg||(dR.dWVe4Gg=(function(t,e,n,a,i){"use strict";var o,r,s,l;function c(){s=hR.querySelector(".js-daily-reward-portlet-poster"),l=a(u,200)}function u(){s&&(i.switchClass(s,r,"__active"),setTimeout(function(){s&&i.removeClass(s,"__active")},200))}function d(t){o&&(r=t.inViewport,t.inViewport?e.changed.attach(l):e.changed.detach(l))}n.create({name:"dailyRewardInitPortlet",update:function(){(o=hR.querySelector(".js-daily-reward-portlet"))&&(t.initObserver("dailyRewardInitPortletObserver",{viewThreshold:0}),t.observe(o,{registered:c,track:d},"dailyRewardInitPortletObserver"))},discard:function(){gt.removeEventListener("scroll",l),o&&t.unobserve(o),o=s=l=null}})}((uR.ar,uR.cq),uR.bd,uR.s,uR.bb,uR.n,uR.e),gt)),uR.lb=dR.gGHnKzQ||(dR.gGHnKzQ=function(t,i,o,s,l,c){"use strict";var e={};Object.defineProperty(e,"__esModule",{value:!0});return(0,t.register)("gameChallenge",function(t,e){var r=this;this.model=t,this.root=e,this.open={tap:function(t,e){var n=r.model,a=n.width,i=n.height,o={px:(0,s.getFlooredPercent)((0,l.touchX)(t),a),py:(0,s.getFlooredPercent)((0,l.touchY)(t),i)};r.openGame(o)}},this.openGame=function(t){var e=r.model.linkTemplate,n=encodeURIComponent('"'),a=(0,c.simpleReplacer)(e,{x:t.px,y:t.py},{regexp:new RegExp(n+"__(\\w+)__"+n,"g")});o.log("click.main",["game",r.model.bannerId]),i.change(a)}}),e}(uR.ah,uR.ee,uR.a,uR.dc,uR.ae,uR.fh)||gt),uR.lc=dR.cdFDsg||(dR.cdFDsg=function(t,c,i,r,e,s,l,u){var d,h,n,p,f={};d&&(d.style.maxHeight="0");var g=hR.getElementById("ok-app-in-ctoolbar");function m(t,e){var n=t.getElementsByClassName(e);return n&&0<n.length?n[0]:n}function o(t,e){if(t){if(p=t,d=hR.getElementById("ok-app-frame-ctoolbar"),h=hR.getElementsByClassName("game-frame_frame")[0]){if(t.problem)return void(f.callback&&f.callback.error(t.problem));var n,a="window.open=";0===t.html.indexOf(a)?gt.open(t.html.substr(a.length)):(b(!0),n=function(t){var e=hR.createElement("DIV");e.className="invisible whp";var n=r.createDomTree(t.html);return e.appendChild(n.firstChild),hR.body.appendChild(e),e}(t),i=h,(o=n)&&(o.imagesToLoad=0,u(o.getElementsByTagName("img"),function(t){function e(){1==o.imagesToLoad&&v(i,o),o.imagesToLoad--}var n;t.complete&&1<t.naturalHeight||((n=new Image).src=t.src,n.onload=e,n.onerror=e,o.imagesToLoad++)}),o.imagesToLoad||v(i,o))),f.currentBlock=e}}else p=mt;var i,o}function a(n){u(d.querySelectorAll("[data-custom-height-set]"),function(t){t.style.height="",t.style.maxHeight=""});var t=n.getElementsByTagName("IFRAME")[0],e=.9*gt.innerHeight;t&&(t.parentElement.style.height=e-m(n,"title").offsetHeight-Number(t.getAttribute("data-offset"))+"px",t.parentElement.setAttribute("data-custom-height-set","1"));var a=Math.min(e,n.offsetHeight);d.style.maxHeight=a+"px",p&&!0===p.hideCloseControl||d.querySelector(".game-frame_ctoolbar-close").classList.remove("dsn");var i,o=n.getAttribute("data-controls"),r=n.getAttribute("data-content");r&&o&&n.offsetHeight>e&&((i=m(n,r)).style.maxHeight=a-m(n,"title").offsetHeight-m(n,o).offsetHeight-Number(n.getAttribute("data-offset"))+"px",i.setAttribute("data-custom-height-set","1")),u(n.querySelectorAll("[data-height-limit]"),function(t){t.style.height=Math.min(t.scrollHeight,Number(t.getAttribute("data-height-limit"))*gt.innerHeight)+"px",t.setAttribute("data-custom-height-set","1")});var s=m(n,"ctoolbar-user_list");u(n.querySelectorAll("[data-check-scroll]"),function(t){var e=t.getAttribute("data-check-scroll"),n=t.querySelector(":not(."+e+")");t.style.overflowY=n.offsetHeight<s.offsetHeight?"hidden":"scroll"}),u(n.querySelectorAll("[data-set-height]"),function(t){var e=0;u(t.parentElement.children,function(t){t.getAttribute("data-set-height")||(e+=t.offsetHeight)}),t.style.maxHeight=a-e-(m(t.parentElement,"title")?0:m(n,"title").offsetHeight)+"px",t.setAttribute("data-custom-height-set","1")});var l=n.getAttribute("data-toolbar-class");l&&c.addClass(d,l),d.setAttribute("data-orientation",String(gt.innerWidth))}function v(t,e){for(;1<d.childNodes.length;)d.removeChild(d.lastChild);c.addClass(t,"__fade"),c.addClass(d,"__open"),a(e.firstChild),d.appendChild(e.firstChild),hR.body.removeChild(e)}function y(t){f.callback&&f.callback.error("object"==typeof t?"errorKey"in t?t.errorKey:"service":t)}function b(t){"undefined"!=typeof OKApp&&void 0!==OKApp.registerBackProcessor&&(t?(OKApp.registerBackProcessor("__controlToolbarBackProcessor"),gt.__controlToolbarBackProcessor=function(){S()}):OKApp.removeBackProcessor())}function C(){p=mt,b(!1),"undefined"!=typeof OKApp&&void 0!==OKApp.setFullScreen&&OKApp.setFullScreen(!0)}function S(){C();var n=[],a={};u(d.querySelectorAll("[data-result]"),function(t){var e=t.getAttribute("data-result");e in a||(n.push(e),a[e]=1)});var i=[],o={};u(d.querySelectorAll("[data-error]"),function(t){var e=t.getAttribute("data-error");e in o||(i.push(e),o[e]=1)}),f.callback&&(0<i.length?f.callback.error(i.join(",")):0<n.length?f.callback.success(n.join(",")):f.callback.error("cancel"),f.callback=null),f.opened=!1,c.removeClass(h,"__fade"),c.removeClass(d,"__open"),d.style.maxHeight="0";var t=d.querySelector(".game-frame_ctoolbar-close");for(t.classList.contains("dsn")||t.classList.add("dsn");1<d.childNodes.length;)d.removeChild(d.lastChild);f.currentBlock=mt}function k(){n&&(hR.body.style.height=gt.innerHeight+"px"),1<d.offsetHeight&&d.getAttribute("data-orientation")!=String(gt.innerWidth)&&a(d.lastChild)}function _(t,e){this.domRoot=e,this.model=t}return t.addFuncHandler("ctoolbar-close",{tap:function(){S()}}),_.prototype={switchTabs:{tap:function(t){var e=s.parentBySelector(t.target,".tabs_item"),n=this.domRoot,a=n.getElementsByClassName("tabs_list")[0],i=Array.prototype.indexOf.call(a.childNodes,e),o=n.querySelectorAll(".ctoolbar-user_list .list-block"),r=m(n,"ctoolbar-user_list");r.scrollTop=0,u(o,function(t,e){c.switchClass(t,e!=i,"__hide"),e==i&&(r.style.overflowY=t.offsetHeight<r.offsetHeight?"hidden":"scroll")}),u(a.childNodes,function(t,e){c.switchClass(t,e!=i,"__active"),e==i?(c.removeClass(t.firstChild,"alnk"),c.addClass(t.firstChild,"aslnk")):(c.removeClass(t.firstChild,"aslnk"),c.addClass(t.firstChild,"alnk"))})}}},e.register("controlToolbarNav",_),{open:function(e,t,n,a){if(p=mt,e&&(a&&f.currentBlock===e&&n.error("layer already exists"),d=hR.getElementById("ok-app-frame-ctoolbar")))return f.opened=!0,f.callback=n,i.run("fapi.requestBlock."+e,t).then(function(t){o(t,e)},y)},close:S,setBottomSheetHeight:function(t,e,n,a){var i=l.calc().height,o=e*(n/e);(o=Math.floor(o))<i?(g.style.height=o+"px",t.success("height changed")):t.error("invalid height passed");var r=hR.querySelector(".js-ct-launch-header"),s="true"===a;c.switchClass(r,s,"hidden")},isOpened:function(){return!0===f.opened},init:function(t){d=hR.getElementById("ok-app-frame-ctoolbar"),h=hR.getElementsByClassName("game-frame_frame")[0],d&&(d.style.maxHeight="0"),f={},n=t,gt.addEventListener("resize",k),n&&(hR.body.style.height=gt.innerHeight+"px")},discard:function(){h=d=null,b(!1),gt.removeEventListener("resize",k),n&&hR.body.style.removeProperty("height"),f.opened=!1}}}((uR.d,uR.ai),uR.n,uR.es,(uR.ea,uR.g,uR.bx),uR.ah,uR.o,uR.bd,uR.e)||gt),uR.ld=dR.aiJWkoA||(dR.aiJWkoA=function(t,n,a){"use strict";var i={};Object.defineProperty(i,"__esModule",{value:!0}),i.appRatingAutomation=i.updateRatingValueInMenu=void 0;function e(t,e){var c=this;this.model=t,this.root=e,this.rate={tap:function(t,e){n.run("fapi.app.rating",{userId:c.model.userId,appId:c.model.appId,rating:c.model.rating}).then(function(t,e){t.problem?c.root.setAttribute("data-error",t.problem):(c.root.setAttribute("data-result",c.model.rating.toString()),(0,i.updateRatingValueInMenu)(c.model.rating,t.averageRating))},function(){c.root.setAttribute("data-error","service")}).anyway(function(){return a.close()})}},this.select={tap:function(t,e){for(var n,a,i,o=e.getAttribute("data-index"),r=0,s=(null===(n=c.starsContainer)||void 0===n?void 0:n.children)||[];r<s.length;r+=1){var l=s[r];l.getAttribute("data-index")<=o?l.classList.contains("active")||l.classList.add("active"):l.classList.remove("active")}c.updateModel({rating:+o}),c.model.rating===c.model.previousRating?null!==(a=c.submitButton)&&void 0!==a&&a.setAttribute("disabled","disabled"):null!==(i=c.submitButton)&&void 0!==i&&i.removeAttribute("disabled")}},this.submitButton=hR.getElementsByName("button_app_rating")[0],this.starsContainer=hR.getElementsByClassName("app-rating_stars")[0]}e.prototype.updateModel=function(t){this.model=Object.assign(Object.assign({},this.model),t),this.root.okData=this.model,this.root.setAttribute("data-model",JSON.stringify(this.model))},(0,t.register)("appRating",e);return i.updateRatingValueInMenu=function(t,e){var n,a,i,o,r=hR.getElementsByClassName("app-bottomsheet_rating-container")[0];r&&e&&(r.lastChild&&r.removeChild(r.lastChild),(n=hR.createElement("span")).innerHTML=e.toFixed(1).toString(),r.append(n),r.classList.remove("__hidden"),t&&((a=hR.getElementsByClassName("app-bottomsheet_my-rating")[0])?a.innerHTML=t.toString():((i=hR.createElement("span")).classList.add("app-bottomsheet_my-rating"),i.innerHTML=t.toString(),(o=hR.createElement("span")).classList.add("app-bottomsheet_separator"),o.innerHTML="/",r.lastChild.before(i,o))))},i.appRatingAutomation={run:function(t){var e=hR.getElementById("ok-app-frame"),n=e.getAttribute("data-rating-automation-enabled"),a=e.getAttribute("data-rating-last-shown-date"),i=e.getAttribute("data-rating-value"),o=e.getAttribute("data-rating-show-delay-days"),r=e.getAttribute("data-rating-show-gap-minutes");if("true"===n&&null!=a&&o&&r&&(!i||"0"===i)){if(!a)return void setTimeout(t,6e4*r);var s=new Date(a);s.setTime(s.getTime()+864e5*o),Date.now()>s.getTime()&&setTimeout(t,6e4*r)}}},i}(uR.ah,uR.es,uR.lc)||gt),uR.le=dR.tzl8ssA||(dR.tzl8ssA=(Iy=uR.lc,Ey=uR.a,uR.ld,{openAppRating:{trigger:function(t,e,n){var a={success:function(){},error:function(t){"cancel"===t&&Ey.log("app.games",["rating_dialog.close","mobile_html",e,n,null,!1],"cancel")}};Iy.open("appRating",{appId:e},a,!0)}}})),uR.lf=dR.tvSBbQQ||(dR.tvSBbQQ=(Ay=uR.le,xy=uR.ah,Py=uR.n,Oy=uR.o,Ly=uR.e,Ry=uR.r,Ny=uR.ib,By=uR.fz,Dy=uR.dh,My="__toggle-on",Fy=!(jy=[]),MF.prototype={toggleView:{tap:function(t,e){FF.call(this,e,t)},keyDown:function(t,e){13===t.keyCode&&FF.call(this,e,t)}},onOutClick:function(t){for(var e=jy.length,n=t.target,a=!1,i=e;i--&&!a;)a=Oy.isChildOf(n,jy[i]);a||this.toggleOff()},resetToggleBlock:function(){this.unlinked||this.togglerState===this.togglerInitState||Py.switchClass(this.viewContext,this.togglerInitState,My)},resetToggleModule:function(){jF(),jy.length=0,Fy=!1},removeOutClickListener:function(){xy.tapPreview.detach(this.onOutClick,this)},switchTopClass:function(){var t,e;Py.hasClass(this.viewContext,"__top-switchable")&&((t=!this.togglerState)&&!Py.hasClass(this.viewContext,"__top")||Py.removeClass(this.viewContext,"__top"),t&&(e=this.viewContext.parentNode.getElementsByClassName("__top-switchable-menu")[0],Ny.shallOpenUpwards(e)&&Py.addClass(this.viewContext,"__top")))},switchCenterClass:function(){var t;this.togglerState||(t=this.viewContext.parentNode.getElementsByClassName("__center-switchable-menu")[0])&&(t.style.marginLeft=t.clientWidth/-2+"px",t.style.left="50%")},toggleOff:function(){this.removeOutClickListener(),this.resetToggleModule()},toggleOn:function(t,e){FF.call(this,t,e)},hideToggle:{tap:function(t,e){this.toggleOff()}},setSelectedValue:{tap:function(t,e){var n=e.cloneNode(!0);n.removeAttribute("data-func"),n.removeAttribute("data-view");var a=Oy.parentBySelector(e,".drop-down").querySelector(".drop-down_opener");Py.clear(a),a.appendChild(n),this.toggleOff&&this.toggleOff()}},selectAndPropagateValue:{tap:function(n,t){var a=JSON.parse(t.getAttribute("data-model")).entityId,e=hR.querySelectorAll(".drop-down .toggled-button_items");Ly(e,function(t){var e=t.getElementsByClassName("toggled-button_item-link");Ly(e,function(t){var e=JSON.parse(t.getAttribute("data-model"));e&&e.entityId===a&&xy.getOrMakeBehavior(t).setSelectedValue.tap.call(this,n,t)})}),this.toggleOff()}}},xy.register("toggleView",MF),By.close.attach(jF),gt)),uR.lg=dR.i1KNqkQ||(dR.i1KNqkQ=(qy=uR.ah,qF.prototype={updateFilename:function(){this.inputFile.files&&this.inputFile.files[0]&&(this.label.textContent=this.inputFile.files[0].name)},selectFile:{tap:function(t){this.inputFile.click()}},handleEvent:function(t){switch(t.type){case"change":t.target===this.inputFile&&this.updateFilename()}}},qy.register("fileInput",qF),gt)),uR.lh=dR.eOFkD6w||(dR.eOFkD6w=(Hy=uR.o,Uy=uR.e,Vy=uR.n,Qy=uR.ah,Wy=".field",zy="field_symbols-counter",Xy="__error",HF.prototype.fieldInteraction={input:function(){this.valueLength=this.input.value.length,UF(this)}},{init:function(){Qy.register("editableFieldWithCounter",HF)}})),uR.li=dR.lw2LZzg||(dR.lw2LZzg=(Gy=uR.ah,Jy=uR.ee,VF.prototype={select:{change:function(){Jy.change(this._select.value)}}},{init:function(){Gy.register("linksSelect",VF)}})),uR.lj=dR.uVxexmA||(dR.uVxexmA=(Yy=uR.d,Ky=uR.s,Zy=uR.lh,$y=uR.li,Yy.uiComponents=Ky.create({init:function(t){t.isEditableFieldWithCounterEnabled&&Zy.init(),$y.init()}}),gt)),uR.lk=dR.hJzkyew||(dR.hJzkyew=(tb=uR.d,eb=uR.hr,tb.heightToMaxEqualizer=function(t){var e=t.target,n=e.getAttribute("data-selector");n&&eb.newEvenHeightGroup(e.querySelectorAll(n)).equalizeHeight()},gt)),uR.ll=dR.sE2ZM1w||(dR.sE2ZM1w=(nb=uR.al,uR.bd,ab=uR.ah,ib=uR.af,rb=null,sb=!(ob=[]),cb=lb=0,ub=400,db=ib.androidVersion&&ib.androidVersion.number<5,hb=db&&!ib.chrome,pb=db||ib.iOSVersion&&ib.iOSVersion<10||ib.winphone,fb=pb?8:Infinity,gb=1,mb=pb?4:Infinity,vb=0,yb=pb?2e3:1e4,ab.touchStartPreview.attach(function(){cb=Date.now(),sb=!0}),ab.touchEndPreview.attach(XF),{stopAll:function(){ob.length=0,QF()},enroll:function(t){-1===ob.indexOf(t)&&ob.push(t),null===rb&&(rb=nb.run(WF))},forget:function(t){var e,n,a,i,o,r=ob.indexOf(t);-1!==r&&(ob.splice(r,1),e=t.spriteCanvas,t.spriteCanvas=null,e&&(e.width=e.height=1),(n=t.target.getAttribute("data-static-image"))&&(t.target.style.backgroundImage=n),a=t.canvas,t.canvas=null,a&&(i=t.elementToHide,(o=a.parentNode)&&(i&&i.style.removeProperty("display"),o.removeChild(a),a.width=a.height=1))),0===ob.length&&QF()}})),uR.lm=dR.oHopmRQ||(dR.oHopmRQ=(bb=uR.l,Cb=uR.dr,Sb=uR.g,{play:function(o){var r=Sb.endWithSlash(o.baseUrl);bb.use(r+"main.js",function(){var t,e=o.name,n={overlay:Cb.OkArt[e]},a=o.createHost(n);function i(){t||(t=!0,o.onFinished(n))}null!=a&&(t=!1,kb=Cb.OkArt.run({name:e,rootUrl:r,host:a,appendToHost:!0===o.appendToHost,onFinished:i,onGameStarted:o.onGameStarted,onGameFinished:o.onGameFinished}),Cb.OkArt.onFinished=function(){t||pR.contains(kb.domRoot)||i()},n.playing=kb,o.onStarted(n))})}})),uR.ln=dR.gYexAPw||(dR.gYexAPw=(_b=uR.ah,wb=uR.lm,Tb=uR.n,Ib=uR.bd,Eb=uR.d,Ab=uR.s,xb=uR.fo,Pb=uR.cy,Rb="__copy-above-overlay",Nb="gift-overlay-host",Db=0,Mb=!(Bb=[]),Eb.giftAnimOverlays=Ab.create({init:function(){Ib.changed.attach(function(){Mb&&(Mb=!1,JF())})},update:function(t){t.autoPlay&&(Lb=!1,Ob=null,GF(),xb.items.added.attach(GF),Pb.htmlFromEnvelopeInserted.attach(GF))},discard:function(){Mb=!1,Bb.length=0,xb.items.added.detach(GF),Pb.htmlFromEnvelopeInserted.detach(GF);var t=Ob&&Ob.playingOverlay;t&&t.stopImmediately()}}),{play:function(a){var t;Ob&&(t=Ob,Ob=null,t.togglePlay(!1));var i=(Ob=a).node,e=a.gift.overlay;wb.play({baseUrl:e.baseUrl,name:e.name,appendToHost:!0,createHost:function(t){if(!pR.contains(i))return null;var e,n=a.overlayHost;return n||(e=i.parentNode,a.overlayHost=n=e.getElementsByClassName(Nb)[0],n&&(i.okPositioningClone=e.getElementsByClassName(Rb)[0])),n?(KF(i,!0),n):YF(t.overlay,a,i)},onStarted:function(t){a.playingOverlay=t.playing},onFinished:function(t){var e=Ob===a;e&&(Ob=null),a.playingOverlay=null,a.setOverlayPlayState(!1),KF(i,!1),e&&JF()}})},setAutoPlayEnabled:function(t){Lb=!t}})),uR.lo=dR.gjlxsA||(dR.gjlxsA=(jb=uR.ah,Fb=uR.n,qb=uR.ln,ZF.prototype={togglePlayOverlay:{tap:function(t){var e=!this.playingOverlay;qb.setAutoPlayEnabled(e),this.togglePlay(e)}},togglePlay:function(t){var e;this.setOverlayPlayState(this,t),t?qb.play(this):(e=this.playingOverlay)&&e.stop()},setOverlayPlayState:function(t){Fb.switchClass(this.toggleOverlayPlayNode,t,"__playing")}},jb.register("gift",ZF),gt)),uR.lp=dR.iwVqFzw||(dR.iwVqFzw=(Hb=uR.ko,Ub=uR.i,Vb={},Qb=5,{load:function(t){return Vb[t]||(Vb[t]=$F(t))}})),uR.lq=dR.grkHMsQ||(dR.grkHMsQ=(function(t,e,p,f){t.animateGift=function(t){e.observe(t.target,n)};var n={registered:function(e){var t=e.target;if(!e.giftAnimation){for(var n=parseInt(t.getAttribute("data-frames"),10)||60,a=JSON.parse(t.getAttribute("data-framedelays"))||{},i=parseInt(t.getAttribute("data-fps"),10)||24,o=parseInt(t.getAttribute("data-replaydelay"),10)||0,r=t.getAttribute("data-lazy-animated-url"),s=1e3/i+1,l=[],c=0;c<n;c++){var u=a[c]||1;c===n-1&&0<o&&(u+=Math.round(1e3*o/s));for(var d=0;d<u;d++)l.push(c)}var h={target:t,sprite:null,canvas:null,spriteCanvas:null,spriteRows:0,spriteColumns:0,drawing2d:null,time:Date.now(),startTime:0,currentFrame:0,previousFrame:-1,currentValue:null,frameIndices:l,frameDuration:0,framesCount:n,fps:i,readyForUse:!1};e.giftAnimation=h,r&&(f.load(r).then(function(t){h.sprite=t,h.readyForUse=!0,e.inViewport&&p.enroll(h)}),h.readyForUse=!1)}},track:function(t){var e=t.giftAnimation;t.inViewport?e.readyForUse&&p.enroll(e):p.forget(e)}};e.addListener(n)}(uR.d,(uR.e,uR.al,uR.s,uR.cq),uR.ll,(uR.lo,uR.o,uR.n,uR.lp),(uR.r,uR.bd)),gt)),uR.lr=dR.sphI19A||(dR.sphI19A=(Wb=uR.d,zb=uR.e,Xb=uR.s,Gb=uR.n,uR.o,uR.ai,uR.ah,Jb="retryButton",Yb="timerBlock",Kb="countdownTimer",tC=$b=Zb=null,Wb.sendPresentUtils=Xb.create({init:function(){},update:function(){var t;(t=hR.getElementById("ok-amount-custom"))&&t.addEventListener("click",function(){var t=hR.getElementsByName("st.attachedOk");t&&zb(t,function(t){t.checked=!1})});var e,n,a=hR.getElementById(Kb);a&&(hR.getElementById("confirmButton").addEventListener("click",function(){hR.getElementById("elapsedTime").value=hR.getElementById(Kb).innerText}),e=a.getAttribute("data-mmss"),n=e.split(":"),Zb=1e3*(60*parseInt(n[0])+parseInt(n[1])),$b=hR.getElementById(Kb),tC=setTimeout(tq,1e3));var i=hR.getElementsByClassName("ok-amount-list-radio-item");0!==i.length&&zb(i,function(t){t.addEventListener("click",function(){var t=hR.getElementById("ok-amount-custom");t&&(t.value="")})});var o=hR.getElementById("attach_phone_panel_select_country");o&&o.addEventListener("change",function(){this.form.submit()})},discard:function(){tC&&(clearTimeout(tC),tC=null)}}),gt)),uR.ls=dR.iRZfVXQ||(dR.iRZfVXQ=function(t){return 0===t.detail||0===t.clientX&&0===t.clientY}),uR.lt=dR.cBpcpSQ||(dR.cBpcpSQ=(eC=uR.d,nC=uR.s,aC=uR.ah,uR.ls,eq.prototype={getNewCaptcha:{tap:function(t){this.img.src="/cap?"+Date.now(),this.input.value=""}}},eC.captchaService=nC.create({init:function(){aC.register("captcha",eq)}}),gt)),uR.lu=dR.eLK2YQ||(dR.eLK2YQ=(iC=uR.ah,uR.d,oC=uR.jv,rC=uR.n,sC=uR.bd,lC=uR.r,nq.prototype={expand:{tap:function(t){rC.removeClass(this.container,"__bound"),rC.addClass(this.dom.expandItem,"hidden"),rC.removeClass(this.dom.collapseItem,"hidden")}},collapse:{tap:function(t){rC.addClass(this.container,"__bound"),rC.addClass(this.dom.collapseItem,"hidden"),rC.removeClass(this.dom.expandItem,"hidden")}}},nq.isInstant=!0,iC.register("expandItems",nq),gt)),uR.lv=dR.dUV04Kw||(dR.dUV04Kw={msToHMS:function(t){var e=Math.floor(t/1e3),n=Math.floor(e/3600),a=Math.floor(e%3600/60),i=Math.floor(e%60);return[0!==n?n+":":"",rq(a),a,":",rq(i),i].join("")}}),uR.lw=dR.TOKx8xw||(dR.TOKx8xw=(cC=uR.o,uC=uR.lv,sq.prototype.set=function(t){this._timerTextNode.nodeValue=uC.msToHMS(t)},sq)),uR.lx=dR.apq4uLQ||(dR.apq4uLQ=(dC=uR.al,lq.prototype.stop=function(){return-1!==this._animationFrameId&&dC.stop(this._animationFrameId),this},{run:function(t,e,n){return new lq(t,e,n)}})),uR.ly=dR.CWSFBXg||(dR.CWSFBXg=(hC=uR.lx,cq.prototype.animateInitialState=function(e,t){null==t&&(t=500),hC.run(function(t){this.set(t*e)},t,this)},cq.prototype.set=function(t){var e=this._context,n=this._size/2;e.clearRect(0,0,this._size,this._size),e.beginPath(),e.arc(n,n,n-1,-Math.PI/2,2*Math.PI*(t/100)-Math.PI/2),e.lineTo(n,n),e.lineTo(n,0),e.fillStyle=this._color,e.fill()},cq)),uR.lz=dR.g2yGKmA||(dR.g2yGKmA=(pC=uR.d,fC=uR.s,gC=uR.dz,mC=uR.lw,vC=uR.ly,yC=uR.n,bC=uR.im,CC="__sale-finished",SC="gift-hot-sale_send-button",kC="gifts_lnk",(_C=uq.prototype).run=function(){this._giftHotSaleFrame()},_C.stop=function(){-1!==this._currentTimeoutId&&(clearTimeout(this._currentTimeoutId),this._currentTimeoutId=-1)},pC.giftsHotSale=fC.create({update:function(){gC("gift-hot-sale",hR.getElementsByClassName("js-gift-hot-sale"),function(t){new uq(t)})}}),gt)),uR.ma=dR.hCB7LyA||(dR.hCB7LyA=(wC=uR.d,TC=uR.s,IC=uR.dz,EC=uR.lw,AC=uR.n,xC="__endSale",PC="hostSaleBLink",(OC=pq.prototype).run=function(){this._hotSaleFrame()},OC.stop=function(){-1!==this._currentTimeoutId&&(clearTimeout(this._currentTimeoutId),this._currentTimeoutId=-1)},wC.hotSale=TC.create({update:function(){IC("hot-sale",hR.getElementsByClassName("js-timer"),function(t){new pq(t)})}}),gt)),uR.mb=dR.gah9jkw||(dR.gah9jkw=(LC=uR.d,RC=uR.s,NC=uR.n,LC.giftWithSurprise=RC.create({update:function(){setTimeout(function(){var t=hR.querySelector(".js-gift-chest_animation");t&&NC.addClass(t,"gift-chest_animation")},1e3),setTimeout(function(){var t=hR.querySelector(".js-gift-chest-title");t&&(hR.querySelector(".send-present_title").innerHTML=t.innerHTML)},3e3)}}),gt)),uR.mc=dR.pYGBHqQ||(dR.pYGBHqQ=(BC=uR.d,DC=uR.s,BC.p2pTransfersValidate=DC.create({update:function(){var n,a,i,o,t=hR.querySelector(".js-transfer-send-form");t&&(n=hR.querySelector(".js-transfer-send-amount"),a=hR.querySelector(".js-transfer-send-button"),i=n.getAttribute("data-min-length")||1,o=n.getAttribute("data-symbols")||"0123456789",t.addEventListener("submit",function(t){""==n.value?t.preventDefault():a.disabled=!0}),n.addEventListener("input",function(t){var e=fq(n.value,o);e!=n.value&&(n.value=e),gq(a,e,i)}),gq(a,fq(n.value,o),i))}}),gt)),uR.md=dR.iXUpSEQ||(dR.iXUpSEQ=(MC=uR.d,jC=uR.s,FC=uR.lm,qC=uR.bd,HC=uR.hp,UC=null,MC.interactiveArt=jC.create({update:function(){mq(),qC.resize.attach(yq)},discard:function(){vq(),qC.resize.detach(yq)}}),gt)),uR.me=dR.dAbzmXg||(dR.dAbzmXg=(bq.prototype={getOption:function(t){return this.data[t]}},{create:function(t){return new bq(t)}})),uR.mf=dR.hrJC7eQ||(dR.hrJC7eQ={changeHistoryState:function(t,e){history.replaceState(Object.assign(history.state||{},t),hR.title,e)}}),uR.mg=dR.aP4dg||(dR.aP4dg=(VC=uR.d,QC=uR.iu,WC=uR.me,zC=uR.ah,XC=uR.cy,GC=uR.s,JC=uR.bd,YC=uR.mf,KC=uR.g,aS={joinedGroupTopOffset:0,prevSimilarGroupsContainerTopOffset:null,columnCount:0},iS="afterend",oS="beforebegin",rS=50,QC.specialEnvelopes.createSimilarGroupsBlock={run:function(t){tS?eS=tS:(XC.htmlFromEnvelopeInserted.attach(Cq),JC.changed.attach(kq));var e,n,a,i=1==t.index&&t.contentDomFirst;i&&(tS=i,e=WC.create(i),nS=e.getOption("cardsCount"),n=e.getOption("sourceGroupId"),(ZC=hR.getElementById(n))&&((a={}).position=gt.innerHeight-ZC.getBoundingClientRect().bottom<rS?oS:iS,$C=ZC.parentNode,kq(),eS&&_q(eS),1<aS.columnCount?((a.beaconNode=ZC).offsetLeft>ZC.offsetWidth/2?a.position==oS&&Sq(ZC.previousElementSibling,a):a.position==iS&&Sq(ZC.nextElementSibling,a),a.beaconNode.insertAdjacentElement(a.position,tS)):ZC.insertAdjacentElement(a.position,tS),function(t){var e=aS.prevSimilarGroupsContainerTopOffset;t==oS&&(!e||e>aS.joinedGroupTopOffset)&&(hR.body.scrollTop+=tS.offsetHeight);t==iS&&e&&e<aS.joinedGroupTopOffset&&(hR.body.scrollTop-=tS.offsetHeight)}(a.position)))}},Eq.prototype={hide:{tap:function(t,e){YC.changeHistoryState({},e.href),Tq()}}},zC.register("ajaxPortlet",Eq),VC.ajaxPortletService=GC.create({update:function(t){var e;"profile"==t.location&&(tS=hR.body.getElementsByClassName("ajax-portlet")[0])&&(YC.changeHistoryState({},KC.replaceParams(location.href,{"st.isJoined":"off"})),XC.htmlFromEnvelopeInserted.attach(Cq),$C=tS.parentNode,e=WC.create(tS),nS=e.getOption("cardsCount"))},discard:Tq}),gt)),uR.mh=dR.aBec4Hw||(dR.aBec4Hw=(sS=uR.d,lS=uR.n,uR.o,cS=uR.ah,uS=uR.s,dS=uR.es,hS=uR.ip,pS=uR.ea,Aq.prototype={spoofInputForm:{tap:function(t){this.performInputSpoofing(t)},focus:function(t){this.performInputSpoofing(t)}},sendFastComment:{tap:function(){var n,a=this.node,i=a.getElementsByClassName("fastcom-input_area")[0];i.value.replace(/^\s+|\s+$/g,"").length&&(lS.addClass(a,"ld"),n=this,dS.run("send.fast.comment",{discussionSubjectId:this.model.discussionId,discussionTypeId:this.model.discussionTypeId,previousCommentCount:this.model.commentCount,commentText:i.value}).then(function(t){var e;t&&t.success?(i.value="",i.style.minHeight="0px",a.getElementsByClassName("last-comment")[0].insertAdjacentHTML("beforeend",t.html),n.model.commentCount=t.adjustedCommentCount,e=a.previousSibling,lS.hasClass(e,"__app-like-view")||(e.querySelector(".widget-list_i.__comment .ic_tx").textContent=t.commentLabelHtml)):xq()},function(){xq()}).anyway(function(){lS.removeClass(a,"ld")}))}},performInputSpoofing:function(t){var e,n,a,i,o,r,s,l=t.target;this.node.querySelector(".fastcom-input_area")||(logClientEvent("fast.comment.initiated",[this.model.feedType]),lS.clear(l),n=(e=hR.getElementById("fastcom-source")).getElementsByClassName("fastcom-input_area")[0],a=e.getElementsByClassName("fastcom-env-wrapper")[0],i=e.getElementsByClassName("ic-progress")[0],o=n.cloneNode(!0),l.insertBefore(o,null),hS.expand(o),r=a.cloneNode(!0),l.parentNode.appendChild(r),s=i.cloneNode(!0),l.parentNode.appendChild(s),o.focus())}},sS.initFastCommenting=uS.create({init:function(){cS.register("fastComment",Aq)}}),gt)),uR.mi=dR.r42Sg3w||(dR.r42Sg3w={MARKER_CLASS_NAME:"js-render-depend",SHOWED_EVENT_TYPE:"_okRenderDependShowed",HIDE_EVENT_TYPE:"_okRenderDependHide"}),uR.mj=dR.cRU0JhA||(dR.cRU0JhA=("function"===gt.CustomEvent?function(t,e){return new CustomEvent(t,e)}:function(t,e){var n=hR.createEvent("Event");return n.initEvent(t,e&&e.bubbles,e&&e.cancelable),n})||gt),uR.mk=dR.riaqLZA||(dR.riaqLZA=(fS=uR.bf,gS=uR.mi,mS=uR.mj,function(t,e,n,a){var i=t.getElementsByClassName(gS.MARKER_CLASS_NAME);n&&(i=fS.filterToCopy(i,n,a));for(var o=mS(e?gS.SHOWED_EVENT_TYPE:gS.HIDE_EVENT_TYPE),r=0,s=i.length;r<s;r+=1)i[r].dispatchEvent(o)})),uR.ml=dR.TGG0vaw||(dR.TGG0vaw=function(i,e,a,n){var t="toggledBlock",o="__open";function r(t,e){this.model=t,this._init(e)}a.register(t,r);var s=r.prototype;return s._findElements=function(t){var e=t.getAttribute("data-toggled-id"),n='[data-toggled-content="'+e+'"]',a=hR.querySelector(n);return this._root=i.parentBySelector(a,'.toggled-block[data-toggled-id="'+e+'"]'),this._switcher=t,this._content=a,this._contentWrapper=i.parentBySelector(a,".toggled-block-content-w"),this._preview=hR.querySelector('[data-toggled-preview="'+e+'"]'),this._textNodes=hR.querySelectorAll('[data-toggled-text-source="'+e+'"]'),this},s._init=function(t){return this._findElements(t),this._isOpen=e.hasClass(this._contentWrapper,o),this},s._selfPreviewElementFilter=function(t){return this._preview===i.parentBySelector(t,".toggled-block-preview")},s._processSwitcher=function(t){return e.switchClass(this._switcher,t,o),this},s._processPreview=function(t){return this._preview&&(e.switchClass(this._preview,t,"__closed"),n(this._preview,!t,this._selfPreviewElementFilter,this)),this},s._processText=function(t){var e=this._textNodes;if(e.length)for(var n=0,a=e.length;n<a;n++){var i=e[n],o=i._okTextModel||(i._okTextModel=JSON.parse(i.getAttribute("data-toggled-text-model")||"{}"));o&&(i.textContent=t?o.on:o.off)}return this},s._selfContentElementFilter=function(t){return this._content===i.parentBySelector(t,".toggled-block-content")},s._processContent=function(t){return e.switchClass(this._contentWrapper,t,o),n(this._content,t,this._selfContentElementFilter,this),this},s._processRoot=function(t){return this._root&&e.switchClass(this._root,t,o),this},s.toggle=function(){var t=this._isOpen=!this._isOpen;return this._processRoot(t)._processSwitcher(t)._processText(t)._processPreview(t)._processContent(t)},s.switchToggle={tap:function(t){a.allowDefault(t);var e,n=t.target;"LABEL"!==n.tagName||!n.htmlFor||(e=hR.getElementById(n.htmlFor))&&(e.skipToggle=!0),n.skipToggle?n.skipToggle=!1:this.toggle()}},{impl:r,VIEW_NAME:t}}((uR.dz,uR.o),uR.n,(uR.bf,uR.d,uR.s,uR.ah),(uR.mi,uR.mk))||gt),uR.mm=dR.tl3B0ig||(dR.tl3B0ig=(vS=uR.d,yS=uR.ah,bS=uR.bd,CS=uR.n,SS=uR.s,kS=uR.ml,_S="$ok-data-min-h",wS=[],TS={hideControlByContentHeight:function(){var t=this._switcher,e=this.model.pluginData,n=this._contentWrapper.getElementsByClassName(e.container)[0];if(n){var a=parseInt(function(t,e,n){var a=e[_S];{var i;!n&&a||(i=gt.getComputedStyle(t),e[_S]=a=i.maxHeight||i.height)}return a}(n,t,e.disableCache),10),i=this._content.getElementsByClassName(e.item),o=n.getBoundingClientRect().top,r=0,s=0,l=i.length;if(l){for(;r<=a&&l--;)r=Math.max(r,i[l].getBoundingClientRect().bottom);s=r-o}s&&CS.switchClass(t,s<=a,"__js-off-control")}}},vS.toggleBlockSwitchControllerPlugin=SS.create({update:function(){var t=hR.querySelectorAll('[data-view="'+kS.VIEW_NAME+'"]');if(t.length){for(var e=0,n=t.length;e<n;e++){var a,i=yS.getOrMakeBehavior(t[e]),o=i.model&&i.model.pluginData;o&&(a=o.name,TS[a].call(i),(wS[a]||(wS[a]=[])).push(i))}bS.resize.attach(Pq)}},discard:function(){bS.resize.detach(Pq),wS=[]}}),{addPlugin:function(t,e){TS[t]=e}})),uR.mn=dR.a58Nk4w||(dR.a58Nk4w=(IS=uR.d,ES=uR.n,uR.s,uR.er,AS=uR.fd,IS.adCanvas=function(t){var e,n=t.target;ES.hasClass(n,"dsn")?(ES.removeClass(n,"dsn"),414<gt.innerWidth?(ES.removeClass(n,"js-stretch"),e=n.outerHTML,ES.remove(n),AS.show({url:location.href,contentHtml:e,replaceHistory:!0,modifier:"__ad-canvas"})):n.style.height=gt.innerHeight+"px"):ES.hasClass(n.parentNode,"modal")&&(ES.addClass(n.parentNode,"__ad-canvas"),n.style.height="")},gt)),uR.mo=dR.aNUHptg||(dR.aNUHptg=(xS=uR.ah,PS=uR.fg,OS=uR.v,LS=uR.bl,RS=uR.n,NS="js-ajax-click-busy",Oq.prototype={addAjaxHandlerMap:function(t){for(var e in t){var n=t[e];for(var a in n)this.addAjaxHandler(a,e,n[a],n.configurator)}},addAjaxHandler:function(t,e,a,i){var n=this.constructor.prototype,o=n[e];if(void 0===o)n[e]=o={};else if(o.hasOwnProperty(t))throw new Error(e+" handler already exist in context");if(void 0!==o[t])throw new Error(e+" handler already exist in "+t+" gesture");o[t]=function(t,e){var n=a.call(this,t,e);return this._isBusy||!1!==n&&(i&&(this._isBusy=!0,RS.addClass(this.rootNode,NS),i(this)),this.ajaxEnvelopeHandler(t)),n}},_completeCallback:Dq,_super:function(){this.superclass.call(this)}},{addCustomAjaxHandlerMap:function(t,e,n){t.prototype.addAjaxHandlerMap(e,n)},superOf:function(t){return LS(t,Oq)}})),uR.mp=dR.PQQJ9Iw||(dR.PQQJ9Iw=(function(a,t,o,r,s,i,l,c){function e(t,e){this._super(),this.okDataModel=t,this.rootNode=e,this.cardsCounter=0,this.isRrequiredStateUpdate=!0,this.isAjaxLocked=!1,this.nextUrl=u(e)}function u(t){return t.getAttribute("data-next-url")}function n(t,e){var n=this,a=n.okDataModel;a&&!a.portletInstance&&((a.portletInstance=n).cardsBeforePreload=parseInt(a.cardsBeforePreload)||5),n.isRrequiredStateUpdate&&(g(n),n.nextUrl&&(n.ajaxLoadTask=r.request(n.nextUrl,"post").then(function(t){s(t),n.nextUrl=u(n.rootNode),n.setNeedUpdate()}).anyway(function(){f("isUpdated",n),n.lockAjax(!1)})),n.setUpdated());var i=hR.getElementById(e.getAttribute("data-linked-parent-id"));i&&(o.addClass(i,"__closed"),n.cardsCounter--,n.cardsCounter<n.cardsBeforePreload&&n.setNeedUpdate()),n.nextUrl?p(n.cardsCounter,n.cardsBeforePreload)?f("isUpdating",n):0<n.cardsCounter&&p(n.cardsCounter-1,n.cardsBeforePreload)&&f("beforeUpdate",n):n.cardsCounter<=0?f("isEmpty",n):n.cardsCounter-1!==n.cardsBeforePreload&&n.cardsCounter-1!=0||f("beforeEmpty",n)}t.superOf(e),e.prototype.setUpdated=function(){this.isRrequiredStateUpdate=!1},e.prototype.setNeedUpdate=function(){this.isRrequiredStateUpdate=!0},e.prototype.lockAjax=function(t){this.isAjaxLocked=t},e.prototype.addAjaxHandlerMap({acceptCard:{tap:n,configurator:v},hideCard:{tap:n,configurator:v}});var d={isUpdating:function(t){t.isAjaxLocked||(t.ajaxLoadTask.send(),t.setNeedUpdate(),t.lockAjax(!0))},isUpdated:null,isEmpty:function(t){t.isEmpty=!0},beforeUpdate:null,beforeEmpty:null};function h(t){var e=t.getElementsByClassName("dlist_bottom")[0];e?o.removeClass(e,"hidden"):o.addClass(t,"hidden")}function p(t,e){return t===e===0||t<=e}function f(t,e){var n=d[t];n&&n(e)}function g(t){return t.cardsCounter=t.rootNode.getElementsByClassName("pure-item").length}function s(t){var e=t.response;e&&s(e)}function m(t){var e,n,a;t.isEmpty?(e=t.rootNode,(n=i.findParent(e,function(t){return o.hasClass(t,"dlist")}))&&((a=e.getAttribute("data-next-block"))?r.request(a,"post").then(function(t){s(t.response),l.items.added.trigger()},function(t){h(n)}).send():h(n))):g(t)}function v(n){var t=n.proxyConfig;t.selector=".base-button_target.js-ajax-envelope-btn",t.complete=function(){m(n)},t.cancel=function(t){var e=t.target;e&&o.hasClass(e,"js-axb")&&(e.form.okSubmitSender=e,a.allowDefault(t),c.finished.attachOnce(function(t){t&&o.hasClass(t,"friend-request-form")&&m(n)}))}}a.register("FriendsAjaxPortletBehavior",e)}(uR.ah,(uR.dh,uR.mo),uR.n,uR.bm,uR.ck,uR.o,uR.fo,uR.r),gt)),uR.mq=dR.fx1lCQw||(dR.fx1lCQw=(BS=uR.d,DS=uR.ai,MS=uR.g,jS=uR.ee,FS=uR.s,DS.addFuncHandler("vk-portlet-friends-button",{tap:function(t){var e,n,a;HS&&(e=HS,(n={}).client_id=qS,n.display="mobile",n.redirect_uri=US,n.scope="friends",n.response_type="code",n.v="response_type",e=MS.insertParams(e,n),VS?((a=hR.createElement("iframe")).style.positon="absolute",a.style.top="0",a.style.left="0",a.style.bottom="0",a.style.right="0",a.style.width="100%",a.style.height="100%",a.src=e,hR.getElementById("vkPortletContent").appendChild(a)):jS.change(e))}}),BS.vkFriends=FS.create({update:function(t){var e;qS=(e=t).appId,HS=e.apiUri,US=e.redirectUri,VS=e.useIframe}}),gt)),uR.mr=dR.lPDUALA||(dR.lPDUALA=(QS=uR.d,WS=uR.s,zS=uR.hp,XS=uR.cs,uR.i,GS=uR.n,JS=uR.bd,YS=uR.ai,KS=uR.x,ZS=uR.bb,$S=uR.af,tk=uR.o,ek=uR.be,fk=pk=0,mk=pR,vk={isScrollActionShown:gk=!1,isFullHeightApplied:!1},yk=ZS(function(t){lk=ck,ck=gt.innerHeight,uk=JS.calc().width,rk=vk.isScrollActionShown?ok.offsetHeight:0,.2<Math.abs(ck-lk)/ck&&qq()},150),YS.addFuncHandler("accept-cookie-policy",{tap:function(t){hR.cookie="_acceptCP=1; path=/; expires=Tue, 19 Jan 2038 03:14:07 UTC; domain=.ok.ru",logClientEvent("cookie.policy.accepted");var e=tk.parentBySelector(t.target,".cookie-policy");e.parentNode.removeChild(e)}}),QS.loginPageService=WS.create({init:function(t){t.spaceForFeed=t.spaceForFeed||.7,t.spaceForScrollAction=t.spaceForScrollAction||.5,hk=t,Math.max(mk.scrollTop,hR.body.scrollTop)<10&&("function"==typeof gt.requestAnimationFrame?requestAnimationFrame(Uq):Uq()),gk=$S.ie||$S.winphone,nk=hR.getElementById("head"),ak=hR.getElementById("bottom-navbar"),ik=hR.getElementsByClassName("login-page")[0],ok=hR.getElementsByClassName("js-login-scroller-block")[0],sk=hR.getElementsByClassName("assist-feeds")[0],dk=KS.get("isPositionFixed"),ck=lk=gt.innerHeight,uk=JS.calc().width,vk.isScrollActionShown=!!ok,rk=ok&&ok.offsetHeight||0,dk&&(pk=nk.offsetHeight),ak&&(fk=ak.offsetHeight),(nk=hR.getElementById("head"))&&(GS.addClass(nk,"logo-anim"),GS.addClass(nk,"__loading")),qq(),vk.isScrollActionShown&&GS.addClass(ok,"__active"),gt.addEventListener("resize",yk),YS.addFuncHandler("login_jumpToFeeds",{tap:Hq})},update:function(t){},discard:function(t){gt.removeEventListener("resize",yk)}}),gt)),uR.ms=dR.pqseNzg||(dR.pqseNzg=(bk=uR.d,Ck=uR.s,Sk=uR.n,kk=uR.e,_k=uR.ah,wk=uR.jv,Tk=uR.is,Ik=uR.r,Ek=uR.ex,Ak=uR.o,uR.ip,xk=uR.bd,Pk=uR.be,Ok=uR.an,Lk=uR.a,Rk="__focus-on",Nk="__focus-off",Bk="__calendar-on",Dk="__calendar-off",Mk="__layer-on",jk="__picked",Fk="__default",qk="__decor",Hk="__size-",Uk=0,Vk=Ek.newInstance(),Xk=[Qk={className:"__picker-opened"},Wk={className:"__picker-closed"},zk={className:"__picker-disabled"}],Qq.prototype={openLayer:{tap:function(t){this.doOpenLayer()}},openLayerWithUploader:{tap:function(t){_k.allowDefault(t)}},doOpenLayerWithUploader:function(t){Ak.isChildOf(t,this.root)&&this.doOpenLayer()},doOpenLayer:function(){Sk.addClass(hR.body,"ofh"),Sk.addClass(this.root,Mk),Vk.lock();var t=this.root.getElementsByClassName("posting-topic_text_area")[0];t&&t.focus()}},Wq.prototype={touchForm:{tap:function(t,e){Sk.hasClass(this.root,Nk)&&Sk.hasClass(e,"js-photo-action")&&Lk.log("postingTopicFormOld",["status","photo"]),zq(this),Gq(this,!0),_k.allowDefault(t)},input:function(t){zq(this),_k.allowDefault(t),this.textActivated||(Sk.addClass(this.root,"__text-activated"),this.textActivated=!0)}},cancelForm:{tap:function(t){Kq(this)}},openPicker:{tap:function(t){!this.opened&&this.dom.statMDecor&&(this.dom.statMDecor.value="on"),zq(this),Jq(this,Qk),Gq(this,!0)}},closePicker:{tap:function(t){Xq(this,t.target),zq(this),Jq(this,Wk)}},pickColor:{tap:function(t){Xq(this,t.target),zq(this)}},toggleCalendar:{tap:function(t){Gq(this,!0),this.calendarOpened=!this.calendarOpened,$q(this.root,this.calendarOpened,Bk,Dk),this.dom.toStatusCont&&Sk.switchClass(this.dom.toStatusCont,this.calendarOpened,"hidden"),_k.allowDefault(t)}},openToggleCatalog:{tap:function(t){var e=Sk.hasClass(this.dom.decorCatalog,"hidden");Zq(this,e),e&&this.updateCatalogMaxHeight()}},closeCatalog:{tap:function(t){Zq(this,!1)}},updateCatalogMaxHeight:function(){var t,e,n=this.dom;!n.decLists||(t=xk.calc()).height>=t.width&&(e=t.height-Pk.toolbar.height-n.btnsExt.offsetTop-n.btnsExt.offsetHeight+n.decLists.offsetHeight,n.decLists.style.maxHeight=100<=e?e+"px":"none")},disablePicker:function(){Yq(this,!0)},enablePicker:function(){Yq(this,!1)},closeForm:function(){Kq(this)},photosUploadLimitReached:function(){this.dom.photoUp&&Sk.addClass(this.dom.photoUp,"hidden")},photosUploadLimitCleared:function(){this.dom.photoUp&&Sk.removeClass(this.dom.photoUp,"hidden")}},bk.postingTopicFocus=Ck.create({init:function(){_k.register("postingTopic",Wq),_k.register("postingLayer",Qq)},update:function(t){var e;!t.focusFormOnLoad||(e=hR.getElementsByClassName("posting-topic_text_area")[0])&&e.focus()}}),gt)),uR.mt=dR.pz8SndA||(dR.pz8SndA=(uR.d,Gk=uR.ah,Jk=uR.ee,Yk=mt,tH.prototype={pickPhotoAndOpenForm:{change:function(t){var e,n=t.target;(Yk=n.files)&&Yk.length&&(e=n.getAttribute("data-link"),Jk.change(e))}}},eH.isInstant=!0,Gk.register("postingPhotoActivator",tH),Gk.register("postingPhotoActivatorHook",eH),gt)),uR.mu=dR.pPbo8w||(dR.pPbo8w=(Kk=uR.d,Zk=uR.ck,$k=uR.bm,t_=uR.fw,e_=uR.n,n_=uR.ee,Kk.pollForEnvelopes=function(t){t.redirectUri?(e_.removeClass(t.target,"js-call"),n_.change(t.redirectUri)):t.uri&&(e_.removeClass(t.target,"js-call"),setTimeout(function(){$k.request(t.uri,"get").then(function(){Zk(this.response()),t.initStub&&t_.recalculateStubs()}).send()},t.timeout))},gt)),uR.mv=dR.pnNrk1Q||(dR.pnNrk1Q=(uR.d,uR.s,a_=uR.ah,i_=uR.jv,o_=uR.ae,r_=uR.ep,s_=uR.o,l_=uR.al,c_=uR.n,u_="arrow-active",aH.prototype={slideImage:{tap:function(t){var e=s_.parentBySelector(t.target,"a");e&&r_.goPhoto(e)},touchStart:function(t){a_.allowDefault(t),this.currentStartTouchX=o_.touchX(t),this.currentScrollLeft=this.scrollContainer.scrollLeft},touchMove:function(t){a_.allowDefault(t);var e=this.imageWidth,n=o_.touchX(t)-this.currentStartTouchX;Math.abs(n)>e&&(n=0<n?e:-e),this.scrollContainer.scrollLeft=this.currentScrollLeft-n},touchEnd:function(t){a_.allowDefault(t);var e=o_.touchX(t)-this.currentStartTouchX;e<-50&&this.currentImageIndex<this.imagesCount-1?this.nextImage(this.currentScrollLeft,!0):50<e&&0<this.currentImageIndex?this.nextImage(this.currentScrollLeft,!1):nH(this.scrollContainer,this.currentScrollLeft)}},arrowLeft:{tap:function(t){0<this.currentImageIndex&&this.nextImage(this.scrollContainer.scrollLeft,!1)}},arrowRight:{tap:function(t){this.currentImageIndex<this.imagesCount-1&&this.nextImage(this.scrollContainer.scrollLeft,!0)}},nextImage:function(t,e){this.scrollToImage(t,e?this.currentImageIndex+1:this.currentImageIndex-1)},scrollToImage:function(t,e){nH(this.scrollContainer,t+this.imageWidth*(e-this.currentImageIndex)),this.currentImageIndex=e,this.dom.currentPhotoIndex&&(this.dom.currentPhotoIndex.innerHTML=e+1),this.dom.scrollArrowLeft&&(c_.switchClass(this.dom.scrollArrowLeft,0<this.currentImageIndex,u_),c_.switchClass(this.dom.scrollArrowRight,this.currentImageIndex<this.imagesCount-1,u_))}},a_.register("productImageSlider",aH),gt)),uR.mw=dR.mSkNJTQ||(dR.mSkNJTQ=function(t){"use strict";var e={};function n(){return(0,t.create)()}return Object.defineProperty(e,"__esModule",{value:!0}),e.mallEventBuses=void 0,e.mallEventBuses={productCard:{selectedProductParamsChanged:n(),applyPromoCode:n(),removePromoCode:n()},checkout:{addressUpdated:n(),initAddressRequest:n(),addressIdUpdated:n(),promoCodeRevoked:n()},basket:{applyPromoCode:n(),removePromoCode:n()}},e}(uR.p)||gt),uR.mx=dR.mftjbUA||(dR.mftjbUA=(uR.d,uR.s,d_=uR.ah,h_=uR.jv,p_=uR.o,f_=uR.n,g_=uR.mw,m_=g_.mallEventBuses,v_=m_.productCard.selectedProductParamsChanged,y_=m_.productCard.applyPromoCode,b_=m_.productCard.removePromoCode,iH.prototype={pickVariant:{tap:function(t){var n=this,e=n.filterIds.map(function(t){var e=n.root.querySelector('.js-mall-filter-value[name="filter_'+t+'"]:checked');return[t,e?e.getAttribute("data-value-id")||e.value:"empty"]});this.variantSid=e.reduce(function(t,e,n){var a=e[0]+"_"+e[1];return 0===n?a:t+"_"+a},"");var a=this.dom,i=this.variantSidToData;this.reactivateBasketActions();var o=i.token[this.variantSid],r=i.varIds[this.variantSid];o?(cH(a.buyButton,!1),cH(a.addBasketButton,!1),a.variantTokenField.value=o,a.variantIdField.value=r):(cH(a.buyButton,!0),cH(a.addBasketButton,!0),a.variantTokenField.value=null,a.variantIdField.value=null);var s=i.price[this.variantSid];a.price&&(a.price.innerHTML=s||(this.noVariantText||(this.noVariantText=this.mallCard.getAttribute("data-text-no-variant")))),a.mallButtonPriceId&&(f_.removeClass(a.mallButtonSuffix,"hidden"),a.mallButtonPriceId.innerHTML=s||"");var l=i["price-coins"][this.variantSid];this.currentPriceCoins=parseInt(l,10),dH(this),uH(this);var c=i["strike-price"][this.variantSid];sH(a.pricePrevW,!c),lH(a.pricePrev,c),sH(a.ssPricePrevW,!c),lH(a.ssPricePrev,c);var u=i.sale[this.variantSid];sH(a.salePriceW,!u),lH(a.salePrice,u);var d,h=i["photo-index"][this.variantSid];null==h||(d=this.imageScrollComponent)&&d_.getOrMakeBehavior(d).scrollToImage(this.scrollContainer.scrollLeft,h),d_.allowDefault(t)}},pickBoundedCard:{tap:function(t){var e,n,a=this.dom,i=a.jsPaymentBound,o=p_.parentBySelector(t.target,".payment-bound_item");i&&o&&(e=o.firstChild.cloneNode(!0),f_.removeClass(e,"hidden"),i.parentNode.replaceChild(e,i),(a.jsPaymentBound=e).setAttribute("data-id","jsPaymentBound"),this.activatePaymentElement(e),n=o.getAttribute("data-card-id"),a.boundedCardIdField.value=n,a.changeButton&&d_.getOrMakeBehavior(a.changeButton).toggleOff())}},pickBelowCard:{tap:function(t){var e=this.dom,n=p_.parentBySelector(t.target,".payment-bound_card");this.activatePaymentElement(n);var a=n.getAttribute("data-card-id");e.boundedCardIdField.value=a}},reactivateBasketActions:function(){var t,e=hR.getElementById("addToBasketId");e&&(t=hR.getElementById("goToBasketId"),f_.removeClass(e,"hidden"),f_.addClass(t,"hidden"))},activatePaymentElement:function(t){var e=this.paymentEl;e&&e!=t&&(f_.removeClass(e,"__active"),f_.addClass(t,"__active"),this.paymentEl=t)},itemDecrement:{tap:function(t){oH(this,!1)}},itemIncrement:{tap:function(t){oH(this,!0)}},applyPromoCode:{tap:function(t){var e;cH(t.target,!0),e=rH(this),y_.trigger(e)}},removePromoCode:{tap:function(t){var e;cH(t.target,!0),e=rH(this),b_.trigger(e)}}},iH.isInstant=!0,d_.register("mallProduct",iH),gt)),uR.my=dR.mCyCiPw||(dR.mCyCiPw=function(){"use strict";var t,e={};return Object.defineProperty(e,"__esModule",{value:!0}),e.MallPromoCodeStatus=void 0,(t=e.MallPromoCodeStatus||(e.MallPromoCodeStatus={})).APPLIED="APPLIED",t.NOT_APPLIED="NOT_APPLIED",t.ERROR="ERROR",e}()||gt),uR.mz=dR.mdTtCnw||(dR.mdTtCnw=function(t,c,u,o,d,h,n){"use strict";var e={};Object.defineProperty(e,"__esModule",{value:!0});var p,f,g={ERROR_PART:".js-mall-actual-delivery-error",CONTENT_PART:".js-mall-actual-delivery-content",LOADER_PART:".js-mall-actual-delivery-loader",PROMO_CODE_INPUT_ATTR:"data-promo-code-field-class",PROMO_CODE_TOGGLE_ID_ATTR:"data-promo-code-toggle-id",PROMO_CODE_INPUT:mt,PROMO_CODE_TOGGLE_ID:mt},m=0;function v(t,e){t&&(t.innerHTML=e)}function y(t,e){t&&n.switchClass(t,!e,"hidden")}function r(t){var e=t.sectionName,n=t.productId,r=t.variantId,a=t.quantity,i=function(){var t=p.querySelector(g.PROMO_CODE_TOGGLE_ID);if(t)return t.checked?"checked":null;return"checked"}(),o=b(),s={sectionName:e,promoCode:f,promoCodeToggleState:i,promoCodeInputValue:o,items:[{productId:n,variantId:r,quantity:a}]};y(p.querySelector(g.LOADER_PART),!0);var l=++m;c.run("mall.product-card.delivery",s).then(function(t){if(l!==m)return;f||t.promoCodeStatus===d.MallPromoCodeStatus.APPLIED||(f="");if((0,u.default)(t.ajaxEnvelopes),!p)return;y(p.querySelector(g.ERROR_PART),!1),y(p.querySelector(g.LOADER_PART),!1);var e=h.byDataId(hR),n=(t.variantPriceInfoMap||{})[r];{var a,i,o;n&&(a=n.variantPriceValue,v(e.price,a),(i=n.priceWithoutDiscount)?(v(e.pricePrev,i),y(e.pricePrevW,!0)):y(e.pricePrevW,!1),(o=n.variantDiscountValue)?(v(e.salePrice,o),y(e.salePriceW,!0)):y(e.salePriceW,!1))}},function(){if(l!==m)return;if(!p)return;var t=p.querySelector(g.CONTENT_PART),e=p.querySelector(g.ERROR_PART),n=p.querySelector(g.LOADER_PART);y(e,!0),y(t,!1),y(n,!1),f=""})}function b(){var t=p.querySelector(g.PROMO_CODE_INPUT);return t?t.value:null}function s(t){r(t)}function l(t){var e=b();null!==e&&(f=e,r(t))}function C(t){f="",r(t)}var a={name:"mallActualDelivery",update:function(t){var e,n,a,i;(p=t.target)&&(o.mallEventBuses.productCard.selectedProductParamsChanged.attach(s),o.mallEventBuses.productCard.applyPromoCode.attach(l),o.mallEventBuses.productCard.removePromoCode.attach(C),e=p.getAttribute("data-section-name"),n=p.getAttribute("data-product-id"),a=p.getAttribute("data-variant-id"),i=parseInt(p.getAttribute("data-variant-quantity"),10)||1,g.PROMO_CODE_INPUT="."+p.getAttribute(g.PROMO_CODE_INPUT_ATTR),g.PROMO_CODE_TOGGLE_ID="#"+p.getAttribute(g.PROMO_CODE_TOGGLE_ID_ATTR),r({sectionName:e,productId:n,variantId:a,quantity:i}))},discard:function(){p=mt,o.mallEventBuses.productCard.selectedProductParamsChanged.detach(s),o.mallEventBuses.productCard.applyPromoCode.detach(l),o.mallEventBuses.productCard.removePromoCode.detach(C),f=""}};return(0,t.create)(a),e}(uR.s,uR.es,uR.ck,uR.mw,uR.my,uR.jv,uR.n)||gt),uR.na=dR.mJ0E6nQ||(dR.mJ0E6nQ=(C_=uR.d,S_=uR.s,k_=uR.bm,__=uR.jv,w_=uR.eo,T_=uR.es,I_=uR.g,E_=uR.h,O_="",L_=!1,C_.initMallDmrListener=S_.create({update:function(t){gt.addEventListener("message",hH),O_=t.expectedOrigin,(L_=t.detectDmrStub)&&(A_=t.dmrStubOrigin,x_=t.dmrStubOrderId,P_=t.dmrStubResultSuccess),w_.statePopping.attach(pH)},discard:function(){gt.removeEventListener("message",hH),w_.statePopping.detach(pH)}}),gt)),uR.nb=dR.mFxdIxQ||(dR.mFxdIxQ=(R_=uR.ah,N_=uR.n,B_=uR.jv,fH.prototype={pickRating:{tap:function(t){var e=this.dom;R_.allowDefault(t);var n=parseInt(t.target.value,10)||0;N_.switchClass(e.postToFeed,n<this.minRatingToFeed,"hidden"),e.postToSupport&&N_.switchClass(e.postToSupport,n>this.maxRatingToSupport,"hidden"),e.allReasons&&N_.switchClass(e.allReasons,n>this.maxRatingToSupport,"hidden")}}},R_.register("mallReviewForm",fH),gt)),uR.nc=dR.mk2hkDw||(dR.mk2hkDw=(D_=uR.d,M_=uR.n,D_.mallUpdateBubbles=function(t){var e=t.target,n=hR.querySelector("#bbl-sidebar-mall .ic_tx"),a=n?n.textContent:"0";M_.hasClass(e,"js-mall-revert")?M_.switchClass(e,"0"!==a,"hidden"):(e.getElementsByClassName("ic_tx")[0].textContent=a,M_.switchClass(e,"0"===a,"hidden"))},gt)),uR.nd=dR.sCfClJA||(dR.sCfClJA={SearchOptions:{CLEAN_INPUT:1,REQ_DEBOUNCE:2,IN_PLACE:4,KEEP_INPUT_ACTIVE:8,PRESERVE_SUGGEST:16,CLEAN_SUGGEST:32},searchProvider:null}),uR.ne=dR.s8FdBaA||(dR.s8FdBaA=(j_=uR.ah,F_=uR.o,q_=uR.n,H_=uR.p,U_=uR.ch,V_=uR.i,Q_=uR.nd,W_="SuggestSearchView",z_="__loading",X_=H_.create(),G_=Q_.SearchOptions,gH.prototype={constructor:gH,finishInitiation:function(t){return this.initTask.resolveIfNotDone(t),this},bindController:function(t){return this.searchController&&this.searchController.waitingResults.detach(mH),(this.searchController=t).waitingResults.attach(mH,this),this},createView:function(){this.selectedSuggest=null,this.viewOpened.trigger({open:this.viewOpen=!0,root:this.layer}),this.createViewPublic()},createViewPublic:function(){q_.removeClass(this.layer,"hidden")},destroyView:function(){this.viewOpened.trigger({open:this.viewOpen=!1,root:this.layer}),this.destroyViewPublic()},destroyViewPublic:function(){q_.addClass(this.layer,"hidden")},isViewOpen:function(){return this.viewOpen},renderSearchResult:function(t){var e=this.searchResults;q_.clear(e),e.appendChild(t)},decorateOnResultEvent:function(t){return t},selectSearchResults:{tap:function(t,e){var n,a,i=this.searchController,o=F_.findParent(t.target,function(t){return q_.hasClass(t,"suggest-search_item")});o&&(n=i.activeInput,a=o._okSuggestData,X_.trigger(this.decorateOnResultEvent({suggestField:n,target:o,payload:a,appendData:function(t){this.target._okSuggestData=a=t}})),a&&(this.selectedSuggest=n.value=a.data),i.hasOptions(G_.KEEP_INPUT_ACTIVE)?this.destroyView():i.closeSearch())}}},j_.register(W_,gH),{constructor:gH,onResultSelected:X_,VIEW_NAME:W_})),uR.nf=dR.saeFIKw||(dR.saeFIKw=function(s,l,t,e,n,a,c,i,o,u){var r,d="SuggestSearchLayerView",h="suggest-search-layer",p=n.create(),f={contentNode:null,toolbar:null};function g(t,e){i.constructor.call(this,t,e);var n=this;this.searchField=hR.getElementById("suggest-search-input"),this.searchResults=hR.getElementById("suggest-search-content"),this.form=this.searchField.form,this.scrollLocker=a.newInstance(),this.searchController,this.scrollTop,this.toolbarOffset,this.form.addEventListener("submit",function(t){t.preventDefault(),n.searchController&&n.searchController.closeSearch()},!0),this.initTask.then(function(t){t.createHistoryPage("suggestSearchLayer")})}o(g,i.constructor);var m=g.prototype;function v(t){var e=this.layer.style,n=c.calc();e.height=n.height-this.toolbarOffset+"px"}return m.createViewPublic=function(t){var e=f.toolbar;this.toolbarOffset=e?e.getBoundingClientRect().bottom:0,this.scrollTop=c.calc().scrollTop,this.lastScrollData=c.recordScroll(),this.scrollLocker.lock();var n=f.contentNode,a=this.layer,i=this.searchField,o=this.searchController.activeInput;{var r;o?(r=o.value,v.call(this),c.changed.attach(v,this),i.value=r,i.placeholder=o.placeholder,n.parentNode.insertBefore(a,n),l.addClass(n,"hidden"),l.addClass(a,"__open"),s.iOS?setTimeout(function(){i.focus(),u.setToEnd(i)},10):i.focus()):this.searchController.closeSearch()}},m.destroyViewPublic=function(){this.delay=mt;var t=this,e=this.layer;l.removeClass(e,"__open"),l.removeClass(f.contentNode,"hidden"),hR.body.appendChild(e),this.searchField.placeholder=this.searchField.getAttribute("data-placeholder"),this.scrollLocker.unlock(),c.resetScroll(this.lastScrollData),c.changed.detach(v,this),p.trigger({searchField:this.searchField,suggestField:this.searchController.activeInput}),setTimeout(function(){l.clear(t.searchResults)},20)},m.decorateOnResultEvent=function(t){return t.searchField=this.searchField,t},m.closeInteraction={tap:function(){var t=this.searchController;t.onCloseSearch.tap.call(t)}},m.inputInteraction={input:function(t,e){var n=this.searchController;n.onStartSearch.input.call(n,t,e)},keyUp:function(t,e){var n=this.searchController;n.onStartSearch.keyUp.call(n,t,e)}},s.iOS&&(m.selectSearchResults={},Object.assign(m.selectSearchResults,m.superclass.prototype.selectSearchResults),m.selectSearchResults.touchMove=function(t){e.allowDefault(t),this.searchField.blur()}),e.register(d,g),t.create({name:"suggestSearchLayer",update:function(){f.contentNode=hR.getElementById("content"),f.toolbar=hR.getElementById("head")}}),{INSTANCE:{get:function(t){return r=r||e.getOrMakeBehavior(hR.getElementById(h))}},onLayerClosed:p,LAYER_ID:h,VIEW_NAME:d}}(uR.af,uR.n,uR.s,uR.ah,uR.p,uR.ex,uR.bd,uR.ne,uR.bl,uR.jy)||gt),uR.ng=dR.aYtAFhA||(dR.aYtAFhA=(uR.d,J_=uR.es,Y_=uR.ah,uR.nf,K_=uR.ne,yH.prototype={lookup:function(t){var e,n,a=this.form,i=a.field_zipcode;i&&(e=vH(a.field_cityCustomName),n=vH(a.field_adrFL),e&&n&&J_.run("zipcode.get",{city:e,address:n}).then(function(t){var e=t.code;e&&(i.value=e)},function(){i.value=""}),t&&Y_.allowDefault(t))},find:{blur:bH,change:bH}},Y_.register("autoZip",yH),K_.onResultSelected.attach(function(t){var e=Y_.resolve(t.suggestField,"autoZip");e&&e.lookup(null)}),gt)),uR.nh=dR.uON2K4Q||(dR.uON2K4Q=(Z_=uR.d,$_=uR.s,tw=uR.n,uR.e,ew=uR.ah,nw=uR.jm,aw="photowall-upload-form",CH.prototype={uploadPhoto:function(t,e){var n=nw.upload(t,null,e).then(SH,kH,this);return this.currentUploadTask=n}},ew.register("photowallCandidateUpload",CH),Z_.initPhotowallEntry=$_.create({init:function(t){},update:function(t){},discard:function(t){}}),gt)),uR.ni=dR.cMVcvZw||(dR.cMVcvZw=(uR.n,uR.bd,uR.ah.register("countdownTimer",TH),TH.isInstant=!0,TH.prototype={redrawTimerValue:function(t,e){var n,a,i,o,r,s,l=(n=t-new Date,a=Math.floor(n/1e3%60),i=Math.floor(n/1e3/60%60),o=Math.floor(n/36e5%24),r=Math.floor(n/864e5),{total:n,days:r,hours:o,minutes:i,seconds:a});return e.innerHTML=function(t){return 10<=t?t+":":0<t?"0"+t+":":""}((s=l).days)+IH(s.hours)+":"+IH(s.minutes)+":"+IH(s.seconds),l},animateCountdown:function(t,e){var n=this,a=setInterval(function(){n.redrawTimerValue(e,t).total<=0&&clearInterval(a)},1e3)}},gt)),uR.nj=dR.sxz1LgQ||(dR.sxz1LgQ=(iw=uR.d,ow=uR.s,rw=uR.ah,sw=uR.n,lw=uR.al,cw=uR.aq,uw=uR.ap,dw=uR.ai,hw="compactGiftSendingForm",pw="compactGiftSendingFriendIdField",gw=!(fw=1500),mw=cw.create().translateX(-100,"%"),vw=cw.create().translateX(0),EH.prototype={startSendingProcess:function(){var t,e;gw||(gw=!0,t=this,sw.addClass(this._rejection,"__show"),e=this._rejectionLoaderLine,mw.applyTo(e),e.style[uw.transition+"Duration"]=fw+"ms",lw.run(function(){lw.run(function(){vw.applyTo(e)})}),this._sendingTimeoutId=setTimeout(function(){t.sendGift()},fw))},sendGift:function(){var t=this._root.getAttribute("data-friend-id");hR.getElementById(pw).value=t;var e=hR.getElementById(hw);dw.submitForm(e)},rejectSending:function(){gw=!1,clearTimeout(this._sendingTimeoutId),sw.removeClass(this._rejection,"__show")},send:{tap:function(){this.startSendingProcess()}},reject:{tap:function(){this.rejectSending()}}},iw.sendGiftByOneClick=ow.create({update:function(t){gw=!1,hw=t.formId||"compactGiftSendingForm",pw=t.friendFieldId||"compactGiftSendingFriendIdField",fw=t.rejectionShowingTimeout||1500},init:function(){rw.register("sendGiftByOneClick",EH)}}),gt)),uR.nk=dR.mTcpkew||(dR.mTcpkew=(yw=Array.prototype.join,{parseStringForMask:function(t,o){var r=[],s=0,l="";return{result:t.replace(/./g,function(t,e){for(var n=0,a=o.length;n<a;n++){var i=o[n];if(t.match(i.regexp)&&(i.pos===mt||i.pos===e))return s+=i.symbolLength,0<i.type?r.push(t):l+=t,t}return""}),resultWithoutSpecial:l,symbolsLength:s,specialSymbols:r}},joinMaskFromArgs:function(t){return t=t||" ",function(){return yw.call(arguments,t)}},createEchoInput:function(t,e){var n=hR.createElement("INPUT");return n.className=t.className+" input-mask-echo",n.disabled=!0,n.type=e,t.parentNode.insertBefore(n,t),n},DeleteMode:{DEFAULT:mt,FORWARD:"forward",BACKWARD:"backward"},InputTypes:{TELEPHONE:"tel",TEXT:"text"},NON_DIGIT_REG:/[\D]+/g,WILDCARD:"x",NO_LIMITS_WILDCARD:"&",_2X:"xx",_3X:"xxx",_4X:"xxxx",_5X:"xxxxx",_6X:"xxxxxx"})),uR.nl=dR.mzMp8Ig||(dR.mzMp8Ig=(uR.fe,uR.m,bw=uR.p,Cw=uR.nk,Sw=/./gm,kw=Cw.WILDCARD,_w=Cw.NO_LIMITS_WILDCARD,ww=new RegExp(kw+"{1,3}","gi"),Tw=new RegExp(_w,"g"),Iw=Cw.parseStringForMask,PH.prototype={_inputController:function(t){var e=this.maskData,n=e.allowedRegexTokens,a=e.mask,i=e.prefix||"",o=t.carretPlace,r=t.sourceText,s=r.length,l=t.event,c=l&&l.data,u=i+a,d=r.substring(o),h=Math.max(i.length,parseInt(e.fixedPart,10)),p=this.maskingResult||{};return c&&""===Iw(c,n).result?(this.maskingResult=xH(p.value||"",Math.max(o-1,0)),!1):!e.isMaskUpdate&&0<h&&null!==o&&o<=h?!e.isImmutable&&o<h?(Object.assign(this.maskData,{prefix:"",fixedPart:0,mask:_w,isDynamic:!0,isWaitsMask:!0,pLength:mt}),!0):(this.maskingResult=xH(o!==h&&this.maskingResult&&this.maskingResult.value||u.substring(0,h)+d,h),!1):(!e.isMaskUpdate&&!e.isImmutable&&!e.isDynamic&&u.length<s&&Object.assign(e,{mask:_w,isDynamic:!0,isWaitsMask:!0}),!0)},setField:function(t){this.field=t},setFieldValue:function(){this.field.value=this.maskingResult.value},setMaskData:function(t){var e=t.mask;return t.prefix=t.prefix||"",t.fixedPart=t.fixedPart||0,t.isImmutable=t.isImmutable||!1,t.isWaitsMask=t.isWaitsMask||!1,t.isDynamic=e&&-1<e.indexOf(_w),this.maskData=t,this},mergeIntoMaskData:function(t){return Object.assign(this.maskData,t),this},setImmutable:function(t){return this.maskData.isImmutable=!!t,this},setDynamic:function(){var t=this.maskData;return t.mask=_w,t.isDynamic=!0,this},setRequireMask:function(){return this.maskData.isWaitsMask=!0,this},setEchoInputValue:function(t){var e,n,a,i,o,r;e=this.field,n=t,a=this.maskData,o=e&&e.value||"",r="",a&&(i=a.mask||"",r=(r+=(a.prefix||"")+(i.replace(Tw,"")||"")).trim().slice(o.length)),n.value=o+r},setDefaultMaskData:function(t){return t.mask=_w,t.prefix?t.fixedPart=t.prefix.length:t.isWaitsMask=!0,t.isDynamic=!0,t.isImmutable=!1,Object.assign(this.maskData,t),this},moveCarret:function(){var t,e,n;t=this.field,e=this.maskingResult,n=e.carretPlace,t.setSelectionRange(n,n)},getMaskData:function(){return this.maskData},getMaskingResult:function(t,e,n,a){return this.maskingResult=AH(t,this.maskData,e||this.field.selectionStart,n,a)},applyMask:function(t){this._inputController(t)&&(this.getMaskingResult(t.sourceText,t.carretPlace,t.deleteMode,t.input),this.maskData.isMaskUpdate=!1),this.setFieldValue(),t.leaveFocus||this.moveCarret(),this.events.maskApplied.trigger(this.maskingResult)}},{MaskDecorator:PH})),uR.nm=dR.clKAqaA||(dR.clKAqaA=(Ew=uR.ah,Aw=uR.fb,OH.prototype={select:{init:LH,change:LH}},Ew.register("countrySuggestSearch",OH),gt)),uR.nn=dR.AuSN7Q||(dR.AuSN7Q=(xw=uR.ah,Pw=uR.nl,Ow=uR.nk.DeleteMode,RH.prototype={constructor:RH,getAllowedSymbols:NH,createEchoInput:NH,getPossiblyMaskData:NH,extractMaskDecorator:NH,mask:{input:function(t,e,n){var a,i,o=e.value,r=this.extractMaskDecorator(t,e,n);r&&((a=r.mask)||(a=r.mask=new Pw.MaskDecorator(e),r.echo=this.createEchoInput(e)),""===o?a.setMaskData({allowedRegexTokens:this.getAllowedSymbols()}).setImmutable(!1).setDynamic().setRequireMask():!a.getMaskData().isWaitsMask||(i=this.getPossiblyMaskData(o))&&(a.setMaskData(Object.assign({},i)),a.mergeIntoMaskData({allowedRegexTokens:this.getAllowedSymbols(),isMaskUpdate:!0}).setImmutable(!1)),a.getMaskData().unsettled||(a.applyMask({event:t,sourceText:o,deleteMode:this.deleteMode,input:e,carretPlace:e.selectionStart}),a.setEchoInputValue(r.echo||(r.echo=this.createEchoInput(e)))))},keyDown:function(t){xw.allowDefault(t),this.deleteMode=Ow.DEFAULT;var e=t.key;(e?"Delete"===e:46===t.keyCode)?this.deleteMode=Ow.FORWARD:(e?"Backspace"===e:8===t.keyCode)&&(this.deleteMode=Ow.BACKWARD)}}},{construct:RH})),uR.no=dR.suKXOyQ||(dR.suKXOyQ=("function"!=typeof(Lw=String.prototype).startsWith&&(Lw.startsWith=function(t,e){return this.indexOf(t,e=e||0)===e}),gt)),uR.np=dR.RbbsAiA||(dR.RbbsAiA=(BH.prototype={setSpace:function(t){return this.symbolLength=t,this},setType:function(t){return this.type=t,this}},{instance:BH,typesList:{REGULAR:0,SPECIAL:1}})),uR.nq=dR.pg1XKDw||(dR.pg1XKDw=(uR.no,Rw=uR.np,Nw=uR.nk,Bw=Rw.instance,Dw=[new Bw(/\d/),new Bw(/^\+/,0).setSpace(0).setType(Rw.typesList.SPECIAL)],Mw=Nw.WILDCARD,jw=Nw._2X,Fw=Nw._3X,qw=Nw._4X,Hw=Nw.joinMaskFromArgs("-"),Uw={m10:[{mask:Nw.joinMaskFromArgs(" ")(Fw,Hw(Fw,qw))}],m9:[{mask:Hw(Fw,Fw,Fw)}],m8:[{mask:Hw(Fw,Fw,jw)}],m7:[{mask:Hw(Fw,jw,jw)}],m6:[{mask:Hw(Fw,Fw)}],m5:[{mask:Hw(Mw,jw,jw)}]},Vw={ru:function(t,e,n,a){var i=t.symbolsLength;return a&&10===i?e[2]:11===i?e[function(t,e){for(var n=0,a=e.length;n<a;n++){var i=e[n];if(t.startsWith(i))return n}return-1}(t.result,n)]:void 0}},{defaultShortMasks:Uw,loc2PrefixesMapper:function(t){var e={};for(var n in t)if(t.hasOwnProperty(n)){for(var a=t[n],i=[],o=0,r=a.length;o<r;o++){var s=a[o].prefix;s&&i.push(Nw.parseStringForMask(s,Dw).result)}e[n]=i}return e},getMaskByLocale:DH,getPossiblyMaskData:function(t,e,n,a){var i=t.masksJson,o=t.loc2PrefixesMap,r=Nw.parseStringForMask(e,Dw),s=r.result,l=e.length,c=r.symbolsLength,u="+"===r.specialSymbols[0];if(n){var d=i[n];if(d){var h=DH(r,{localMasks:d,localPrefixes:o[n],strategy:Vw[n],forceLocal:a});if(h||a)return h||d[0]}if(a)return!1}for(var p in o){var f,g=i[p],m=o[p],v=Vw[p];if(v&&(f=DH(r,{localMasks:g,localPrefixes:m,strategy:v})))return f;if(u)for(var y=0,b=g.length;y<b;y++){var C=g[y];if((C.prefix||"").trim()===s)return C}if(1===m.length){var S=g[0],k=m[0];if(s.startsWith(k)&&c===parseInt(S.pLength,10))return S}}if(!u&&0<l&&l<11){var _="m"+l,w=i[_]||Uw[_];return w&&w[0]}return!1},ALLOWED_SYMBOLS:Dw})),uR.nr=dR.foFDMMA||(dR.foFDMMA={getConfig:uR.i.start()}),uR.ns=dR.pGrJmrA||(dR.pGrJmrA=(uR.d,Qw=uR.bl,Ww=uR.nn,zw=uR.ah,Xw=uR.nk,Gw=uR.nq,Jw=uR.nl,Yw=uR.nr,Zw=Gw.ALLOWED_SYMBOLS,Qw(MH,Ww.construct),MH.prototype.processSelectCountry=function(v,y,b){var C=this;Yw.getConfig.then(function(t){Kw=t;var e=v.type,n=hR.getElementById(b);if(n){var a,i,o,r=n.value,s=n.name,l=C.fieldDecorators||(C.fieldDecorators={}),c=l[s],u=(c=c||(l[s]={})).mask,d={},h=!1,p=""===r,f=u&&(u.getMaskData().prefix||"").replace(Xw.NON_DIGIT_REG,"")===r.replace(Xw.NON_DIGIT_REG,""),g="init"===e;if(p||f){h=!0;var m=y.selectedOptions;if(m?m=m[0]:y.options&&(m=y.options[y.selectedIndex]),m)try{d=JSON.parse(m.getAttribute("data-value"))}catch(t){0}}(p||f||g)&&(a=(d.code||"").toLowerCase(),(i=d.prefix||"")&&" "!==i.slice(-1)&&(i+=" "),o=Gw.getPossiblyMaskData(Kw,r,a,h),u?r="":l[s].mask=u=new Jw.MaskDecorator(n),o?u.setMaskData(Object.assign({},o)):(p||f)&&u.setDefaultMaskData({prefix:i}),u.getMaskData().unsettled||(u.mergeIntoMaskData({allowedRegexTokens:Zw,isMaskUpdate:!0,isImmutable:!1}),u.applyMask({event:v,sourceText:r,carretPlace:g?null:n.selectionStart,leaveFocus:!0}),u.setEchoInputValue(c.echo||(c.echo=C.createEchoInput(n)))))}})},MH.prototype.selectCountry={init:jH,change:jH},MH.prototype.getAllowedSymbols=function(){return Zw},MH.prototype.createEchoInput=function(t){return Xw.createEchoInput(t,Xw.InputTypes.TELEPHONE)},MH.prototype.getPossiblyMaskData=function(t){return Gw.getPossiblyMaskData(Kw,t,null,null)},MH.prototype.extractMaskDecorator=function(t,e,n){return this.fieldDecorators[e.name]},zw.register("phoneMask",MH),gt)),uR.nt=dR.cCcI80g||(dR.cCcI80g=($w=uR.np,tT=uR.nk,eT=[new $w.instance(/\d/)],nT=tT._3X,aT=tT._4X,iT=tT._5X,oT=tT._6X,rT=tT.joinMaskFromArgs(" "),{defaultShortMasks:sT={m16:[{mask:rT(aT,aT,aT,aT)}],m17:[{mask:rT(aT,aT,aT,iT)}],m18:[{mask:rT(aT,aT,aT,oT)}],m19:[{mask:rT(aT,aT,aT,aT,nT)}]},getPossiblyMaskData:function(t){var e=tT.parseStringForMask(t,eT).symbolsLength;if(0<e&&e<20){var n="m"+Math.max(e,16),a=sT[n];return a&&a[0]}return!1},ALLOWED_SYMBOLS:eT})),uR.nu=dR.cpTmw||(dR.cpTmw=(lT=uR.bl,cT=uR.nn,uT=uR.ah,dT=uR.nk,hT=uR.nt,pT=uR.nl,fT=hT.ALLOWED_SYMBOLS,lT(FH,cT.construct),FH.prototype.getAllowedSymbols=function(){return fT},FH.prototype.createEchoInput=function(t){return dT.createEchoInput(t,dT.InputTypes.TEXT)},FH.prototype.getPossiblyMaskData=hT.getPossiblyMaskData,FH.prototype.extractMaskDecorator=function(t,e,n){var a=this.decoratorData;return a.mask.mergeIntoMaskData({isWaitsMask:!0,isMaskUpdate:!0}),a},FH.isInstant=!0,uT.register("creditCardMask",FH),gt)),uR.nv=dR.f9FH4nw||(dR.f9FH4nw=(gT=uR.d,mT=uR.s,vT=uR.ah,uR.ai,uR.nl,uR.nm,uR.ns,uR.nu,yT=uR.nr,uR.p,uR.n,bT=uR.cu,CT=uR.cw,uR.r,uR.cy,ST=uR.nq,kT=bT.isSupported,_T="fd.",wT="data-form-func",TT="data-form-init-task",IT="@FormBehaviorInitEvent",ET=/\b([\w-_:]+)\b/g,AT={},xT={text:1,tel:1,"select-one":1},PT=Array.prototype.slice,OT=CT(function(t){for(var e=t.elements,n={},a=0,i=e.length;a<i;a++){var o=e[a],r=o.type;xT[r]&&VH(o)&&!o.disabled&&o.value!==mt&&0<o.value.trim().length&&("select-one"===r?n[o.id]=o.selectedIndex:n[o.name]=o.value)}n.jstamp=Date.now(),function(t,e){localStorage.setItem(t,JSON.stringify(e))}(QH(t),n)}),qH.prototype={_runTask:function(t,e,n){var a,i=t.split(":"),o=i[0],r=i[1],s=this.disabledTargets[o];s&&-1!==s.indexOf(n)||(a=this[o])&&a.call(this,e,n,r)},_runTasks:function(t,e,n){if(t)for(var a=t.match(ET),i=0,o=a.length;i<o;i++)this._runTask(a[i],e,n)},_formHandler:function(t,e){this.isInited&&(this._runTasks(t.target.getAttribute(wT),t,t.target),this._runTasks(this.formFunctionNames,t,e))},_disableFunction:function(t,e){var n=this.disabledTargets;n[t]=n[t]||[],n[t].push(e)},_enableFunction:function(t,e){var n,a=this.disabledTargets[t];!a||-1<(n=a.indexOf(e))&&(this.disabledTargets[t]=a.splice(n,1))},saveValues:function(t,e){{kT&&UH(t.type,"change","blur","submit")&&OT(e)}},restoreValues:function(t,e,n){if(UH(t.type,IT)&&kT){var a=AT.dataLifetime||18e5,i=QH(e),o=function(t){return localStorage.getItem(t)}(i),r={};if(o){var s,l,c=(r=JSON.parse(o)).tstamp||0;if(Date.now()-c<a)for(var u in r){!r.hasOwnProperty(u)||(s=e.elements[u]||hR.getElementById(u))&&VH(s)&&("select-one"===s.type?(l=s.options[r[u]])&&(l.selected=!0):s&&(s.value=r[u]))}else!function(t){localStorage.removeItem(t)}(i)}}},formHandler:{tap:function(t,e){var n;HH.call(this,t,e),t.defaultPrevented||(n=this.docBehavior||(this.docBehavior=vT.getOrMakeBehavior(pR))).any.tap.call(n,t,e)},focus:HH,blur:HH,input:HH,change:HH}},qH.isInstant=!0,vT.register("formBehavior",qH),gT.formService=mT.create({init:function(t){(AT=t).loc2PrefixesMap=ST.loc2PrefixesMapper(t.masksJson),yT.getConfig.resolve(t)}}),gt)),uR.nw=dR.w1e1oLg||(dR.w1e1oLg=function(){var s,l={};try{s=gt.sessionStorage}catch(t){}function c(t){return"wizard_"+t}function u(t,e){t=c(t);try{s.setItem(t,JSON.stringify(e))}catch(t){}l[t]=e}return{withWizard:function(t,e){var n=t.step,a=n.wizardId,i=function(e){e=c(e);try{return JSON.parse(s.getItem(e))||l[e]}catch(t){return l[e]}}(a);i&&!n.isRoot||u(a,i={doneSteps:{}}),e(i);var o=n.markAsDone;if(o)for(var r=0;r<o.length;r++)i.doneSteps[o[r]]=!0;u(a,i)},useStorage:function(t){s=t}}}()||gt),uR.nx=dR.wLujGKg||(dR.wLujGKg=(LT=uR.d,RT=uR.eo,NT=uR.n,BT=uR.e,DT=uR.r,MT=uR.nw,gt.pageCtx&&gt.pageCtx.isApp||(jT=17,qT=FT=-1,LT.wizard=function(o){MT.withWizard(o,function(t){var e,n,a=o.step,i=RT.getState();(t.doneSteps[a.stepId]||i.wizardDoneStep)&&(e=i.stateToRecover&&"ajaxDialog"===i.stateToRecover.type,i.wizardDoneStep=!0,RT.accountStateUpdate(),n=hR.getElementById("boxPage"),NT.addClass(n,"__wizard-skipped"),DT.rendering.attachOnce(function(){-1!==FT&&(clearTimeout(FT),FT=-1),-1!==qT&&(clearTimeout(qT),qT=-1),NT.removeClass(n,"__wizard-skipped")}),WH(),FT=setTimeout(function(){zH(),RT.back(),e&&setTimeout(function(){RT.back()},0)},0))})}),gt)),uR.ny=dR.bJbf0kQ||(dR.bJbf0kQ=(uR.d,uR.s,HT=uR.ah,UT=uR.jv,VT=uR.ae,QT=uR.n,WT=uR.r,zT=uR.bd,XT=uR.ap.transform,GT=750,JT="__transit",KT="js-slide-active",KH.prototype={initLayout:function(){this.bannerWidth=this.root.getElementsByClassName("slides_list_item")[0].offsetWidth,JH(this,this.currentBannerIndex),this.prevElem&&QT.removeClass(this.prevElem,KT),QT.addClass(this.curElem,KT)},markerClick:{tap:function(t){this.clearTimer();var e=parseInt(t.target.getAttribute("data-idx"));ZH(this),JH(this,e),$H(this,!1),this.model.nonStoppable&&this.startTimer()}},slideBanner:{tap:function(t){var e=this.docBehavior||(this.docBehavior=HT.getOrMakeBehavior(pR));e.any.tap.call(e,t,t.target)},touchStart:function(t){HT.allowDefault(t),this.fordibTouch||(this.clearTimer(),this.currentStartTouchX=VT.touchX(t),this.currentStartTouchY=VT.touchY(t),this.touchValidated=!1,this.isVerticalScroll=!1)},touchMove:function(t){var e,n,a,i,o;HT.allowDefault(t),this.fordibTouch||this.isVerticalScroll||(e=VT.touchX(t)-this.currentStartTouchX,n=Math.abs(e),a=VT.touchY(t)-this.currentStartTouchY,i=Math.abs(a),!this.touchValidated&&n<i&&20<i?this.isVerticalScroll=!0:(20<n&&(this.touchValidated=!0),this.touchValidated&&((o=this.bannerWidth)<n&&(e=0<e?o:-o),this.dom.bannersList.style[XT]="translateX("+(e-this.currentX)+"px)")))},touchEnd:function(t){var e,n;HT.allowDefault(t),this.fordibTouch||(e=VT.touchX(t)-this.currentStartTouchX,ZH(this),n=!1,e<-50&&(this.currentBannerIndex<this.bannersLastIndex||this.cycle)?n=YH(this,!0):50<e&&(0<this.currentBannerIndex||this.cycle)?n=YH(this,!1):JH(this,this.currentBannerIndex),$H(this,n),this.touchValidated&&!this.model.nonStoppable||this.startTimer())}}},KH.isInstant=!0,HT.register("bannersCarousel",KH),gt)),uR.nz=dR.tZO3knQ||(dR.tZO3knQ=(function(t,s,l){"use strict";function e(t,e){var a=this;a.root=e,a.model=t;var n=[],i=JSON.parse(e.getAttribute("data-td")).personal||{};for(var o in i)i.hasOwnProperty(o)&&n.push(encodeURIComponent(o)+"="+encodeURIComponent(i[o]));var r=[e.getAttribute("data-query"),"t="+encodeURIComponent(e.getAttribute("data-t")),"v="+encodeURIComponent(n.join("&"))];s.request("//ad.mail.ru/adp/?"+r.join("&"),"GET").withCredentials().withXHRHeader(!1).header("Content-Type","text/plain").send().then(function(t){var e=t.response,n=JSON.parse(e);n&&n.length&&n[0].html&&(a.root.innerHTML=n[0].html,l.runAll(a.root,n[0].html))},function(t){})}e.isInstant=!0,t.register("topicBanner",e)}((uR.a,uR.ah),uR.bm,uR.by),gt)),uR.oa=dR.abgfWw||(dR.abgfWw=(ZT=uR.d,$T=uR.n,uR.o,tI=uR.s,eI=uR.ae,oI="js-profile-cover_adjuster",rI=2,sI={},ZT.initProfileCoverAdjustments=tI.create({update:function(){oU(),nI=hR.querySelector(".js-profile-cover_adjuster .profile-card_cover"),aI="true"===nI.parentNode.getAttribute("data-vertical")},discard:function(){oU();var t=rU();t&&(t.removeEventListener("touchstart",eU),t.removeEventListener("touchmove",nU),t.removeEventListener("touchend",tU),t.removeEventListener("mousedown",aU),t.removeEventListener("mouseup",iU)),aI=!(nI=null)}}),gt)),uR.ob=dR.ve2GAFw||(dR.ve2GAFw=(uR.d,uR.e,lI=uR.n,uR.o,cI=uR.r,uI=uR.ah,dI=uR.ea,hI=uR.bg,sU.prototype={start:{tap:function(){var a,t,e,i=this.model.errorVocabulary,o=hR.getElementById("GlobalSearchFormField");gt.hasOwnProperty("webkitSpeechRecognition")?(t=this.model.locale,(e=new webkitSpeechRecognition).continuous=!1,e.interimResults=!1,e.lang=t,e.start(),pI=e,lU(!0),a=setTimeout(cU,this.model.recordingTimeout),pI.onresult=function(t){var e,n;pI&&pI.stop(),n=t,(e=o)&&(hI.set("voiceSearchUsed",!0),hI.set("clientGlobalSearchQuery",n.results[0][0].transcript),uI.getOrMakeBehavior(e).initialSearch(!0)),lU(!1),logClientEvent("voice.input.success"),pI=null,clearTimeout(a)},pI.onerror=function(t){pI.stop(),lU(!1);var e=t.error,n=(n=i[e])||i.unknown;dI.show(n,7500),logClientEvent("voice.input.error",[e]),pI=null}):(dI.show(i.unsupported,7500),logClientEvent("voice.input.unsupported"))}},done:{tap:function(){pI&&(pI.stop(),setTimeout(function(){pI&&cU()},500))}}},uI.register("voiceRecording",sU),cI.navigated.attach(cU),gt)),uR.oc=dR.pxTt2ew||(dR.pxTt2ew=(uR.fe,fI=uR.d,gI=uR.gm.createCardReadTracking({supportsScrollParent:!0,listId:"photowall-attendees",serviceName:"trackPhotowall",actionName:"photowall.logRead"}),fI.trackPhotowallReads=gI.trackReadsSimple,gt)),uR.od=dR.ptAmLpA||(dR.ptAmLpA=(uR.fe,mI=uR.d,vI=uR.gm.createCardReadTracking({supportsScrollParent:!0,listId:"photo-collage-feed",serviceName:"trackPhotoSlider",actionName:"photoSlider.logRead"}),mI.trackPhotoSliderReads=vI.trackReadsSimple,gt)),uR.oe=dR.PMl0igQ||(dR.PMl0igQ=function(l,e){function t(t,e){this.conf=e=e||{},this.root=t,this.rootBox=t.getBoundingClientRect(),this.isStretchedToRoot=e.isStretchedToRoot||!0,this.geometry={positions:new n(e.positions),dimensions:new a(e.dimensions)}}function n(t){t=t||{},this.direction=c[t.direction]||c.BOTTOM,this.transition=i[t.transition]||i.OPPOSITE,this.transtionDirection=this.transition===i.OPPOSITE?c.getOpposite(this.direction):c.getFlow(this.direction)}function a(t){t=t||{},this.width=t.width,this.height=t.height}t.prototype={constructor:t,detachBlock:function(){l.changed.detach(this.recalculatePosition,this)},attachBlock:function(t){this.block=t,this.setPosition(),e.attachUntilRendering(l.changed,this.recalculatePosition,this)},setPosition:function(){var t,e,n=this.block.style,a=this.geometry.positions.direction,i=this.rootBox,o=this.conf.offsetLeft||0,r=this.conf.offsetTop||0,s=this.conf.offsetWidth||0;a===c.BOTTOM&&(t=i.bottom+l.calc().scrollTop,e=i.left+Math.min(0,gt.pageYOffset||(hR.scrollingElement||pR).scrollLeft),n.top=t+r+"px",n.left=e+o+"px"),n.position="absolute",this.isStretchedToRoot&&(n.width=(this.conf.width||i.width)-s+"px")},recalculatePosition:function(){this.rootBox=this.root.getBoundingClientRect(),this.setPosition()}};var i={OPPOSITE:0,FLOW:1},c={TOP:1,RIGHT:2,BOTTOM:4,LEFT:8,getOpposite:function(t){switch(t){case c.TOP:return c.BOTTOM;case c.BOTTOM:return c.TOP;case c.LEFT:return c.RIGHT;case c.RIGHT:return c.LEFT}},getFlow:function(t){switch(t){case c.TOP:return c.RIGHT;case c.RIGHT:return c.BOTTOM;case c.BOTTOM:return c.LEFT;case c.LEFT:return c.TOP}}};return{aConstructor:t}}(uR.bd,uR.r)||gt),uR.of=dR.sixlAcA||(dR.sixlAcA=function(n,t,a,e,i){var o="SuggestSearchPopupView";function r(t,e){t=t||{},n.constructor.call(this,t,e),this.parentPrototype=this.superclass.prototype,this.popupParent=hR.body}i(r,n.constructor);var s=r.prototype;return s.createViewPublic=function(){this.parentPrototype.createViewPublic.call(this),this.popupParent.appendChild(this.layer),(this.popup=new t.aConstructor(this.searchController.activeInputWrapper,this.model)).attachBlock(this.layer)},s.destroyViewPublic=function(){this.parentPrototype.destroyViewPublic.call(this),this.popupParent.removeChild(this.layer),this.popup.detachBlock(this.layer)},e.register(o,r),{VIEW_NAME:o,aConstructor:r,createLayer:function(t,e){var n=hR.createElement("div");return n.setAttribute("data-view",o),e&&n.setAttribute("data-model",JSON.stringify(e)),a.addClasses(n,"suggest-search-popup-view hidden "+(t||"")),n}}}(uR.ne,uR.oe,uR.n,uR.ah,uR.bl)||gt),uR.og=dR.sJ3o2UA||(dR.sJ3o2UA=function(t,n){function e(){}var a="SuggestSearchFilterView";function i(t,e){n.constructor.call(this,t,e)}(0,uR.bl)(i,n.constructor);var o=i.prototype;return o.constructor=i,o.createViewPublic=e,o.destroyViewPublic=e,t.register(a,i),{constructor:i,VIEW_NAME:a}}(uR.ah,uR.ne)||gt),uR.oh=dR.susmMA||(dR.susmMA=(yI=uR.aa,{selectRangeDecorator:function(t,e,n,a){if(yI.RANGE){var i=n.query.toLowerCase(),o=i.length;if(o){var r=e.getElementsByClassName("suggest-search_item_data __result")[0];if(r)for(var s=r.childNodes,l=0,c=s.length;l<c;l++){var u=s[l];if(3===u.nodeType){var d=u.nodeValue||"";if(d.length){for(var h=d.toLowerCase().indexOf(i),p=[];-1<h;){var f=hR.createRange();f.setStart(u,h),f.setEnd(u,h+o),p.push(f),h=d.toLowerCase().indexOf(i,h+1)}for(var g=0,m=p.length;g<m;g++){var v=p[g],y=hR.createElement("SPAN");y.className="suggest-select",y.setAttribute("aria-hidden","true"),v.surroundContents(y)}}}}}}}})),uR.oi=dR.BxMsGRQ||(dR.BxMsGRQ=(bI={},uU.prototype={constructor:uU,add:function(t){return this.config|=t,this},addNamed:function(t){this.add(this.options[t])},addNamedOptions:function(t){for(var e=t.length;e--;)this.addNamed(t[e]);return this},remove:function(t){return this.config&=~t,this},removeNamed:function(t){return this.remove(this.options[t]),this},removeNamedOptions:function(t){for(var e=t.length;e--;)this.removeNamed(t[e]);return this},resetAll:function(){return this.config=0,this},resetToDefault:function(){return this.config=this.defaultConfig,this},has:function(t){var e=this.config;return e&&(e&t)===t},hasNamed:function(t){return this.has(this.config[t])},getConfig:function(){return this.config},accepts:function(t){return void 0!==this.options[t]}},{builder:uU})),uR.oj=dR.mztcsVQ||(dR.mztcsVQ=(uR.fe,{shallow:function(t,e){for(var n=arguments.length,a=1;a<n;a++){var i=arguments[a];Object.assign(t,i)}}})),uR.ok=dR.DEDbCEA||(dR.DEDbCEA=(CI=/[,\s]+/,{DOMKeyValueCacheMixin:!0,domKVCacheKey:"#okCachedParam#",copyParam:function(t,e){var n=dU(this.domKVCacheKey,t,e);return n?n instanceof Array?n.slice():Object.assign({},n):this.readParam(t,e)&&this.copyParam(t,e)},readParam:function(t,e){var n=dU(this.domKVCacheKey,t,e);return n||hU(this.domKVCacheKey,t,e,function(t){if(t){var e=t[0];return"["===e||"{"===e?JSON.parse(t):t.split(CI)}return!1}(t.getAttribute(this.TYPE_TO_ATTR_MAP[e])))},updateParam:function(t,e,n){var a,i=this.readParam(e,n);i&&(a=t instanceof Array?i.concat(t):Object.assign(i,t),e.setAttribute(this.TYPE_TO_ATTR_MAP[n],JSON.stringify(a)),hU(this.domKVCacheKey,e,n,a))}})),uR.ol=dR.sWAq9TQ||(dR.sWAq9TQ=function(e,t,r,i,n,a,b,o,s,l,C,c,u,d,h,p,f,g){var S=n.selectRangeDecorator,m=i.SearchOptions,k=h.create(),v=h.create(),y={ARGUMENT:1,OPTIONS:2,CONFIG:4},_={};_[y.ARGUMENT]="data-search-argument",_[y.OPTIONS]="data-search-options",_[y.CONFIG]="data-search-config";var w="IN_LAYER",T="IN_PLACE",I="IN_POPUP";function E(t,e){t=t||{},this.initialized=!1,this.root=e,this.model=t,this.layerQS=t["content-qs"],this.layerModifier=t["content-mod"],this.preventSubmit=t.preventSubmit;var n=this.mode=t.mode||this.layerQS&&T||w;this.activeInput,this.activeInputWrapper,this.inputProps={},this.page=null,this.searchTask=C.resolved,this.loadingTask=C.resolved,this.waitingResults=h.create(),this.viewChanged=h.create();var a,i=this._initStrategies[n].call(this);!i||(a=this.searchView=l.getOrMakeBehavior(i.layer))instanceof r.constructor&&(a.finishInitiation(this),this.initialized=!0);var o=this;e.addEventListener("submit",function(t){o.preventSubmit&&t.preventDefault(),o.closeSearch()}),this.viewChanged.attach(function(t){var e=t.open;this.activeInputWrapper&&c.switchClass(this.activeInputWrapper,e,"__viewing"),e?(l.tapPreview.attach(this.onOutClick,this),hR.contains(this.activeInput)||this.restoreInput()):l.tapPreview.detach(this.onOutClick,this),v.trigger({open:e,field:this.activeInput})},this)}var A={};function x(t){return hR.getElementById(t)||hR.querySelector(t)}function P(t){return c.hasClass(t,"suggest-field")}function O(t){return c.hasClass(t,"field")}function L(t,v,e){var y=this,n=this.searchTask;n.abort&&n.abort(!0),n.rejectIfNotDone();var a=this.getTargetProps(this.activeInput).argument;a&&t!==this.previousQuery?(this.previousQuery=a.query=t,this.searchTask=n=(this.searchProvider||i.searchProvider||s.run)(a.searchName,a),n.searchArgument=a,n.then(function(t){t=t||{};var e,n,a,i,o,r=this.searchArgument,s=t.htmlResult,l=t.result,c=t.resultDOM,u=C.start();if(u.then(function(t){y.searchView.renderSearchResult(t)}),c)u.resolve(c);else if(s){var d=s.html;if(d&&d.length){for(var h=b.createDomTree(d).firstChild,p=h.children,f=0,g=p.length;f<g;f++){var m=p[f];e=f,n=m,a=r,i=t,o=void 0,(o=Object.assign({},i.result[e])).name=a.searchName,n._okSuggestData=o,S(f,m,r,t)}u.resolve(h)}}k.trigger({result:l,isEmpty:!l||0===l.length,suggestField:y.activeInput,searchField:v,query:r.query,searchName:r.searchName,renderTask:u})},function(t){y.previousQuery=mt}).anyway(function(t){var e=y.loadingTask;e.done||(this.rejected?e.reject():e.resolve()),y.lastSearchStamp=Date.now()})):this.loadingTask.reject()}return A[w]=function(){return{layer:hR.getElementById(t.LAYER_ID)}},A[T]=function(){return{layer:x(this.layerQS)}},A[I]=function(){var t={offsetLeft:this.model.popupOffsetLeft,offsetTop:this.model.popupOffsetTop,offsetWidth:this.model.popupOffsetWidth};return{layer:x(this.layerQS)||e.createLayer(this.layerModifier,t)}},E.prototype={constructor:E,TYPE_TO_ATTR_MAP:_,_initStrategies:A,openSearchView:function(){var t,e=this.searchView;e.isViewOpen()||(e.bindController(this),(t=this.page)?t.isActive()||t.goOrSwapIfSamePage({pageName:"page@"+t.type}):this.startController())},getTargetProps:function(t){return t=t||this.activeInput,this.inputProps[t.id]},setTargetProps:function(t,e){return t=t||this.activeInput,this.inputProps[t.id]=e},hasOptions:function(t,e){return this.getOptions(e||this.activeInput).has(t)},getOptions:function(t){return this.getTargetProps(t||this.activeInput).options},_startSearchTask:L,_startSearchTaskDebounced:a(L),startSearch:function(t,e,n,a){var i=this.loadingTask;i.done||i.resolve(),i=this.loadingTask=C.start(),this.waitingResults.trigger({task:i});var o=this.getTargetProps(this.activeInput);!a&&o.options.has(m.REQ_DEBOUNCE)?(this.delay=o.config.delay||300,this._startSearchTaskDebounced(t,e,n)):this._startSearchTask(t,e,n)},closeSearch:function(){var t;this.initialized&&((t=this.page)?t.isActive()&&g.back():this.finishController())},startController:function(){this.searchView.createView()},finishController:function(){clearTimeout(this.debounceId);var t=this.searchView,e=this.searchTask;e.abort&&e.abort(!0);var n,a=this.activeInput;a&&((n=this.getOptions(a)).has(m.CLEAN_INPUT)?a.value="":n.has(m.PRESERVE_SUGGEST)&&(a.value=t.selectedSuggest||this.originalInputValue),a.blur(),c.removeClass(this.activeInputWrapper,"__viewing")),t.isViewOpen()&&t.destroyView(),l.tapPreview.detach(this.onOutClick,this)},onOutClick:function(t){var e=t.target;this.root.contains(e)||this.searchView.layer.contains(e)||this.closeSearch()},createHistoryPage:function(t,e){var n=this.page=f.create(t,e);n.init(),n.activated.attach(this.startController,this),n.deactivated.attach(this.finishController,this)},hasActiveInput:function(){return!!this.activeInput},applyInput:function(t){var e=t.target,n=this.activeInput=t.input,a=this.getTargetProps(e)||this.setTargetProps(e,{argument:{},config:{},options:new o.builder(i.SearchOptions,0)});a.argument=this.readArgument(n),a.config=this.readParam(n,y.CONFIG),a.options.addNamedOptions(this.readParam(n,y.OPTIONS)||[]),this.activeInputWrapper=u.findParent(n,P)||u.findParent(n,O)||n.parentElement},restoreInput:function(){var t,e=this.activeInput;e&&((t=hR.getElementById(e.id))||1===(t=hR.getElementsByClassName(e.className)).length&&(t=t[0]),t?this.applyInput({target:t,input:t}):this.closeSearch())},copyArgument:function(t){return this.copyParam(t,y.ARGUMENT)},readArgument:function(t){return this.readParam(t,y.ARGUMENT)},updateArgument:function(t,e){return this.updateParam(t,e,y.ARGUMENT)},readCurrentOptions:function(){return this.readParam(this.activeInput,y.OPTIONS)},readCurrentConfig:function(){return this.readParam(this.activeInput,y.CONFIG)},onStartSearch:{tap:function(t,e){var n,a;this.initialized&&!e.disabled&&("LABEL"===e.nodeName?(a=e.htmlFor)&&(n=this.root[a]||hR.getElementById(a)):n=(a=e.getAttribute("data-focus-for"))?hR.getElementById(a):e,this.originalInputValue=n.value,n&&this.activeInput!==n&&this.applyInput({target:e,input:n}),this.hasOptions(m.CLEAN_SUGGEST)&&(n.value=""),this.openSearchView(),this.startSearch(n.value,e,t,!0))},input:function(t,e){this.openSearchView();var n=e.value;this.hasOptions(m.PRESERVE_SUGGEST)||(this.activeInput.value=n),this.startSearch(n,e,t)},keyUp:function(t){l.allowDefault(t),"Escape"!==t.code&&"Escape"!==t.key||this.closeSearch()}},onCloseSearch:{tap:function(){this.closeSearch()}}},d.shallow(E.prototype,p),l.register("SuggestSearch",E),{ParamType:y,onSearchData:k,onSearchStateChanged:v}}(uR.of,uR.nf,(uR.og,uR.ne),uR.nd,(uR.r,uR.oh),uR.cw,uR.bx,uR.oi,uR.es,uR.ah,uR.i,uR.n,uR.o,uR.oj,uR.p,uR.ok,uR.fa,uR.eo)||gt),uR.om=dR.sPm0eCQ||(dR.sPm0eCQ=(SI=uR.i,kI=mt,{searchProvider:function(t,e){var n=SI.start();if(kI){var a=function(t,e){for(var n=hR.createDocumentFragment(),a=0,i=t.length;a<i;a++){var o,r=t[a];r.innerText&&e&&!e.test(r.innerText)||(o=r.cloneNode(!0),n.append(o))}return n}(kI.children,new RegExp(e.query,"gi"));return n.resolve({resultDOM:a})}return n.resolve({})},initLayer:function(t){kI=t.optionListContainer}})),uR.on=dR.su7S5UQ||(dR.su7S5UQ=(_I=uR.s,uR.r,wI=uR.n,TI=uR.ah,II=uR.nd,EI=uR.ne,AI=uR.om,RI=uR.p.create(),_I.create({name:"searchSelect",init:function(t){var e=t.target;LI=TI.resolve(e,"SuggestSearch")},update:function(t){var e=t.target,n=JSON.parse(e.getAttribute("data-picker-data"));xI=hR.getElementById(n.hiddenInputId),PI=xI.value,(OI=hR.getElementById(n.hiddenOptionsListId))&&(LI.viewChanged.attach(fU),AI.initLayer({optionListContainer:OI})),EI.onResultSelected.attach(pU)},discard:function(){LI.viewChanged.detach(fU),EI.onResultSelected.detach(pU)}}),{onItemSelectPostprocess:RI})),uR.oo=dR.sCiIYpQ||(dR.sCiIYpQ=(NI=uR.s,BI=uR.n,DI=uR.on,MI=uR.jv,NI.create({name:"searchBusinessCategories",update:function(t){jI&&DI.onItemSelectPostprocess.detach(gU),jI=t.target,DI.onItemSelectPostprocess.attach(gU)},discard:function(){jI=mt,DI.onItemSelectPostprocess.detach(gU)}}),gt)),uR.op=dR.stSQbsw||(dR.stSQbsw=(qI=uR.s,uR.n,HI=uR.on,UI=uR.jv,qI.create({name:"searchBusinessPortlet",update:function(t){VI&&HI.onItemSelectPostprocess.detach(mU),VI=UI.byDataId(t.target),HI.onItemSelectPostprocess.attach(mU)},discard:function(){VI=mt,HI.onItemSelectPostprocess.detach(mU)}}),gt)),uR.oq=dR.s28tHpQ||(dR.s28tHpQ=(uR.d,QI=uR.bm,WI=uR.n,zI=uR.ah,XI=uR.dl,GI="data-friend-id",JI="data-error-toast-text",vU.prototype={toggleUser:{change:function(t,e){var n=Number.parseInt(e.getAttribute(GI),10),a=hR.getElementById("user-card-"+n);yU(a,!0),QI.request(e.getAttribute("data-action"),"POST",{"uns.tumblerState":!e.checked,"uns.userId":n}).then(function(t){}.bind(this,e),function(t){t&&(t.checked=!t.checked,bU(t.getAttribute(JI)))}.bind(this,e)).anyway(yU.bind(this,a,!1)).send()}},removeUser:{tap:function(t,e){var n=Number.parseInt(e.getAttribute(GI),10),a=hR.getElementById("user-card-"+n);yU(a,!0),QI.request(e.getAttribute("data-action"),"POST",{"uns.tumblerState":!0,"uns.userId":n}).then(function(t){t&&t.parentNode.removeChild(t)}.bind(this,a),bU.bind(this,e.getAttribute(JI))).anyway(yU.bind(this,a,!1)).send()}}},zI.register("toggleUsersTumbler",vU),gt)),uR.or=dR.bncl3Q||(dR.bncl3Q=(YI=uR.ai,KI=uR.n,ZI=uR.o,$I=uR.p,tE=$I.create(),eE=$I.create(),nE={parent:function(t,e){return ZI.parentBySelector(t,e)},query:function(t,e){return hR.querySelector(e)}},YI.addFuncHandler("removeTargetBlock",{tap:function(t,e){var n=e.getAttribute("data-func-args"),a=(n=JSON.parse(n||"{}")).query,i='[data-remove-block-id="'+a+'"]',o=nE[n.by],r=o&&o(e,i);r&&(tE.trigger({query:a,target:r}),KI.remove(r),eE.trigger({query:a,target:r}))}}),{onBeforeRemove:tE,onRemove:eE})),uR.os=dR.sS7skVA||(dR.sS7skVA=(aE=uR.s,iE=uR.n,oE=uR.al,rE=uR.bd,sE=uR.or,lE=uR.cq,gE="js-sticky-block-hook",mE="__out-of-view",vE="__show-up",yE="hidden",bE=oE.isNativeRAFSupported?gt.requestAnimationFrame:oE.run,CE=hR.body,aE.create({name:"stickyBlock",update:function(){CE=hR.body,dE=getComputedStyle(CE).paddingBottom,hE=hR.getElementById("content"),(pE=hR.getElementsByClassName(gE)[0])&&(fE=pE._okClone=pE.cloneNode(!0),hE.appendChild(fE),iE.addClasses(fE,yE+" js-sticky-block __bot"),iE.removeClass(fE,gE),cE=function(){fE.style.width=hE.offsetWidth+"px"},uE=function(t){t.target===fE&&(CE.style.paddingBottom=dE,lE.unobserve(pE))},sE.onRemove.attach(uE),rE.resize.attach(cE),pE.getAttribute("data-always-show-sticky-block")?(pE.style.display="none",CU()):lE.observe(pE,{registered:function(){},track:SU}))},discard:function(){rE.resize.detach(cE),sE.onRemove.detach(uE)}}),gt)),uR.ot=dR.fnO3MwA||(dR.fnO3MwA=function(t,a){"use strict";var e,n={};Object.defineProperty(n,"__esModule",{value:!0});var i,o,r,s,l="js-sticky-hook-id";(o=i=i||{}).DOWN="DOWN",o.UP="UP",(s=r=r||{}).TOP="top",s.SCROLL="scroll";function c(t){var n=this;this.scrollContainer=gt,this.scrollDirection=i.DOWN,this.scrollDelta=0,this.scrollPosition=0,this.state=r.SCROLL,this.topShift=0,this.onScroll=function(){var t=gt.pageYOffset;t!==n.scrollPosition&&(n.scrollDelta=t-n.scrollPosition,n.scrollDirection=0<n.scrollDelta?i.DOWN:i.UP,n.scrollPosition=t,n.render())},this.onResize=function(){n.render()},this.init=function(){var t=u(n.stickyWrapper);n.scrollDelta=0,n.scrollPosition=gt.pageYOffset,delete n.scrollDirection,n.setTopShift(0),n.setState(r.SCROLL),n.state===r.SCROLL&&(n.wrapperAbsoluteTop=t)},this.render=function(){n.wrapperAbsoluteTop=u(n.stickyWrapper),gt.pageYOffset>n.wrapperAbsoluteTop-c.fixedTopThreshold?n.setState(r.TOP):n.init()},this.setState=function(t){var e=n.stickyContainer.classList;switch(t){case r.TOP:e.add("__fixed-top");break;case r.SCROLL:e.remove("__fixed-top"),n.stickyContainer.style.marginTop=n.topShift+"px"}n.state=t},this.setTopShift=function(t){n.topShift!==t&&(n.topShift=t<0?0:t)},this.destroy=function(){n.scrollContainer.removeEventListener("scroll",n.scrollHandler,!1),gt.removeEventListener("resize",n.resizeHandler)};var e=(this.stickyWrapper=t).getAttribute("data-sticky-container");this.stickyContainer=e?hR.querySelector(e):t.firstChild,this.wrapperAbsoluteTop=u(this.stickyWrapper),this.scrollHandler=(0,a.throttle)(this.onScroll,c.throttleDelay),this.resizeHandler=(0,a.throttle)(this.onResize,c.throttleDelay),this.init(),this.render(),this.scrollContainer.addEventListener("scroll",this.scrollHandler,!1),gt.addEventListener("resize",this.resizeHandler,!1)}function u(t){return t.getBoundingClientRect().top+gt.pageYOffset}c.throttleDelay=10,c.fixedTopThreshold=(null===(e=hR.getElementById("head"))||void 0===e?void 0:e.offsetHeight)||0;var d={},h=0;function p(t){var e=t.getAttribute(l);e&&d[e]||(e||(e=""+ ++h,t.setAttribute(l,e)),d[e]=new c(t))}var f={name:"fashionStickyBlock",update:function(t){t.target&&p(t.target)},discard:function(t){var e,n,a;t.target&&(e=t.target,n=e.getAttribute(l),(a=d[n])&&(a.destroy(),delete d[n]))}};return(0,t.create)(f),n}(uR.s,uR.ba)||gt),uR.ou=dR.nEbOkaQ||(dR.nEbOkaQ=uR.w.create({isShown:!0})||gt),uR.ov=dR.nEYbAw||(dR.nEYbAw=(SE=uR.d,kE=uR.ou,_E=uR.n,SE.navbarController=function(t){var e;e=t,kE.onChanged("isShown",function(t){_E.switchClass(e.target,!t,"hidden")})},gt)),uR.ow=dR.nbsyNTA||(dR.nbsyNTA=(uR.d,wE=uR.n,TE=uR.ah,IE=uR.am,EE=uR.bg,AE=uR.ou,xE=uR.jz.NonLiveSearchFieldBehavior,kU.isInstant=!0,kU.prototype={onActivate:{tap:function(){this.toggleSearch(!0);var t=this.searchField;t.focus(),this.nonLiveSearch&&t.click()}},toggleSearch:function(t){wE.switchClass(this.searchForm,!t,"hidden"),AE.set("isShown",!t)}},TE.register("navbarSearch",kU),gt)),uR.ox=dR.odBXwQ||(dR.odBXwQ=(uR.fe,PE=uR.d,OE=uR.nf,LE=uR.ne,RE=uR.bg,NE=uR.ah,BE=uR.r,DE=uR.s,ME=uR.iu,uR.af,FE=jE=null,PE.offersGeoServiceFromSearch=DE.create({update:function(t){LE.onResultSelected.attach(TU,FE=wU(t))},discard:function(n){_U(),BE.navigated.attach(function t(){var e=n.target;hR.contains(e)?e._okSuggestOnselect||(LE.onResultSelected.attach(TU,FE=wU(n)),e._okSuggestOnselect=!0):(_U(),BE.navigated.detach(t))})},dispose:function(){_U()}}),PE.offersGeoServiceDeprecated=DE.create({update:function(t){LE.onResultSelected.attach(TU,t.context=wU(t))},discard:function(t){LE.onResultSelected.detach(TU,t.context)}}),PE.offersGeoService=DE.create({update:function(t){LE.onResultSelected.attach(TU,t.context=wU(t))},discard:function(t){LE.onResultSelected.detach(TU,t.context),t.target.okProc=!1}}),ME.specialEnvelopes.contextSearchEndpoint={run:function(t){var e,n=t.contentDomFirst;n&&(RE.set("contextSearchEndpoint",n.textContent),(e=hR.getElementById("ServicesSearchFormField"))&&NE.getOrMakeBehavior(e).initialSearch(!0))}},IU.prototype={prepareSearch:{tap:function(t,e){NE.allowDefault(t),jE=this.context,(this.input||(this.input=hR.getElementById(e.htmlFor))).value=""}}},NE.register("OffersGeo",IU),gt)),uR.oy=dR.tqJmzg||(dR.tqJmzg=(uR.d,qE=uR.bm,HE=uR.ah,EU.prototype={toggleTheme:{change:function(t,e){pR.classList.toggle("dark-theme"),qE.request(e.getAttribute("data-command"),"POST").send()}}},HE.register("toggleThemeBehavior",EU),gt)),uR.oz=dR.rdjqz8Q||(dR.rdjqz8Q=(uR.d,UE=uR.bm,VE=uR.ah,QE=uR.fd,WE=uR.ee,zE=uR.ck,XE="data-command",GE="recent-items-menu-block",AU.prototype={toggleRecent:{change:function(t,e){xU(e)}},showMenu:{longTap:function(t,e){QE.show({url:e.getAttribute(XE),target:e,dontPush:!0})},tap:function(t,e){WE.change(e.href)}},closeMenu:{tap:function(t,e){OU(e)}},removeItem:{tap:function(t,e){OU(e)}},emptyItems:{tap:function(t,e){OU(e)}},hideItems:{tap:function(t,e){OU(e)}}},VE.register("recentBehavior",AU),{reload:PU})),uR.pa=dR.rJzoUQ||(dR.rJzoUQ=(JE=uR.d,YE=uR.s,KE=uR.ev,ZE=uR.oz,JE.recentMonitor=YE.create({update:function(){var t,e,n=hR.getElementById("recent-items-menu-block");n&&(t=n.getAttribute("data-cookie-value"),(e=KE.get("ri"))&&t!==e.replace(/"/g,"")&&ZE.reload())},discard:function(){}}),gt)),uR.pb=dR.pGfLeA||(dR.pGfLeA=($E=uR.ah,tA=uR.n,LU.isInstant=!0,$E.register("portalMessage",LU),gt)),uR.pc=dR.guz7TAw||(dR.guz7TAw=(eA=uR.d,nA=uR.s,aA=uR.es,eA.trackTimeWasted=nA.create({init:function(){},update:function(t){var e=hR.getElementById("ok-app-frame");if(e&&t.loggingIntervalMsec){var n=parseInt(t.loggingIntervalMsec);if(0<n){iA=(new Date).getTime();var a=e.getAttribute("data-milestones");rA=[];try{a&&0<a.length&&(rA=JSON.parse("["+a+"]"))}catch(t){}RU("start"),oA=setInterval(function(){RU("continue")},n)}}},discard:function(t){hR.getElementById("ok-app-frame")&&t.loggingIntervalMsec&&0<parseInt(t.loggingIntervalMsec)&&(clearInterval(oA),RU("stop"))}}),gt)),uR.pd=dR.tJRX4Mg||(dR.tJRX4Mg=(sA=uR.ah,lA=uR.n,cA=uR.bd,uA=uR.cw,dA=uR.r,hA="js-clamp-on",pA="js-clamp-off",NU.isInstant=!0,NU.prototype={constructor:NU,seekClamping:{tap:function(t){sA.allowDefault(t),this.isClampApplied&&!lA.hasClass(t.target,"clamp-box-toggle-state")&&(this.isClamped=!this.isClamped,lA.switchClass(this.root,this.isClamped,hA),lA.switchClass(this.root,!this.isClamped,pA))}},checkClamping:BU},sA.register("textClamp",NU),gt)),uR.pe=dR.aZtIgLw||(dR.aZtIgLw=(Array.prototype.map||(Array.prototype.map=function(t,e){if("function"!=typeof t)throw new TypeError(t+" is not a function");for(var n=this.length,a=new Array(n);n--;)a[n]=t.call(e,this[n],n,this);return a}),gt)),uR.pf=dR.tpc5Hjw||(dR.tpc5Hjw=function(t,a,b,i,o,e,C,r){"use strict";var n={};Object.defineProperty(n,"__esModule",{value:!0});function S(t,e){this.prevTruncateTokens=[],this.target=e,this.linesLimitOther=S.getSafeLinesLimit(t.linesLimit,3),this.linesLimitText=S.getSafeLinesLimit(t.linesLimitText,this.linesLimitOther),this.moreText=t.moreText||"",this.getTokenLineHeight=this.getCalculateLineHeight,r.WEAK_MAP&&(this.tokensLineHeight=new WeakMap,this.getTokenLineHeight=this.getAndSaveTokenLineHeight),this.checkClamping();var n=(0,i.debounce)(this.checkClamping,300);o.attachUntilRendering(a.changed,n,this)}var k="topic-text_content",c="data-more-text";return S.prototype.checkClamping=function(){var t=this.target.getElementsByClassName(k),y=[];e(t,function(t){if(!(0,b.hasClass)(t,"js-clamp-off")){var e,n=t.parentElement.querySelectorAll("."+k+" > .topic-text-token"),a=(0,C.htmlElementsAsArray)(n),i=this.getLinesLimit(t),o=1;0===a.length&&a.push(t);for(var r=a[0],s=this.getTokenLineHeight(r),l=0,c=a.length;l<c;l++){var u=a[l],d=u.getBoundingClientRect(),h=S.getHeightWithoutClamp(d.height,u.scrollHeight),p=Math.round(h/s);void 0!==e&&(o=e.bottomLine,S.getBottomOfToken(e)-10<d.top&&o++);var f=o+p-1,g={tokenNode:u,blockNode:t,topLine:o,bottomLine:f,rect:d};if(i<f){var m=e&&o===e.bottomLine?o+1:o;if(i<m||i<f){var v=e&&i<m?e:g;y.push(v);break}}e=g}}},this),this.truncate(y,this.moreText),this.clearStyle(this.prevTruncateTokens,y),this.prevTruncateTokens=y},S.prototype.getAndSaveTokenLineHeight=function(t){if(this.tokensLineHeight.has(t))return this.tokensLineHeight.get(t);var e=this.getCalculateLineHeight(t);return this.tokensLineHeight.set(t,e),e},S.prototype.getCalculateLineHeight=function(t){return Math.ceil(parseFloat(gt.getComputedStyle(t).lineHeight))},S.getBottomOfToken=function(t){return t.rect.top+S.getHeightWithoutClamp(t.rect.height,t.tokenNode.scrollHeight)},S.getHeightWithoutClamp=function(t,e){return Math.max(t,e)},S.getSafeLinesLimit=function(t,e){return t!==mt?parseInt(t,10):e},S.prototype.getLinesLimit=function(t){return(0,b.hasClass)(t,"__only-text")?this.linesLimitText:this.linesLimitOther},S.prototype.getTokenCropSize=function(t){var e=this.getLinesLimit(t.blockNode),n=t.bottomLine>e?e-t.topLine+1:0;return Math.min(n,7)},S.prototype.truncate=function(t,e){for(var n=t.length,a=0;a<n;a++){var i=t[a],o=this.getTokenCropSize(i),r=i.tokenNode,s=i.blockNode;0<o&&(r.classList.add("clamp"),r.classList.add("__"+o));var l=parseFloat(gt.getComputedStyle(r).paddingBottom);s.style.maxHeight=r.offsetTop+r.offsetHeight-l+"px",s.classList.add("__crop"),s.setAttribute(c,e)}},S.prototype.clearStyle=function(t,e){for(var n=e.map(function(t){return t.blockNode}),a=t.length,i=0;i<a;i++){var o,r=t[i],s=r.tokenNode,l=r.blockNode;-1===n.indexOf(l)&&(s.classList.remove("clamp"),l.style.removeProperty("max-height"),l.classList.remove("__crop"),l.removeAttribute(c),0<(o=this.getTokenCropSize(r))&&s.classList.remove("__"+o))}},S.isInstant=!0,(0,t.register)("topicTextClamp",S),n}(uR.ah,uR.bd,uR.n,uR.cv,uR.r,uR.e,uR.bf,uR.aa,uR.pe)||gt),uR.pg=dR.p2SFiA||(dR.p2SFiA=(fA=uR.d,gA=uR.s,mA=uR.fd,fA.pageWithStartupDialog=gA.create({update:function(t){history.replaceState(null,null,t.refreshUrl),mA.show({url:t.url})}}),gt)),uR.ph=dR.eWMKZGA||(dR.eWMKZGA=(vA=uR.ah,yA=uR.n,bA=uR.o,CA=uR.i,SA="expandable-menu-checkbox",kA="__root-input",_A="data-semi-checked",wA={CHILD:1,ROOT:2,get BOTH(){return this.CHILD|this.ROOT},isRoot:function(t){return(t&this.ROOT)===this.ROOT},isInner:function(t){return(t&this.CHILD)===this.CHILD}},MU.isInstant=!0,MU.prototype={handleCheck:{change:function(t,e){var n=e.checkboxInstance,a=mt;n.isSemiChecked()&&(e.checked=!0,n.makeSemiCheck(!1),a=!0),n.makeCheckForRoot(e.checked,a),wA.isRoot(n.roleType)&&n.makeCheckForChildren(e.checked)}},toggleMenu:{tap:function(t,e){var n=this.findMenuRoot(e),a=this.isOpen(n);yA.switchClass(n,!a,"__is-open"),n._okMenu_isOpen=!a}},isOpen:function(t){return t._okMenu_isOpen||t.getAttribute("data-expanded")||!1},findMenuRoot:function(t){return bA.findParent(t,function(t){return yA.hasClass(t,"expandable-menu_root")})},initMenu:function(){for(var n=this,t=this.root.children,e=CA.start(),a=0,i=t.length;a<i;a++){var o=t[a],r=o.getElementsByClassName(SA)[0];r&&(this.controls.push(r),r.checked&&e.then(function(t,e){n.handleCheck.change({},e)},DU,r),r.checkboxInstance=new jU(r,o,this))}return e.resolve(),this},withTopmostMenu:function(t){return this.topmostMenu=t,this},withControlInput:function(t){return this.parentInput=t,this},updateControlState:function(){var t,e,n=this.parentInput;n&&(t=n.target.checked,e=this.checkedControlsCount,this.controls.length===e&&0===this.semiCheckedControlsCount?(n.makeSemiCheck(!1),n.makeCheckForRoot(!0,t)):0<e?(n.makeSemiCheck(!0),n.makeCheckForRoot(!0,t)):(n.makeSemiCheck(!1),n.makeCheckForRoot(!1,t)))},setAsChild:function(){this.isChild=!0}},vA.register("expandableMenu",MU),jU.prototype={makeSemiCheck:function(t){var e=this.target,n=this.isSemiChecked();t?n||(e.setAttribute(_A,"on"),e.indeterminate=!0,this.checkDOMValue(!1),this.menu.semiCheckedControlsCount++):n&&(e.removeAttribute(_A),e.indeterminate=!1,this.menu.semiCheckedControlsCount--)},isSemiChecked:function(){return this.target.hasAttribute(_A)},checkDOMValue:function(t){this.menu.cacheDOMvalues&&(t?this.target.setAttribute("checked",!0):this.target.removeAttribute("checked"))},makeCheckForRoot:function(t,e){var n=void 0===e||t!==e;this.target.checked=t,this.isSemiChecked()||this.checkDOMValue(t),n&&(t?this.menu.checkedControlsCount++:this.menu.checkedControlsCount--),this.menu.updateControlState()},makeCheckForChildren:function(t){for(var e=this.innerMenu.controls,n=0,a=e.length;n<a;n++){var i=e[n];i.checked=t,this.checkDOMValue(t);var o=i.checkboxInstance;o.makeSemiCheck(!1),wA.isRoot(o.roleType)&&o.makeCheckForChildren(t)}this.innerMenu.checkedControlsCount=t?a:0},initChildType:function(){this.setType(wA.CHILD),this.parentInput=hR.getElementById(this.parentInputId)},initRootType:function(){this.setType(wA.ROOT),this.innerMenu=vA.getOrMakeBehavior(this.targetParent.getElementsByClassName("expandable-menu")[0]).withTopmostMenu(this.menu.topmostMenu).withControlInput(this).initMenu()},setType:function(t){this.roleType=this.roleType|=t},removeType:function(t){this.roleType=this.roleType^t}},"function"!=typeof Object.getOwnPropertyDescriptor||Object.getOwnPropertyDescriptor(wA,"BOTH")||"function"!=typeof Object.defineProperty||Object.defineProperty(wA,"BOTH",{configurable:!1,enumerable:!0,get:function(){return this.CHILD|this.ROOT}}),{collectDataFromTree:function(t){var e=t.checkboxInstance;if(e){var n=[];return function t(e,n){for(var a=0,i=e.length;a<i;a++){var o=e[a],r=o.checkboxInstance;o.checked&&!r.isSemiChecked()?n.push(o.value):r.isSemiChecked()&&t(r.innerMenu.controls,n)}}(vA.getOrMakeBehavior(e.menu.topmostMenu).controls,n),n}return[]}})),uR.pi=dR.ShhpKWA||(dR.ShhpKWA=(TA=uR.ah,uR.n,FU.prototype={toggleState:{tap:function(){this.video.muted=!this.video.muted}}},TA.register("simpleVideoSoundToggler",FU),gt)),uR.pj=dR.SHTjp3w||(dR.SHTjp3w=(IA=uR.ah,EA=uR.n,qU.prototype={toggleState:{tap:function(){this.switchClasses(),this.state=!this.state}},switchClasses:function(){EA.switchClass(this.root,this.state,"__false"),EA.switchClass(this.root,!this.state,"__true")},reset:function(){this.state!==this.initState&&(this.switchClasses(),this.state=this.initState)}},IA.register("simpleStateToggler",qU),gt)),uR.pk=dR.bF1ZdbQ||(dR.bF1ZdbQ=(AA=uR.d,xA=uR.s,PA=uR.cq,OA=uR.n,LA={registered:function(){},track:function(t){OA.switchClass(t.target,t.inViewport,"__animated")}},PA.addListener(LA),AA.botPortletService=xA.create({update:function(t){PA.observe(t.target,LA)},discard:function(t){PA.unobserve(t.target)}}),gt)),uR.pl=dR.eWq8O2Q||(dR.eWq8O2Q=("function"!=typeof Array.prototype.every&&(Array.prototype.every=function(t,e){if(null==this)throw new TypeError('"this" is null or not defined');for(var n=0;n<this.length;n++)if(!t.call(e,this[n],n,this))return!1;return!0}),gt)),uR.pm=dR.sGTw9Tg||(dR.sGTw9Tg=function(t,l,c,u){var a="selectPlot",d="__selected",h="x",s={};s[s.UNSELECT=0]="UNSELECT",s[s.SELECT=1]="SELECT";var p=t.create();function e(t,e){t=t||{},this.model=t,this.id=t.id||e.id||e.getAttribute("data-plot-name"),this.root=e,this.drawOnStart=this.setFromModelOrNode("drawOnStart",!1),this.plotItems=[];var n,a,i,o,r,s=(n=this.setFromModelOrNode("grid"),a=n.split(h),i=a[0],o=a[1],{x:i,y:o,cells:i*(o||1)});this.cells=s.cells||0,this.x=s.x,this.y=s.y,this.hasYHeight=!!this.y,this.isSelectedAll=this.setFromModelOrNode("isSelectedAll",!1),this.plotContent=this.setFromModelOrNode("items",[],f),this.touchCache={},this.drawOnStart&&(r=this.setFromModelOrNode("selectedIds",[],g),this._buildPlotItems(r),this.drawPlot()),l.listenCritical(e)}function o(t,e,n){this.id=t,this.value=e,this.selected=n||!1}function f(t){if(!this.model[t]){var e=this.root.getAttribute("data-"+t);if(e)return JSON.parse(e)}}function g(t){for(var e=(this.root.getAttribute("data-"+t)||"").split(","),n=[],a=0,i=e.length;a<i;a++)n.push(Number(e[a]));return n}return e.prototype={constructor:e,_buildPlotItems:function(t){var e=this.isSelectedAll,n=!t||0===t.length;this.plotItems=[];for(var a=0,i=this.cells;a<i;a++)this.plotItems.push(new o(a,this.plotContent[a],!!e||!n&&-1<t.indexOf(a)));return this},setFromModelOrNode:function(t,e,n){var a=this.model[t];return a||(n?n.call(this,t)||e:this.root.getAttribute("data-"+t))},setSelectedItems:function(t,e){this.isSelectedAll=Boolean(e),this._buildPlotItems(t);for(var n=this.root.children,a=0,i=n.length;a<i;a++){var o=n[a],r=this.plotItems[o._plotItemId];r&&u.switchClass(o,r.selected,d)}var s={id:this.id,items:this.plotItems,changedItem:null};return p.trigger(s),this},setItems:function(t){return this.plotItems=t,this},drawPlot:function(){for(var t=hR.createDocumentFragment(),e=this.plotItems,n=0,a=e.length;n<a;n++){var i=e[n],o=hR.createElement("DIV");u.addClass(o,"plot_i"),i.selected&&u.addClass(o,d),o.style.width=100/this.x+"%",o.innerText=i.value,o._plotItemId=i.id,t.appendChild(o)}return this.root.appendChild(t),this},toggle:function(t,e){var n=t._plotItemId,a=this.plotItems[n],i=void 0!==e?Boolean(e):!a.selected;a.selected=i,u.switchClass(t,i,d),p.trigger({id:this.id,items:this.plotItems,changedItem:a})},isAllSelected:function(){return this.plotItems.every(function(t){return t.selected})},isNoneSelected:function(){return this.plotItems.every(function(t){return!t.selected})},selectCells:{touchStart:function(t,e){var n=c.firstTouch(t),a=n.x,i=n.y,o=hR.elementFromPoint(a,i),r=this.plotItems[o._plotItemId];r&&(this.selectionMode=r.selected?s.UNSELECT:s.SELECT,this.toggle(o,this.selectionMode))},touchMove:function(t,e){t.preventDefault();var n=c.firstTouch(t),a=n.identifier,i=n.x,o=n.y;if(!(0<=Math.min(i,o)))return!1;var r,s=hR.elementFromPoint(i,o);s&&((r=this.touchCache[a])&&s===r.target||s._plotItemId!==mt&&this.toggle(s,this.selectionMode),this.touchCache[a]={target:s,x:i,y:o})},touchEnd:function(t,e){l.allowDefault(t),this.selectionMode=null}}},l.register(a,e),{SelectPlot:e,createRoot:function(t,e){var n;return e?n=hR.getElementById(e):(n=hR.createElement("DIV"),u.addClass(n,"plot"),n.setAttribute("data-view",a),n.setAttribute("data-func","selectCells"),t&&((n.okData={})[a]=t)),n},onChanged:p}}((uR.pl,uR.p),uR.ah,uR.ae,uR.n,uR.bd)||gt),uR.pn=dR.oaH9EFw||(dR.oaH9EFw=gt.OKWebView||(gt.OKWebView={})||gt),uR.po=dR.a9gBryQ||(dR.a9gBryQ={tabMarkedAsRead:(RA=uR.p).create(),back:RA.create()}),uR.pp=dR.aZgJ8wg||(dR.aZgJ8wg=(NA=uR.dn,BA=uR.dm,DA=uR.pn,MA=uR.po,jA=uR.af,FA=uR.s,qA=uR.r,HA=uR.ee,UA=uR.b,VA=uR.ai,QA=uR.p,WA=uR.iu,zA=uR.i,GA=QA.create(),JA=gt.webkit,YA=JA&&JA.messageHandlers,ZA=VU(KA="ajaxNavigate"),$A=VU("mobMessage"),FA.create({name:"ajaxNavForApps",init:function(t){(t=t||{}).iosAjaxNavEnabled&&(ZA=ZA||VU(KA))&&(XA=zA.resolved,GA.attach(HU))},update:function(t){var e,n=hR.getElementsByTagName("title")[0],a=n&&n.getAttribute("data-filter")||null;try{BA.run(NA.UPDATE_EVENT_COUNTERS,a)}catch(t){logClientEvent("JSError/OKApp.run",["updateEventCounters",a])}!jA.iOS||(e=gt.okiosapp)&&e.ok_titleLoaded&&e.ok_titleLoaded(hR.title,n&&n.getAttribute("data-page-config")||"{}")}}),DA.open=function(t){(t=JSON.parse(t||"{}"))&&t.url&&HA[!1===t.newHistoryStep?"replace":"change"](t.url)},DA.onBack=function(){var e={handled:!1};try{MA.back.trigger(e)}catch(t){UA.info("onBack","OKWebView"),UA.send({error:t}),e.handled=!1}e.handled||BA.run("back","{}")},DA.onAppMessage=function(t){var e=JSON.parse(t);GA.trigger(e),e.reload&&HA.reload()},qA.navigating.attach(function(t){var e,n=UU("onNavigationStart",t);n&&n.cancel?t.cancelled=n.cancel:ZA&&(t.navigationTask="string"==typeof(e=t.state.url)?(XA.rejectIfNotDone(),(XA=zA.start()).payload={created:Date.now(),url:e},ZA.postMessage({url:e}),XA):null)}),qA.rendering.attach(function(t){UU("onRenderingStart",t)}),qA.navigated.attach(function(t){UU("onNavigationEnd",t)}),qA.navigationFailed.attach(function(t){UU("onNavigationFailed",t)}),qA.programmaticBack.attach(function(){UU("onProgrammaticBack",{})}),VA.addFuncHandler("appBackBefore",{tap:function(t){BA.run("backBefore",t.target.getAttribute("data-back-url"))}}),WA.specialEnvelopes.closeWindow={run:function(t){gt.close()}},{onAppMessage:GA,onPageAppMessage:function(t,e){GA.attach(t,e),qA.navigated.attachOnce(function(){GA.detach(t)})},mobMessageAppHandler:$A})),uR.pq=dR.ajOlkQ||(dR.ajOlkQ=(tx=uR.s,ex=uR.pp,nx=uR.ee,tx.create({name:"createTopicPage",update:function(){ex.onAppMessage.attach(QU)},discard:function(){ex.onAppMessage.detach(QU)}}),gt)),uR.pr=dR.cKiuYlQ||(dR.cKiuYlQ=function(t,o){"use strict";var e={};return Object.defineProperty(e,"__esModule",{value:!0}),(0,t.addFuncHandler)("copyAndToast",{tap:function(t,e,n){var a=n||{copy:e.getAttribute("data-copy"),toast:e.getAttribute("data-toast")||mt},i=a.toast;o(String(a.copy),i)}}),e}(uR.ai,uR.dq)||gt),uR.ps=dR.vUpXO3w||(dR.vUpXO3w=(uR.n,ax=uR.s,uR.bm,ix=uR.ah,ox=uR.bn,mx="js-vk-connect-sdk-error",vx="js-vk-connect-sdk-error-wrapper",ax.create({name:"vkConnectService",init:function(t){var e;rx=(e=t)["data-script-url"],sx=e["data-app-id"],e["data-auth-url"],lx=e["data-external-device-id"],gx=e["data-network-error-message"],KU()}}),gt)),uR.pt=dR.mnLX7A||(dR.mnLX7A=(yx=uR.n,bx="data-started",$U.prototype={onStartRolling:function(){var t=this.dom;ZU(t.buttonStart,!0),ZU(t.buttonRestart,!0),ZU(t.buttonPost,!0),ZU(t.buttonStop,!1),t.listContainer.setAttribute(bx,"1"),this.mode="starting"},onStopRolling:function(){var t=this.dom;ZU(t.buttonStop,!0),ZU(t.buttonProgress,!1),this.mode="stopping"},onOpenForecast:function(t,e){var n=this.dom;ZU(n.buttonProgress,!0),e?n.buttonPost&&(ZU(n.buttonPost,!1),n.buttonPostTarget.href=t):ZU(n.buttonRestart,!1)},isActivated:function(){return this.dom.listContainer.getAttribute(bx)},isStarting:function(){return"starting"===this.mode},isStopping:function(){return"stopping"===this.mode}},$U)),uR.pu=dR.mIiKJeg||(dR.mIiKJeg=(Cx=uR.n,Sx="hidden",tV.prototype={onOpenForecast:function(t){var e,n,a;this.model.showInlineResult&&(n=(e=this.dom).resultContainer,a=e.listContainer,n.style.height=a.offsetHeight+"px",n.innerHTML=t,Cx.addClass(a,Sx),Cx.removeClass(n,Sx))},onStartRolling:function(){var t;this.model.showInlineResult&&(t=this.dom,Cx.removeClass(t.listContainer,Sx),Cx.addClass(t.resultContainer,Sx))}},tV)),uR.pv=dR.mDQQcnA||(dR.mDQQcnA=(kx=uR.ee,_x="data-variants-count",eV.prototype={onOpenForecast:function(t,e,n){var a=this.fetchForecastResult(t);e.onOpenForecast(a.text),n.onOpenForecast(a.postUrl,a.isLast),a.isLast&&this.dom.resultContainer.setAttribute("data-last-post-url",a.postUrl),this.model.autoPost&&kx.change(a.postUrl)},onOpenLastForecast:function(){var t=this.dom.resultContainer.getAttribute("data-last-post-url");t&&kx.change(t)},fetchForecastResult:function(t){var e=this.dom.root,n=this.model,a=decodeURI(n.postUrl),i=e.getAttribute(_x);i--,e.setAttribute(_x,i);var o=n.variants[i],r=a.replace(/&amp;/g,"&");return r=(r=r.replace("-12345",t)).replace("[variant]",o.variantId),{isLast:0==i,text:o.shortText,postUrl:r}}},eV)),uR.pw=dR.cwFbz1g||(dR.cwFbz1g=(wx=uR.n,Tx=uR.al,Ix=uR.aq,Ex="__animation",Ax=Ix.create().translateX(0),nV.prototype={onStartRolling:function(){var t=this.dom.animationContainer;wx.removeClass(t,"__picking"),Ax.applyTo(t),t.style.transitionDuration="unset",wx.addClass(t,Ex)},onStopRolling:function(){var t=this.dom.animationContainer;wx.removeClass(t,Ex)},onStartPicking:function(){var t=this.dom.animationContainer;wx.addClass(t,"__picking")},translateX:function(t){var e=this.dom.animationContainer;Ix.create().translateX(t,"px").applyTo(e)},translateXWithTransition:function(t,e){this.dom.animationContainer.style.transitionDuration=e+"ms";var n=this;Tx.run(function(){Tx.run(function(){n.translateX(t)})})}},nV)),uR.px=dR.ceBLQ||(dR.ceBLQ=(xx=uR.n,Px=uR.jv,uR.ee,Ox=uR.pt,Lx=uR.pu,Rx=uR.pv,Nx=uR.pw,Bx=uR.ar,Dx=uR.e,Mx="__picked",aV.prototype={onStartRolling:function(){this.resultView.onStartRolling(),this.buttonsView.onStartRolling(),this.containerView.onStartRolling(),this.itemWidth=this.items[0].offsetWidth,this.onRelayout()},onStopRolling:function(){this.buttonsView.onStopRolling();var t=this;setTimeout(function(){t.completeRollingAnimation()},this.model.stopDelay)},onRelayout:function(){this.rootWidth=this.dom.listContainer.offsetWidth},canAutoStart:function(){return!this.buttonsView.isActivated()},completeRollingAnimation:function(){var t=this.containerView,e=gt.getComputedStyle(this.dom.animationContainer),n=Bx.getTransformStyleTranslateX(e);t.onStopRolling(),t.translateX(n);var a=this.calculatePickData(n);t.translateXWithTransition(a.translateX,a.translateTime);var i=this;setTimeout(function(){i.startPicking(a.index)},a.translateTime)},calculatePickData:function(t){var e=this.itemWidth,n=(this.rootWidth-e)/2,a=n-t,i=Math.floor(a/e)+1+this.model.stopItemShift,o=-i*e+n;return{index:i,translateX:o,translateTime:Math.floor(this.model.timeItem*(t-o)/e)}},startPicking:function(t){this.containerView.onStartPicking();var e=this.items[t];xx.addClass(e,Mx);var n=this;setTimeout(function(){n.resetItems(),n.openForecast(t)},this.model.openDelay)},openForecast:function(t){var e=t%this.itemsCount;this.forecastView.onOpenForecast(e,this.resultView,this.buttonsView)},resetItems:function(){xx.removeClass(this.dom.animationContainer,"__picking"),Dx(this.root.getElementsByClassName(Mx),function(t){xx.removeClass(t,Mx)})},initModel:function(t){var e=this.dom.animationContainer.style,n=this.model.timeItem*this.itemsCount;e.animationDuration=n+"ms"}},aV)),uR.py=dR.gqTVj7Q||(dR.gqTVj7Q=(jx=uR.n,Fx=uR.jv,uR.ee,uR.r,qx=uR.pt,Hx=uR.pu,Ux=uR.pv,Vx=uR.e,Qx=uR.j,uR.al,Wx="data-variants-count",zx="__picked",iV.prototype={onStartRolling:function(){this.resetItems(),this.resultView.onStartRolling(),this.buttonsView.onStartRolling()},onStopRolling:function(){this.pickedIndex=Math.floor(Math.random()*(this.itemsCount-1)),this.stopWithSelectedItem()},onSelectItem:function(t,e){"0"!=this.dom.root.getAttribute(Wx)?(this.pickedIndex=e-1,this.stopWithSelectedItem()):jx.hasClass(t,zx)&&this.forecastView.onOpenLastForecast()},canAutoStart:function(){return this.model.chestsAutoStart&&"0"!=this.dom.root.getAttribute(Wx)||!this.buttonsView.isActivated()},stopWithSelectedItem:function(){this.buttonsView.onStopRolling();var t=this.items[this.pickedIndex];jx.addClass(t,zx);var e=this;setTimeout(function(){e.completeItemsAnimations()},this.model.stopDelay)},completeItemsAnimations:function(){var n=this;Vx(this.items,function(t,e){Qx(t.firstChild.firstChild,"animationiteration",function(){n.completeItem.call(n,t,e,n.pickedIndex)})})},completeItem:function(t,e){var n,a,i,o=t.firstChild.firstChild;e===this.pickedIndex?(n=t.getAttribute("data-image-open"),a=o.src,n&&(o.src=n,t.setAttribute("data-image-tmp",a)),i=this,setTimeout(function(){o.style.animationIterationCount="0",i.openForecast.call(i,i.pickedIndex)},this.model.openDelay)):o.style.animationIterationCount="0"},resetItems:function(){Vx(this.items,function(t){jx.removeClass(t,zx);var e=t.firstChild.firstChild;e.style.animationIterationCount="";var n=t.getAttribute("data-image-tmp");n&&(t.removeAttribute("data-image-tmp"),e.src=n)})},openForecast:function(t){this.forecastView.onOpenForecast(t,this.resultView,this.buttonsView)},initModel:function(t){var e=this.model.timeItem;e&&Vx(this.items,function(t){t.style.animationDuration=e+"ms"})}},iV)),uR.pz=dR.srYkQdw||(dR.srYkQdw=(Xx=uR.n,Gx=uR.al,Jx=uR.aq,Yx="__animation",Kx=Jx.create().translateY(0),oV.prototype={onStartRolling:function(){var t=this.column;Kx.applyTo(t),t.style.transitionDuration="unset",Xx.addClass(t,Yx)},onStopRolling:function(){var t=this.column;Xx.removeClass(t,Yx)},translateY:function(t){var e=this.column;Jx.create().translateY(t,"px").applyTo(e)},translateYWithTransition:function(t,e){this.column.style.transitionDuration=e+"ms";var n=this;Gx.run(function(){Gx.run(function(){n.translateY(t)})})}},oV)),uR.qa=dR.sjPeQ7Q||(dR.sjPeQ7Q=(uR.n,Zx=uR.jv,uR.r,$x=uR.pt,tP=uR.pu,eP=uR.pv,nP=uR.pz,aP=uR.e,iP=uR.ar,rV.prototype={onStartRolling:function(){this.resultView.onStartRolling(),this.buttonsView.onStartRolling(),this.itemHeight=this.items[0].offsetHeight,aP(this.columnViews,function(t){t.onStartRolling()}),this.columnCounts=0},onStopRolling:function(){this.buttonsView.onStopRolling();var t=this;setTimeout(function(){t.completeRollingAnimation()},this.model.stopDelay)},canAutoStart:function(){return!this.buttonsView.isActivated()},completeRollingAnimation:function(t,e){var o=0,r=this;aP(this.columnViews,function(t,e){var n=gt.getComputedStyle(t.column),a=iP.getTransformStyleTranslateY(n);t.onStopRolling(),t.translateY(a);var i=r.calculatePickData(a,e);t.translateYWithTransition(i.translateY,i.translateTime),o=Math.max(o,i.translateTime)}),setTimeout(function(){var t=Math.floor(Math.random()*(r.itemsCount-1));r.completePickup(t)},o)},calculatePickData:function(t,e){var n=this.itemHeight,a=this.rootHeight,i=a-t;0==e&&(this.pickedItemIndex=Math.floor(i/n)+1+this.model.stopItemShift);var o=e*this.model.shiftPerSlot,r=this.pickedItemIndex+o,s=-r*n+a;return{index:r,translateY:s,translateTime:Math.floor(this.model.timeItem*(t-s)/n)}},completePickup:function(t){var e=this;setTimeout(function(){e.openForecast(t)},e.model.openDelay)},openForecast:function(t){this.forecastView.onOpenForecast(t,this.resultView,this.buttonsView)},initModel:function(t){var e=this.model.timeItem*this.itemsCount;aP(this.columns,function(t){t.style.animationDuration=e+"ms"})}},rV)),uR.qb=dR.w0s2qzg||(dR.w0s2qzg=(oP=uR.n,rP=uR.al,sP=uR.aq,lP="__animation",cP=sP.create().rotate(0),sV.prototype={onStartRolling:function(){var t=this.dom.animationContainer;cP.applyTo(t),t.style.transitionDuration="unset",oP.addClass(t,lP)},onStopRolling:function(){var t=this.dom.animationContainer;oP.removeClass(t,lP)},rotateDegrees:function(t){var e=this.dom.animationContainer;sP.create().rotate(t,"deg").applyTo(e)},rotateDegreesWithTransition:function(t,e){var n=this.dom.animationContainer,a=this;rP.run(function(){n.style.transitionDuration=e+"ms",rP.run(function(){a.rotateDegrees(t)})})}},sV)),uR.qc=dR.wC9jTNQ||(dR.wC9jTNQ=(uP=uR.n,dP=uR.jv,uR.ee,hP=uR.pt,pP=uR.pu,fP=uR.pv,gP=uR.qb,mP=uR.ar,lV.prototype={onStartRolling:function(){this.resultView.onStartRolling(),this.buttonsView.onStartRolling(),this.containerView.onStartRolling()},onStopRolling:function(){this.buttonsView.onStopRolling();var t=this;setTimeout(function(){t.completeRollingAnimation()},this.model.stopDelay)},canAutoStart:function(){return!this.buttonsView.isActivated()},completeRollingAnimation:function(){var t=this.containerView,e=gt.getComputedStyle(this.dom.animationContainer),n=mP.getTransformStyleAngleDegrees(e);t.onStopRolling(),t.rotateDegrees(n);var a=this.calculatePickData(n);t.rotateDegreesWithTransition(a.rotateAngle,a.translateTime);var i=this;setTimeout(function(){i.completePickup(a.index)},a.translateTime)},calculatePickData:function(t){var e=Math.floor(t/30)+1+this.model.stopItemShift,n=30*e;return{index:e%this.itemsCount,rotateAngle:n,translateTime:Math.floor(this.model.timeItem*(n-t)/30)}},completePickup:function(t){var e=this.items[t];uP.addClass(e,"__picked");var n=this;setTimeout(function(){uP.removeClass(e,"__picked"),n.openForecast(t)},n.model.openDelay)},openForecast:function(t){this.forecastView.onOpenForecast(t,this.resultView,this.buttonsView)},initModel:function(t){var e=this.dom.animationContainer,n=this.model.timeItem*this.itemsCount;e.style.animationDuration=n+"ms"}},lV)),uR.qd=dR.moMoxbA||(dR.moMoxbA=(uR.d,vP=uR.ah,yP=uR.r,bP=uR.bd,CP=uR.px,SP=uR.py,kP=uR.qa,_P=uR.qc,cV.prototype={relaunch:{tap:function(t,e){var n=this.view,a=n.buttonsView;a&&(a.isStopping()||(a.isStarting()?n.onStopRolling():n.onStartRolling()))}},start:{tap:function(t,e){this.view.onStartRolling()}},stop:{tap:function(t,e){this.view.onStopRolling()}},selectItem:{tap:function(t,e,n){this.view.onSelectItem(e,n)}},onRelayout:function(){var t=this.view.onRelayout;t&&t.call(this.view)}},cV.isInstant=!0,vP.register("motivatorAnimationGame",cV),gt)),uR.qe=dR.mPDgzZg||(dR.mPDgzZg=(uR.d.motivatorInviteProposed=function(t){var e=t.target,n=[];hR.querySelectorAll("[data-excluded-id]").forEach(function(t){n.push(t.dataset.excludedId)}),e.value=n.join(",")},gt)),uR.qf=dR.pj6ZbDA||(dR.pj6ZbDA=(wP=uR.eo,TP=uR.r,IP=uR.i,EP=uR.hk,AP=uR.p,xP="OK:navigating",PP="OK:popstate",uV.prototype={constructor:uV,createEvents:function(){this.onPopState=AP.create(),this.onUnload=AP.create(),this.onNavigate=AP.create(),this.onPageLeaving=AP.create()},start:function(){this.listening||(wP.statePopping.attach(this._statePoppingWrapper,this),TP.navigating.attach(this._navigatingWrapper,this),gt.addEventListener("beforeunload",this._unloadWrapper),this.listening=!0)},end:function(){this.listening&&(wP.statePopping.detach(this._statePoppingWrapper,this),TP.navigating.detach(this._navigatingWrapper,this),gt.removeEventListener("beforeunload",this._unloadWrapper),this.listening=!1)},_unloadWrapper:function(t){this.pageLeavingController({type:t.type,event:t})},_navigatingWrapper:function(t){this.pageLeavingController({type:xP,event:t})},_statePoppingWrapper:function(t){this.pageLeavingController({type:PP,event:t})},confirmUnload:function(){this.onUnload.attach(dV)},confirmPopstate:function(){this.onPopState.attach(dV)},pageLeavingController:function(t){var e,n=t.type,a=t.event;if(this.onPageLeaving.trigger(t),"beforeunload"===n){if(this.onUnload.trigger(t),t.cancelled)return a.preventDefault(),a.returnValue="На странице остались несохраненные данные, уйти?"}else n===PP?(this.onPopState.trigger(t),t.cancelled&&(a.cancelled=!0,e=a.cancelTask=IP.start(),t.onCancel&&t.onCancel(e),e.join(hV()))):n===xP&&this.onNavigate.trigger(t)}},{construct:uV,showConfirmDialog:hV})),uR.qg=dR.pr29EjQ||(dR.pr29EjQ=(OP=uR.qf,LP=uR.s,RP=uR.i,NP=RP.start(),LP.create({name:"pageLeaveMonitorService",update:function(t){t.asService=!0,NP.resolve(new OP.construct(t))},discard:function(){pV(function(t){t.end()}),NP=RP.start()}}),{onServiceReady:pV})),uR.qh=dR.uSpV5g||(dR.uSpV5g=(BP=uR.s,DP="feature.badge",MP=navigator.setAppBadge,BP.create({name:"userEventsMonitor",update:function(t){var e;MP&&((e=t.newEvents)?navigator.setAppBadge(e.messages+e.marks+e.events||0).then(function(){logClientEvent(DP,["ok"])},function(t){logClientEvent(DP,["fail"])}):(logClientEvent(DP,["cleared"]),navigator.clearAppBadge()))}}),gt)),uR.qi=dR.lsoW3gQ||(dR.lsoW3gQ=(jP=uR.d,FP=uR.s,qP=uR.a,HP=uR.co,jP.logObserverSupport=FP.create({init:function(){var t=HP.isNative?"native":"fallback";qP.log("observerSupport",[t])}}),gt)),uR.qj=dR.anG1kPQ||(dR.anG1kPQ=(UP=uR.es,{sendPresent:function(t,e){return UP.run("promoAvatar.sendPresent",{friendId:t,decorId:e})},create:function(t,e){return UP.run("promoAvatar.create",{photoId:t,decorId:e})},commit:function(t,e,n,a){return UP.run("promoAvatar.commit",{photoId:t,imageToken:e,decorId:n,encryptedPhotoId:a})}})),uR.qk=dR.pPk38hQ||(dR.pPk38hQ=(VP=uR.o,uR.bb,QP=uR.ah,uR.bm,WP=uR.n,zP=uR.qj,XP=uR.ck,fV.prototype={cardSelectNextDecor:{tap:function(t,e){var n=this.findCardElem(e);n&&!gV(n)&&this.renderNextDecor(n)}},buttonSendPresent:{tap:function(t,e){var n=this.findCardElem(e);gV(n)||(mV(n),this.sendPresentAvatar(n))}},buttonDecorateInPlace:{tap:function(t,e){var n=this.findCardElem(e);gV(n)||(mV(n),this.decorateInPlace(n))}}},fV.isInstant=!0,QP.register("promoAvatarPortlet",fV),gt)),uR.ql=dR.nlGluA||(dR.nlGluA=(GP=uR.ah,vV.prototype={moveToBlock:{tap:function(t,e){var n,a=this.model.blockId;!a||(n=hR.getElementById(a))&&n.scrollIntoView(!0)}}},GP.register("navByBlock",vV),gt)),uR.qm=dR.pLAMXiw||(dR.pLAMXiw={getPhotoUploadIntentParams:function(){return JP},setPhotoUploadIntentParams:function(t,e,n,a){JP={files:t,getUploadUrl:e,photoLimit:n,limitError:a}},clearPhotoUploadIntentParams:function(){JP=mt},getVideoUploadIntentParams:function(){return YP},setVideoUploadIntentParams:function(t){YP={files:t}},clearVideoUploadIntentParams:function(){YP=mt}}),uR.qn=dR.pQwEgxg||(dR.pQwEgxg=(KP=uR.ah,ZP=uR.qm,$P=uR.ee,tO=uR.a,yV.prototype={uploadPhotoInteraction:{change:function(t,e){tO.log("postingTopicForm",["status","photo"]);var n,a=e.files;a&&a.length&&(n=JSON.parse(e.dataset.model),ZP.setPhotoUploadIntentParams(a,n.getUploadUrl,n.photoLimit,n.limitError),$P.change(e.dataset.link))}},uploadVideoInteraction:{change:function(t,e){tO.log("postingTopicForm",["status","video"]);var n=e.files;n&&n.length&&(ZP.setVideoUploadIntentParams(n),$P.change(e.dataset.link))}}},KP.register("postingFormEntry",yV),gt)),uR.qo=dR.pFh77sw||(dR.pFh77sw=function(i,n){"use strict";var t,e={};Object.defineProperty(e,"__esModule",{value:!0}),e.getPkg=e.load=void 0;var a={},o=[],r={},s=mt,l="$Hash$",c=3e5,u={ru:v,uk:v,en:y,hy:y,mo:y,ro:y,de:y,uz:b,az:b,kk:b,ka:b,ky:b,tg:b,tr:b,getIndex:function(t){var e=(hR.body.parentElement||pR).getAttribute("lang");return(u[e]||v)(t)}},d=function(t,e){this.pkg=t,this.messages=e,this.parsedResources={}};d.prototype.has=function(t){return this.messages.hasOwnProperty(t)},d.prototype.getLMsg=function(t,e){if(!t)throw new Error("Не указан ключ");var n=this.messages[t];if("string"!=typeof n)return i.log("pts.miss",[this.pkg,t]),this.pkg+"."+t;if(e){var a=this.parsedResources[t];return a||(a=function(t){var e=[],n=0;for(;;){var a=function t(e,n,a){var i=_(n,a,"|[]");if(-1===i)return-1===(i=_(n,a,"]"))?(e.push(new p(n.substr(a))),n.length):(e.push(new p(n.substr(a,i-a))),i);if(a<i)return e.push(new p(n.substr(a,i-a))),i;if("["===n[i]){if(-1===(i=_(n,a=i+1,":?]")))return a--,e.push(new p(n.substr(a))),n.length;var o=n.substr(a,i-a).trim();if("]"===n[i])return e.push(new f(o)),i+1;var r=n[i],s="?"===r,l={},c=[];if("?"!==r&&":"!==r)return i=_(n,a,"]"),e.push(new p(n.substr(a-1,i))),n.length;for(;;){a=i+1;var u=[],d="";if(s){if(i=_(n,a,"="),!(a<i))return i=_(n,a,"]"),e.push(new p(n.substr(a,i))),n.length;d=n.substr(a,i-a),a=i+1}for(;(i=t(u,n,a))!==n.length&&"|"!==n[i]&&"]"!==n[i];)a===i&&i++,a=i;if(s?l[d]=k(u):c.push(k(u)),i===n.length||"]"===n[i])break}return s?e.push(new m(o,l)):e.push(new g(o,c)),i===n.length?n.length:i+1}return i}(e,t,n);if(a===t.length)break;n===a&&a++,n=a}return k(e)}(n),this.parsedResources[t]=a),a.getResource(e)}return n},d.prototype.subscribe=function(t){var e=this.pkg;r[e]||(r[e]=[]),r[e].push(t)};var h=function(t){this.children=t};h.prototype.getResource=function(t){for(var e="",n=0,a=this.children.length;n<a;n++)e+=this.children[n].getResource(t);return e};var p=function(t){this.text=t};p.prototype.getResource=function(){return t=this.text,e=hR.createElement("div"),t.split(" ").map(function(t){return e.innerText=t,e.innerHTML}).join(" ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'");var t,e};var f=function(t){this.argName=t};f.prototype.getResource=function(t){var e=t[this.argName];return e||0===e?e.toString():""};var g=function(t,e){this.argName=t,this.values=e};g.prototype.getResource=function(t){var e=Number(t[this.argName]),n=e;"Plural"===this.argName.substr(-"Plural".length)&&(n=u.getIndex(e));var a=this.values[n];return a?a.getResource(t):""};var m=function(t,e){this.argName=t,this.values=e};function v(t){return(t=Math.abs(t))%10==1&&t%100!=11?0:2<=t%10&&t%10<=4&&(t%100<10||20<=t%100)?1:2}function y(t){return 1===t?0:1}function b(){return 0}function C(t){return a[t]}function S(t,e){return a[t]=new d(t,e),function(t){for(var e=r[t]||[],n=e.length;n--;)e[n]()}(t),C(t)}function k(t){return 0===t.length?new p(""):1===t.length?t[0]:new h(t)}function _(t,e,n){for(var a=e,i=t.length;a<i;a++)for(var o=0;o<n.length;o++)if(n[o]===t[a])return a;return-1}function w(){(0,n.invoke)("pts/update",{info:function(){for(var t=[],e=o.length,n=0;n<e;n+=1){var a=o[n],i=C(a);t.push({pkg:a,hash:i&&i.messages[l]||"0"})}return t}()}).then(function(t){for(var e=Object.keys(t),n=e.length,a=0;a<n;a+=1){var i=e[a];S(i,t[i])}}),s=mt,I()}function T(t){t&&(-1===o.indexOf(t)&&o.push(t),I())}function I(){!s&&0<c&&(s=gt.setTimeout(w,c))}function E(e){return Promise.resolve().then(function(){if(t=e,!a.hasOwnProperty(t))return(0,n.invoke)("pts/get",{pkg:e}).then(function(t){S(e,t)});var t}).then(function(){return C(e)})}function A(t){return T(t),C(t)}if(m.prototype.getResource=function(t){var e=t[this.argName],n=this.values[e];return n?n.getResource(t):""},e.load=E,e.getPkg=A,void 0!==gt){gt.l10n={getPkg:A,load:E};var x=null===(t=gt.inline_resources)||void 0===t?void 0:t.pts;if(x!==mt){for(var P in x)x.hasOwnProperty(P)&&(S(P,x[P]),T(P));gt.inline_resources.pts={}}}return e}(uR.a,uR.bn)||gt),uR.qp=dR.pFbxXLA||(dR.pFbxXLA=function(n){"use strict";var t,e={};Object.defineProperty(e,"__esModule",{value:!0}),e.subscribe=e.getCfg=e.load=void 0;var o="$Hash$",r={},s=[],a={},i=mt,l=6e4;function c(t){return r[t].data}function u(t,e){return r[t]={data:e.data,hash:e[o]},function(t){for(var e=a[t]||[],n=e.length;n--;)e[n]()}(t),c(t)}function d(){(0,n.invoke)("pms/update",{info:function(){for(var t=[],e=s.length,n=0;n<e;n+=1){var a=s[n],i=r[a];t.push({alias:a,hash:i[o]||"0"})}return t}()}).then(function(t){for(var e=Object.keys(t),n=e.length,a=0;a<n;a+=1){var i=e[a];u(i,t[i])}}),i=mt,p()}function h(t){t&&(-1===s.indexOf(t)&&s.push(t),p())}function p(){!i&&0<l&&(i=gt.setTimeout(d,l))}function f(e){return t=e,r.hasOwnProperty(t)?Promise.resolve(c(e)):(0,n.invoke)("pms/get",{name:e}).then(function(t){return u(e,t)});var t}function g(t){return h(t),c(t)}function m(t,e){a[t]||(a[t]=[]),a[t].push(e)}if(e.load=f,e.getCfg=g,e.subscribe=m,void 0!==gt){gt.cfgStore={getCfg:g,load:f,subscribe:m};var v=null===(t=gt.inline_resources)||void 0===t?void 0:t.pms;if(v!==mt){for(var y in v)v.hasOwnProperty(y)&&(u(y,v[y]),h(y));gt.inline_resources.pms={}}}return e}(uR.bn)||gt),uR.qq=dR.l6I2yuA||(dR.l6I2yuA=(eO=uR.d,nO=uR.qo,aO=uR.i,{init:function(){eO.dailyphoto.pts={getLMsg:function(t,e){return t}}},getLocale:function(){var e=aO.start();return(iO=iO||nO.load("dailyphoto.client")).then(function(t){eO.dailyphoto.pts=t,e.resolve()}).catch(function(){iO=mt,e.reject()}),e}})),uR.qr=dR.uwcSq6w||(dR.uwcSq6w=(oO=uR.d,rO=uR.cw,sO=uR.bb,lO=uR.o,cO=uR.n,{init:function(){oO.dailyphoto.parseJSONCorrected=bV,oO.dailyphoto.debounce=function(t,e){return rO(e,t)},oO.dailyphoto.throttle=function(t,e){return sO(e,t)},oO.dailyphoto.parent=function(t,e){return lO.findParent(t,function(t){return cO.hasClass(t,e)})}},parseJSONCorrected:bV})),uR.qs=dR.cAGk00A||(dR.cAGk00A=(uO=uR.qr,{get:function(t){var e;if(dO||(e=hR.getElementById("dailyphoto-config"))&&(dO=uO.parseJSONCorrected(e.innerHTML)),dO)return!t||t(dO)}})),uR.qt=dR.hQEGLLQ||(dR.hQEGLLQ=(hO=uR.d,pO=uR.e,fO=uR.i,gO=uR.fh,mO=uR.b,vO=uR.z,yO=uR.qq,uR.qs,bO="data-deactivate",CO="deactivate",SO=hO.loader,kO=[],{create:function(t){var i=t.getAttribute("data-module");kO.push({module:i,element:t}),CV(function(){SO.use(i,function(){var t,a=(t=i,hO.dailyphoto[gO.camelCase(t)]);pO(kO,function(t){if(!t.hookInstance&&t.module===i)try{var e=t.element,n=e.getAttribute("data-activate")||"activate";t.hookInstance="function"==typeof a?new a:a,t.hookInstance[n](e)}catch(t){mO.info("dailyphoto","HookFactory activate"),mO.send({error:t})}})})})},deactivateRoot:function(e){e&&SV(function(t){return e.contains(t.element)})},deactivateAll:function(){SV(),kO.length=0},getDailyPhotoDeps:CV})),uR.qu=dR.mRb8sUw||(dR.mRb8sUw=(_O=uR.ck,{init:function(){wO=hR.getElementById("dailyphoto-menu")},show:function(t,e,n){var a=t.getBoundingClientRect(),i=wO.style;i.top=a.top+"px",i.left=a.left+"px",i.width=a.width+"px",i.height=a.height+"px",i.display="block",_O(e),TO=t},hide:function(){var t,e=wO.style;e.display="none",e.top=null,e.left=null,e.width=null,e.height=null,TO&&((t=hR.createEvent("CustomEvent")).initCustomEvent("shortcut-menu-hide",!0,!0,mt),TO.dispatchEvent(t))}})),uR.qv=dR.dgEc1Cg||(dR.dgEc1Cg=(IO=uR.d,EO=uR.ck,AO=uR.bm,xO=uR.ah,PO=uR.fd,OO=uR.p,LO=uR.qu,RO={},wV.prototype={launch:{tap:function(t,e){_V(e.getAttribute("data-url"),e.getAttribute("data-layer-id"))}},toast:{tap:function(t,e){var n=e.getAttribute("data-url");AO.request(n,"POST").then(function(t){EO(t.response),LO.hide()}).send()}}},xO.register("dailyphotoDialog",wV),{init:function(){IO.dailyphoto.Layers={subscribe:function(t,e){RO[t]||(RO[t]=OO.create()),RO[t].attach(e)},unsubscribe:function(t,e){var n=RO[t];n&&n.detach(e)}},IO.dailyphoto.dialog=_V}})),uR.qw=dR.hT4hq6A||(dR.hT4hq6A=(NO=uR.eo,BO=uR.qt,DO=uR.d,MO=uR.dh,jO=uR.g,FO=uR.bf,HO="dailyphoto",UO="owner",VO="system",QO="contest",WO="rating",zO="3_2",XO="2",GO="4_",{init:function(){DO.dailyphoto.historyManager={pushState:function(t){NO.accountState({url:t},"pushState")},replaceState:function(t){NO.accountState({url:t},"replaceState")}},NO.statePopping.attach(TV),MO.register(IV)}})),uR.qx=dR.UEjqV2A||(dR.UEjqV2A=(RV.UUID="xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",RV.UUID_VERSIONED="xxxxxxxx-xxxx-vxxx-xxxx-xxxxxxxxxxxx",RV.prototype={constructor:RV,withPattern:function(t){return this.pattern=t,this},createToken:function(n){return this.token=this.pattern.replace(/[xv]/gi,function(t,e){return("x"===t?16*Math.random()|0:n!==mt?255&n:3&e|8).toString(16)}),this},getNewToken:function(t){return this.createToken(t),this.getToken()},getToken:function(){return this.token}},RV)),uR.qy=dR.iI5FjQ||(dR.iI5FjQ=(JO=uR.d,YO=uR.dl,KO=uR.b,ZO=uR.qs,$O=uR.qu,tL=uR.bn,eL=uR.qx,nL=(new eL).withPattern(eL.UUID_VERSIONED),aL={generate:function(){return nL.getNewToken(4)}},{init:function(){JO.dailyphoto.import=function(e){switch(e){case"webapi":return Promise.resolve(tL);case"dailyphoto-layer":return new Promise(function(t){JO.loader.use(e,function(){t(JO.dailyphoto.dailyphotoLayer)})});case"dailyphoto-model":return new Promise(function(t){JO.loader.use(e,function(){t(JO.dailyphoto.dailyphotoModel)})});case"OK/ShortcutMenuAdapter":return Promise.resolve($O);case"OK/NonBlockingTip":return Promise.resolve({create:YO});case"OK/uuid":return Promise.resolve(aL)}},JO.dailyphoto.getImportUrl=function(e){try{return ZO.get(function(t){return t.paths[e]})}catch(t){KO.info("dailyphoto","getImportUrl fail"),KO.send({error:t})}}}})),uR.qz=dR.lxgb3wg||(dR.lxgb3wg=(iL=uR.d,oL=uR.a,{init:function(){iL.dailyphoto.logger={success:function(t,e,n,a){oL.log(t,NV(e,n,a))},duration:function(t,e,n,a,i){oL.logTimed(t,e,NV(n,a,i))},clob:function(t,e,n,a){oL.log("js",["jserror",t,a],e)}}}})),uR.ra=dR.uyagGkw||(dR.uyagGkw=(rL=uR.d,sL=uR.bm,lL=uR.e,cL=uR.bx,uL=uR.ee,dL=uR.ck,hL=uR.qt,{init:function(){rL.dailyphoto.vanilla={ajax:function(t){return sL.request(t.url,"POST",t.data).send()},updateBlockModelCallback:function(t){var e=t.response,n=cL.createDomTree(e).querySelectorAll('[action="replace"][target-id]');lL(n,function(t){var e=t.getAttribute("target-id");e&&hL.deactivateRoot(hR.getElementById(e))}),dL(e)}},rL.dailyphoto.navigateOnUrlFromJS=function(t){uL.change(t)}}})),uR.rb=dR.vEXAqLA||(dR.vEXAqLA=(pL=uR.d,fL=uR.cq,gL=uR.r,yL=!(vL="dailyPhotoAutoplayObserver"),bL={registered:function(){},track:function(t){mL&&mL(t)}},fL.addListener(bL),{init:function(){pL.dailyphoto.viewportTracker={add:BV,remove:DV}}})),uR.rc=dR.lMhNaeg||(dR.lMhNaeg=(CL=uR.d,SL=uR.s,kL=uR.k,_L=uR.qt,wL=uR.qs,TL=uR.qv,IL=uR.qw,EL=uR.qy,AL=uR.qq,xL=uR.qz,PL=uR.qu,OL=uR.ra,LL=uR.qr,RL=uR.rb,kL.domLoaded.then(function(){wL.get()&&(CL.dailyphoto=CL.dailyphoto||{},TL.init(),EL.init(),IL.init(),AL.init(),xL.init(),PL.init(),OL.init(),LL.init(),RL.init())}),SL.create({name:"dailyPhotoLauncher",update:function(t){_L.create(t.target)},discard:function(){_L.deactivateAll()}}),gt)),uR.rd=dR.aiMxV2w||(dR.aiMxV2w=(NL=uR.ew,uR.s,BL=uR.d,DL=uR.cq,ML=uR.r,jL=uR.cw,VL=ML.rendering,QL=jL(function(t){jV(t,function(t){var e=t.target;UL&&UL!==e&&(HL&&HL.pause&&HL.pause(),DL.unobserve(UL)),UL=e},function(t){var e,n,a=t.videoTag,i=t.target;a?a.play():(e=i.querySelector(".video-main-tag"),(n=JSON.parse(e.getAttribute("data-video")||{})).initiallyMuted=!0,t.videoTag=NL.embed(e,n,function(){DL.unobserve(i)}),HL=t.videoTag)},function(t){var e=t.videoTag;e&&e.pause&&e.pause()})},1e3),WL=jL(function(t){jV(t,function(t){t.target.querySelector(".video-main-tag")||DL.unobserve(t.target)},function(t){var e,n=t.target.querySelector(".video-main-tag");FL!==n?(e=t.target.getAttribute("data-ytdata"),NL.runYTplayer(n,e,!0,{0:function(){n===FL&&(DL.unobserve(qL),qL=FL=mt)}}),qL&&DL.unobserve(qL),FL=n,qL=t.target):gt.playYTPlayer&&gt.playYTPlayer()},function(t){var e=t.target.querySelector(".video-main-tag");FL!==e||gt.pauseYTPlayer&&gt.pauseYTPlayer()})},1e3),BL.autoplayVideo=FV(QL),BL.autoplayYTVideo=FV(WL),BL.autoplayGif=FV(function(t){jV(t,null,function(t){var e,n=t.videoTag;n?n.play&&n.play():(e=t.target,t.videoTag=BL.gifPlayer.touch(e,!1).element)},function(t){t.videoTag&&t.videoTag.pause&&t.videoTag.pause()})}),gt)),uR.re=dR.mIXDwxQ||(dR.mIXDwxQ=(zL=uR.ah,XL=uR.n,GL=uR.es,JL=uR.dq,YL="data-viewed-promo-code",qV.prototype={promoCode:{tap:function(t,e){var n=this.element.getAttribute(YL),a=e.getAttribute("data-toast");JL(n,a)}},closer:{tap:function(){XL.addClass(this.element,"hidden");var t=this.element.getAttribute(YL);GL.run("mall.promo-code.banner.close",{code:t})}}},qV.isInstant=!0,zL.register("mallPromoCodeBanner",qV),gt)),uR.rf=dR.hac67ag||(dR.hac67ag=(KL=uR.ah,ZL=uR.n,$L=uR.bn,tR=uR.r,HV.isInstant=!0,KL.register("headSlide",HV),gt)),uR.rg=dR.ppnbOJw||(dR.ppnbOJw=function(t,i,o,r){"use strict";var e={};Object.defineProperty(e,"__esModule",{value:!0});function n(t,e){var n,a=this;this.model=t,this.profileCopyAndToast={tap:function(){i(a.profileLink,a.toastText),o.close.trigger()}},this.shareNative={tap:function(){navigator.share({url:a.profileLink})}},this.profileLink=e.dataset.profileLink,this.toastText=e.dataset.toastText,"share"in navigator&&((n=e.querySelector(".profile-share-outside_li.hidden"))&&r.removeClass(n,"hidden"))}return n.isInstant=!0,t.register("profileShareOutside",n),e}(uR.ah,uR.dq,uR.fz,uR.n)||gt),uR.rh=dR.tBiLDAw||(dR.tBiLDAw=function(t,a,i,o){"use strict";var e={};Object.defineProperty(e,"__esModule",{value:!0});function n(t,e){this._model=t,this.root=e,this.tagClick={tap:function(t,e){t.preventDefault();var n=e.href;a.request(o.WEB_API_PREFIX+"/hobby/logMenuTagClick","POST").dataJson({parameters:{slug:e.dataset.slug}}).anyway(function(){i.change(n)}).send()}}}return n.isInstant=!0,t.register("tagLogger",n),e}(uR.ah,uR.bm,uR.ee,uR.bn)||gt),uR.ri=dR.l9hvufg||(dR.l9hvufg=function(o,t){"use strict";var e={};function r(){for(var t=arguments,e=[],n=arguments.length;n--;)e[n]=arguments[n];for(var a=[],i=0;i<arguments.length;i++)t[i]!==mt&&a.push(t[i]);return a}Object.defineProperty(e,"__esModule",{value:!0}),e.logging=void 0;var n={logger:{success:function(t,e,n,a){o.log(t,r(e,n,a))},duration:function(t,e,n,a,i){o.logTimed(t,e,r(n,a,i))},error:function(t,e,n,a){o.log("js",r("jserror",t,e,n,a))},clob:function(t,e,n,a){o.log("js",["jserror",t,n,a],e)}},info:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];gt.DEVMODE&&gt.console}};return e.logging=n,t.react||(t.react={}),t.react.logging=n,e}(uR.a,uR.d)||gt),uR.rj=dR.lFg1bLw||(dR.lFg1bLw=(eR=uR.d,nR=uR.s,aR=uR.l,iR=uR.eo,oR=uR.ri,rR=uR.qo,cR=[],nR.create({name:"flow",init:function(t){lR=aR.loadCss(t.styleSrc),sR=rR.load("flow.client")},update:function(t){eR.loader.use(t.scriptSrc,QV(t)),iR.statePopping.attach(VV)},discard:function(){var t;cR=[],iR.statePopping.detach(VV),(t=hR.getElementById("content").querySelector(".js-loader"))&&t.classList.remove("hidden")}}),gt)),uR.rk=dR.hnr2xiw||(dR.hnr2xiw=function(t){"use strict";var e={};Object.defineProperty(e,"__esModule",{value:!0});function n(t,e){this.model=t,this.root=e,this.otherReasons=e.querySelector(".other-reason-toggle")}var i="__checked";return n.prototype.toggleView={change:function(t,e){var n=e.classList.contains("other-reason-toggle_input"),a=this.otherReasons.classList;n&&!a.contains(i)?a.add(i):n||a.contains(i)&&a.remove(i)}},n.isInstant=!0,t.register("hideReasons",n),e}(uR.ah)||gt),uR.rl=dR.rB2ycqQ||(dR.rB2ycqQ=function(e,t){"use strict";var n={};Object.defineProperty(n,"__esModule",{value:!0}),n.RoseWindChart=void 0;function a(t,i){this._model=t,this._root=i,(0,e.use)("chart-lib",function(){var t=JSON.parse(i.getAttribute("data-labels")),e=JSON.parse(i.getAttribute("data-numbers")),n={type:"radar",data:{labels:t,datasets:[{data:e,fill:!0,backgroundColor:"rgba(255, 136, 0, 0.12)",borderColor:"rgb(255, 136, 0)",borderWidth:2,pointRadius:4,pointBackgroundColor:"rgb(255, 136, 0)",pointBorderColor:"#fff",pointHitRadius:24}]},options:{responsive:!1,elements:{line:{borderWidth:3}},scales:{r:{suggestedMin:0,suggestedMax:100,startAngle:-45,pointLabels:{color:"#999999",font:{family:"Arial",size:12,lineHeight:1.5}},ticks:{display:!1,maxTicksLimit:3},angleLines:{color:"#F0F0F0",lineWidth:2},grid:{color:"#F0F0F0",circular:!0,lineWidth:2}}},plugins:{legend:{display:!1},tooltip:{backgroundColor:"#FFFFFF",bodyColor:"#666666",borderColor:"rgba(0, 0, 0, 0.04)",borderWidth:1,borderRadius:4,caretSize:0,padding:8,position:"average",usePointStyle:!0,boxWidth:0,boxHeight:0,xAlign:"center",yAlign:"bottom",callbacks:{title:function(t){return""},label:function(t){var e=t.label;return e+=" "+t.raw+"%"}}}}}},a=i.querySelector(".js-chart-rating").getContext("2d");new gt.Chart(a,n)})}return(n.RoseWindChart=a).isInstant=!0,(0,t.register)("roseWindChart",a),n}(uR.l,uR.ah)||gt),uR.rm=dR.cSWDd5w||(dR.cSWDd5w=function(t,e){"use strict";var n={};Object.defineProperty(n,"__esModule",{value:!0});var a=(0,t.create)();return e.communityAddBus=a,n}(uR.p,uR.d)||gt),uR.rn=dR.rxoaWdw||(dR.rxoaWdw=function(){"use strict";var t={};return Object.defineProperty(t,"__esModule",{value:!0}),t.renderComponent=t.configureRactive=void 0,t.configureRactive=function(){gt.Ractive.DEBUG_PROMISES=gt.Ractive.DEBUG=Boolean(gt.DEVMODE)},t.renderComponent=function(t,e,n){var a;return new(a=t,gt.Ractive.extend({template:"#"+a+"-template"}))(Object.assign({target:"#"+t,data:e},n))},t}()||gt),uR.ro=dR.pK7clYg||(dR.pK7clYg=function(t,i,o){"use strict";var e={};Object.defineProperty(e,"__esModule",{value:!0});function r(t,e,n){var a=this;void 0===t&&(t={}),void 0===e&&(e=function(){}),this.config=t,this.onLoaded=e,this.loading=!1,this.loaded=!1,this.check=function(){return a.enabled},this.enabled=t.enabled||!0,this.onLoaded=e||function(){},this.check=n||this.check}var s=gt.OK.loader;return(0,t.create)({name:"postponedJs",update:function(t){var e=(t=t||{}).deps||{},n={"ractive-js":new r(e["ractive-js"],o.configureRactive,function(){return!("Ractive"in gt)}),"campaigns-js":new r(e["campaigns-js"])};for(var a in e)n[a]=new r(e[a]);i.fullyLoaded.then(function(){for(var t in n)!function(t){var e=n[t];e.loaded||e.loading||!e.check()||(s.use(t,e.onLoaded).then(function(){e.loaded=!0,e.loading=!1}),e.loading=!0)}(t)})}}),e}(uR.s,uR.k,uR.rn,uR.fe)||gt),dR.cEr9SYg||(dR.cEr9SYg=(uR.bj,uR.br,uR.bt,uR.aa,uR.bu,uR.bp,uR.bv,uR.bw,uR.ck,uR.cl,uR.cr,uR.dt,uR.du,uR.dy,uR.aj,uR.ef,uR.ej,uR.ek,uR.el,uR.en,uR.ep,uR.ew,uR.fd,uR.fi,uR.fn,uR.fp,uR.fs,uR.ft,uR.gb,uR.gc,uR.gg,uR.gh,uR.fw,uR.gj,uR.ei,uR.gk,uR.gq,uR.gn,uR.gr,uR.go,uR.gs,uR.gt,uR.gu,uR.gv,uR.gw,uR.gx,uR.gy,uR.gz,uR.ha,uR.hb,uR.hd,uR.hf,uR.hg,uR.hn,uR.ho,uR.hp,uR.hq,uR.hs,uR.hu,uR.hv,uR.hw,uR.hz,uR.ia,uR.ic,uR.id,uR.ie,uR.ii,uR.ij,uR.il,uR.iy,uR.iz,uR.jf,uR.ji,uR.jq,uR.jr,uR.js,uR.ju,uR.jw,uR.kk,uR.kl,uR.km,uR.kn,uR.kq,uR.ku,uR.kv,uR.kw,uR.ky,uR.kz,uR.la,uR.lb,uR.lf,uR.lg,uR.lj,uR.lk,uR.lq,uR.lr,uR.lt,uR.lu,uR.lz,uR.ma,uR.mb,uR.mc,uR.md,uR.mg,uR.mh,uR.ml,uR.mm,uR.mn,uR.mp,uR.mq,uR.mr,uR.ms,uR.mt,uR.mu,uR.mv,uR.mx,uR.mz,uR.na,uR.nb,uR.nc,uR.ng,uR.ce,uR.nh,uR.ni,uR.nj,uR.nv,uR.nx,uR.ny,uR.nz,uR.oa,uR.ob,uR.oc,uR.od,uR.ol,uR.on,uR.oo,uR.op,uR.oq,uR.os,uR.jh,uR.ot,uR.or,uR.ov,uR.ow,uR.ox,uR.oy,uR.oz,uR.pa,uR.pb,uR.pc,uR.pd,uR.pf,uR.pg,uR.ph,uR.pi,uR.pj,uR.pk,uR.pm,uR.pq,uR.pr,uR.de,uR.ps,uR.qd,uR.qe,uR.qg,uR.qh,uR.qi,uR.qk,uR.ql,uR.qn,uR.bn,uR.qo,uR.qp,uR.rc,uR.rd,uR.re,uR.rf,uR.rg,uR.rh,uR.rj,uR.rk,uR.di,uR.rl,uR.rm,uR.ro,gt))}(this);